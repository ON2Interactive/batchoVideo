function n5(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in n)){const l=Object.getOwnPropertyDescriptor(i,s);l&&Object.defineProperty(n,s,l.get?l:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Ly(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vg={exports:{}},ch={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v;function i5(){if($v)return ch;$v=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,l){var c=null;if(l!==void 0&&(c=""+l),s.key!==void 0&&(c=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:i,key:c,ref:s!==void 0?s:null,props:l}}return ch.Fragment=e,ch.jsx=t,ch.jsxs=t,ch}var e1;function a5(){return e1||(e1=1,vg.exports=i5()),vg.exports}var T=a5(),_g={exports:{}},st={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t1;function s5(){if(t1)return st;t1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),x=Symbol.iterator;function R(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,D={};function I(q,W,be){this.props=q,this.context=W,this.refs=D,this.updater=be||N}I.prototype.isReactComponent={},I.prototype.setState=function(q,W){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,W,"setState")},I.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function L(){}L.prototype=I.prototype;function U(q,W,be){this.props=q,this.context=W,this.refs=D,this.updater=be||N}var G=U.prototype=new L;G.constructor=U,z(G,I.prototype),G.isPureReactComponent=!0;var P=Array.isArray;function K(){}var $={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function B(q,W,be){var ze=be.ref;return{$$typeof:n,type:q,key:W,ref:ze!==void 0?ze:null,props:be}}function ue(q,W){return B(q.type,W,q.props)}function xe(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function ae(q){var W={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(be){return W[be]})}var Me=/\/+/g;function De(q,W){return typeof q=="object"&&q!==null&&q.key!=null?ae(""+q.key):W.toString(36)}function we(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(K,K):(q.status="pending",q.then(function(W){q.status==="pending"&&(q.status="fulfilled",q.value=W)},function(W){q.status==="pending"&&(q.status="rejected",q.reason=W)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Y(q,W,be,ze,Ze){var et=typeof q;(et==="undefined"||et==="boolean")&&(q=null);var xt=!1;if(q===null)xt=!0;else switch(et){case"bigint":case"string":case"number":xt=!0;break;case"object":switch(q.$$typeof){case n:case e:xt=!0;break;case v:return xt=q._init,Y(xt(q._payload),W,be,ze,Ze)}}if(xt)return Ze=Ze(q),xt=ze===""?"."+De(q,0):ze,P(Ze)?(be="",xt!=null&&(be=xt.replace(Me,"$&/")+"/"),Y(Ze,W,be,"",function(Ta){return Ta})):Ze!=null&&(xe(Ze)&&(Ze=ue(Ze,be+(Ze.key==null||q&&q.key===Ze.key?"":(""+Ze.key).replace(Me,"$&/")+"/")+xt)),W.push(Ze)),1;xt=0;var Ht=ze===""?".":ze+":";if(P(q))for(var gt=0;gt<q.length;gt++)ze=q[gt],et=Ht+De(ze,gt),xt+=Y(ze,W,be,et,Ze);else if(gt=R(q),typeof gt=="function")for(q=gt.call(q),gt=0;!(ze=q.next()).done;)ze=ze.value,et=Ht+De(ze,gt++),xt+=Y(ze,W,be,et,Ze);else if(et==="object"){if(typeof q.then=="function")return Y(we(q),W,be,ze,Ze);throw W=String(q),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return xt}function he(q,W,be){if(q==null)return q;var ze=[],Ze=0;return Y(q,ze,"","",function(et){return W.call(be,et,Ze++)}),ze}function fe(q){if(q._status===-1){var W=q._result;W=W(),W.then(function(be){(q._status===0||q._status===-1)&&(q._status=1,q._result=be)},function(be){(q._status===0||q._status===-1)&&(q._status=2,q._result=be)}),q._status===-1&&(q._status=0,q._result=W)}if(q._status===1)return q._result.default;throw q._result}var Ne=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Le={map:he,forEach:function(q,W,be){he(q,function(){W.apply(this,arguments)},be)},count:function(q){var W=0;return he(q,function(){W++}),W},toArray:function(q){return he(q,function(W){return W})||[]},only:function(q){if(!xe(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return st.Activity=E,st.Children=Le,st.Component=I,st.Fragment=t,st.Profiler=s,st.PureComponent=U,st.StrictMode=i,st.Suspense=h,st.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,st.__COMPILER_RUNTIME={__proto__:null,c:function(q){return $.H.useMemoCache(q)}},st.cache=function(q){return function(){return q.apply(null,arguments)}},st.cacheSignal=function(){return null},st.cloneElement=function(q,W,be){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ze=z({},q.props),Ze=q.key;if(W!=null)for(et in W.key!==void 0&&(Ze=""+W.key),W)!J.call(W,et)||et==="key"||et==="__self"||et==="__source"||et==="ref"&&W.ref===void 0||(ze[et]=W[et]);var et=arguments.length-2;if(et===1)ze.children=be;else if(1<et){for(var xt=Array(et),Ht=0;Ht<et;Ht++)xt[Ht]=arguments[Ht+2];ze.children=xt}return B(q.type,Ze,ze)},st.createContext=function(q){return q={$$typeof:c,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:l,_context:q},q},st.createElement=function(q,W,be){var ze,Ze={},et=null;if(W!=null)for(ze in W.key!==void 0&&(et=""+W.key),W)J.call(W,ze)&&ze!=="key"&&ze!=="__self"&&ze!=="__source"&&(Ze[ze]=W[ze]);var xt=arguments.length-2;if(xt===1)Ze.children=be;else if(1<xt){for(var Ht=Array(xt),gt=0;gt<xt;gt++)Ht[gt]=arguments[gt+2];Ze.children=Ht}if(q&&q.defaultProps)for(ze in xt=q.defaultProps,xt)Ze[ze]===void 0&&(Ze[ze]=xt[ze]);return B(q,et,Ze)},st.createRef=function(){return{current:null}},st.forwardRef=function(q){return{$$typeof:f,render:q}},st.isValidElement=xe,st.lazy=function(q){return{$$typeof:v,_payload:{_status:-1,_result:q},_init:fe}},st.memo=function(q,W){return{$$typeof:m,type:q,compare:W===void 0?null:W}},st.startTransition=function(q){var W=$.T,be={};$.T=be;try{var ze=q(),Ze=$.S;Ze!==null&&Ze(be,ze),typeof ze=="object"&&ze!==null&&typeof ze.then=="function"&&ze.then(K,Ne)}catch(et){Ne(et)}finally{W!==null&&be.types!==null&&(W.types=be.types),$.T=W}},st.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},st.use=function(q){return $.H.use(q)},st.useActionState=function(q,W,be){return $.H.useActionState(q,W,be)},st.useCallback=function(q,W){return $.H.useCallback(q,W)},st.useContext=function(q){return $.H.useContext(q)},st.useDebugValue=function(){},st.useDeferredValue=function(q,W){return $.H.useDeferredValue(q,W)},st.useEffect=function(q,W){return $.H.useEffect(q,W)},st.useEffectEvent=function(q){return $.H.useEffectEvent(q)},st.useId=function(){return $.H.useId()},st.useImperativeHandle=function(q,W,be){return $.H.useImperativeHandle(q,W,be)},st.useInsertionEffect=function(q,W){return $.H.useInsertionEffect(q,W)},st.useLayoutEffect=function(q,W){return $.H.useLayoutEffect(q,W)},st.useMemo=function(q,W){return $.H.useMemo(q,W)},st.useOptimistic=function(q,W){return $.H.useOptimistic(q,W)},st.useReducer=function(q,W,be){return $.H.useReducer(q,W,be)},st.useRef=function(q){return $.H.useRef(q)},st.useState=function(q){return $.H.useState(q)},st.useSyncExternalStore=function(q,W,be){return $.H.useSyncExternalStore(q,W,be)},st.useTransition=function(){return $.H.useTransition()},st.version="19.2.4",st}var n1;function Sm(){return n1||(n1=1,_g.exports=s5()),_g.exports}var ee=Sm();const Dn=Ly(ee),o5=n5({__proto__:null,default:Dn},[ee]);var Sg={exports:{}},dh={},bg={exports:{}},xg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function l5(){return i1||(i1=1,(function(n){function e(Y,he){var fe=Y.length;Y.push(he);e:for(;0<fe;){var Ne=fe-1>>>1,Le=Y[Ne];if(0<s(Le,he))Y[Ne]=he,Y[fe]=Le,fe=Ne;else break e}}function t(Y){return Y.length===0?null:Y[0]}function i(Y){if(Y.length===0)return null;var he=Y[0],fe=Y.pop();if(fe!==he){Y[0]=fe;e:for(var Ne=0,Le=Y.length,q=Le>>>1;Ne<q;){var W=2*(Ne+1)-1,be=Y[W],ze=W+1,Ze=Y[ze];if(0>s(be,fe))ze<Le&&0>s(Ze,be)?(Y[Ne]=Ze,Y[ze]=fe,Ne=ze):(Y[Ne]=be,Y[W]=fe,Ne=W);else if(ze<Le&&0>s(Ze,fe))Y[Ne]=Ze,Y[ze]=fe,Ne=ze;else break e}}return he}function s(Y,he){var fe=Y.sortIndex-he.sortIndex;return fe!==0?fe:Y.id-he.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var h=[],m=[],v=1,E=null,x=3,R=!1,N=!1,z=!1,D=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function G(Y){for(var he=t(m);he!==null;){if(he.callback===null)i(m);else if(he.startTime<=Y)i(m),he.sortIndex=he.expirationTime,e(h,he);else break;he=t(m)}}function P(Y){if(z=!1,G(Y),!N)if(t(h)!==null)N=!0,K||(K=!0,ae());else{var he=t(m);he!==null&&we(P,he.startTime-Y)}}var K=!1,$=-1,J=5,B=-1;function ue(){return D?!0:!(n.unstable_now()-B<J)}function xe(){if(D=!1,K){var Y=n.unstable_now();B=Y;var he=!0;try{e:{N=!1,z&&(z=!1,L($),$=-1),R=!0;var fe=x;try{t:{for(G(Y),E=t(h);E!==null&&!(E.expirationTime>Y&&ue());){var Ne=E.callback;if(typeof Ne=="function"){E.callback=null,x=E.priorityLevel;var Le=Ne(E.expirationTime<=Y);if(Y=n.unstable_now(),typeof Le=="function"){E.callback=Le,G(Y),he=!0;break t}E===t(h)&&i(h),G(Y)}else i(h);E=t(h)}if(E!==null)he=!0;else{var q=t(m);q!==null&&we(P,q.startTime-Y),he=!1}}break e}finally{E=null,x=fe,R=!1}he=void 0}}finally{he?ae():K=!1}}}var ae;if(typeof U=="function")ae=function(){U(xe)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,De=Me.port2;Me.port1.onmessage=xe,ae=function(){De.postMessage(null)}}else ae=function(){I(xe,0)};function we(Y,he){$=I(function(){Y(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Y){Y.callback=null},n.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Y?Math.floor(1e3/Y):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(Y){switch(x){case 1:case 2:case 3:var he=3;break;default:he=x}var fe=x;x=he;try{return Y()}finally{x=fe}},n.unstable_requestPaint=function(){D=!0},n.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var fe=x;x=Y;try{return he()}finally{x=fe}},n.unstable_scheduleCallback=function(Y,he,fe){var Ne=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?Ne+fe:Ne):fe=Ne,Y){case 1:var Le=-1;break;case 2:Le=250;break;case 5:Le=1073741823;break;case 4:Le=1e4;break;default:Le=5e3}return Le=fe+Le,Y={id:v++,callback:he,priorityLevel:Y,startTime:fe,expirationTime:Le,sortIndex:-1},fe>Ne?(Y.sortIndex=fe,e(m,Y),t(h)===null&&Y===t(m)&&(z?(L($),$=-1):z=!0,we(P,fe-Ne))):(Y.sortIndex=Le,e(h,Y),N||R||(N=!0,K||(K=!0,ae()))),Y},n.unstable_shouldYield=ue,n.unstable_wrapCallback=function(Y){var he=x;return function(){var fe=x;x=he;try{return Y.apply(this,arguments)}finally{x=fe}}}})(xg)),xg}var a1;function Gy(){return a1||(a1=1,bg.exports=l5()),bg.exports}var Eg={exports:{}},Gi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function r5(){if(s1)return Gi;s1=1;var n=Sm();function e(h){var m="https://react.dev/errors/"+h;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+h+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(h,m,v){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:h,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(h,m){if(h==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Gi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Gi.createPortal=function(h,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(h,m,null,v)},Gi.flushSync=function(h){var m=c.T,v=i.p;try{if(c.T=null,i.p=2,h)return h()}finally{c.T=m,i.p=v,i.d.f()}},Gi.preconnect=function(h,m){typeof h=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,i.d.C(h,m))},Gi.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},Gi.preinit=function(h,m){if(typeof h=="string"&&m&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?i.d.S(h,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:R}):v==="script"&&i.d.X(h,{crossOrigin:E,integrity:x,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Gi.preinitModule=function(h,m){if(typeof h=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=f(m.as,m.crossOrigin);i.d.M(h,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&i.d.M(h)},Gi.preload=function(h,m){if(typeof h=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,E=f(v,m.crossOrigin);i.d.L(h,v,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Gi.preloadModule=function(h,m){if(typeof h=="string")if(m){var v=f(m.as,m.crossOrigin);i.d.m(h,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else i.d.m(h)},Gi.requestFormReset=function(h){i.d.r(h)},Gi.unstable_batchedUpdates=function(h,m){return h(m)},Gi.useFormState=function(h,m,v){return c.H.useFormState(h,m,v)},Gi.useFormStatus=function(){return c.H.useHostTransitionStatus()},Gi.version="19.2.4",Gi}var o1;function rS(){if(o1)return Eg.exports;o1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Eg.exports=r5(),Eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l1;function u5(){if(l1)return dh;l1=1;var n=Gy(),e=Sm(),t=rS();function i(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function f(a){if(a.tag===31){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function h(a){if(l(a)!==a)throw Error(i(188))}function m(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(i(188));return o!==a?null:a}for(var d=a,p=o;;){var b=d.return;if(b===null)break;var C=b.alternate;if(C===null){if(p=b.return,p!==null){d=p;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===d)return h(b),a;if(C===p)return h(b),o;C=C.sibling}throw Error(i(188))}if(d.return!==p.return)d=b,p=C;else{for(var M=!1,k=b.child;k;){if(k===d){M=!0,d=b,p=C;break}if(k===p){M=!0,p=b,d=C;break}k=k.sibling}if(!M){for(k=C.child;k;){if(k===d){M=!0,d=C,p=b;break}if(k===p){M=!0,p=C,d=b;break}k=k.sibling}if(!M)throw Error(i(189))}}if(d.alternate!==p)throw Error(i(190))}if(d.tag!==3)throw Error(i(188));return d.stateNode.current===d?a:o}function v(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=v(a),o!==null)return o;a=a.sibling}return null}var E=Object.assign,x=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),U=Symbol.for("react.context"),G=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),K=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),ue=Symbol.for("react.memo_cache_sentinel"),xe=Symbol.iterator;function ae(a){return a===null||typeof a!="object"?null:(a=xe&&a[xe]||a["@@iterator"],typeof a=="function"?a:null)}var Me=Symbol.for("react.client.reference");function De(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Me?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case z:return"Fragment";case I:return"Profiler";case D:return"StrictMode";case P:return"Suspense";case K:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case N:return"Portal";case U:return a.displayName||"Context";case L:return(a._context.displayName||"Context")+".Consumer";case G:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case $:return o=a.displayName||null,o!==null?o:De(a.type)||"Memo";case J:o=a._payload,a=a._init;try{return De(a(o))}catch{}}return null}var we=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe={pending:!1,data:null,method:null,action:null},Ne=[],Le=-1;function q(a){return{current:a}}function W(a){0>Le||(a.current=Ne[Le],Ne[Le]=null,Le--)}function be(a,o){Le++,Ne[Le]=a.current,a.current=o}var ze=q(null),Ze=q(null),et=q(null),xt=q(null);function Ht(a,o){switch(be(et,o),be(Ze,a),be(ze,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?xv(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=xv(o),a=Ev(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}W(ze),be(ze,a)}function gt(){W(ze),W(Ze),W(et)}function Ta(a){a.memoizedState!==null&&be(xt,a);var o=ze.current,d=Ev(o,a.type);o!==d&&(be(Ze,a),be(ze,d))}function Ca(a){Ze.current===a&&(W(ze),W(Ze)),xt.current===a&&(W(xt),oh._currentValue=fe)}var qe,Ba;function na(a){if(qe===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);qe=o&&o[1]||"",Ba=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+a+Ba}var Pa=!1;function ia(a,o){if(!a||Pa)return"";Pa=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(o){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(re){var se=re}Reflect.construct(a,[],me)}else{try{me.call()}catch(re){se=re}a.call(me.prototype)}}else{try{throw Error()}catch(re){se=re}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(re){if(re&&se&&typeof re.stack=="string")return[re.stack,se.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=p.DetermineComponentFrameRoot(),M=C[0],k=C[1];if(M&&k){var V=M.split(`
`),ne=k.split(`
`);for(b=p=0;p<V.length&&!V[p].includes("DetermineComponentFrameRoot");)p++;for(;b<ne.length&&!ne[b].includes("DetermineComponentFrameRoot");)b++;if(p===V.length||b===ne.length)for(p=V.length-1,b=ne.length-1;1<=p&&0<=b&&V[p]!==ne[b];)b--;for(;1<=p&&0<=b;p--,b--)if(V[p]!==ne[b]){if(p!==1||b!==1)do if(p--,b--,0>b||V[p]!==ne[b]){var de=`
`+V[p].replace(" at new "," at ");return a.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",a.displayName)),de}while(1<=p&&0<=b);break}}}finally{Pa=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?na(d):""}function ni(a,o){switch(a.tag){case 26:case 27:case 5:return na(a.type);case 16:return na("Lazy");case 13:return a.child!==o&&o!==null?na("Suspense Fallback"):na("Suspense");case 19:return na("SuspenseList");case 0:case 15:return ia(a.type,!1);case 11:return ia(a.type.render,!1);case 1:return ia(a.type,!0);case 31:return na("Activity");default:return""}}function Ws(a){try{var o="",d=null;do o+=ni(a,d),d=a,a=a.return;while(a);return o}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var _s=Object.prototype.hasOwnProperty,dn=n.unstable_scheduleCallback,$s=n.unstable_cancelCallback,Aa=n.unstable_shouldYield,gn=n.unstable_requestPaint,Hn=n.unstable_now,Vu=n.unstable_getCurrentPriorityLevel,Rl=n.unstable_ImmediatePriority,eo=n.unstable_UserBlockingPriority,qa=n.unstable_NormalPriority,aa=n.unstable_LowPriority,Ss=n.unstable_IdlePriority,bs=n.log,ju=n.unstable_setDisableYieldValue,to=null,ii=null;function wa(a){if(typeof bs=="function"&&ju(a),ii&&typeof ii.setStrictMode=="function")try{ii.setStrictMode(to,a)}catch{}}var ai=Math.clz32?Math.clz32:ce,Ir=Math.log,Id=Math.LN2;function ce(a){return a>>>=0,a===0?32:31-(Ir(a)/Id|0)|0}var ge=256,ve=262144,He=4194304;function yt(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function kt(a,o,d){var p=a.pendingLanes;if(p===0)return 0;var b=0,C=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var k=p&134217727;return k!==0?(p=k&~C,p!==0?b=yt(p):(M&=k,M!==0?b=yt(M):d||(d=k&~a,d!==0&&(b=yt(d))))):(k=p&~C,k!==0?b=yt(k):M!==0?b=yt(M):d||(d=p&~a,d!==0&&(b=yt(d)))),b===0?0:o!==0&&o!==b&&(o&C)===0&&(C=b&-b,d=o&-o,C>=d||C===32&&(d&4194048)!==0)?o:b}function yn(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function zn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hi(){var a=He;return He<<=1,(He&62914560)===0&&(He=4194304),a}function Bi(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Pi(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Ra(a,o,d,p,b,C){var M=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var k=a.entanglements,V=a.expirationTimes,ne=a.hiddenUpdates;for(d=M&~d;0<d;){var de=31-ai(d),me=1<<de;k[de]=0,V[de]=-1;var se=ne[de];if(se!==null)for(ne[de]=null,de=0;de<se.length;de++){var re=se[de];re!==null&&(re.lane&=-536870913)}d&=~me}p!==0&&Na(a,p,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(M&~o))}function Na(a,o,d){a.pendingLanes|=o,a.suspendedLanes&=~o;var p=31-ai(o);a.entangledLanes|=o,a.entanglements[p]=a.entanglements[p]|1073741824|d&261930}function no(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var p=31-ai(d),b=1<<p;b&o|a[p]&o&&(a[p]|=o),d&=~b}}function Or(a,o){var d=o&-o;return d=(d&42)!==0?1:At(d),(d&(a.suspendedLanes|o))!==0?0:d}function At(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Un(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Ri(){var a=he.p;return a!==0?a:(a=window.event,a===void 0?32:Fv(a.type))}function io(a,o){var d=he.p;try{return he.p=a,o()}finally{he.p=d}}var xs=Math.random().toString(36).slice(2),Tn="__reactFiber$"+xs,si="__reactProps$"+xs,ao="__reactContainer$"+xs,Va="__reactEvents$"+xs,so="__reactListeners$"+xs,kr="__reactHandles$"+xs,Yu="__reactResources$"+xs,Es="__reactMarker$"+xs;function Ho(a){delete a[Tn],delete a[si],delete a[Va],delete a[so],delete a[kr]}function Bo(a){var o=a[Tn];if(o)return o;for(var d=a.parentNode;d;){if(o=d[ao]||d[Tn]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=Mv(a);a!==null;){if(d=a[Tn])return d;a=Mv(a)}return o}a=d,d=a.parentNode}return null}function Po(a){if(a=a[Tn]||a[ao]){var o=a.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return a}return null}function Nl(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(i(33))}function oo(a){var o=a[Yu];return o||(o=a[Yu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Cn(a){a[Es]=!0}var Ts=new Set,Fu={};function lo(a,o){qi(a,o),qi(a+"Capture",o)}function qi(a,o){for(Fu[a]=o,a=0;a<o.length;a++)Ts.add(o[a])}var Vi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Lr={},nn={};function Od(a){return _s.call(nn,a)?!0:_s.call(Lr,a)?!1:Vi.test(a)?nn[a]=!0:(Lr[a]=!0,!1)}function Ml(a,o,d){if(Od(o))if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var p=o.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+d)}}function Gr(a,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+d)}}function ja(a,o,d,p){if(p===null)a.removeAttribute(d);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(o,d,""+p)}}function sa(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ku(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function kd(a,o,d){var p=Object.getOwnPropertyDescriptor(a.constructor.prototype,o);if(!a.hasOwnProperty(o)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var b=p.get,C=p.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return b.call(this)},set:function(M){d=""+M,C.call(this,M)}}),Object.defineProperty(a,o,{enumerable:p.enumerable}),{getValue:function(){return d},setValue:function(M){d=""+M},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function Hr(a){if(!a._valueTracker){var o=Ku(a)?"checked":"value";a._valueTracker=kd(a,o,""+a[o])}}function oi(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),p="";return a&&(p=Ku(a)?a.checked?"true":"false":a.value),a=p,a!==d?(o.setValue(a),!0):!1}function Kt(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Ju=/[\n"\\]/g;function li(a){return a.replace(Ju,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Dl(a,o,d,p,b,C,M,k){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),o!=null?M==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+sa(o)):a.value!==""+sa(o)&&(a.value=""+sa(o)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),o!=null?Ma(a,M,sa(o)):d!=null?Ma(a,M,sa(d)):p!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?a.name=""+sa(k):a.removeAttribute("name")}function Xu(a,o,d,p,b,C,M,k){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),o!=null||d!=null){if(!(C!=="submit"&&C!=="reset"||o!=null)){Hr(a);return}d=d!=null?""+sa(d):"",o=o!=null?""+sa(o):d,k||o===a.value||(a.value=o),a.defaultValue=o}p=p??b,p=typeof p!="function"&&typeof p!="symbol"&&!!p,a.checked=k?a.checked:!!p,a.defaultChecked=!!p,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M),Hr(a)}function Ma(a,o,d){o==="number"&&Kt(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Cs(a,o,d,p){if(a=a.options,o){o={};for(var b=0;b<d.length;b++)o["$"+d[b]]=!0;for(d=0;d<a.length;d++)b=o.hasOwnProperty("$"+a[d].value),a[d].selected!==b&&(a[d].selected=b),b&&p&&(a[d].defaultSelected=!0)}else{for(d=""+sa(d),o=null,b=0;b<a.length;b++){if(a[b].value===d){a[b].selected=!0,p&&(a[b].defaultSelected=!0);return}o!==null||a[b].disabled||(o=a[b])}o!==null&&(o.selected=!0)}}function Qu(a,o,d){if(o!=null&&(o=""+sa(o),o!==a.value&&(a.value=o),d==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=d!=null?""+sa(d):""}function Zu(a,o,d,p){if(o==null){if(p!=null){if(d!=null)throw Error(i(92));if(we(p)){if(1<p.length)throw Error(i(93));p=p[0]}d=p}d==null&&(d=""),o=d}d=sa(o),a.defaultValue=d,p=a.textContent,p===d&&p!==""&&p!==null&&(a.value=p),Hr(a)}function qo(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var Qh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ld(a,o,d){var p=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?p?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":p?a.setProperty(o,d):typeof d!="number"||d===0||Qh.has(o)?o==="float"?a.cssFloat=d:a[o]=(""+d).trim():a[o]=d+"px"}function Gd(a,o,d){if(o!=null&&typeof o!="object")throw Error(i(62));if(a=a.style,d!=null){for(var p in d)!d.hasOwnProperty(p)||o!=null&&o.hasOwnProperty(p)||(p.indexOf("--")===0?a.setProperty(p,""):p==="float"?a.cssFloat="":a[p]="");for(var b in o)p=o[b],o.hasOwnProperty(b)&&d[b]!==p&&Ld(a,b,p)}else for(var C in o)o.hasOwnProperty(C)&&Ld(a,C,o[C])}function Wu(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zh=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Hd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Br(a){return Hd.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function As(){}var $u=null;function ec(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Vo=null,ro=null;function Bd(a){var o=Po(a);if(o&&(a=o.stateNode)){var d=a[si]||null;e:switch(a=o.stateNode,o.type){case"input":if(Dl(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+li(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var p=d[o];if(p!==a&&p.form===a.form){var b=p[si]||null;if(!b)throw Error(i(90));Dl(p,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<d.length;o++)p=d[o],p.form===a.form&&oi(p)}break e;case"textarea":Qu(a,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&Cs(a,!!d.multiple,o,!1)}}}var tc=!1;function Pd(a,o,d){if(tc)return a(o,d);tc=!0;try{var p=a(o);return p}finally{if(tc=!1,(Vo!==null||ro!==null)&&(Oa(),Vo&&(o=Vo,a=ro,ro=Vo=null,Bd(o),a)))for(o=0;o<a.length;o++)Bd(a[o])}}function zl(a,o){var d=a.stateNode;if(d===null)return null;var p=d[si]||null;if(p===null)return null;d=p[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(i(231,o,typeof d));return d}var Ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=!1;if(Ya)try{var Ul={};Object.defineProperty(Ul,"passive",{get:function(){qd=!0}}),window.addEventListener("test",Ul,Ul),window.removeEventListener("test",Ul,Ul)}catch{qd=!1}var ji=null,nc=null,jo=null;function Pr(){if(jo)return jo;var a,o=nc,d=o.length,p,b="value"in ji?ji.value:ji.textContent,C=b.length;for(a=0;a<d&&o[a]===b[a];a++);var M=d-a;for(p=1;p<=M&&o[d-p]===b[C-p];p++);return jo=b.slice(a,1<p?1-p:void 0)}function qr(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function Il(){return!0}function Wh(){return!1}function pi(a){function o(d,p,b,C,M){this._reactName=d,this._targetInst=b,this.type=p,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var k in a)a.hasOwnProperty(k)&&(d=a[k],this[k]=d?d(C):C[k]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Il:Wh,this.isPropagationStopped=Wh,this}return E(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Il)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Il)},persist:function(){},isPersistent:Il}),o}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Vr=pi(uo),Ol=E({},uo,{view:0,detail:0}),$h=pi(Ol),jr,ic,kl,Ll=E({},Ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lc,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==kl&&(kl&&a.type==="mousemove"?(jr=a.screenX-kl.screenX,ic=a.screenY-kl.screenY):ic=jr=0,kl=a),jr)},movementY:function(a){return"movementY"in a?a.movementY:ic}}),Vd=pi(Ll),e0=E({},Ll,{dataTransfer:0}),t0=pi(e0),jd=E({},Ol,{relatedTarget:0}),ac=pi(jd),n0=E({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),Gm=pi(n0),Hm=E({},uo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),i0=pi(Hm),Yr=E({},uo,{data:0}),sc=pi(Yr),oc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},s0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yd(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=s0[a])?!!o[a]:!1}function lc(){return Yd}var o0=E({},Ol,{key:function(a){if(a.key){var o=oc[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=qr(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?a0[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lc,charCode:function(a){return a.type==="keypress"?qr(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?qr(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Yo=pi(o0),rc=E({},Ll,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fd=pi(rc),Kd=E({},Ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lc}),l0=pi(Kd),r0=E({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bm=pi(r0),Xn=E({},Ll,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),u0=pi(Xn),c0=E({},uo,{newState:0,oldState:0}),d0=pi(c0),f0=[9,13,27,32],Fo=Ya&&"CompositionEvent"in window,Gl=null;Ya&&"documentMode"in document&&(Gl=document.documentMode);var uc=Ya&&"TextEvent"in window&&!Gl,Jd=Ya&&(!Fo||Gl&&8<Gl&&11>=Gl),h0=" ",Fr=!1;function cc(a,o){switch(a){case"keyup":return f0.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xd(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ko=!1;function p0(a,o){switch(a){case"compositionend":return Xd(o);case"keypress":return o.which!==32?null:(Fr=!0,h0);case"textInput":return a=o.data,a===h0&&Fr?null:a;default:return null}}function Qd(a,o){if(Ko)return a==="compositionend"||!Fo&&cc(a,o)?(a=Pr(),jo=nc=ji=null,Ko=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Jd&&o.locale!=="ko"?null:o.data;default:return null}}var Zd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!Zd[a.type]:o==="textarea"}function dc(a,o,d,p){Vo?ro?ro.push(p):ro=[p]:Vo=p,o=_p(o,"onChange"),0<o.length&&(d=new Vr("onChange","change",null,d,p),a.push({event:d,listeners:o}))}var co=null,Jo=null;function m0(a){gv(a,0)}function Hl(a){var o=Nl(a);if(oi(o))return a}function $d(a,o){if(a==="change")return o}var Fa=!1;if(Ya){var Kr;if(Ya){var ef="oninput"in document;if(!ef){var tf=document.createElement("div");tf.setAttribute("oninput","return;"),ef=typeof tf.oninput=="function"}Kr=ef}else Kr=!1;Fa=Kr&&(!document.documentMode||9<document.documentMode)}function oa(){co&&(co.detachEvent("onpropertychange",Jr),Jo=co=null)}function Jr(a){if(a.propertyName==="value"&&Hl(Jo)){var o=[];dc(o,Jo,a,ec(a)),Pd(m0,o)}}function g0(a,o,d){a==="focusin"?(oa(),co=o,Jo=d,co.attachEvent("onpropertychange",Jr)):a==="focusout"&&oa()}function nf(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Hl(Jo)}function y0(a,o){if(a==="click")return Hl(o)}function v0(a,o){if(a==="input"||a==="change")return Hl(o)}function af(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var mi=typeof Object.is=="function"?Object.is:af;function Bl(a,o){if(mi(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),p=Object.keys(o);if(d.length!==p.length)return!1;for(p=0;p<d.length;p++){var b=d[p];if(!_s.call(o,b)||!mi(a[b],o[b]))return!1}return!0}function Xr(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Pl(a,o){var d=Xr(a);a=0;for(var p;d;){if(d.nodeType===3){if(p=a+d.textContent.length,a<=o&&p>=o)return{node:d,offset:o-a};a=p}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=Xr(d)}}function Bt(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Bt(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function _0(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=Kt(a.document);o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=Kt(a.document)}return o}function sf(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var S0=Ya&&"documentMode"in document&&11>=document.documentMode,Ka=null,Ja=null,ql=null,fc=!1;function Vl(a,o,d){var p=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;fc||Ka==null||Ka!==Kt(p)||(p=Ka,"selectionStart"in p&&sf(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),ql&&Bl(ql,p)||(ql=p,p=_p(Ja,"onSelect"),0<p.length&&(o=new Vr("onSelect","select",null,o,d),a.push({event:o,listeners:p}),o.target=Ka)))}function ri(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var Xo={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},Qr={},of={};Ya&&(of=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function ws(a){if(Qr[a])return Qr[a];if(!Xo[a])return a;var o=Xo[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in of)return Qr[a]=o[d];return a}var hc=ws("animationend"),Zr=ws("animationiteration"),lf=ws("animationstart"),b0=ws("transitionrun"),Pm=ws("transitionstart"),x0=ws("transitioncancel"),rf=ws("transitionend"),la=new Map,Wr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wr.push("scrollEnd");function ra(a,o){la.set(a,o),lo(o,[a])}var $r=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},ua=[],Rs=0,Bn=0;function eu(){for(var a=Rs,o=Bn=Rs=0;o<a;){var d=ua[o];ua[o++]=null;var p=ua[o];ua[o++]=null;var b=ua[o];ua[o++]=null;var C=ua[o];if(ua[o++]=null,p!==null&&b!==null){var M=p.pending;M===null?b.next=b:(b.next=M.next,M.next=b),p.pending=b}C!==0&&fo(d,b,C)}}function Pn(a,o,d,p){ua[Rs++]=a,ua[Rs++]=o,ua[Rs++]=d,ua[Rs++]=p,Bn|=p,a.lanes|=p,a=a.alternate,a!==null&&(a.lanes|=p)}function pc(a,o,d,p){return Pn(a,o,d,p),ca(a)}function gi(a,o){return Pn(a,null,null,o),ca(a)}function fo(a,o,d){a.lanes|=d;var p=a.alternate;p!==null&&(p.lanes|=d);for(var b=!1,C=a.return;C!==null;)C.childLanes|=d,p=C.alternate,p!==null&&(p.childLanes|=d),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&o!==null&&(b=31-ai(d),a=C.hiddenUpdates,p=a[b],p===null?a[b]=[o]:p.push(o),o.lane=d|536870912),C):null}function ca(a){if(50<Do)throw Do=0,pl=null,Error(i(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var ho={};function uf(a,o,d,p){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function an(a,o,d,p){return new uf(a,o,d,p)}function mc(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ni(a,o){var d=a.alternate;return d===null?(d=an(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function jl(a,o){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,o=d.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function Xa(a,o,d,p,b,C){var M=0;if(p=a,typeof a=="function")mc(a)&&(M=1);else if(typeof a=="string")M=jx(a,d,ze.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=an(31,d,o,b),a.elementType=B,a.lanes=C,a;case z:return po(d.children,b,C,o);case D:M=8,b|=24;break;case I:return a=an(12,d,o,b|2),a.elementType=I,a.lanes=C,a;case P:return a=an(13,d,o,b),a.elementType=P,a.lanes=C,a;case K:return a=an(19,d,o,b),a.elementType=K,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case U:M=10;break e;case L:M=9;break e;case G:M=11;break e;case $:M=14;break e;case J:M=16,p=null;break e}M=29,d=Error(i(130,a===null?"null":typeof a,"")),p=null}return o=an(M,d,o,b),o.elementType=a,o.type=p,o.lanes=C,o}function po(a,o,d,p){return a=an(7,a,p,o),a.lanes=d,a}function gc(a,o,d){return a=an(6,a,null,o),a.lanes=d,a}function Yl(a){var o=an(18,null,null,0);return o.stateNode=a,o}function yc(a,o,d){return o=an(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var tu=new WeakMap;function Yi(a,o){if(typeof a=="object"&&a!==null){var d=tu.get(a);return d!==void 0?d:(o={value:a,source:o,stack:Ws(o)},tu.set(a,o),o)}return{value:a,source:o,stack:Ws(o)}}var mo=[],go=0,Fl=null,Kl=0,Mi=[],Jt=0,Ns=null,sn=1,Da="";function Qa(a,o){mo[go++]=Kl,mo[go++]=Fl,Fl=a,Kl=o}function E0(a,o,d){Mi[Jt++]=sn,Mi[Jt++]=Da,Mi[Jt++]=Ns,Ns=a;var p=sn;a=Da;var b=32-ai(p)-1;p&=~(1<<b),d+=1;var C=32-ai(o)+b;if(30<C){var M=b-b%5;C=(p&(1<<M)-1).toString(32),p>>=M,b-=M,sn=1<<32-ai(o)+b|d<<b|p,Da=C+a}else sn=1<<C|d<<b|p,Da=a}function Za(a){a.return!==null&&(Qa(a,1),E0(a,1,0))}function vc(a){for(;a===Fl;)Fl=mo[--go],mo[go]=null,Kl=mo[--go],mo[go]=null;for(;a===Ns;)Ns=Mi[--Jt],Mi[Jt]=null,Da=Mi[--Jt],Mi[Jt]=null,sn=Mi[--Jt],Mi[Jt]=null}function _c(a,o){Mi[Jt++]=sn,Mi[Jt++]=Da,Mi[Jt++]=Ns,sn=o.id,Da=o.overflow,Ns=a}var fn=null,Pt=null,vt=!1,Ms=null,Fi=!1,Jl=Error(i(519));function Wa(a){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $a(Yi(o,a)),Jl}function T0(a){var o=a.stateNode,d=a.type,p=a.memoizedProps;switch(o[Tn]=a,o[si]=p,d){case"dialog":bt("cancel",o),bt("close",o);break;case"iframe":case"object":case"embed":bt("load",o);break;case"video":case"audio":for(d=0;d<Ea.length;d++)bt(Ea[d],o);break;case"source":bt("error",o);break;case"img":case"image":case"link":bt("error",o),bt("load",o);break;case"details":bt("toggle",o);break;case"input":bt("invalid",o),Xu(o,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":bt("invalid",o);break;case"textarea":bt("invalid",o),Zu(o,p.value,p.defaultValue,p.children)}d=p.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||p.suppressHydrationWarning===!0||Sv(o.textContent,d)?(p.popover!=null&&(bt("beforetoggle",o),bt("toggle",o)),p.onScroll!=null&&bt("scroll",o),p.onScrollEnd!=null&&bt("scrollend",o),p.onClick!=null&&(o.onclick=As),o=!0):o=!1,o||Wa(a,!0)}function C0(a){for(fn=a.return;fn;)switch(fn.tag){case 5:case 31:case 13:Fi=!1;return;case 27:case 3:Fi=!0;return;default:fn=fn.return}}function Xl(a){if(a!==fn)return!1;if(!vt)return C0(a),vt=!0,!1;var o=a.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||ig(a.type,a.memoizedProps)),d=!d),d&&Pt&&Wa(a),C0(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));Pt=Nv(a)}else if(o===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(317));Pt=Nv(a)}else o===27?(o=Pt,mr(a.type)?(a=rg,rg=null,Pt=a):Pt=o):Pt=fn?hs(a.stateNode.nextSibling):null;return!0}function yo(){Pt=fn=null,vt=!1}function Sc(){var a=Ms;return a!==null&&(pn===null?pn=a:pn.push.apply(pn,a),Ms=null),a}function $a(a){Ms===null?Ms=[a]:Ms.push(a)}var Ql=q(null),vo=null,es=null;function Ds(a,o,d){be(Ql,o._currentValue),o._currentValue=d}function ts(a){a._currentValue=Ql.current,W(Ql)}function bc(a,o,d){for(;a!==null;){var p=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,p!==null&&(p.childLanes|=o)):p!==null&&(p.childLanes&o)!==o&&(p.childLanes|=o),a===d)break;a=a.return}}function xc(a,o,d,p){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var M=b.child;C=C.firstContext;e:for(;C!==null;){var k=C;C=b;for(var V=0;V<o.length;V++)if(k.context===o[V]){C.lanes|=d,k=C.alternate,k!==null&&(k.lanes|=d),bc(C.return,d,a),p||(M=null);break e}C=k.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(i(341));M.lanes|=d,C=M.alternate,C!==null&&(C.lanes|=d),bc(M,d,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function ns(a,o,d,p){a=null;for(var b=o,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(i(387));if(M=M.memoizedProps,M!==null){var k=b.type;mi(b.pendingProps.value,M.value)||(a!==null?a.push(k):a=[k])}}else if(b===xt.current){if(M=b.alternate,M===null)throw Error(i(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(oh):a=[oh])}b=b.return}a!==null&&xc(o,a,d,p),o.flags|=262144}function nu(a){for(a=a.firstContext;a!==null;){if(!mi(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function _o(a){vo=a,es=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Xe(a){return A0(vo,a)}function Zl(a,o){return vo===null&&_o(a),A0(a,o)}function A0(a,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},es===null){if(a===null)throw Error(i(308));es=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else es=es.next=o;return d}var w0=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(d,p){a.push(p)}};this.abort=function(){o.aborted=!0,a.forEach(function(d){return d()})}},qm=n.unstable_scheduleCallback,Vm=n.unstable_NormalPriority,An={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function cf(){return{controller:new w0,data:new Map,refCount:0}}function Qo(a){a.refCount--,a.refCount===0&&qm(Vm,function(){a.controller.abort()})}var Ki=null,Ec=0,zs=0,da=null;function df(a,o){if(Ki===null){var d=Ki=[];Ec=0,zs=oe(),da={status:"pending",value:void 0,then:function(p){d.push(p)}}}return Ec++,o.then(ff,ff),o}function ff(){if(--Ec===0&&Ki!==null){da!==null&&(da.status="fulfilled");var a=Ki;Ki=null,zs=0,da=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function hf(a,o){var d=[],p={status:"pending",value:null,reason:null,then:function(b){d.push(b)}};return a.then(function(){p.status="fulfilled",p.value=o;for(var b=0;b<d.length;b++)(0,d[b])(o)},function(b){for(p.status="rejected",p.reason=b,b=0;b<d.length;b++)(0,d[b])(void 0)}),p}var R0=Y.S;Y.S=function(a,o){eh=Hn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&df(a,o),R0!==null&&R0(a,o)};var So=q(null);function Tc(){var a=So.current;return a!==null?a:$e.pooledCache}function iu(a,o){o===null?be(So,So.current):be(So,o.pool)}function pf(){var a=Tc();return a===null?null:{parent:An._currentValue,pool:a}}var Zo=Error(i(460)),au=Error(i(474)),lt=Error(i(542)),Cc={then:function(){}};function Di(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Ac(a,o,d){switch(d=a[d],d===void 0?a.push(o):d!==o&&(o.then(As,As),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,el(a),a;default:if(typeof o.status=="string")o.then(As,As);else{if(a=$e,a!==null&&100<a.shellSuspendCounter)throw Error(i(482));a=o,a.status="pending",a.then(function(p){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=p}},function(p){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=p}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,el(a),a}throw is=o,Zo}}function Wo(a){try{var o=a._init;return o(a._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(is=d,Zo):d}}var is=null;function $o(){if(is===null)throw Error(i(459));var a=is;return is=null,a}function el(a){if(a===Zo||a===lt)throw Error(i(483))}var tl=null,nl=0;function su(a){var o=nl;return nl+=1,tl===null&&(tl=[]),Ac(tl,a,o)}function fa(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Wl(a,o){throw o.$$typeof===x?Error(i(525)):(a=Object.prototype.toString.call(o),Error(i(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function wc(a){function o(X,F){if(a){var te=X.deletions;te===null?(X.deletions=[F],X.flags|=16):te.push(F)}}function d(X,F){if(!a)return null;for(;F!==null;)o(X,F),F=F.sibling;return null}function p(X){for(var F=new Map;X!==null;)X.key!==null?F.set(X.key,X):F.set(X.index,X),X=X.sibling;return F}function b(X,F){return X=Ni(X,F),X.index=0,X.sibling=null,X}function C(X,F,te){return X.index=te,a?(te=X.alternate,te!==null?(te=te.index,te<F?(X.flags|=67108866,F):te):(X.flags|=67108866,F)):(X.flags|=1048576,F)}function M(X){return a&&X.alternate===null&&(X.flags|=67108866),X}function k(X,F,te,pe){return F===null||F.tag!==6?(F=gc(te,X.mode,pe),F.return=X,F):(F=b(F,te),F.return=X,F)}function V(X,F,te,pe){var je=te.type;return je===z?de(X,F,te.props.children,pe,te.key):F!==null&&(F.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===J&&Wo(je)===F.type)?(F=b(F,te.props),fa(F,te),F.return=X,F):(F=Xa(te.type,te.key,te.props,null,X.mode,pe),fa(F,te),F.return=X,F)}function ne(X,F,te,pe){return F===null||F.tag!==4||F.stateNode.containerInfo!==te.containerInfo||F.stateNode.implementation!==te.implementation?(F=yc(te,X.mode,pe),F.return=X,F):(F=b(F,te.children||[]),F.return=X,F)}function de(X,F,te,pe,je){return F===null||F.tag!==7?(F=po(te,X.mode,pe,je),F.return=X,F):(F=b(F,te),F.return=X,F)}function me(X,F,te){if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return F=gc(""+F,X.mode,te),F.return=X,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return te=Xa(F.type,F.key,F.props,null,X.mode,te),fa(te,F),te.return=X,te;case N:return F=yc(F,X.mode,te),F.return=X,F;case J:return F=Wo(F),me(X,F,te)}if(we(F)||ae(F))return F=po(F,X.mode,te,null),F.return=X,F;if(typeof F.then=="function")return me(X,su(F),te);if(F.$$typeof===U)return me(X,Zl(X,F),te);Wl(X,F)}return null}function se(X,F,te,pe){var je=F!==null?F.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return je!==null?null:k(X,F,""+te,pe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case R:return te.key===je?V(X,F,te,pe):null;case N:return te.key===je?ne(X,F,te,pe):null;case J:return te=Wo(te),se(X,F,te,pe)}if(we(te)||ae(te))return je!==null?null:de(X,F,te,pe,null);if(typeof te.then=="function")return se(X,F,su(te),pe);if(te.$$typeof===U)return se(X,F,Zl(X,te),pe);Wl(X,te)}return null}function re(X,F,te,pe,je){if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return X=X.get(te)||null,k(F,X,""+pe,je);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case R:return X=X.get(pe.key===null?te:pe.key)||null,V(F,X,pe,je);case N:return X=X.get(pe.key===null?te:pe.key)||null,ne(F,X,pe,je);case J:return pe=Wo(pe),re(X,F,te,pe,je)}if(we(pe)||ae(pe))return X=X.get(te)||null,de(F,X,pe,je,null);if(typeof pe.then=="function")return re(X,F,te,su(pe),je);if(pe.$$typeof===U)return re(X,F,te,Zl(F,pe),je);Wl(F,pe)}return null}function ke(X,F,te,pe){for(var je=null,Nt=null,Ge=F,ct=F=0,Tt=null;Ge!==null&&ct<te.length;ct++){Ge.index>ct?(Tt=Ge,Ge=null):Tt=Ge.sibling;var Mt=se(X,Ge,te[ct],pe);if(Mt===null){Ge===null&&(Ge=Tt);break}a&&Ge&&Mt.alternate===null&&o(X,Ge),F=C(Mt,F,ct),Nt===null?je=Mt:Nt.sibling=Mt,Nt=Mt,Ge=Tt}if(ct===te.length)return d(X,Ge),vt&&Qa(X,ct),je;if(Ge===null){for(;ct<te.length;ct++)Ge=me(X,te[ct],pe),Ge!==null&&(F=C(Ge,F,ct),Nt===null?je=Ge:Nt.sibling=Ge,Nt=Ge);return vt&&Qa(X,ct),je}for(Ge=p(Ge);ct<te.length;ct++)Tt=re(Ge,X,ct,te[ct],pe),Tt!==null&&(a&&Tt.alternate!==null&&Ge.delete(Tt.key===null?ct:Tt.key),F=C(Tt,F,ct),Nt===null?je=Tt:Nt.sibling=Tt,Nt=Tt);return a&&Ge.forEach(function(Sr){return o(X,Sr)}),vt&&Qa(X,ct),je}function Je(X,F,te,pe){if(te==null)throw Error(i(151));for(var je=null,Nt=null,Ge=F,ct=F=0,Tt=null,Mt=te.next();Ge!==null&&!Mt.done;ct++,Mt=te.next()){Ge.index>ct?(Tt=Ge,Ge=null):Tt=Ge.sibling;var Sr=se(X,Ge,Mt.value,pe);if(Sr===null){Ge===null&&(Ge=Tt);break}a&&Ge&&Sr.alternate===null&&o(X,Ge),F=C(Sr,F,ct),Nt===null?je=Sr:Nt.sibling=Sr,Nt=Sr,Ge=Tt}if(Mt.done)return d(X,Ge),vt&&Qa(X,ct),je;if(Ge===null){for(;!Mt.done;ct++,Mt=te.next())Mt=me(X,Mt.value,pe),Mt!==null&&(F=C(Mt,F,ct),Nt===null?je=Mt:Nt.sibling=Mt,Nt=Mt);return vt&&Qa(X,ct),je}for(Ge=p(Ge);!Mt.done;ct++,Mt=te.next())Mt=re(Ge,X,ct,Mt.value,pe),Mt!==null&&(a&&Mt.alternate!==null&&Ge.delete(Mt.key===null?ct:Mt.key),F=C(Mt,F,ct),Nt===null?je=Mt:Nt.sibling=Mt,Nt=Mt);return a&&Ge.forEach(function(t5){return o(X,t5)}),vt&&Qa(X,ct),je}function jt(X,F,te,pe){if(typeof te=="object"&&te!==null&&te.type===z&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case R:e:{for(var je=te.key;F!==null;){if(F.key===je){if(je=te.type,je===z){if(F.tag===7){d(X,F.sibling),pe=b(F,te.props.children),pe.return=X,X=pe;break e}}else if(F.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===J&&Wo(je)===F.type){d(X,F.sibling),pe=b(F,te.props),fa(pe,te),pe.return=X,X=pe;break e}d(X,F);break}else o(X,F);F=F.sibling}te.type===z?(pe=po(te.props.children,X.mode,pe,te.key),pe.return=X,X=pe):(pe=Xa(te.type,te.key,te.props,null,X.mode,pe),fa(pe,te),pe.return=X,X=pe)}return M(X);case N:e:{for(je=te.key;F!==null;){if(F.key===je)if(F.tag===4&&F.stateNode.containerInfo===te.containerInfo&&F.stateNode.implementation===te.implementation){d(X,F.sibling),pe=b(F,te.children||[]),pe.return=X,X=pe;break e}else{d(X,F);break}else o(X,F);F=F.sibling}pe=yc(te,X.mode,pe),pe.return=X,X=pe}return M(X);case J:return te=Wo(te),jt(X,F,te,pe)}if(we(te))return ke(X,F,te,pe);if(ae(te)){if(je=ae(te),typeof je!="function")throw Error(i(150));return te=je.call(te),Je(X,F,te,pe)}if(typeof te.then=="function")return jt(X,F,su(te),pe);if(te.$$typeof===U)return jt(X,F,Zl(X,te),pe);Wl(X,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,F!==null&&F.tag===6?(d(X,F.sibling),pe=b(F,te),pe.return=X,X=pe):(d(X,F),pe=gc(te,X.mode,pe),pe.return=X,X=pe),M(X)):d(X,F)}return function(X,F,te,pe){try{nl=0;var je=jt(X,F,te,pe);return tl=null,je}catch(Ge){if(Ge===Zo||Ge===lt)throw Ge;var Nt=an(29,Ge,null,X.mode);return Nt.lanes=pe,Nt.return=X,Nt}finally{}}}var Us=wc(!0),Rc=wc(!1),yi=!1;function ou(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function mf(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Is(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function bo(a,o,d){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,(Be&2)!==0){var b=p.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),p.pending=o,o=ca(a),fo(a,null,d),o}return Pn(a,p,o,d),ca(a)}function xo(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var p=o.lanes;p&=a.pendingLanes,d|=p,o.lanes=d,no(a,d)}}function Ve(a,o){var d=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,d===p)){var b=null,C=null;if(d=d.firstBaseUpdate,d!==null){do{var M={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};C===null?b=C=M:C=C.next=M,d=d.next}while(d!==null);C===null?b=C=o:C=C.next=o}else b=C=o;d={baseState:p.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:p.shared,callbacks:p.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}var gf=!1;function lu(){if(gf){var a=da;if(a!==null)throw a}}function $l(a,o,d,p){gf=!1;var b=a.updateQueue;yi=!1;var C=b.firstBaseUpdate,M=b.lastBaseUpdate,k=b.shared.pending;if(k!==null){b.shared.pending=null;var V=k,ne=V.next;V.next=null,M===null?C=ne:M.next=ne,M=V;var de=a.alternate;de!==null&&(de=de.updateQueue,k=de.lastBaseUpdate,k!==M&&(k===null?de.firstBaseUpdate=ne:k.next=ne,de.lastBaseUpdate=V))}if(C!==null){var me=b.baseState;M=0,de=ne=V=null,k=C;do{var se=k.lane&-536870913,re=se!==k.lane;if(re?(ot&se)===se:(p&se)===se){se!==0&&se===zs&&(gf=!0),de!==null&&(de=de.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var ke=a,Je=k;se=o;var jt=d;switch(Je.tag){case 1:if(ke=Je.payload,typeof ke=="function"){me=ke.call(jt,me,se);break e}me=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=Je.payload,se=typeof ke=="function"?ke.call(jt,me,se):ke,se==null)break e;me=E({},me,se);break e;case 2:yi=!0}}se=k.callback,se!==null&&(a.flags|=64,re&&(a.flags|=8192),re=b.callbacks,re===null?b.callbacks=[se]:re.push(se))}else re={lane:se,tag:k.tag,payload:k.payload,callback:k.callback,next:null},de===null?(ne=de=re,V=me):de=de.next=re,M|=se;if(k=k.next,k===null){if(k=b.shared.pending,k===null)break;re=k,k=re.next,re.next=null,b.lastBaseUpdate=re,b.shared.pending=null}}while(!0);de===null&&(V=me),b.baseState=V,b.firstBaseUpdate=ne,b.lastBaseUpdate=de,C===null&&(b.shared.lanes=0),cs|=M,a.lanes=M,a.memoizedState=me}}function er(a,o){if(typeof a!="function")throw Error(i(191,a));a.call(o)}function N0(a,o){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)er(d[a],o)}var tr=q(null),Nc=q(0);function M0(a,o){a=Zi,be(Nc,a),be(tr,o),Zi=a|o.baseLanes}function yf(){be(Nc,Zi),be(tr,tr.current)}function ru(){Zi=Nc.current,W(tr),W(Nc)}var zi=q(null),vi=null;function Os(a){var o=a.alternate;be(_t,_t.current&1),be(zi,a),vi===null&&(o===null||tr.current!==null||o.memoizedState!==null)&&(vi=a)}function vf(a){be(_t,_t.current),be(zi,a),vi===null&&(vi=a)}function D0(a){a.tag===22?(be(_t,_t.current),be(zi,a),vi===null&&(vi=a)):Ui()}function Ui(){be(_t,_t.current),be(zi,zi.current)}function vn(a){W(zi),vi===a&&(vi=null),W(_t)}var _t=q(0);function Ji(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||og(d)||lg(d)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Xt=0,it=null,Lt=null,ht=null,ha=!1,nr=!1,il=!1,Mc=0,uu=0,ir=null,_f=0;function on(){throw Error(i(321))}function Sf(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!mi(a[d],o[d]))return!1;return!0}function Dc(a,o,d,p,b,C){return Xt=C,it=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Y.H=a===null||a.memoizedState===null?up:Bf,il=!1,C=d(p,b),il=!1,nr&&(C=al(o,d,p,b)),z0(a),C}function z0(a){Y.H=ar;var o=Lt!==null&&Lt.next!==null;if(Xt=0,ht=Lt=it=null,ha=!1,uu=0,ir=null,o)throw Error(i(300));a===null||wn||(a=a.dependencies,a!==null&&nu(a)&&(wn=!0))}function al(a,o,d,p){it=a;var b=0;do{if(nr&&(ir=null),uu=0,nr=!1,25<=b)throw Error(i(301));if(b+=1,ht=Lt=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}Y.H=pa,C=o(d,p)}while(nr);return C}function sl(){var a=Y.H,o=a.useState()[0];return o=typeof o.then=="function"?cu(o):o,a=a.useState()[0],(Lt!==null?Lt.memoizedState:null)!==a&&(it.flags|=1024),o}function bf(){var a=Mc!==0;return Mc=0,a}function xf(a,o,d){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~d}function Ef(a){if(ha){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}ha=!1}Xt=0,ht=Lt=it=null,nr=!1,uu=Mc=0,ir=null}function In(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?it.memoizedState=ht=a:ht=ht.next=a,ht}function _n(){if(Lt===null){var a=it.alternate;a=a!==null?a.memoizedState:null}else a=Lt.next;var o=ht===null?it.memoizedState:ht.next;if(o!==null)ht=o,Lt=a;else{if(a===null)throw it.alternate===null?Error(i(467)):Error(i(310));Lt=a,a={memoizedState:Lt.memoizedState,baseState:Lt.baseState,baseQueue:Lt.baseQueue,queue:Lt.queue,next:null},ht===null?it.memoizedState=ht=a:ht=ht.next=a}return ht}function zc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function cu(a){var o=uu;return uu+=1,ir===null&&(ir=[]),a=Ac(ir,a,o),o=it,(ht===null?o.memoizedState:ht.next)===null&&(o=o.alternate,Y.H=o===null||o.memoizedState===null?up:Bf),a}function Eo(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return cu(a);if(a.$$typeof===U)return Xe(a)}throw Error(i(438,String(a)))}function Tf(a){var o=null,d=it.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var p=it.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(o={data:p.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=zc(),it.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(a),p=0;p<a;p++)d[p]=ue;return o.index++,d}function ks(a,o){return typeof o=="function"?o(a):o}function Uc(a){var o=_n();return Cf(o,Lt,a)}function Cf(a,o,d){var p=a.queue;if(p===null)throw Error(i(311));p.lastRenderedReducer=d;var b=a.baseQueue,C=p.pending;if(C!==null){if(b!==null){var M=b.next;b.next=C.next,C.next=M}o.baseQueue=b=C,p.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{o=b.next;var k=M=null,V=null,ne=o,de=!1;do{var me=ne.lane&-536870913;if(me!==ne.lane?(ot&me)===me:(Xt&me)===me){var se=ne.revertLane;if(se===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),me===zs&&(de=!0);else if((Xt&se)===se){ne=ne.next,se===zs&&(de=!0);continue}else me={lane:0,revertLane:ne.revertLane,gesture:null,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(k=V=me,M=C):V=V.next=me,it.lanes|=se,cs|=se;me=ne.action,il&&d(C,me),C=ne.hasEagerState?ne.eagerState:d(C,me)}else se={lane:me,revertLane:ne.revertLane,gesture:ne.gesture,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null},V===null?(k=V=se,M=C):V=V.next=se,it.lanes|=me,cs|=me;ne=ne.next}while(ne!==null&&ne!==o);if(V===null?M=C:V.next=k,!mi(C,a.memoizedState)&&(wn=!0,de&&(d=da,d!==null)))throw d;a.memoizedState=C,a.baseState=M,a.baseQueue=V,p.lastRenderedState=C}return b===null&&(p.lanes=0),[a.memoizedState,p.dispatch]}function Af(a){var o=_n(),d=o.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=a;var p=d.dispatch,b=d.pending,C=o.memoizedState;if(b!==null){d.pending=null;var M=b=b.next;do C=a(C,M.action),M=M.next;while(M!==b);mi(C,o.memoizedState)||(wn=!0),o.memoizedState=C,o.baseQueue===null&&(o.baseState=C),d.lastRenderedState=C}return[C,p]}function U0(a,o,d){var p=it,b=_n(),C=vt;if(C){if(d===void 0)throw Error(i(407));d=d()}else d=o();var M=!mi((Lt||b).memoizedState,d);if(M&&(b.memoizedState=d,wn=!0),b=b.queue,If(k0.bind(null,p,b,a),[a]),b.getSnapshot!==o||M||ht!==null&&ht.memoizedState.tag&1){if(p.flags|=2048,To(9,{destroy:void 0},O0.bind(null,p,b,d,o),null),$e===null)throw Error(i(349));C||(Xt&127)!==0||I0(p,o,d)}return d}function I0(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=it.updateQueue,o===null?(o=zc(),it.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function O0(a,o,d,p){o.value=d,o.getSnapshot=p,L0(o)&&G0(a)}function k0(a,o,d){return d(function(){L0(o)&&G0(a)})}function L0(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!mi(a,d)}catch{return!0}}function G0(a){var o=gi(a,2);o!==null&&ut(o,a,2)}function wf(a){var o=In();if(typeof a=="function"){var d=a;if(a=d(),il){wa(!0);try{d()}finally{wa(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:a},o}function Rf(a,o,d,p){return a.baseState=d,Cf(a,Lt,typeof p=="function"?p:ks)}function jm(a,o,d,p,b){if(Lc(a))throw Error(i(485));if(a=o.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};Y.T!==null?d(!0):C.isTransition=!1,p(C),d=o.pending,d===null?(C.next=o.pending=C,H0(o,C)):(C.next=d.next,o.pending=d.next=C)}}function H0(a,o){var d=o.action,p=o.payload,b=a.state;if(o.isTransition){var C=Y.T,M={};Y.T=M;try{var k=d(b,p),V=Y.S;V!==null&&V(M,k),B0(a,o,k)}catch(ne){Nf(a,o,ne)}finally{C!==null&&M.types!==null&&(C.types=M.types),Y.T=C}}else try{C=d(b,p),B0(a,o,C)}catch(ne){Nf(a,o,ne)}}function B0(a,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(p){P0(a,o,p)},function(p){return Nf(a,o,p)}):P0(a,o,d)}function P0(a,o,d){o.status="fulfilled",o.value=d,q0(o),a.state=d,o=a.pending,o!==null&&(d=o.next,d===o?a.pending=null:(d=d.next,o.next=d,H0(a,d)))}function Nf(a,o,d){var p=a.pending;if(a.pending=null,p!==null){p=p.next;do o.status="rejected",o.reason=d,q0(o),o=o.next;while(o!==p)}a.action=null}function q0(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function Mf(a,o){return o}function Df(a,o){if(vt){var d=$e.formState;if(d!==null){e:{var p=it;if(vt){if(Pt){t:{for(var b=Pt,C=Fi;b.nodeType!==8;){if(!C){b=null;break t}if(b=hs(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){Pt=hs(b.nextSibling),p=b.data==="F!";break e}}Wa(p)}p=!1}p&&(o=d[0])}}return d=In(),d.memoizedState=d.baseState=o,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mf,lastRenderedState:o},d.queue=p,d=op.bind(null,it,p),p.dispatch=d,p=wf(!1),C=Hf.bind(null,it,!1,p.queue),p=In(),b={state:o,dispatch:null,action:a,pending:null},p.queue=b,d=jm.bind(null,it,b,C,d),b.dispatch=d,p.memoizedState=a,[o,d,!1]}function V0(a){var o=_n();return zf(o,Lt,a)}function zf(a,o,d){if(o=Cf(a,o,Mf)[0],a=Uc(ks)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var p=cu(o)}catch(M){throw M===Zo?lt:M}else p=o;o=_n();var b=o.queue,C=b.dispatch;return d!==o.memoizedState&&(it.flags|=2048,To(9,{destroy:void 0},j0.bind(null,b,d),null)),[p,C,a]}function j0(a,o){a.action=o}function Uf(a){var o=_n(),d=Lt;if(d!==null)return zf(o,d,a);_n(),o=o.memoizedState,d=_n();var p=d.queue.dispatch;return d.memoizedState=a,[o,p,!1]}function To(a,o,d,p){return a={tag:a,create:d,deps:p,inst:o,next:null},o=it.updateQueue,o===null&&(o=zc(),it.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=a.next=a:(p=d.next,d.next=a,a.next=p,o.lastEffect=a),a}function Ic(){return _n().memoizedState}function Oc(a,o,d,p){var b=In();it.flags|=a,b.memoizedState=To(1|o,{destroy:void 0},d,p===void 0?null:p)}function kc(a,o,d,p){var b=_n();p=p===void 0?null:p;var C=b.memoizedState.inst;Lt!==null&&p!==null&&Sf(p,Lt.memoizedState.deps)?b.memoizedState=To(o,C,d,p):(it.flags|=a,b.memoizedState=To(1|o,C,d,p))}function Y0(a,o){Oc(8390656,8,a,o)}function If(a,o){kc(2048,8,a,o)}function F0(a){it.flags|=4;var o=it.updateQueue;if(o===null)o=zc(),it.updateQueue=o,o.events=[a];else{var d=o.events;d===null?o.events=[a]:d.push(a)}}function K0(a){var o=_n().memoizedState;return F0({ref:o,nextImpl:a}),function(){if((Be&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function J0(a,o){return kc(4,2,a,o)}function X0(a,o){return kc(4,4,a,o)}function Q0(a,o){if(typeof o=="function"){a=a();var d=o(a);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function Z0(a,o,d){d=d!=null?d.concat([a]):null,kc(4,4,Q0.bind(null,o,a),d)}function Of(){}function W0(a,o){var d=_n();o=o===void 0?null:o;var p=d.memoizedState;return o!==null&&Sf(o,p[1])?p[0]:(d.memoizedState=[a,o],a)}function $0(a,o){var d=_n();o=o===void 0?null:o;var p=d.memoizedState;if(o!==null&&Sf(o,p[1]))return p[0];if(p=a(),il){wa(!0);try{a()}finally{wa(!1)}}return d.memoizedState=[p,o],p}function kf(a,o,d){return d===void 0||(Xt&1073741824)!==0&&(ot&261930)===0?a.memoizedState=o:(a.memoizedState=d,a=dt(),it.lanes|=a,cs|=a,d)}function ep(a,o,d,p){return mi(d,o)?d:tr.current!==null?(a=kf(a,d,p),mi(a,o)||(wn=!0),a):(Xt&42)===0||(Xt&1073741824)!==0&&(ot&261930)===0?(wn=!0,a.memoizedState=d):(a=dt(),it.lanes|=a,cs|=a,o)}function tp(a,o,d,p,b){var C=he.p;he.p=C!==0&&8>C?C:8;var M=Y.T,k={};Y.T=k,Hf(a,!1,o,d);try{var V=b(),ne=Y.S;if(ne!==null&&ne(k,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var de=hf(V,p);du(a,o,de,$i(a))}else du(a,o,p,$i(a))}catch(me){du(a,o,{then:function(){},status:"rejected",reason:me},$i())}finally{he.p=C,M!==null&&k.types!==null&&(M.types=k.types),Y.T=M}}function Ym(){}function Lf(a,o,d,p){if(a.tag!==5)throw Error(i(476));var b=np(a).queue;tp(a,b,o,fe,d===null?Ym:function(){return ip(a),d(p)})}function np(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:fe,baseState:fe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:fe},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:d},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function ip(a){var o=np(a);o.next===null&&(o=a.alternate.memoizedState),du(a,o.next.queue,{},$i())}function Gf(){return Xe(oh)}function ap(){return _n().memoizedState}function sp(){return _n().memoizedState}function Fm(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var d=$i();a=Is(d);var p=bo(o,a,d);p!==null&&(ut(p,o,d),xo(p,o,d)),o={cache:cf()},a.payload=o;return}o=o.return}}function Km(a,o,d){var p=$i();d={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Lc(a)?lp(o,d):(d=pc(a,o,d,p),d!==null&&(ut(d,a,p),rp(d,o,p)))}function op(a,o,d){var p=$i();du(a,o,d,p)}function du(a,o,d,p){var b={lane:p,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(Lc(a))lp(o,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=o.lastRenderedReducer,C!==null))try{var M=o.lastRenderedState,k=C(M,d);if(b.hasEagerState=!0,b.eagerState=k,mi(k,M))return Pn(a,o,b,0),$e===null&&eu(),!1}catch{}finally{}if(d=pc(a,o,b,p),d!==null)return ut(d,a,p),rp(d,o,p),!0}return!1}function Hf(a,o,d,p){if(p={lane:2,revertLane:oe(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},Lc(a)){if(o)throw Error(i(479))}else o=pc(a,d,p,2),o!==null&&ut(o,a,2)}function Lc(a){var o=a.alternate;return a===it||o!==null&&o===it}function lp(a,o){nr=ha=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function rp(a,o,d){if((d&4194048)!==0){var p=o.lanes;p&=a.pendingLanes,d|=p,o.lanes=d,no(a,d)}}var ar={readContext:Xe,use:Eo,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on};ar.useEffectEvent=on;var up={readContext:Xe,use:Eo,useCallback:function(a,o){return In().memoizedState=[a,o===void 0?null:o],a},useContext:Xe,useEffect:Y0,useImperativeHandle:function(a,o,d){d=d!=null?d.concat([a]):null,Oc(4194308,4,Q0.bind(null,o,a),d)},useLayoutEffect:function(a,o){return Oc(4194308,4,a,o)},useInsertionEffect:function(a,o){Oc(4,2,a,o)},useMemo:function(a,o){var d=In();o=o===void 0?null:o;var p=a();if(il){wa(!0);try{a()}finally{wa(!1)}}return d.memoizedState=[p,o],p},useReducer:function(a,o,d){var p=In();if(d!==void 0){var b=d(o);if(il){wa(!0);try{d(o)}finally{wa(!1)}}}else b=o;return p.memoizedState=p.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},p.queue=a,a=a.dispatch=Km.bind(null,it,a),[p.memoizedState,a]},useRef:function(a){var o=In();return a={current:a},o.memoizedState=a},useState:function(a){a=wf(a);var o=a.queue,d=op.bind(null,it,o);return o.dispatch=d,[a.memoizedState,d]},useDebugValue:Of,useDeferredValue:function(a,o){var d=In();return kf(d,a,o)},useTransition:function(){var a=wf(!1);return a=tp.bind(null,it,a.queue,!0,!1),In().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,d){var p=it,b=In();if(vt){if(d===void 0)throw Error(i(407));d=d()}else{if(d=o(),$e===null)throw Error(i(349));(ot&127)!==0||I0(p,o,d)}b.memoizedState=d;var C={value:d,getSnapshot:o};return b.queue=C,Y0(k0.bind(null,p,C,a),[a]),p.flags|=2048,To(9,{destroy:void 0},O0.bind(null,p,C,d,o),null),d},useId:function(){var a=In(),o=$e.identifierPrefix;if(vt){var d=Da,p=sn;d=(p&~(1<<32-ai(p)-1)).toString(32)+d,o="_"+o+"R_"+d,d=Mc++,0<d&&(o+="H"+d.toString(32)),o+="_"}else d=_f++,o="_"+o+"r_"+d.toString(32)+"_";return a.memoizedState=o},useHostTransitionStatus:Gf,useFormState:Df,useActionState:Df,useOptimistic:function(a){var o=In();o.memoizedState=o.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=Hf.bind(null,it,!0,d),d.dispatch=o,[a,o]},useMemoCache:Tf,useCacheRefresh:function(){return In().memoizedState=Fm.bind(null,it)},useEffectEvent:function(a){var o=In(),d={impl:a};return o.memoizedState=d,function(){if((Be&2)!==0)throw Error(i(440));return d.impl.apply(void 0,arguments)}}},Bf={readContext:Xe,use:Eo,useCallback:W0,useContext:Xe,useEffect:If,useImperativeHandle:Z0,useInsertionEffect:J0,useLayoutEffect:X0,useMemo:$0,useReducer:Uc,useRef:Ic,useState:function(){return Uc(ks)},useDebugValue:Of,useDeferredValue:function(a,o){var d=_n();return ep(d,Lt.memoizedState,a,o)},useTransition:function(){var a=Uc(ks)[0],o=_n().memoizedState;return[typeof a=="boolean"?a:cu(a),o]},useSyncExternalStore:U0,useId:ap,useHostTransitionStatus:Gf,useFormState:V0,useActionState:V0,useOptimistic:function(a,o){var d=_n();return Rf(d,Lt,a,o)},useMemoCache:Tf,useCacheRefresh:sp};Bf.useEffectEvent=K0;var pa={readContext:Xe,use:Eo,useCallback:W0,useContext:Xe,useEffect:If,useImperativeHandle:Z0,useInsertionEffect:J0,useLayoutEffect:X0,useMemo:$0,useReducer:Af,useRef:Ic,useState:function(){return Af(ks)},useDebugValue:Of,useDeferredValue:function(a,o){var d=_n();return Lt===null?kf(d,a,o):ep(d,Lt.memoizedState,a,o)},useTransition:function(){var a=Af(ks)[0],o=_n().memoizedState;return[typeof a=="boolean"?a:cu(a),o]},useSyncExternalStore:U0,useId:ap,useHostTransitionStatus:Gf,useFormState:Uf,useActionState:Uf,useOptimistic:function(a,o){var d=_n();return Lt!==null?Rf(d,Lt,a,o):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:sp};pa.useEffectEvent=K0;function Gc(a,o,d,p){o=a.memoizedState,d=d(p,o),d=d==null?o:E({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var fu={enqueueSetState:function(a,o,d){a=a._reactInternals;var p=$i(),b=Is(p);b.payload=o,d!=null&&(b.callback=d),o=bo(a,b,p),o!==null&&(ut(o,a,p),xo(o,a,p))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var p=$i(),b=Is(p);b.tag=1,b.payload=o,d!=null&&(b.callback=d),o=bo(a,b,p),o!==null&&(ut(o,a,p),xo(o,a,p))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=$i(),p=Is(d);p.tag=2,o!=null&&(p.callback=o),o=bo(a,p,d),o!==null&&(ut(o,a,d),xo(o,a,d))}};function Pf(a,o,d,p,b,C,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,C,M):o.prototype&&o.prototype.isPureReactComponent?!Bl(d,p)||!Bl(b,C):!0}function qf(a,o,d,p){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,p),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,p),o.state!==a&&fu.enqueueReplaceState(o,o.state,null)}function Co(a,o){var d=o;if("ref"in o){d={};for(var p in o)p!=="ref"&&(d[p]=o[p])}if(a=a.defaultProps){d===o&&(d=E({},d));for(var b in a)d[b]===void 0&&(d[b]=a[b])}return d}function cp(a){$r(a)}function Vf(a){console.error(a)}function jf(a){$r(a)}function Hc(a,o){try{var d=a.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(p){setTimeout(function(){throw p})}}function dp(a,o,d){try{var p=a.onCaughtError;p(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Yf(a,o,d){return d=Is(d),d.tag=3,d.payload={element:null},d.callback=function(){Hc(a,o)},d}function Ff(a){return a=Is(a),a.tag=3,a}function fp(a,o,d,p){var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var C=p.value;a.payload=function(){return b(C)},a.callback=function(){dp(o,d,p)}}var M=d.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){dp(o,d,p),typeof b!="function"&&(xn===null?xn=new Set([this]):xn.add(this));var k=p.stack;this.componentDidCatch(p.value,{componentStack:k!==null?k:""})})}function On(a,o,d,p,b){if(d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(o=d.alternate,o!==null&&ns(o,d,b,!0),d=zi.current,d!==null){switch(d.tag){case 31:case 13:return vi===null?dr():d.alternate===null&&ln===0&&(ln=3),d.flags&=-257,d.flags|=65536,d.lanes=b,p===Cc?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([p]):o.add(p),Tu(a,p,b)),!1;case 22:return d.flags|=65536,p===Cc?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([p])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([p]):d.add(p)),Tu(a,p,b)),!1}throw Error(i(435,d.tag))}return Tu(a,p,b),dr(),!1}if(vt)return o=zi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,p!==Jl&&(a=Error(i(422),{cause:p}),$a(Yi(a,d)))):(p!==Jl&&(o=Error(i(423),{cause:p}),$a(Yi(o,d))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,p=Yi(p,d),b=Yf(a.stateNode,p,b),Ve(a,b),ln!==4&&(ln=2)),!1;var C=Error(i(520),{cause:p});if(C=Yi(C,d),hl===null?hl=[C]:hl.push(C),ln!==4&&(ln=2),o===null)return!0;p=Yi(p,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,a=b&-b,d.lanes|=a,a=Yf(d.stateNode,p,a),Ve(d,a),!1;case 1:if(o=d.type,C=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(xn===null||!xn.has(C))))return d.flags|=65536,b&=-b,d.lanes|=b,b=Ff(b),fp(b,a,d,p),Ve(d,b),!1}d=d.return}while(d!==null);return!1}var Bc=Error(i(461)),wn=!1;function qn(a,o,d,p){o.child=a===null?Rc(o,null,d,p):Us(o,a.child,d,p)}function Kf(a,o,d,p,b){d=d.render;var C=o.ref;if("ref"in p){var M={};for(var k in p)k!=="ref"&&(M[k]=p[k])}else M=p;return _o(o),p=Dc(a,o,d,M,C,b),k=bf(),a!==null&&!wn?(xf(a,o,b),Sn(a,o,b)):(vt&&k&&Za(o),o.flags|=1,qn(a,o,p,b),o.child)}function ol(a,o,d,p,b){if(a===null){var C=d.type;return typeof C=="function"&&!mc(C)&&C.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=C,Pc(a,o,C,p,b)):(a=Xa(d.type,null,p,o,o.mode,b),a.ref=o.ref,a.return=o,o.child=a)}if(C=a.child,!Kc(a,b)){var M=C.memoizedProps;if(d=d.compare,d=d!==null?d:Bl,d(M,p)&&a.ref===o.ref)return Sn(a,o,b)}return o.flags|=1,a=Ni(C,p),a.ref=o.ref,a.return=o,o.child=a}function Pc(a,o,d,p,b){if(a!==null){var C=a.memoizedProps;if(Bl(C,p)&&a.ref===o.ref)if(wn=!1,o.pendingProps=p=C,Kc(a,b))(a.flags&131072)!==0&&(wn=!0);else return o.lanes=a.lanes,Sn(a,o,b)}return sr(a,o,d,p,b)}function ll(a,o,d,p){var b=p.children,C=a!==null?a.memoizedState:null;if(a===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((o.flags&128)!==0){if(C=C!==null?C.baseLanes|d:d,a!==null){for(p=o.child=a.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;p=b&~C}else p=0,o.child=null;return Ii(a,o,C,d,p)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&iu(o,C!==null?C.cachePool:null),C!==null?M0(o,C):yf(),D0(o);else return p=o.lanes=536870912,Ii(a,o,C!==null?C.baseLanes|d:d,d,p)}else C!==null?(iu(o,C.cachePool),M0(o,C),Ui(),o.memoizedState=null):(a!==null&&iu(o,null),yf(),Ui());return qn(a,o,b,d),o.child}function as(a,o){return a!==null&&a.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ii(a,o,d,p,b){var C=Tc();return C=C===null?null:{parent:An._currentValue,pool:C},o.memoizedState={baseLanes:d,cachePool:C},a!==null&&iu(o,null),yf(),D0(o),a!==null&&ns(a,o,p,!0),o.childLanes=b,null}function qc(a,o){return o=Fc({mode:o.mode,children:o.children},a.mode),o.ref=a.ref,a.child=o,o.return=a,o}function hp(a,o,d){return Us(o,a.child,null,d),a=qc(o,o.pendingProps),a.flags|=2,vn(o),o.memoizedState=null,a}function Vc(a,o,d){var p=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,a===null){if(vt){if(p.mode==="hidden")return a=qc(o,p),o.lanes=536870912,as(null,a);if(vf(o),(a=Pt)?(a=Rv(a,Fi),a=a!==null&&a.data==="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ns!==null?{id:sn,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},d=Yl(a),d.return=o,o.child=d,fn=o,Pt=null)):a=null,a===null)throw Wa(o);return o.lanes=536870912,null}return qc(o,p)}var C=a.memoizedState;if(C!==null){var M=C.dehydrated;if(vf(o),b)if(o.flags&256)o.flags&=-257,o=hp(a,o,d);else if(o.memoizedState!==null)o.child=a.child,o.flags|=128,o=null;else throw Error(i(558));else if(wn||ns(a,o,d,!1),b=(d&a.childLanes)!==0,wn||b){if(p=$e,p!==null&&(M=Or(p,d),M!==0&&M!==C.retryLane))throw C.retryLane=M,gi(a,M),ut(p,a,M),Bc;dr(),o=hp(a,o,d)}else a=C.treeContext,Pt=hs(M.nextSibling),fn=o,vt=!0,Ms=null,Fi=!1,a!==null&&_c(o,a),o=qc(o,p),o.flags|=4096;return o}return a=Ni(a.child,{mode:p.mode,children:p.children}),a.ref=o.ref,o.child=a,a.return=o,a}function rl(a,o){var d=o.ref;if(d===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(i(284));(a===null||a.ref!==d)&&(o.flags|=4194816)}}function sr(a,o,d,p,b){return _o(o),d=Dc(a,o,d,p,void 0,b),p=bf(),a!==null&&!wn?(xf(a,o,b),Sn(a,o,b)):(vt&&p&&Za(o),o.flags|=1,qn(a,o,d,b),o.child)}function hu(a,o,d,p,b,C){return _o(o),o.updateQueue=null,d=al(o,p,d,b),z0(a),p=bf(),a!==null&&!wn?(xf(a,o,C),Sn(a,o,C)):(vt&&p&&Za(o),o.flags|=1,qn(a,o,d,C),o.child)}function jc(a,o,d,p,b){if(_o(o),o.stateNode===null){var C=ho,M=d.contextType;typeof M=="object"&&M!==null&&(C=Xe(M)),C=new d(p,C),o.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=fu,o.stateNode=C,C._reactInternals=o,C=o.stateNode,C.props=p,C.state=o.memoizedState,C.refs={},ou(o),M=d.contextType,C.context=typeof M=="object"&&M!==null?Xe(M):ho,C.state=o.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(Gc(o,d,M,p),C.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&fu.enqueueReplaceState(C,C.state,null),$l(o,p,C,b),lu(),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!0}else if(a===null){C=o.stateNode;var k=o.memoizedProps,V=Co(d,k);C.props=V;var ne=C.context,de=d.contextType;M=ho,typeof de=="object"&&de!==null&&(M=Xe(de));var me=d.getDerivedStateFromProps;de=typeof me=="function"||typeof C.getSnapshotBeforeUpdate=="function",k=o.pendingProps!==k,de||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(k||ne!==M)&&qf(o,C,p,M),yi=!1;var se=o.memoizedState;C.state=se,$l(o,p,C,b),lu(),ne=o.memoizedState,k||se!==ne||yi?(typeof me=="function"&&(Gc(o,d,me,p),ne=o.memoizedState),(V=yi||Pf(o,d,V,p,se,ne,M))?(de||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(o.flags|=4194308)):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=p,o.memoizedState=ne),C.props=p,C.state=ne,C.context=M,p=V):(typeof C.componentDidMount=="function"&&(o.flags|=4194308),p=!1)}else{C=o.stateNode,mf(a,o),M=o.memoizedProps,de=Co(d,M),C.props=de,me=o.pendingProps,se=C.context,ne=d.contextType,V=ho,typeof ne=="object"&&ne!==null&&(V=Xe(ne)),k=d.getDerivedStateFromProps,(ne=typeof k=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==me||se!==V)&&qf(o,C,p,V),yi=!1,se=o.memoizedState,C.state=se,$l(o,p,C,b),lu();var re=o.memoizedState;M!==me||se!==re||yi||a!==null&&a.dependencies!==null&&nu(a.dependencies)?(typeof k=="function"&&(Gc(o,d,k,p),re=o.memoizedState),(de=yi||Pf(o,d,de,p,se,re,V)||a!==null&&a.dependencies!==null&&nu(a.dependencies))?(ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,re,V),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,re,V)),typeof C.componentDidUpdate=="function"&&(o.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(o.flags|=1024),o.memoizedProps=p,o.memoizedState=re),C.props=p,C.state=re,C.context=V,p=de):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(o.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(o.flags|=1024),p=!1)}return C=p,rl(a,o),p=(o.flags&128)!==0,C||p?(C=o.stateNode,d=p&&typeof d.getDerivedStateFromError!="function"?null:C.render(),o.flags|=1,a!==null&&p?(o.child=Us(o,a.child,null,b),o.child=Us(o,null,d,b)):qn(a,o,d,b),o.memoizedState=C.state,a=o.child):a=Sn(a,o,b),a}function pp(a,o,d,p){return yo(),o.flags|=256,qn(a,o,d,p),o.child}var Jf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ui(a){return{baseLanes:a,cachePool:pf()}}function Yc(a,o,d){return a=a!==null?a.childLanes&~d:0,o&&(a|=xi),a}function mp(a,o,d){var p=o.pendingProps,b=!1,C=(o.flags&128)!==0,M;if((M=C)||(M=a!==null&&a.memoizedState===null?!1:(_t.current&2)!==0),M&&(b=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,a===null){if(vt){if(b?Os(o):Ui(),(a=Pt)?(a=Rv(a,Fi),a=a!==null&&a.data!=="&"?a:null,a!==null&&(o.memoizedState={dehydrated:a,treeContext:Ns!==null?{id:sn,overflow:Da}:null,retryLane:536870912,hydrationErrors:null},d=Yl(a),d.return=o,o.child=d,fn=o,Pt=null)):a=null,a===null)throw Wa(o);return lg(a)?o.lanes=32:o.lanes=536870912,null}var k=p.children;return p=p.fallback,b?(Ui(),b=o.mode,k=Fc({mode:"hidden",children:k},b),p=po(p,b,d,null),k.return=o,p.return=o,k.sibling=p,o.child=k,p=o.child,p.memoizedState=ui(d),p.childLanes=Yc(a,M,d),o.memoizedState=Jf,as(null,p)):(Os(o),pu(o,k))}var V=a.memoizedState;if(V!==null&&(k=V.dehydrated,k!==null)){if(C)o.flags&256?(Os(o),o.flags&=-257,o=Xf(a,o,d)):o.memoizedState!==null?(Ui(),o.child=a.child,o.flags|=128,o=null):(Ui(),k=p.fallback,b=o.mode,p=Fc({mode:"visible",children:p.children},b),k=po(k,b,d,null),k.flags|=2,p.return=o,k.return=o,p.sibling=k,o.child=p,Us(o,a.child,null,d),p=o.child,p.memoizedState=ui(d),p.childLanes=Yc(a,M,d),o.memoizedState=Jf,o=as(null,p));else if(Os(o),lg(k)){if(M=k.nextSibling&&k.nextSibling.dataset,M)var ne=M.dgst;M=ne,p=Error(i(419)),p.stack="",p.digest=M,$a({value:p,source:null,stack:null}),o=Xf(a,o,d)}else if(wn||ns(a,o,d,!1),M=(d&a.childLanes)!==0,wn||M){if(M=$e,M!==null&&(p=Or(M,d),p!==0&&p!==V.retryLane))throw V.retryLane=p,gi(a,p),ut(M,a,p),Bc;og(k)||dr(),o=Xf(a,o,d)}else og(k)?(o.flags|=192,o.child=a.child,o=null):(a=V.treeContext,Pt=hs(k.nextSibling),fn=o,vt=!0,Ms=null,Fi=!1,a!==null&&_c(o,a),o=pu(o,p.children),o.flags|=4096);return o}return b?(Ui(),k=p.fallback,b=o.mode,V=a.child,ne=V.sibling,p=Ni(V,{mode:"hidden",children:p.children}),p.subtreeFlags=V.subtreeFlags&65011712,ne!==null?k=Ni(ne,k):(k=po(k,b,d,null),k.flags|=2),k.return=o,p.return=o,p.sibling=k,o.child=p,as(null,p),p=o.child,k=a.child.memoizedState,k===null?k=ui(d):(b=k.cachePool,b!==null?(V=An._currentValue,b=b.parent!==V?{parent:V,pool:V}:b):b=pf(),k={baseLanes:k.baseLanes|d,cachePool:b}),p.memoizedState=k,p.childLanes=Yc(a,M,d),o.memoizedState=Jf,as(a.child,p)):(Os(o),d=a.child,a=d.sibling,d=Ni(d,{mode:"visible",children:p.children}),d.return=o,d.sibling=null,a!==null&&(M=o.deletions,M===null?(o.deletions=[a],o.flags|=16):M.push(a)),o.child=d,o.memoizedState=null,d)}function pu(a,o){return o=Fc({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Fc(a,o){return a=an(22,a,null,o),a.lanes=0,a}function Xf(a,o,d){return Us(o,a.child,null,d),a=pu(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function gp(a,o,d){a.lanes|=o;var p=a.alternate;p!==null&&(p.lanes|=o),bc(a.return,o,d)}function ul(a,o,d,p,b,C){var M=a.memoizedState;M===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:p,tail:d,tailMode:b,treeForkCount:C}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=p,M.tail=d,M.tailMode=b,M.treeForkCount=C)}function Oi(a,o,d){var p=o.pendingProps,b=p.revealOrder,C=p.tail;p=p.children;var M=_t.current,k=(M&2)!==0;if(k?(M=M&1|2,o.flags|=128):M&=1,be(_t,M),qn(a,o,p,d),p=vt?Kl:0,!k&&a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&gp(a,d,o);else if(a.tag===19)gp(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(b){case"forwards":for(d=o.child,b=null;d!==null;)a=d.alternate,a!==null&&Ji(a)===null&&(b=d),d=d.sibling;d=b,d===null?(b=o.child,o.child=null):(b=d.sibling,d.sibling=null),ul(o,!1,b,d,C,p);break;case"backwards":case"unstable_legacy-backwards":for(d=null,b=o.child,o.child=null;b!==null;){if(a=b.alternate,a!==null&&Ji(a)===null){o.child=b;break}a=b.sibling,b.sibling=d,d=b,b=a}ul(o,!0,d,null,C,p);break;case"together":ul(o,!1,null,null,void 0,p);break;default:o.memoizedState=null}return o.child}function Sn(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),cs|=o.lanes,(d&o.childLanes)===0)if(a!==null){if(ns(a,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(i(153));if(o.child!==null){for(a=o.child,d=Ni(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=Ni(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function Kc(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&nu(a)))}function Jm(a,o,d){switch(o.tag){case 3:Ht(o,o.stateNode.containerInfo),Ds(o,An,a.memoizedState.cache),yo();break;case 27:case 5:Ta(o);break;case 4:Ht(o,o.stateNode.containerInfo);break;case 10:Ds(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,vf(o),null;break;case 13:var p=o.memoizedState;if(p!==null)return p.dehydrated!==null?(Os(o),o.flags|=128,null):(d&o.child.childLanes)!==0?mp(a,o,d):(Os(o),a=Sn(a,o,d),a!==null?a.sibling:null);Os(o);break;case 19:var b=(a.flags&128)!==0;if(p=(d&o.childLanes)!==0,p||(ns(a,o,d,!1),p=(d&o.childLanes)!==0),b){if(p)return Oi(a,o,d);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),be(_t,_t.current),p)break;return null;case 22:return o.lanes=0,ll(a,o,d,o.pendingProps);case 24:Ds(o,An,a.memoizedState.cache)}return Sn(a,o,d)}function Jc(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps)wn=!0;else{if(!Kc(a,d)&&(o.flags&128)===0)return wn=!1,Jm(a,o,d);wn=(a.flags&131072)!==0}else wn=!1,vt&&(o.flags&1048576)!==0&&E0(o,Kl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var p=o.pendingProps;if(a=Wo(o.elementType),o.type=a,typeof a=="function")mc(a)?(p=Co(a,p),o.tag=1,o=jc(null,o,a,p,d)):(o.tag=0,o=sr(null,o,a,p,d));else{if(a!=null){var b=a.$$typeof;if(b===G){o.tag=11,o=Kf(null,o,a,p,d);break e}else if(b===$){o.tag=14,o=ol(null,o,a,p,d);break e}}throw o=De(a)||a,Error(i(306,o,""))}}return o;case 0:return sr(a,o,o.type,o.pendingProps,d);case 1:return p=o.type,b=Co(p,o.pendingProps),jc(a,o,p,b,d);case 3:e:{if(Ht(o,o.stateNode.containerInfo),a===null)throw Error(i(387));p=o.pendingProps;var C=o.memoizedState;b=C.element,mf(a,o),$l(o,p,null,d);var M=o.memoizedState;if(p=M.cache,Ds(o,An,p),p!==C.cache&&xc(o,[An],d,!0),lu(),p=M.element,C.isDehydrated)if(C={element:p,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=C,o.memoizedState=C,o.flags&256){o=pp(a,o,p,d);break e}else if(p!==b){b=Yi(Error(i(424)),o),$a(b),o=pp(a,o,p,d);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Pt=hs(a.firstChild),fn=o,vt=!0,Ms=null,Fi=!0,d=Rc(o,null,p,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(yo(),p===b){o=Sn(a,o,d);break e}qn(a,o,p,d)}o=o.child}return o;case 26:return rl(a,o),a===null?(d=Iv(o.type,null,o.pendingProps,null))?o.memoizedState=d:vt||(d=o.type,a=o.pendingProps,p=Sp(et.current).createElement(d),p[Tn]=o,p[si]=a,Ti(p,d,a),Cn(p),o.stateNode=p):o.memoizedState=Iv(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Ta(o),a===null&&vt&&(p=o.stateNode=Dv(o.type,o.pendingProps,et.current),fn=o,Fi=!0,b=Pt,mr(o.type)?(rg=b,Pt=hs(p.firstChild)):Pt=b),qn(a,o,o.pendingProps.children,d),rl(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&vt&&((b=p=Pt)&&(p=Dx(p,o.type,o.pendingProps,Fi),p!==null?(o.stateNode=p,fn=o,Pt=hs(p.firstChild),Fi=!1,b=!0):b=!1),b||Wa(o)),Ta(o),b=o.type,C=o.pendingProps,M=a!==null?a.memoizedProps:null,p=C.children,ig(b,C)?p=null:M!==null&&ig(b,M)&&(o.flags|=32),o.memoizedState!==null&&(b=Dc(a,o,sl,null,null,d),oh._currentValue=b),rl(a,o),qn(a,o,p,d),o.child;case 6:return a===null&&vt&&((a=d=Pt)&&(d=zx(d,o.pendingProps,Fi),d!==null?(o.stateNode=d,fn=o,Pt=null,a=!0):a=!1),a||Wa(o)),null;case 13:return mp(a,o,d);case 4:return Ht(o,o.stateNode.containerInfo),p=o.pendingProps,a===null?o.child=Us(o,null,p,d):qn(a,o,p,d),o.child;case 11:return Kf(a,o,o.type,o.pendingProps,d);case 7:return qn(a,o,o.pendingProps,d),o.child;case 8:return qn(a,o,o.pendingProps.children,d),o.child;case 12:return qn(a,o,o.pendingProps.children,d),o.child;case 10:return p=o.pendingProps,Ds(o,o.type,p.value),qn(a,o,p.children,d),o.child;case 9:return b=o.type._context,p=o.pendingProps.children,_o(o),b=Xe(b),p=p(b),o.flags|=1,qn(a,o,p,d),o.child;case 14:return ol(a,o,o.type,o.pendingProps,d);case 15:return Pc(a,o,o.type,o.pendingProps,d);case 19:return Oi(a,o,d);case 31:return Vc(a,o,d);case 22:return ll(a,o,d,o.pendingProps);case 24:return _o(o),p=Xe(An),a===null?(b=Tc(),b===null&&(b=$e,C=cf(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=d),b=C),o.memoizedState={parent:p,cache:b},ou(o),Ds(o,An,b)):((a.lanes&d)!==0&&(mf(a,o),$l(o,null,null,d),lu()),b=a.memoizedState,C=o.memoizedState,b.parent!==p?(b={parent:p,cache:p},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),Ds(o,An,p)):(p=C.cache,Ds(o,An,p),p!==b.cache&&xc(o,[An],d,!0))),qn(a,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ss(a){a.flags|=4}function mu(a,o,d,p,b){if((o=(a.mode&32)!==0)&&(o=!1),o){if(a.flags|=16777216,(b&335544128)===b)if(a.stateNode.complete)a.flags|=8192;else if(un())a.flags|=8192;else throw is=Cc,au}else a.flags&=-16777217}function Qf(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!Hv(o))if(un())a.flags|=8192;else throw is=Cc,au}function Ls(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?hi():536870912,a.lanes|=o,Yt|=o)}function os(a,o){if(!vt)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var p=null;d!==null;)d.alternate!==null&&(p=d),d=d.sibling;p===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function Gt(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,p=0;if(o)for(var b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags&65011712,p|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)d|=b.lanes|b.childLanes,p|=b.subtreeFlags,p|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=p,a.childLanes=d,o}function gu(a,o,d){var p=o.pendingProps;switch(vc(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return Gt(o),null;case 3:return d=o.stateNode,p=null,a!==null&&(p=a.memoizedState.cache),o.memoizedState.cache!==p&&(o.flags|=2048),ts(An),gt(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(Xl(o)?ss(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Sc())),Gt(o),null;case 26:var b=o.type,C=o.memoizedState;return a===null?(ss(o),C!==null?(Gt(o),Qf(o,C)):(Gt(o),mu(o,b,null,p,d))):C?C!==a.memoizedState?(ss(o),Gt(o),Qf(o,C)):(Gt(o),o.flags&=-16777217):(a=a.memoizedProps,a!==p&&ss(o),Gt(o),mu(o,b,a,p,d)),null;case 27:if(Ca(o),d=et.current,b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ss(o);else{if(!p){if(o.stateNode===null)throw Error(i(166));return Gt(o),null}a=ze.current,Xl(o)?T0(o):(a=Dv(b,p,d),o.stateNode=a,ss(o))}return Gt(o),null;case 5:if(Ca(o),b=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==p&&ss(o);else{if(!p){if(o.stateNode===null)throw Error(i(166));return Gt(o),null}if(C=ze.current,Xl(o))T0(o);else{var M=Sp(et.current);switch(C){case 1:C=M.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:C=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":C=M.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":C=M.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":C=M.createElement("div"),C.innerHTML="<script><\/script>",C=C.removeChild(C.firstChild);break;case"select":C=typeof p.is=="string"?M.createElement("select",{is:p.is}):M.createElement("select"),p.multiple?C.multiple=!0:p.size&&(C.size=p.size);break;default:C=typeof p.is=="string"?M.createElement(b,{is:p.is}):M.createElement(b)}}C[Tn]=o,C[si]=p;e:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)C.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break e;for(;M.sibling===null;){if(M.return===null||M.return===o)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=C;e:switch(Ti(C,b,p),b){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}p&&ss(o)}}return Gt(o),mu(o,o.type,a===null?null:a.memoizedProps,o.pendingProps,d),null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==p&&ss(o);else{if(typeof p!="string"&&o.stateNode===null)throw Error(i(166));if(a=et.current,Xl(o)){if(a=o.stateNode,d=o.memoizedProps,p=null,b=fn,b!==null)switch(b.tag){case 27:case 5:p=b.memoizedProps}a[Tn]=o,a=!!(a.nodeValue===d||p!==null&&p.suppressHydrationWarning===!0||Sv(a.nodeValue,d)),a||Wa(o,!0)}else a=Sp(a).createTextNode(p),a[Tn]=o,o.stateNode=a}return Gt(o),null;case 31:if(d=o.memoizedState,a===null||a.memoizedState!==null){if(p=Xl(o),d!==null){if(a===null){if(!p)throw Error(i(318));if(a=o.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(i(557));a[Tn]=o}else yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),a=!1}else d=Sc(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=d),a=!0;if(!a)return o.flags&256?(vn(o),o):(vn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Gt(o),null;case 13:if(p=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=Xl(o),p!==null&&p.dehydrated!==null){if(a===null){if(!b)throw Error(i(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(i(317));b[Tn]=o}else yo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),b=!1}else b=Sc(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(vn(o),o):(vn(o),null)}return vn(o),(o.flags&128)!==0?(o.lanes=d,o):(d=p!==null,a=a!==null&&a.memoizedState!==null,d&&(p=o.child,b=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(b=p.alternate.memoizedState.cachePool.pool),C=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(C=p.memoizedState.cachePool.pool),C!==b&&(p.flags|=2048)),d!==a&&d&&(o.child.flags|=8192),Ls(o,o.updateQueue),Gt(o),null);case 4:return gt(),a===null&&Wm(o.stateNode.containerInfo),Gt(o),null;case 10:return ts(o.type),Gt(o),null;case 19:if(W(_t),p=o.memoizedState,p===null)return Gt(o),null;if(b=(o.flags&128)!==0,C=p.rendering,C===null)if(b)os(p,!1);else{if(ln!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(C=Ji(a),C!==null){for(o.flags|=128,os(p,!1),a=C.updateQueue,o.updateQueue=a,Ls(o,a),o.subtreeFlags=0,a=d,d=o.child;d!==null;)jl(d,a),d=d.sibling;return be(_t,_t.current&1|2),vt&&Qa(o,p.treeForkCount),o.child}a=a.sibling}p.tail!==null&&Hn()>bn&&(o.flags|=128,b=!0,os(p,!1),o.lanes=4194304)}else{if(!b)if(a=Ji(C),a!==null){if(o.flags|=128,b=!0,a=a.updateQueue,o.updateQueue=a,Ls(o,a),os(p,!0),p.tail===null&&p.tailMode==="hidden"&&!C.alternate&&!vt)return Gt(o),null}else 2*Hn()-p.renderingStartTime>bn&&d!==536870912&&(o.flags|=128,b=!0,os(p,!1),o.lanes=4194304);p.isBackwards?(C.sibling=o.child,o.child=C):(a=p.last,a!==null?a.sibling=C:o.child=C,p.last=C)}return p.tail!==null?(a=p.tail,p.rendering=a,p.tail=a.sibling,p.renderingStartTime=Hn(),a.sibling=null,d=_t.current,be(_t,b?d&1|2:d&1),vt&&Qa(o,p.treeForkCount),a):(Gt(o),null);case 22:case 23:return vn(o),ru(),p=o.memoizedState!==null,a!==null?a.memoizedState!==null!==p&&(o.flags|=8192):p&&(o.flags|=8192),p?(d&536870912)!==0&&(o.flags&128)===0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),d=o.updateQueue,d!==null&&Ls(o,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==d&&(o.flags|=2048),a!==null&&W(So),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ts(An),Gt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function ma(a,o){switch(vc(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return ts(An),gt(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return Ca(o),null;case 31:if(o.memoizedState!==null){if(vn(o),o.alternate===null)throw Error(i(340));yo()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 13:if(vn(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(i(340));yo()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return W(_t),null;case 4:return gt(),null;case 10:return ts(o.type),null;case 22:case 23:return vn(o),ru(),a!==null&&W(So),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return ts(An),null;case 25:return null;default:return null}}function Xi(a,o){switch(vc(o),o.tag){case 3:ts(An),gt();break;case 26:case 27:case 5:Ca(o);break;case 4:gt();break;case 31:o.memoizedState!==null&&vn(o);break;case 13:vn(o);break;case 19:W(_t);break;case 10:ts(o.type);break;case 22:case 23:vn(o),ru(),a!==null&&W(So);break;case 24:ts(An)}}function ga(a,o){try{var d=o.updateQueue,p=d!==null?d.lastEffect:null;if(p!==null){var b=p.next;d=b;do{if((d.tag&a)===a){p=void 0;var C=d.create,M=d.inst;p=C(),M.destroy=p}d=d.next}while(d!==b)}}catch(k){wt(o,o.return,k)}}function Qn(a,o,d){try{var p=o.updateQueue,b=p!==null?p.lastEffect:null;if(b!==null){var C=b.next;p=C;do{if((p.tag&a)===a){var M=p.inst,k=M.destroy;if(k!==void 0){M.destroy=void 0,b=o;var V=d,ne=k;try{ne()}catch(de){wt(b,V,de)}}}p=p.next}while(p!==C)}}catch(de){wt(o,o.return,de)}}function za(a){var o=a.updateQueue;if(o!==null){var d=a.stateNode;try{N0(o,d)}catch(p){wt(a,a.return,p)}}}function Vn(a,o,d){d.props=Co(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(p){wt(a,o,p)}}function Gs(a,o){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var p=a.stateNode;break;case 30:p=a.stateNode;break;default:p=a.stateNode}typeof d=="function"?a.refCleanup=d(p):d.current=p}}catch(b){wt(a,o,b)}}function Zn(a,o){var d=a.ref,p=a.refCleanup;if(d!==null)if(typeof p=="function")try{p()}catch(b){wt(a,o,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(b){wt(a,o,b)}else d.current=null}function yu(a){var o=a.type,d=a.memoizedProps,p=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&p.focus();break e;case"img":d.src?p.src=d.src:d.srcSet&&(p.srcset=d.srcSet)}}catch(b){wt(a,a.return,b)}}function kn(a,o,d){try{var p=a.stateNode;Cx(p,a.type,d,o),p[si]=o}catch(b){wt(a,a.return,b)}}function Qt(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&mr(a.type)||a.tag===4}function pt(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||Qt(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&mr(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ls(a,o,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(a),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=As));else if(p!==4&&(p===27&&mr(a.type)&&(d=a.stateNode,o=null),a=a.child,a!==null))for(ls(a,o,d),a=a.sibling;a!==null;)ls(a,o,d),a=a.sibling}function _i(a,o,d){var p=a.tag;if(p===5||p===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(p!==4&&(p===27&&mr(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(_i(a,o,d),a=a.sibling;a!==null;)_i(a,o,d),a=a.sibling}function Xc(a){var o=a.stateNode,d=a.memoizedProps;try{for(var p=a.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);Ti(o,p,d),o[Tn]=a,o[si]=d}catch(C){wt(a,a.return,C)}}var ya=!1,qt=!1,Ua=!1,yp=typeof WeakSet=="function"?WeakSet:Set,jn=null;function Xm(a,o){if(a=a.containerInfo,tg=wp,a=_0(a),sf(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var p=d.getSelection&&d.getSelection();if(p&&p.rangeCount!==0){d=p.anchorNode;var b=p.anchorOffset,C=p.focusNode;p=p.focusOffset;try{d.nodeType,C.nodeType}catch{d=null;break e}var M=0,k=-1,V=-1,ne=0,de=0,me=a,se=null;t:for(;;){for(var re;me!==d||b!==0&&me.nodeType!==3||(k=M+b),me!==C||p!==0&&me.nodeType!==3||(V=M+p),me.nodeType===3&&(M+=me.nodeValue.length),(re=me.firstChild)!==null;)se=me,me=re;for(;;){if(me===a)break t;if(se===d&&++ne===b&&(k=M),se===C&&++de===p&&(V=M),(re=me.nextSibling)!==null)break;me=se,se=me.parentNode}me=re}d=k===-1||V===-1?null:{start:k,end:V}}else d=null}d=d||{start:0,end:0}}else d=null;for(ng={focusedElem:a,selectionRange:d},wp=!1,jn=o;jn!==null;)if(o=jn,a=o.child,(o.subtreeFlags&1028)!==0&&a!==null)a.return=o,jn=a;else for(;jn!==null;){switch(o=jn,C=o.alternate,a=o.flags,o.tag){case 0:if((a&4)!==0&&(a=o.updateQueue,a=a!==null?a.events:null,a!==null))for(d=0;d<a.length;d++)b=a[d],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,d=o,b=C.memoizedProps,C=C.memoizedState,p=d.stateNode;try{var ke=Co(d.type,b);a=p.getSnapshotBeforeUpdate(ke,C),p.__reactInternalSnapshotBeforeUpdate=a}catch(Je){wt(d,d.return,Je)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,d=a.nodeType,d===9)sg(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":sg(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(i(163))}if(a=o.sibling,a!==null){a.return=o.return,jn=a;break}jn=o.return}}function Zt(a,o,d){var p=d.flags;switch(d.tag){case 0:case 11:case 15:Sa(a,d),p&4&&ga(5,d);break;case 1:if(Sa(a,d),p&4)if(a=d.stateNode,o===null)try{a.componentDidMount()}catch(M){wt(d,d.return,M)}else{var b=Co(d.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(b,o,a.__reactInternalSnapshotBeforeUpdate)}catch(M){wt(d,d.return,M)}}p&64&&za(d),p&512&&Gs(d,d.return);break;case 3:if(Sa(a,d),p&64&&(a=d.updateQueue,a!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{N0(a,o)}catch(M){wt(d,d.return,M)}}break;case 27:o===null&&p&4&&Xc(d);case 26:case 5:Sa(a,d),o===null&&p&4&&yu(d),p&512&&Gs(d,d.return);break;case 12:Sa(a,d);break;case 31:Sa(a,d),p&4&&Ao(a,d);break;case 13:Sa(a,d),p&4&&or(a,d),p&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=g.bind(null,d),Ux(a,d))));break;case 22:if(p=d.memoizedState!==null||ya,!p){o=o!==null&&o.memoizedState!==null||qt,b=ya;var C=qt;ya=p,(qt=o)&&!C?Si(a,d,(d.subtreeFlags&8772)!==0):Sa(a,d),ya=b,qt=C}break;case 30:break;default:Sa(a,d)}}function vu(a){var o=a.alternate;o!==null&&(a.alternate=null,vu(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Ho(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var zt=null,ci=!1;function va(a,o,d){for(d=d.child;d!==null;)Qc(a,o,d),d=d.sibling}function Qc(a,o,d){if(ii&&typeof ii.onCommitFiberUnmount=="function")try{ii.onCommitFiberUnmount(to,d)}catch{}switch(d.tag){case 26:qt||Zn(d,o),va(a,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:qt||Zn(d,o);var p=zt,b=ci;mr(d.type)&&(zt=d.stateNode,ci=!1),va(a,o,d),ih(d.stateNode),zt=p,ci=b;break;case 5:qt||Zn(d,o);case 6:if(p=zt,b=ci,zt=null,va(a,o,d),zt=p,ci=b,zt!==null)if(ci)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(d.stateNode)}catch(C){wt(d,o,C)}else try{zt.removeChild(d.stateNode)}catch(C){wt(d,o,C)}break;case 18:zt!==null&&(ci?(a=zt,Av(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),ad(a)):Av(zt,d.stateNode));break;case 4:p=zt,b=ci,zt=d.stateNode.containerInfo,ci=!0,va(a,o,d),zt=p,ci=b;break;case 0:case 11:case 14:case 15:Qn(2,d,o),qt||Qn(4,d,o),va(a,o,d);break;case 1:qt||(Zn(d,o),p=d.stateNode,typeof p.componentWillUnmount=="function"&&Vn(d,o,p)),va(a,o,d);break;case 21:va(a,o,d);break;case 22:qt=(p=qt)||d.memoizedState!==null,va(a,o,d),qt=p;break;default:va(a,o,d)}}function Ao(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{ad(a)}catch(d){wt(o,o.return,d)}}}function or(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{ad(a)}catch(d){wt(o,o.return,d)}}function Zf(a){switch(a.tag){case 31:case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new yp),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new yp),o;default:throw Error(i(435,a.tag))}}function Hs(a,o){var d=Zf(a);o.forEach(function(p){if(!d.has(p)){d.add(p);var b=S.bind(null,a,p);p.then(b,b)}})}function Ln(a,o){var d=o.deletions;if(d!==null)for(var p=0;p<d.length;p++){var b=d[p],C=a,M=o,k=M;e:for(;k!==null;){switch(k.tag){case 27:if(mr(k.type)){zt=k.stateNode,ci=!1;break e}break;case 5:zt=k.stateNode,ci=!1;break e;case 3:case 4:zt=k.stateNode.containerInfo,ci=!0;break e}k=k.return}if(zt===null)throw Error(i(160));Qc(C,M,b),zt=null,ci=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)wo(o,a),o=o.sibling}var _a=null;function wo(a,o){var d=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ln(o,a),Gn(a),p&4&&(Qn(3,a,a.return),ga(3,a),Qn(5,a,a.return));break;case 1:Ln(o,a),Gn(a),p&512&&(qt||d===null||Zn(d,d.return)),p&64&&ya&&(a=a.updateQueue,a!==null&&(p=a.callbacks,p!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?p:d.concat(p))));break;case 26:var b=_a;if(Ln(o,a),Gn(a),p&512&&(qt||d===null||Zn(d,d.return)),p&4){var C=d!==null?d.memoizedState:null;if(p=a.memoizedState,d===null)if(p===null)if(a.stateNode===null){e:{p=a.type,d=a.memoizedProps,b=b.ownerDocument||b;t:switch(p){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Es]||C[Tn]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(p),b.head.insertBefore(C,b.querySelector("head > title"))),Ti(C,p,d),C[Tn]=a,Cn(C),p=C;break e;case"link":var M=Lv("link","href",b).get(p+(d.href||""));if(M){for(var k=0;k<M.length;k++)if(C=M[k],C.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&C.getAttribute("rel")===(d.rel==null?null:d.rel)&&C.getAttribute("title")===(d.title==null?null:d.title)&&C.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){M.splice(k,1);break t}}C=b.createElement(p),Ti(C,p,d),b.head.appendChild(C);break;case"meta":if(M=Lv("meta","content",b).get(p+(d.content||""))){for(k=0;k<M.length;k++)if(C=M[k],C.getAttribute("content")===(d.content==null?null:""+d.content)&&C.getAttribute("name")===(d.name==null?null:d.name)&&C.getAttribute("property")===(d.property==null?null:d.property)&&C.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&C.getAttribute("charset")===(d.charSet==null?null:d.charSet)){M.splice(k,1);break t}}C=b.createElement(p),Ti(C,p,d),b.head.appendChild(C);break;default:throw Error(i(468,p))}C[Tn]=a,Cn(C),p=C}a.stateNode=p}else Gv(b,a.type,a.stateNode);else a.stateNode=kv(b,p,a.memoizedProps);else C!==p?(C===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):C.count--,p===null?Gv(b,a.type,a.stateNode):kv(b,p,a.memoizedProps)):p===null&&a.stateNode!==null&&kn(a,a.memoizedProps,d.memoizedProps)}break;case 27:Ln(o,a),Gn(a),p&512&&(qt||d===null||Zn(d,d.return)),d!==null&&p&4&&kn(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Ln(o,a),Gn(a),p&512&&(qt||d===null||Zn(d,d.return)),a.flags&32){b=a.stateNode;try{qo(b,"")}catch(ke){wt(a,a.return,ke)}}p&4&&a.stateNode!=null&&(b=a.memoizedProps,kn(a,b,d!==null?d.memoizedProps:b)),p&1024&&(Ua=!0);break;case 6:if(Ln(o,a),Gn(a),p&4){if(a.stateNode===null)throw Error(i(162));p=a.memoizedProps,d=a.stateNode;try{d.nodeValue=p}catch(ke){wt(a,a.return,ke)}}break;case 3:if(Ep=null,b=_a,_a=bp(o.containerInfo),Ln(o,a),_a=b,Gn(a),p&4&&d!==null&&d.memoizedState.isDehydrated)try{ad(o.containerInfo)}catch(ke){wt(a,a.return,ke)}Ua&&(Ua=!1,Zc(a));break;case 4:p=_a,_a=bp(a.stateNode.containerInfo),Ln(o,a),Gn(a),_a=p;break;case 12:Ln(o,a),Gn(a);break;case 31:Ln(o,a),Gn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Hs(a,p)));break;case 13:Ln(o,a),Gn(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(lr=Hn()),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Hs(a,p)));break;case 22:b=a.memoizedState!==null;var V=d!==null&&d.memoizedState!==null,ne=ya,de=qt;if(ya=ne||b,qt=de||V,Ln(o,a),qt=de,ya=ne,Gn(a),p&8192)e:for(o=a.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(d===null||V||ya||qt||rs(a)),d=null,o=a;;){if(o.tag===5||o.tag===26){if(d===null){V=d=o;try{if(C=V.stateNode,b)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{k=V.stateNode;var me=V.memoizedProps.style,se=me!=null&&me.hasOwnProperty("display")?me.display:null;k.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(ke){wt(V,V.return,ke)}}}else if(o.tag===6){if(d===null){V=o;try{V.stateNode.nodeValue=b?"":V.memoizedProps}catch(ke){wt(V,V.return,ke)}}}else if(o.tag===18){if(d===null){V=o;try{var re=V.stateNode;b?wv(re,!0):wv(V.stateNode,!1)}catch(ke){wt(V,V.return,ke)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}p&4&&(p=a.updateQueue,p!==null&&(d=p.retryQueue,d!==null&&(p.retryQueue=null,Hs(a,d))));break;case 19:Ln(o,a),Gn(a),p&4&&(p=a.updateQueue,p!==null&&(a.updateQueue=null,Hs(a,p)));break;case 30:break;case 21:break;default:Ln(o,a),Gn(a)}}function Gn(a){var o=a.flags;if(o&2){try{for(var d,p=a.return;p!==null;){if(Qt(p)){d=p;break}p=p.return}if(d==null)throw Error(i(160));switch(d.tag){case 27:var b=d.stateNode,C=pt(a);_i(a,C,b);break;case 5:var M=d.stateNode;d.flags&32&&(qo(M,""),d.flags&=-33);var k=pt(a);_i(a,k,M);break;case 3:case 4:var V=d.stateNode.containerInfo,ne=pt(a);ls(a,ne,V);break;default:throw Error(i(161))}}catch(de){wt(a,a.return,de)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function Zc(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;Zc(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function Sa(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Zt(a,o.alternate,o),o=o.sibling}function rs(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:Qn(4,o,o.return),rs(o);break;case 1:Zn(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&Vn(o,o.return,d),rs(o);break;case 27:ih(o.stateNode);case 26:case 5:Zn(o,o.return),rs(o);break;case 22:o.memoizedState===null&&rs(o);break;case 30:rs(o);break;default:rs(o)}a=a.sibling}}function Si(a,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var p=o.alternate,b=a,C=o,M=C.flags;switch(C.tag){case 0:case 11:case 15:Si(b,C,d),ga(4,C);break;case 1:if(Si(b,C,d),p=C,b=p.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(ne){wt(p,p.return,ne)}if(p=C,b=p.updateQueue,b!==null){var k=p.stateNode;try{var V=b.shared.hiddenCallbacks;if(V!==null)for(b.shared.hiddenCallbacks=null,b=0;b<V.length;b++)er(V[b],k)}catch(ne){wt(p,p.return,ne)}}d&&M&64&&za(C),Gs(C,C.return);break;case 27:Xc(C);case 26:case 5:Si(b,C,d),d&&p===null&&M&4&&yu(C),Gs(C,C.return);break;case 12:Si(b,C,d);break;case 31:Si(b,C,d),d&&M&4&&Ao(b,C);break;case 13:Si(b,C,d),d&&M&4&&or(b,C);break;case 22:C.memoizedState===null&&Si(b,C,d),Gs(C,C.return);break;case 30:break;default:Si(b,C,d)}o=o.sibling}}function Ro(a,o){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&Qo(d))}function cl(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Qo(a))}function Wn(a,o,d,p){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Wf(a,o,d,p),o=o.sibling}function Wf(a,o,d,p){var b=o.flags;switch(o.tag){case 0:case 11:case 15:Wn(a,o,d,p),b&2048&&ga(9,o);break;case 1:Wn(a,o,d,p);break;case 3:Wn(a,o,d,p),b&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&Qo(a)));break;case 12:if(b&2048){Wn(a,o,d,p),a=o.stateNode;try{var C=o.memoizedProps,M=C.id,k=C.onPostCommit;typeof k=="function"&&k(M,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(V){wt(o,o.return,V)}}else Wn(a,o,d,p);break;case 31:Wn(a,o,d,p);break;case 13:Wn(a,o,d,p);break;case 23:break;case 22:C=o.stateNode,M=o.alternate,o.memoizedState!==null?C._visibility&2?Wn(a,o,d,p):us(a,o):C._visibility&2?Wn(a,o,d,p):(C._visibility|=2,$n(a,o,d,p,(o.subtreeFlags&10256)!==0||!1)),b&2048&&Ro(M,o);break;case 24:Wn(a,o,d,p),b&2048&&cl(o.alternate,o);break;default:Wn(a,o,d,p)}}function $n(a,o,d,p,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var C=a,M=o,k=d,V=p,ne=M.flags;switch(M.tag){case 0:case 11:case 15:$n(C,M,k,V,b),ga(8,M);break;case 23:break;case 22:var de=M.stateNode;M.memoizedState!==null?de._visibility&2?$n(C,M,k,V,b):us(C,M):(de._visibility|=2,$n(C,M,k,V,b)),b&&ne&2048&&Ro(M.alternate,M);break;case 24:$n(C,M,k,V,b),b&&ne&2048&&cl(M.alternate,M);break;default:$n(C,M,k,V,b)}o=o.sibling}}function us(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=a,p=o,b=p.flags;switch(p.tag){case 22:us(d,p),b&2048&&Ro(p.alternate,p);break;case 24:us(d,p),b&2048&&cl(p.alternate,p);break;default:us(d,p)}o=o.sibling}}var dl=8192;function Qi(a,o,d){if(a.subtreeFlags&dl)for(a=a.child;a!==null;)Wc(a,o,d),a=a.sibling}function Wc(a,o,d){switch(a.tag){case 26:Qi(a,o,d),a.flags&dl&&a.memoizedState!==null&&Yx(d,_a,a.memoizedState,a.memoizedProps);break;case 5:Qi(a,o,d);break;case 3:case 4:var p=_a;_a=bp(a.stateNode.containerInfo),Qi(a,o,d),_a=p;break;case 22:a.memoizedState===null&&(p=a.alternate,p!==null&&p.memoizedState!==null?(p=dl,dl=16777216,Qi(a,o,d),dl=p):Qi(a,o,d));break;default:Qi(a,o,d)}}function fl(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function No(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];jn=p,hn(p,a)}fl(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)ki(a),a=a.sibling}function ki(a){switch(a.tag){case 0:case 11:case 15:No(a),a.flags&2048&&Qn(9,a,a.return);break;case 3:No(a);break;case 12:No(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,bi(a)):No(a);break;default:No(a)}}function bi(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var p=o[d];jn=p,hn(p,a)}fl(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:Qn(8,o,o.return),bi(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,bi(o));break;default:bi(o)}a=a.sibling}}function hn(a,o){for(;jn!==null;){var d=jn;switch(d.tag){case 0:case 11:case 15:Qn(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var p=d.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Qo(d.memoizedState.cache)}if(p=d.child,p!==null)p.return=d,jn=p;else e:for(d=a;jn!==null;){p=jn;var b=p.sibling,C=p.return;if(vu(p),p===d){jn=null;break e}if(b!==null){b.return=C,jn=b;break e}jn=C}}}var Bs={getCacheForType:function(a){var o=Xe(An),d=o.data.get(a);return d===void 0&&(d=a(),o.data.set(a,d)),d},cacheSignal:function(){return Xe(An).controller.signal}},at=typeof WeakMap=="function"?WeakMap:Map,Be=0,$e=null,rt=null,ot=0,St=0,di=null,ba=!1,Ia=!1,$f=!1,Zi=0,ln=0,cs=0,Mo=0,_u=0,xi=0,Yt=0,hl=null,pn=null,mn=!1,lr=0,eh=0,bn=1/0,rn=null,xn=null,Ut=0,Wi=null,rr=null,xa=0,ur=0,cr=null,Su=null,Do=0,pl=null;function $i(){return(Be&2)!==0&&ot!==0?ot&-ot:Y.T!==null?oe():Ri()}function dt(){if(xi===0)if((ot&536870912)===0||vt){var a=ve;ve<<=1,(ve&3932160)===0&&(ve=262144),xi=a}else xi=536870912;return a=zi.current,a!==null&&(a.flags|=32),xi}function ut(a,o,d){(a===$e&&(St===2||St===9)||a.cancelPendingCommit!==null)&&(Uo(a,0),Rn(a,ot,xi,!1)),Pi(a,d),((Be&2)===0||a!==$e)&&(a===$e&&((Be&2)===0&&(Mo|=d),ln===4&&Rn(a,ot,xi,!1)),_e(a))}function ft(a,o,d){if((Be&6)!==0)throw Error(i(327));var p=!d&&(o&127)===0&&(o&a.expiredLanes)===0||yn(a,o),b=p?bu(a,o):Ei(a,o,!0),C=p;do{if(b===0){Ia&&!p&&Rn(a,o,0,!1);break}else{if(d=a.current.alternate,C&&!It(d)){b=Ei(a,o,!1),C=!1;continue}if(b===2){if(C=o,a.errorRecoveryDisabledLanes&C)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;e:{var k=a;b=hl;var V=k.current.memoizedState.isDehydrated;if(V&&(Uo(k,M).flags|=256),M=Ei(k,M,!1),M!==2){if($f&&!V){k.errorRecoveryDisabledLanes|=C,Mo|=C,b=4;break e}C=pn,pn=b,C!==null&&(pn===null?pn=C:pn.push.apply(pn,C))}b=M}if(C=!1,b!==2)continue}}if(b===1){Uo(a,0),Rn(a,o,0,!0);break}e:{switch(p=a,C=b,C){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Rn(p,o,xi,!ba);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(b=lr+300-Hn(),10<b)){if(Rn(p,o,xi,!ba),kt(p,0,!0)!==0)break e;xa=o,p.timeoutHandle=Tv(mt.bind(null,p,d,pn,rn,mn,o,xi,Mo,Yt,ba,C,"Throttled",-0,0),b);break e}mt(p,d,pn,rn,mn,o,xi,Mo,Yt,ba,C,null,-0,0)}}break}while(!0);_e(a)}function mt(a,o,d,p,b,C,M,k,V,ne,de,me,se,re){if(a.timeoutHandle=-1,me=o.subtreeFlags,me&8192||(me&16785408)===16785408){me={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:As},Wc(o,C,me);var ke=(C&62914560)===C?lr-Hn():(C&4194048)===C?eh-Hn():0;if(ke=Fx(me,ke),ke!==null){xa=C,a.cancelPendingCommit=ke(qs.bind(null,a,o,C,d,p,b,M,k,V,de,me,null,se,re)),Rn(a,C,M,!ne);return}}qs(a,o,C,d,p,b,M,k,V)}function It(a){for(var o=a;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var p=0;p<d.length;p++){var b=d[p],C=b.getSnapshot;b=b.value;try{if(!mi(C(),b))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Rn(a,o,d,p){o&=~_u,o&=~Mo,a.suspendedLanes|=o,a.pingedLanes&=~o,p&&(a.warmLanes|=o),p=a.expirationTimes;for(var b=o;0<b;){var C=31-ai(b),M=1<<C;p[C]=-1,b&=~M}d!==0&&Na(a,d,o)}function Oa(){return(Be&6)===0?(Ue(0),!1):!0}function zo(){if(rt!==null){if(St===0)var a=rt.return;else a=rt,es=vo=null,Ef(a),tl=null,nl=0,a=rt;for(;a!==null;)Xi(a.alternate,a),a=a.return;rt=null}}function Uo(a,o){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,Rx(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),xa=0,zo(),$e=a,rt=d=Ni(a.current,null),ot=o,St=0,di=null,ba=!1,Ia=yn(a,o),$f=!1,Yt=xi=_u=Mo=cs=ln=0,pn=hl=null,mn=!1,(o&8)!==0&&(o|=o&32);var p=a.entangledLanes;if(p!==0)for(a=a.entanglements,p&=o;0<p;){var b=31-ai(p),C=1<<b;o|=a[b],p&=~C}return Zi=o,eu(),d}function ds(a,o){it=null,Y.H=ar,o===Zo||o===lt?(o=$o(),St=3):o===au?(o=$o(),St=4):St=o===Bc?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,di=o,rt===null&&(ln=1,Hc(a,Yi(o,a.current)))}function un(){var a=zi.current;return a===null?!0:(ot&4194048)===ot?vi===null:(ot&62914560)===ot||(ot&536870912)!==0?a===vi:!1}function Ps(){var a=Y.H;return Y.H=ar,a===null?ar:a}function Io(){var a=Y.A;return Y.A=Bs,a}function dr(){ln=4,ba||(ot&4194048)!==ot&&zi.current!==null||(Ia=!0),(cs&134217727)===0&&(Mo&134217727)===0||$e===null||Rn($e,ot,xi,!1)}function Ei(a,o,d){var p=Be;Be|=2;var b=Ps(),C=Io();($e!==a||ot!==o)&&(rn=null,Uo(a,o)),o=!1;var M=ln;e:do try{if(St!==0&&rt!==null){var k=rt,V=di;switch(St){case 8:zo(),M=6;break e;case 3:case 2:case 9:case 6:zi.current===null&&(o=!0);var ne=St;if(St=0,di=null,ml(a,k,V,ne),d&&Ia){M=0;break e}break;default:ne=St,St=0,di=null,ml(a,k,V,ne)}}fr(),M=ln;break}catch(de){ds(a,de)}while(!0);return o&&a.shellSuspendCounter++,es=vo=null,Be=p,Y.H=b,Y.A=C,rt===null&&($e=null,ot=0,eu()),M}function fr(){for(;rt!==null;)$c(rt)}function bu(a,o){var d=Be;Be|=2;var p=Ps(),b=Io();$e!==a||ot!==o?(rn=null,bn=Hn()+500,Uo(a,o)):Ia=yn(a,o);e:do try{if(St!==0&&rt!==null){o=rt;var C=di;t:switch(St){case 1:St=0,di=null,ml(a,o,C,1);break;case 2:case 9:if(Di(C)){St=0,di=null,xu(o);break}o=function(){St!==2&&St!==9||$e!==a||(St=7),_e(a)},C.then(o,o);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:Di(C)?(St=0,di=null,xu(o)):(St=0,di=null,ml(a,o,C,7));break;case 5:var M=null;switch(rt.tag){case 26:M=rt.memoizedState;case 5:case 27:var k=rt;if(M?Hv(M):k.stateNode.complete){St=0,di=null;var V=k.sibling;if(V!==null)rt=V;else{var ne=k.return;ne!==null?(rt=ne,Oo(ne)):rt=null}break t}}St=0,di=null,ml(a,o,C,5);break;case 6:St=0,di=null,ml(a,o,C,6);break;case 8:zo(),ln=6;break e;default:throw Error(i(462))}}Li();break}catch(de){ds(a,de)}while(!0);return es=vo=null,Y.H=p,Y.A=b,Be=d,rt!==null?0:($e=null,ot=0,eu(),ln)}function Li(){for(;rt!==null&&!Aa();)$c(rt)}function $c(a){var o=Jc(a.alternate,a,Zi);a.memoizedProps=a.pendingProps,o===null?Oo(a):rt=o}function xu(a){var o=a,d=o.alternate;switch(o.tag){case 15:case 0:o=hu(d,o,o.pendingProps,o.type,void 0,ot);break;case 11:o=hu(d,o,o.pendingProps,o.type.render,o.ref,ot);break;case 5:Ef(o);default:Xi(d,o),o=rt=jl(o,Zi),o=Jc(d,o,Zi)}a.memoizedProps=a.pendingProps,o===null?Oo(a):rt=o}function ml(a,o,d,p){es=vo=null,Ef(o),tl=null,nl=0;var b=o.return;try{if(On(a,b,o,d,ot)){ln=1,Hc(a,Yi(d,a.current)),rt=null;return}}catch(C){if(b!==null)throw rt=b,C;ln=1,Hc(a,Yi(d,a.current)),rt=null;return}o.flags&32768?(vt||p===1?a=!0:Ia||(ot&536870912)!==0?a=!1:(ba=a=!0,(p===2||p===9||p===3||p===6)&&(p=zi.current,p!==null&&p.tag===13&&(p.flags|=16384))),Eu(o,a)):Oo(o)}function Oo(a){var o=a;do{if((o.flags&32768)!==0){Eu(o,ba);return}a=o.return;var d=gu(o.alternate,o,Zi);if(d!==null){rt=d;return}if(o=o.sibling,o!==null){rt=o;return}rt=o=a}while(o!==null);ln===0&&(ln=5)}function Eu(a,o){do{var d=ma(a.alternate,a);if(d!==null){d.flags&=32767,rt=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(a=a.sibling,a!==null)){rt=a;return}rt=a=d}while(a!==null);ln=6,rt=null}function qs(a,o,d,p,b,C,M,k,V){a.cancelPendingCommit=null;do hr();while(Ut!==0);if((Be&6)!==0)throw Error(i(327));if(o!==null){if(o===a.current)throw Error(i(177));if(C=o.lanes|o.childLanes,C|=Bn,Ra(a,d,C,M,k,V),a===$e&&(rt=$e=null,ot=0),rr=o,Wi=a,xa=d,ur=C,cr=b,Su=p,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,A(qa,function(){return ed(),null})):(a.callbackNode=null,a.callbackPriority=0),p=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||p){p=Y.T,Y.T=null,b=he.p,he.p=2,M=Be,Be|=4;try{Xm(a,o,d)}finally{Be=M,he.p=b,Y.T=p}}Ut=1,Nn(),Vs(),gl()}}function Nn(){if(Ut===1){Ut=0;var a=Wi,o=rr,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=Y.T,Y.T=null;var p=he.p;he.p=2;var b=Be;Be|=4;try{wo(o,a);var C=ng,M=_0(a.containerInfo),k=C.focusedElem,V=C.selectionRange;if(M!==k&&k&&k.ownerDocument&&Bt(k.ownerDocument.documentElement,k)){if(V!==null&&sf(k)){var ne=V.start,de=V.end;if(de===void 0&&(de=ne),"selectionStart"in k)k.selectionStart=ne,k.selectionEnd=Math.min(de,k.value.length);else{var me=k.ownerDocument||document,se=me&&me.defaultView||window;if(se.getSelection){var re=se.getSelection(),ke=k.textContent.length,Je=Math.min(V.start,ke),jt=V.end===void 0?Je:Math.min(V.end,ke);!re.extend&&Je>jt&&(M=jt,jt=Je,Je=M);var X=Pl(k,Je),F=Pl(k,jt);if(X&&F&&(re.rangeCount!==1||re.anchorNode!==X.node||re.anchorOffset!==X.offset||re.focusNode!==F.node||re.focusOffset!==F.offset)){var te=me.createRange();te.setStart(X.node,X.offset),re.removeAllRanges(),Je>jt?(re.addRange(te),re.extend(F.node,F.offset)):(te.setEnd(F.node,F.offset),re.addRange(te))}}}}for(me=[],re=k;re=re.parentNode;)re.nodeType===1&&me.push({element:re,left:re.scrollLeft,top:re.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<me.length;k++){var pe=me[k];pe.element.scrollLeft=pe.left,pe.element.scrollTop=pe.top}}wp=!!tg,ng=tg=null}finally{Be=b,he.p=p,Y.T=d}}a.current=o,Ut=2}}function Vs(){if(Ut===2){Ut=0;var a=Wi,o=rr,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=Y.T,Y.T=null;var p=he.p;he.p=2;var b=Be;Be|=4;try{Zt(a,o.alternate,o)}finally{Be=b,he.p=p,Y.T=d}}Ut=3}}function gl(){if(Ut===4||Ut===3){Ut=0,gn();var a=Wi,o=rr,d=xa,p=Su;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ut=5:(Ut=0,rr=Wi=null,fs(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(xn=null),Un(d),o=o.stateNode,ii&&typeof ii.onCommitFiberRoot=="function")try{ii.onCommitFiberRoot(to,o,void 0,(o.current.flags&128)===128)}catch{}if(p!==null){o=Y.T,b=he.p,he.p=2,Y.T=null;try{for(var C=a.onRecoverableError,M=0;M<p.length;M++){var k=p[M];C(k.value,{componentStack:k.stack})}}finally{Y.T=o,he.p=b}}(xa&3)!==0&&hr(),_e(a),b=a.pendingLanes,(d&261930)!==0&&(b&42)!==0?a===pl?Do++:(Do=0,pl=a):Do=0,Ue(0)}}function fs(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,Qo(o)))}function hr(){return Nn(),Vs(),gl(),ed()}function ed(){if(Ut!==5)return!1;var a=Wi,o=ur;ur=0;var d=Un(xa),p=Y.T,b=he.p;try{he.p=32>d?32:d,Y.T=null,d=cr,cr=null;var C=Wi,M=xa;if(Ut=0,rr=Wi=null,xa=0,(Be&6)!==0)throw Error(i(331));var k=Be;if(Be|=4,ki(C.current),Wf(C,C.current,M,d),Be=k,Ue(0,!1),ii&&typeof ii.onPostCommitFiberRoot=="function")try{ii.onPostCommitFiberRoot(to,C)}catch{}return!0}finally{he.p=b,Y.T=p,fs(a,o)}}function th(a,o,d){o=Yi(d,o),o=Yf(a.stateNode,o,2),a=bo(a,o,2),a!==null&&(Pi(a,2),_e(a))}function wt(a,o,d){if(a.tag===3)th(a,a,d);else for(;o!==null;){if(o.tag===3){th(o,a,d);break}else if(o.tag===1){var p=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(xn===null||!xn.has(p))){a=Yi(d,a),d=Ff(2),p=bo(o,d,2),p!==null&&(fp(d,p,o,a),Pi(p,2),_e(p));break}}o=o.return}}function Tu(a,o,d){var p=a.pingCache;if(p===null){p=a.pingCache=new at;var b=new Set;p.set(o,b)}else b=p.get(o),b===void 0&&(b=new Set,p.set(o,b));b.has(d)||($f=!0,b.add(d),a=r.bind(null,a,o,d),o.then(a,a))}function r(a,o,d){var p=a.pingCache;p!==null&&p.delete(o),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,$e===a&&(ot&d)===d&&(ln===4||ln===3&&(ot&62914560)===ot&&300>Hn()-lr?(Be&2)===0&&Uo(a,0):_u|=d,Yt===ot&&(Yt=0)),_e(a)}function u(a,o){o===0&&(o=hi()),a=gi(a,o),a!==null&&(Pi(a,o),_e(a))}function g(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),u(a,d)}function S(a,o){var d=0;switch(a.tag){case 31:case 13:var p=a.stateNode,b=a.memoizedState;b!==null&&(d=b.retryLane);break;case 19:p=a.stateNode;break;case 22:p=a.stateNode._retryCache;break;default:throw Error(i(314))}p!==null&&p.delete(o),u(a,d)}function A(a,o){return dn(a,o)}var w=null,O=null,j=!1,le=!1,ye=!1,Ae=0;function _e(a){a!==O&&a.next===null&&(O===null?w=O=a:O=O.next=a),le=!0,j||(j=!0,Z())}function Ue(a,o){if(!ye&&le){ye=!0;do for(var d=!1,p=w;p!==null;){if(a!==0){var b=p.pendingLanes;if(b===0)var C=0;else{var M=p.suspendedLanes,k=p.pingedLanes;C=(1<<31-ai(42|a)+1)-1,C&=b&~(M&~k),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(d=!0,ie(p,C))}else C=ot,C=kt(p,p===$e?C:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(C&3)===0||yn(p,C)||(d=!0,ie(p,C));p=p.next}while(d);ye=!1}}function tt(){Yn()}function Yn(){le=j=!1;var a=0;Ae!==0&&wx()&&(a=Ae);for(var o=Hn(),d=null,p=w;p!==null;){var b=p.next,C=pr(p,o);C===0?(p.next=null,d===null?w=b:d.next=b,b===null&&(O=d)):(d=p,(a!==0||(C&3)!==0)&&(le=!0)),p=b}Ut!==0&&Ut!==5||Ue(a),Ae!==0&&(Ae=0)}function pr(a,o){for(var d=a.suspendedLanes,p=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var M=31-ai(C),k=1<<M,V=b[M];V===-1?((k&d)===0||(k&p)!==0)&&(b[M]=zn(k,o)):V<=o&&(a.expiredLanes|=k),C&=~k}if(o=$e,d=ot,d=kt(a,a===o?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p=a.callbackNode,d===0||a===o&&(St===2||St===9)||a.cancelPendingCommit!==null)return p!==null&&p!==null&&$s(p),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||yn(a,d)){if(o=d&-d,o===a.callbackPriority)return o;switch(p!==null&&$s(p),Un(d)){case 2:case 8:d=eo;break;case 32:d=qa;break;case 268435456:d=Ss;break;default:d=qa}return p=ko.bind(null,a),d=dn(d,p),a.callbackPriority=o,a.callbackNode=d,o}return p!==null&&p!==null&&$s(p),a.callbackPriority=2,a.callbackNode=null,2}function ko(a,o){if(Ut!==0&&Ut!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(hr()&&a.callbackNode!==d)return null;var p=ot;return p=kt(a,a===$e?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),p===0?null:(ft(a,p,o),pr(a,Hn()),a.callbackNode!=null&&a.callbackNode===d?ko.bind(null,a):null)}function ie(a,o){if(hr())return null;ft(a,o,!0)}function Z(){Nx(function(){(Be&6)!==0?dn(Rl,tt):Yn()})}function oe(){if(Ae===0){var a=zs;a===0&&(a=ge,ge<<=1,(ge&261888)===0&&(ge=256)),Ae=a}return Ae}function Ee(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Br(""+a)}function Ye(a,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,a.id&&d.setAttribute("form",a.id),o.parentNode.insertBefore(d,o),a=new FormData(a),d.parentNode.removeChild(d),a}function cn(a,o,d,p,b){if(o==="submit"&&d&&d.stateNode===b){var C=Ee((b[si]||null).action),M=p.submitter;M&&(o=(o=M[si]||null)?Ee(o.formAction):M.getAttribute("formAction"),o!==null&&(C=o,M=null));var k=new Vr("action","action",null,p,b);a.push({event:k,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Ae!==0){var V=M?Ye(b,M):new FormData(b);Lf(d,{pending:!0,data:V,method:b.method,action:C},null,V)}}else typeof C=="function"&&(k.preventDefault(),V=M?Ye(b,M):new FormData(b),Lf(d,{pending:!0,data:V,method:b.method,action:C},C,V))},currentTarget:b}]})}}for(var Ke=0;Ke<Wr.length;Ke++){var Et=Wr[Ke],Fn=Et.toLowerCase(),Rt=Et[0].toUpperCase()+Et.slice(1);ra(Fn,"on"+Rt)}ra(hc,"onAnimationEnd"),ra(Zr,"onAnimationIteration"),ra(lf,"onAnimationStart"),ra("dblclick","onDoubleClick"),ra("focusin","onFocus"),ra("focusout","onBlur"),ra(b0,"onTransitionRun"),ra(Pm,"onTransitionStart"),ra(x0,"onTransitionCancel"),ra(rf,"onTransitionEnd"),qi("onMouseEnter",["mouseout","mouseover"]),qi("onMouseLeave",["mouseout","mouseover"]),qi("onPointerEnter",["pointerout","pointerover"]),qi("onPointerLeave",["pointerout","pointerover"]),lo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),lo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),lo("onBeforeInput",["compositionend","keypress","textInput","paste"]),lo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),lo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ea="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ea));function gv(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var p=a[d],b=p.event;p=p.listeners;e:{var C=void 0;if(o)for(var M=p.length-1;0<=M;M--){var k=p[M],V=k.instance,ne=k.currentTarget;if(k=k.listener,V!==C&&b.isPropagationStopped())break e;C=k,b.currentTarget=ne;try{C(b)}catch(de){$r(de)}b.currentTarget=null,C=V}else for(M=0;M<p.length;M++){if(k=p[M],V=k.instance,ne=k.currentTarget,k=k.listener,V!==C&&b.isPropagationStopped())break e;C=k,b.currentTarget=ne;try{C(b)}catch(de){$r(de)}b.currentTarget=null,C=V}}}}function bt(a,o){var d=o[Va];d===void 0&&(d=o[Va]=new Set);var p=a+"__bubble";d.has(p)||(yv(o,a,2,!1),d.add(p))}function Zm(a,o,d){var p=0;o&&(p|=4),yv(d,a,p,o)}var vp="_reactListening"+Math.random().toString(36).slice(2);function Wm(a){if(!a[vp]){a[vp]=!0,Ts.forEach(function(d){d!=="selectionchange"&&(Qm.has(d)||Zm(d,!1,a),Zm(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[vp]||(o[vp]=!0,Zm("selectionchange",!1,o))}}function yv(a,o,d,p){switch(Fv(o)){case 2:var b=Xx;break;case 8:b=Qx;break;default:b=hg}d=b.bind(null,o,d,a),b=void 0,!qd||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),p?b!==void 0?a.addEventListener(o,d,{capture:!0,passive:b}):a.addEventListener(o,d,!0):b!==void 0?a.addEventListener(o,d,{passive:b}):a.addEventListener(o,d,!1)}function $m(a,o,d,p,b){var C=p;if((o&1)===0&&(o&2)===0&&p!==null)e:for(;;){if(p===null)return;var M=p.tag;if(M===3||M===4){var k=p.stateNode.containerInfo;if(k===b)break;if(M===4)for(M=p.return;M!==null;){var V=M.tag;if((V===3||V===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;k!==null;){if(M=Bo(k),M===null)return;if(V=M.tag,V===5||V===6||V===26||V===27){p=C=M;continue e}k=k.parentNode}}p=p.return}Pd(function(){var ne=C,de=ec(d),me=[];e:{var se=la.get(a);if(se!==void 0){var re=Vr,ke=a;switch(a){case"keypress":if(qr(d)===0)break e;case"keydown":case"keyup":re=Yo;break;case"focusin":ke="focus",re=ac;break;case"focusout":ke="blur",re=ac;break;case"beforeblur":case"afterblur":re=ac;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=Vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=t0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=l0;break;case hc:case Zr:case lf:re=Gm;break;case rf:re=Bm;break;case"scroll":case"scrollend":re=$h;break;case"wheel":re=u0;break;case"copy":case"cut":case"paste":re=i0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=Fd;break;case"toggle":case"beforetoggle":re=d0}var Je=(o&4)!==0,jt=!Je&&(a==="scroll"||a==="scrollend"),X=Je?se!==null?se+"Capture":null:se;Je=[];for(var F=ne,te;F!==null;){var pe=F;if(te=pe.stateNode,pe=pe.tag,pe!==5&&pe!==26&&pe!==27||te===null||X===null||(pe=zl(F,X),pe!=null&&Je.push(nh(F,pe,te))),jt)break;F=F.return}0<Je.length&&(se=new re(se,ke,null,d,de),me.push({event:se,listeners:Je}))}}if((o&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",re=a==="mouseout"||a==="pointerout",se&&d!==$u&&(ke=d.relatedTarget||d.fromElement)&&(Bo(ke)||ke[ao]))break e;if((re||se)&&(se=de.window===de?de:(se=de.ownerDocument)?se.defaultView||se.parentWindow:window,re?(ke=d.relatedTarget||d.toElement,re=ne,ke=ke?Bo(ke):null,ke!==null&&(jt=l(ke),Je=ke.tag,ke!==jt||Je!==5&&Je!==27&&Je!==6)&&(ke=null)):(re=null,ke=ne),re!==ke)){if(Je=Vd,pe="onMouseLeave",X="onMouseEnter",F="mouse",(a==="pointerout"||a==="pointerover")&&(Je=Fd,pe="onPointerLeave",X="onPointerEnter",F="pointer"),jt=re==null?se:Nl(re),te=ke==null?se:Nl(ke),se=new Je(pe,F+"leave",re,d,de),se.target=jt,se.relatedTarget=te,pe=null,Bo(de)===ne&&(Je=new Je(X,F+"enter",ke,d,de),Je.target=te,Je.relatedTarget=jt,pe=Je),jt=pe,re&&ke)t:{for(Je=xx,X=re,F=ke,te=0,pe=X;pe;pe=Je(pe))te++;pe=0;for(var je=F;je;je=Je(je))pe++;for(;0<te-pe;)X=Je(X),te--;for(;0<pe-te;)F=Je(F),pe--;for(;te--;){if(X===F||F!==null&&X===F.alternate){Je=X;break t}X=Je(X),F=Je(F)}Je=null}else Je=null;re!==null&&vv(me,se,re,Je,!1),ke!==null&&jt!==null&&vv(me,jt,ke,Je,!0)}}e:{if(se=ne?Nl(ne):window,re=se.nodeName&&se.nodeName.toLowerCase(),re==="select"||re==="input"&&se.type==="file")var Nt=$d;else if(Wd(se))if(Fa)Nt=v0;else{Nt=nf;var Ge=g0}else re=se.nodeName,!re||re.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ne&&Wu(ne.elementType)&&(Nt=$d):Nt=y0;if(Nt&&(Nt=Nt(a,ne))){dc(me,Nt,d,de);break e}Ge&&Ge(a,se,ne),a==="focusout"&&ne&&se.type==="number"&&ne.memoizedProps.value!=null&&Ma(se,"number",se.value)}switch(Ge=ne?Nl(ne):window,a){case"focusin":(Wd(Ge)||Ge.contentEditable==="true")&&(Ka=Ge,Ja=ne,ql=null);break;case"focusout":ql=Ja=Ka=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,Vl(me,d,de);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":Vl(me,d,de)}var ct;if(Fo)e:{switch(a){case"compositionstart":var Tt="onCompositionStart";break e;case"compositionend":Tt="onCompositionEnd";break e;case"compositionupdate":Tt="onCompositionUpdate";break e}Tt=void 0}else Ko?cc(a,d)&&(Tt="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Tt="onCompositionStart");Tt&&(Jd&&d.locale!=="ko"&&(Ko||Tt!=="onCompositionStart"?Tt==="onCompositionEnd"&&Ko&&(ct=Pr()):(ji=de,nc="value"in ji?ji.value:ji.textContent,Ko=!0)),Ge=_p(ne,Tt),0<Ge.length&&(Tt=new sc(Tt,a,null,d,de),me.push({event:Tt,listeners:Ge}),ct?Tt.data=ct:(ct=Xd(d),ct!==null&&(Tt.data=ct)))),(ct=uc?p0(a,d):Qd(a,d))&&(Tt=_p(ne,"onBeforeInput"),0<Tt.length&&(Ge=new sc("onBeforeInput","beforeinput",null,d,de),me.push({event:Ge,listeners:Tt}),Ge.data=ct)),cn(me,a,ne,d,de)}gv(me,o)})}function nh(a,o,d){return{instance:a,listener:o,currentTarget:d}}function _p(a,o){for(var d=o+"Capture",p=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=zl(a,d),b!=null&&p.unshift(nh(a,b,C)),b=zl(a,o),b!=null&&p.push(nh(a,b,C))),a.tag===3)return p;a=a.return}return[]}function xx(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function vv(a,o,d,p,b){for(var C=o._reactName,M=[];d!==null&&d!==p;){var k=d,V=k.alternate,ne=k.stateNode;if(k=k.tag,V!==null&&V===p)break;k!==5&&k!==26&&k!==27||ne===null||(V=ne,b?(ne=zl(d,C),ne!=null&&M.unshift(nh(d,ne,V))):b||(ne=zl(d,C),ne!=null&&M.push(nh(d,ne,V)))),d=d.return}M.length!==0&&a.push({event:o,listeners:M})}var Ex=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function _v(a){return(typeof a=="string"?a:""+a).replace(Ex,`
`).replace(Tx,"")}function Sv(a,o){return o=_v(o),_v(a)===o}function Vt(a,o,d,p,b,C){switch(d){case"children":typeof p=="string"?o==="body"||o==="textarea"&&p===""||qo(a,p):(typeof p=="number"||typeof p=="bigint")&&o!=="body"&&qo(a,""+p);break;case"className":Gr(a,"class",p);break;case"tabIndex":Gr(a,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Gr(a,d,p);break;case"style":Gd(a,p,C);break;case"data":if(o!=="object"){Gr(a,"data",p);break}case"src":case"href":if(p===""&&(o!=="a"||d!=="href")){a.removeAttribute(d);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Br(""+p),a.setAttribute(d,p);break;case"action":case"formAction":if(typeof p=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(d==="formAction"?(o!=="input"&&Vt(a,o,"name",b.name,b,null),Vt(a,o,"formEncType",b.formEncType,b,null),Vt(a,o,"formMethod",b.formMethod,b,null),Vt(a,o,"formTarget",b.formTarget,b,null)):(Vt(a,o,"encType",b.encType,b,null),Vt(a,o,"method",b.method,b,null),Vt(a,o,"target",b.target,b,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){a.removeAttribute(d);break}p=Br(""+p),a.setAttribute(d,p);break;case"onClick":p!=null&&(a.onclick=As);break;case"onScroll":p!=null&&bt("scroll",a);break;case"onScrollEnd":p!=null&&bt("scrollend",a);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"multiple":a.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":a.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){a.removeAttribute("xlink:href");break}d=Br(""+p),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""+p):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":p===!0?a.setAttribute(d,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?a.setAttribute(d,p):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?a.setAttribute(d,p):a.removeAttribute(d);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?a.removeAttribute(d):a.setAttribute(d,p);break;case"popover":bt("beforetoggle",a),bt("toggle",a),Ml(a,"popover",p);break;case"xlinkActuate":ja(a,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":ja(a,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":ja(a,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":ja(a,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":ja(a,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":ja(a,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":ja(a,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":ja(a,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":ja(a,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":Ml(a,"is",p);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=Zh.get(d)||d,Ml(a,d,p))}}function eg(a,o,d,p,b,C){switch(d){case"style":Gd(a,p,C);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(i(61));if(d=p.__html,d!=null){if(b.children!=null)throw Error(i(60));a.innerHTML=d}}break;case"children":typeof p=="string"?qo(a,p):(typeof p=="number"||typeof p=="bigint")&&qo(a,""+p);break;case"onScroll":p!=null&&bt("scroll",a);break;case"onScrollEnd":p!=null&&bt("scrollend",a);break;case"onClick":p!=null&&(a.onclick=As);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fu.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(b=d.endsWith("Capture"),o=d.slice(2,b?d.length-7:void 0),C=a[si]||null,C=C!=null?C[d]:null,typeof C=="function"&&a.removeEventListener(o,C,b),typeof p=="function")){typeof C!="function"&&C!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(o,p,b);break e}d in a?a[d]=p:p===!0?a.setAttribute(d,""):Ml(a,d,p)}}}function Ti(a,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":bt("error",a),bt("load",a);var p=!1,b=!1,C;for(C in d)if(d.hasOwnProperty(C)){var M=d[C];if(M!=null)switch(C){case"src":p=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Vt(a,o,C,M,d,null)}}b&&Vt(a,o,"srcSet",d.srcSet,d,null),p&&Vt(a,o,"src",d.src,d,null);return;case"input":bt("invalid",a);var k=C=M=b=null,V=null,ne=null;for(p in d)if(d.hasOwnProperty(p)){var de=d[p];if(de!=null)switch(p){case"name":b=de;break;case"type":M=de;break;case"checked":V=de;break;case"defaultChecked":ne=de;break;case"value":C=de;break;case"defaultValue":k=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,o));break;default:Vt(a,o,p,de,d,null)}}Xu(a,C,k,V,ne,M,b,!1);return;case"select":bt("invalid",a),p=M=C=null;for(b in d)if(d.hasOwnProperty(b)&&(k=d[b],k!=null))switch(b){case"value":C=k;break;case"defaultValue":M=k;break;case"multiple":p=k;default:Vt(a,o,b,k,d,null)}o=C,d=M,a.multiple=!!p,o!=null?Cs(a,!!p,o,!1):d!=null&&Cs(a,!!p,d,!0);return;case"textarea":bt("invalid",a),C=b=p=null;for(M in d)if(d.hasOwnProperty(M)&&(k=d[M],k!=null))switch(M){case"value":p=k;break;case"defaultValue":b=k;break;case"children":C=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:Vt(a,o,M,k,d,null)}Zu(a,p,b,C);return;case"option":for(V in d)if(d.hasOwnProperty(V)&&(p=d[V],p!=null))switch(V){case"selected":a.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:Vt(a,o,V,p,d,null)}return;case"dialog":bt("beforetoggle",a),bt("toggle",a),bt("cancel",a),bt("close",a);break;case"iframe":case"object":bt("load",a);break;case"video":case"audio":for(p=0;p<Ea.length;p++)bt(Ea[p],a);break;case"image":bt("error",a),bt("load",a);break;case"details":bt("toggle",a);break;case"embed":case"source":case"link":bt("error",a),bt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ne in d)if(d.hasOwnProperty(ne)&&(p=d[ne],p!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Vt(a,o,ne,p,d,null)}return;default:if(Wu(o)){for(de in d)d.hasOwnProperty(de)&&(p=d[de],p!==void 0&&eg(a,o,de,p,d,void 0));return}}for(k in d)d.hasOwnProperty(k)&&(p=d[k],p!=null&&Vt(a,o,k,p,d,null))}function Cx(a,o,d,p){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,M=null,k=null,V=null,ne=null,de=null;for(re in d){var me=d[re];if(d.hasOwnProperty(re)&&me!=null)switch(re){case"checked":break;case"value":break;case"defaultValue":V=me;default:p.hasOwnProperty(re)||Vt(a,o,re,null,p,me)}}for(var se in p){var re=p[se];if(me=d[se],p.hasOwnProperty(se)&&(re!=null||me!=null))switch(se){case"type":C=re;break;case"name":b=re;break;case"checked":ne=re;break;case"defaultChecked":de=re;break;case"value":M=re;break;case"defaultValue":k=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(i(137,o));break;default:re!==me&&Vt(a,o,se,re,p,me)}}Dl(a,M,k,V,ne,de,C,b);return;case"select":re=M=k=se=null;for(C in d)if(V=d[C],d.hasOwnProperty(C)&&V!=null)switch(C){case"value":break;case"multiple":re=V;default:p.hasOwnProperty(C)||Vt(a,o,C,null,p,V)}for(b in p)if(C=p[b],V=d[b],p.hasOwnProperty(b)&&(C!=null||V!=null))switch(b){case"value":se=C;break;case"defaultValue":k=C;break;case"multiple":M=C;default:C!==V&&Vt(a,o,b,C,p,V)}o=k,d=M,p=re,se!=null?Cs(a,!!d,se,!1):!!p!=!!d&&(o!=null?Cs(a,!!d,o,!0):Cs(a,!!d,d?[]:"",!1));return;case"textarea":re=se=null;for(k in d)if(b=d[k],d.hasOwnProperty(k)&&b!=null&&!p.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:Vt(a,o,k,null,p,b)}for(M in p)if(b=p[M],C=d[M],p.hasOwnProperty(M)&&(b!=null||C!=null))switch(M){case"value":se=b;break;case"defaultValue":re=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(i(91));break;default:b!==C&&Vt(a,o,M,b,p,C)}Qu(a,se,re);return;case"option":for(var ke in d)if(se=d[ke],d.hasOwnProperty(ke)&&se!=null&&!p.hasOwnProperty(ke))switch(ke){case"selected":a.selected=!1;break;default:Vt(a,o,ke,null,p,se)}for(V in p)if(se=p[V],re=d[V],p.hasOwnProperty(V)&&se!==re&&(se!=null||re!=null))switch(V){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:Vt(a,o,V,se,p,re)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Je in d)se=d[Je],d.hasOwnProperty(Je)&&se!=null&&!p.hasOwnProperty(Je)&&Vt(a,o,Je,null,p,se);for(ne in p)if(se=p[ne],re=d[ne],p.hasOwnProperty(ne)&&se!==re&&(se!=null||re!=null))switch(ne){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,o));break;default:Vt(a,o,ne,se,p,re)}return;default:if(Wu(o)){for(var jt in d)se=d[jt],d.hasOwnProperty(jt)&&se!==void 0&&!p.hasOwnProperty(jt)&&eg(a,o,jt,void 0,p,se);for(de in p)se=p[de],re=d[de],!p.hasOwnProperty(de)||se===re||se===void 0&&re===void 0||eg(a,o,de,se,p,re);return}}for(var X in d)se=d[X],d.hasOwnProperty(X)&&se!=null&&!p.hasOwnProperty(X)&&Vt(a,o,X,null,p,se);for(me in p)se=p[me],re=d[me],!p.hasOwnProperty(me)||se===re||se==null&&re==null||Vt(a,o,me,se,p,re)}function bv(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Ax(){if(typeof performance.getEntriesByType=="function"){for(var a=0,o=0,d=performance.getEntriesByType("resource"),p=0;p<d.length;p++){var b=d[p],C=b.transferSize,M=b.initiatorType,k=b.duration;if(C&&k&&bv(M)){for(M=0,k=b.responseEnd,p+=1;p<d.length;p++){var V=d[p],ne=V.startTime;if(ne>k)break;var de=V.transferSize,me=V.initiatorType;de&&bv(me)&&(V=V.responseEnd,M+=de*(V<k?1:(k-ne)/(V-ne)))}if(--p,o+=8*(C+M)/(b.duration/1e3),a++,10<a)break}}if(0<a)return o/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var tg=null,ng=null;function Sp(a){return a.nodeType===9?a:a.ownerDocument}function xv(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ev(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ig(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var ag=null;function wx(){var a=window.event;return a&&a.type==="popstate"?a===ag?!1:(ag=a,!0):(ag=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,Rx=typeof clearTimeout=="function"?clearTimeout:void 0,Cv=typeof Promise=="function"?Promise:void 0,Nx=typeof queueMicrotask=="function"?queueMicrotask:typeof Cv<"u"?function(a){return Cv.resolve(null).then(a).catch(Mx)}:Tv;function Mx(a){setTimeout(function(){throw a})}function mr(a){return a==="head"}function Av(a,o){var d=o,p=0;do{var b=d.nextSibling;if(a.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"||d==="/&"){if(p===0){a.removeChild(b),ad(o);return}p--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")p++;else if(d==="html")ih(a.ownerDocument.documentElement);else if(d==="head"){d=a.ownerDocument.head,ih(d);for(var C=d.firstChild;C;){var M=C.nextSibling,k=C.nodeName;C[Es]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&C.rel.toLowerCase()==="stylesheet"||d.removeChild(C),C=M}}else d==="body"&&ih(a.ownerDocument.body);d=b}while(d);ad(o)}function wv(a,o){var d=a;a=0;do{var p=d.nextSibling;if(d.nodeType===1?o?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(o?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),p&&p.nodeType===8)if(d=p.data,d==="/$"){if(a===0)break;a--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||a++;d=p}while(d)}function sg(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":sg(d),Ho(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function Dx(a,o,d,p){for(;a.nodeType===1;){var b=d;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!p&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(p){if(!a[Es])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=hs(a.nextSibling),a===null)break}return null}function zx(a,o,d){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=hs(a.nextSibling),a===null))return null;return a}function Rv(a,o){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!o||(a=hs(a.nextSibling),a===null))return null;return a}function og(a){return a.data==="$?"||a.data==="$~"}function lg(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function Ux(a,o){var d=a.ownerDocument;if(a.data==="$~")a._reactRetry=o;else if(a.data!=="$?"||d.readyState!=="loading")o();else{var p=function(){o(),d.removeEventListener("DOMContentLoaded",p)};d.addEventListener("DOMContentLoaded",p),a._reactRetry=p}}function hs(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return a}var rg=null;function Nv(a){a=a.nextSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="/$"||d==="/&"){if(o===0)return hs(a.nextSibling);o--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||o++}a=a.nextSibling}return null}function Mv(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(o===0)return a;o--}else d!=="/$"&&d!=="/&"||o++}a=a.previousSibling}return null}function Dv(a,o,d){switch(o=Sp(d),a){case"html":if(a=o.documentElement,!a)throw Error(i(452));return a;case"head":if(a=o.head,!a)throw Error(i(453));return a;case"body":if(a=o.body,!a)throw Error(i(454));return a;default:throw Error(i(451))}}function ih(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Ho(a)}var ps=new Map,zv=new Set;function bp(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var yl=he.d;he.d={f:Ix,r:Ox,D:kx,C:Lx,L:Gx,m:Hx,X:Px,S:Bx,M:qx};function Ix(){var a=yl.f(),o=Oa();return a||o}function Ox(a){var o=Po(a);o!==null&&o.tag===5&&o.type==="form"?ip(o):yl.r(a)}var td=typeof document>"u"?null:document;function Uv(a,o,d){var p=td;if(p&&typeof o=="string"&&o){var b=li(o);b='link[rel="'+a+'"][href="'+b+'"]',typeof d=="string"&&(b+='[crossorigin="'+d+'"]'),zv.has(b)||(zv.add(b),a={rel:a,crossOrigin:d,href:o},p.querySelector(b)===null&&(o=p.createElement("link"),Ti(o,"link",a),Cn(o),p.head.appendChild(o)))}}function kx(a){yl.D(a),Uv("dns-prefetch",a,null)}function Lx(a,o){yl.C(a,o),Uv("preconnect",a,o)}function Gx(a,o,d){yl.L(a,o,d);var p=td;if(p&&a&&o){var b='link[rel="preload"][as="'+li(o)+'"]';o==="image"&&d&&d.imageSrcSet?(b+='[imagesrcset="'+li(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(b+='[imagesizes="'+li(d.imageSizes)+'"]')):b+='[href="'+li(a)+'"]';var C=b;switch(o){case"style":C=nd(a);break;case"script":C=id(a)}ps.has(C)||(a=E({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:a,as:o},d),ps.set(C,a),p.querySelector(b)!==null||o==="style"&&p.querySelector(ah(C))||o==="script"&&p.querySelector(sh(C))||(o=p.createElement("link"),Ti(o,"link",a),Cn(o),p.head.appendChild(o)))}}function Hx(a,o){yl.m(a,o);var d=td;if(d&&a){var p=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+li(p)+'"][href="'+li(a)+'"]',C=b;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=id(a)}if(!ps.has(C)&&(a=E({rel:"modulepreload",href:a},o),ps.set(C,a),d.querySelector(b)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(sh(C)))return}p=d.createElement("link"),Ti(p,"link",a),Cn(p),d.head.appendChild(p)}}}function Bx(a,o,d){yl.S(a,o,d);var p=td;if(p&&a){var b=oo(p).hoistableStyles,C=nd(a);o=o||"default";var M=b.get(C);if(!M){var k={loading:0,preload:null};if(M=p.querySelector(ah(C)))k.loading=5;else{a=E({rel:"stylesheet",href:a,"data-precedence":o},d),(d=ps.get(C))&&ug(a,d);var V=M=p.createElement("link");Cn(V),Ti(V,"link",a),V._p=new Promise(function(ne,de){V.onload=ne,V.onerror=de}),V.addEventListener("load",function(){k.loading|=1}),V.addEventListener("error",function(){k.loading|=2}),k.loading|=4,xp(M,o,p)}M={type:"stylesheet",instance:M,count:1,state:k},b.set(C,M)}}}function Px(a,o){yl.X(a,o);var d=td;if(d&&a){var p=oo(d).hoistableScripts,b=id(a),C=p.get(b);C||(C=d.querySelector(sh(b)),C||(a=E({src:a,async:!0},o),(o=ps.get(b))&&cg(a,o),C=d.createElement("script"),Cn(C),Ti(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(b,C))}}function qx(a,o){yl.M(a,o);var d=td;if(d&&a){var p=oo(d).hoistableScripts,b=id(a),C=p.get(b);C||(C=d.querySelector(sh(b)),C||(a=E({src:a,async:!0,type:"module"},o),(o=ps.get(b))&&cg(a,o),C=d.createElement("script"),Cn(C),Ti(C,"link",a),d.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},p.set(b,C))}}function Iv(a,o,d,p){var b=(b=et.current)?bp(b):null;if(!b)throw Error(i(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=nd(d.href),d=oo(b).hoistableStyles,p=d.get(o),p||(p={type:"style",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=nd(d.href);var C=oo(b).hoistableStyles,M=C.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,M),(C=b.querySelector(ah(a)))&&!C._p&&(M.instance=C,M.state.loading=5),ps.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},ps.set(a,d),C||Vx(b,a,d,M.state))),o&&p===null)throw Error(i(528,""));return M}if(o&&p!==null)throw Error(i(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=id(d),d=oo(b).hoistableScripts,p=d.get(o),p||(p={type:"script",instance:null,count:0,state:null},d.set(o,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,a))}}function nd(a){return'href="'+li(a)+'"'}function ah(a){return'link[rel="stylesheet"]['+a+"]"}function Ov(a){return E({},a,{"data-precedence":a.precedence,precedence:null})}function Vx(a,o,d,p){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?p.loading=1:(o=a.createElement("link"),p.preload=o,o.addEventListener("load",function(){return p.loading|=1}),o.addEventListener("error",function(){return p.loading|=2}),Ti(o,"link",d),Cn(o),a.head.appendChild(o))}function id(a){return'[src="'+li(a)+'"]'}function sh(a){return"script[async]"+a}function kv(a,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var p=a.querySelector('style[data-href~="'+li(d.href)+'"]');if(p)return o.instance=p,Cn(p),p;var b=E({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return p=(a.ownerDocument||a).createElement("style"),Cn(p),Ti(p,"style",b),xp(p,d.precedence,a),o.instance=p;case"stylesheet":b=nd(d.href);var C=a.querySelector(ah(b));if(C)return o.state.loading|=4,o.instance=C,Cn(C),C;p=Ov(d),(b=ps.get(b))&&ug(p,b),C=(a.ownerDocument||a).createElement("link"),Cn(C);var M=C;return M._p=new Promise(function(k,V){M.onload=k,M.onerror=V}),Ti(C,"link",p),o.state.loading|=4,xp(C,d.precedence,a),o.instance=C;case"script":return C=id(d.src),(b=a.querySelector(sh(C)))?(o.instance=b,Cn(b),b):(p=d,(b=ps.get(C))&&(p=E({},d),cg(p,b)),a=a.ownerDocument||a,b=a.createElement("script"),Cn(b),Ti(b,"link",p),a.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(p=o.instance,o.state.loading|=4,xp(p,d.precedence,a));return o.instance}function xp(a,o,d){for(var p=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=p.length?p[p.length-1]:null,C=b,M=0;M<p.length;M++){var k=p[M];if(k.dataset.precedence===o)C=k;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(a,o.firstChild))}function ug(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function cg(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var Ep=null;function Lv(a,o,d){if(Ep===null){var p=new Map,b=Ep=new Map;b.set(d,p)}else b=Ep,p=b.get(d),p||(p=new Map,b.set(d,p));if(p.has(a))return p;for(p.set(a,null),d=d.getElementsByTagName(a),b=0;b<d.length;b++){var C=d[b];if(!(C[Es]||C[Tn]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(o)||"";M=a+M;var k=p.get(M);k?k.push(C):p.set(M,[C])}}return p}function Gv(a,o,d){a=a.ownerDocument||a,a.head.insertBefore(d,o==="title"?a.querySelector("head > title"):null)}function jx(a,o,d){if(d===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Hv(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function Yx(a,o,d,p){if(d.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var b=nd(p.href),C=o.querySelector(ah(b));if(C){o=C._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(a.count++,a=Tp.bind(a),o.then(a,a)),d.state.loading|=4,d.instance=C,Cn(C);return}C=o.ownerDocument||o,p=Ov(p),(b=ps.get(b))&&ug(p,b),C=C.createElement("link"),Cn(C);var M=C;M._p=new Promise(function(k,V){M.onload=k,M.onerror=V}),Ti(C,"link",p),d.instance=C}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(d,o),(o=d.state.preload)&&(d.state.loading&3)===0&&(a.count++,d=Tp.bind(a),o.addEventListener("load",d),o.addEventListener("error",d))}}var dg=0;function Fx(a,o){return a.stylesheets&&a.count===0&&Ap(a,a.stylesheets),0<a.count||0<a.imgCount?function(d){var p=setTimeout(function(){if(a.stylesheets&&Ap(a,a.stylesheets),a.unsuspend){var C=a.unsuspend;a.unsuspend=null,C()}},6e4+o);0<a.imgBytes&&dg===0&&(dg=62500*Ax());var b=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Ap(a,a.stylesheets),a.unsuspend)){var C=a.unsuspend;a.unsuspend=null,C()}},(a.imgBytes>dg?50:800)+o);return a.unsuspend=d,function(){a.unsuspend=null,clearTimeout(p),clearTimeout(b)}}:null}function Tp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ap(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Cp=null;function Ap(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Cp=new Map,o.forEach(Kx,a),Cp=null,Tp.call(a))}function Kx(a,o){if(!(o.state.loading&4)){var d=Cp.get(a);if(d)var p=d.get(null);else{d=new Map,Cp.set(a,d);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var M=b[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(d.set(M.dataset.precedence,M),p=M)}p&&d.set(null,p)}b=o.instance,M=b.getAttribute("data-precedence"),C=d.get(M)||p,C===p&&d.set(null,b),d.set(M,b),this.count++,p=Tp.bind(this),b.addEventListener("load",p),b.addEventListener("error",p),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),o.state.loading|=4}}var oh={$$typeof:U,Provider:null,Consumer:null,_currentValue:fe,_currentValue2:fe,_threadCount:0};function Jx(a,o,d,p,b,C,M,k,V){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=p,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Bv(a,o,d,p,b,C,M,k,V,ne,de,me){return a=new Jx(a,o,d,M,V,ne,de,me,k),o=1,C===!0&&(o|=24),C=an(3,null,null,o),a.current=C,C.stateNode=a,o=cf(),o.refCount++,a.pooledCache=o,o.refCount++,C.memoizedState={element:p,isDehydrated:d,cache:o},ou(C),a}function Pv(a){return a?(a=ho,a):ho}function qv(a,o,d,p,b,C){b=Pv(b),p.context===null?p.context=b:p.pendingContext=b,p=Is(o),p.payload={element:d},C=C===void 0?null:C,C!==null&&(p.callback=C),d=bo(a,p,o),d!==null&&(ut(d,a,o),xo(d,a,o))}function Vv(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function fg(a,o){Vv(a,o),(a=a.alternate)&&Vv(a,o)}function jv(a){if(a.tag===13||a.tag===31){var o=gi(a,67108864);o!==null&&ut(o,a,67108864),fg(a,67108864)}}function Yv(a){if(a.tag===13||a.tag===31){var o=$i();o=At(o);var d=gi(a,o);d!==null&&ut(d,a,o),fg(a,o)}}var wp=!0;function Xx(a,o,d,p){var b=Y.T;Y.T=null;var C=he.p;try{he.p=2,hg(a,o,d,p)}finally{he.p=C,Y.T=b}}function Qx(a,o,d,p){var b=Y.T;Y.T=null;var C=he.p;try{he.p=8,hg(a,o,d,p)}finally{he.p=C,Y.T=b}}function hg(a,o,d,p){if(wp){var b=pg(p);if(b===null)$m(a,o,p,Rp,d),Kv(a,p);else if(Wx(b,a,o,d,p))p.stopPropagation();else if(Kv(a,p),o&4&&-1<Zx.indexOf(a)){for(;b!==null;){var C=Po(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=yt(C.pendingLanes);if(M!==0){var k=C;for(k.pendingLanes|=2,k.entangledLanes|=2;M;){var V=1<<31-ai(M);k.entanglements[1]|=V,M&=~V}_e(C),(Be&6)===0&&(bn=Hn()+500,Ue(0))}}break;case 31:case 13:k=gi(C,2),k!==null&&ut(k,C,2),Oa(),fg(C,2)}if(C=pg(p),C===null&&$m(a,o,p,Rp,d),C===b)break;b=C}b!==null&&p.stopPropagation()}else $m(a,o,p,null,d)}}function pg(a){return a=ec(a),mg(a)}var Rp=null;function mg(a){if(Rp=null,a=Bo(a),a!==null){var o=l(a);if(o===null)a=null;else{var d=o.tag;if(d===13){if(a=c(o),a!==null)return a;a=null}else if(d===31){if(a=f(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return Rp=a,null}function Fv(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vu()){case Rl:return 2;case eo:return 8;case qa:case aa:return 32;case Ss:return 268435456;default:return 32}default:return 32}}var gg=!1,gr=null,yr=null,vr=null,lh=new Map,rh=new Map,_r=[],Zx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kv(a,o){switch(a){case"focusin":case"focusout":gr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":lh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(o.pointerId)}}function uh(a,o,d,p,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:o,domEventName:d,eventSystemFlags:p,nativeEvent:C,targetContainers:[b]},o!==null&&(o=Po(o),o!==null&&jv(o)),a):(a.eventSystemFlags|=p,o=a.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),a)}function Wx(a,o,d,p,b){switch(o){case"focusin":return gr=uh(gr,a,o,d,p,b),!0;case"dragenter":return yr=uh(yr,a,o,d,p,b),!0;case"mouseover":return vr=uh(vr,a,o,d,p,b),!0;case"pointerover":var C=b.pointerId;return lh.set(C,uh(lh.get(C)||null,a,o,d,p,b)),!0;case"gotpointercapture":return C=b.pointerId,rh.set(C,uh(rh.get(C)||null,a,o,d,p,b)),!0}return!1}function Jv(a){var o=Bo(a.target);if(o!==null){var d=l(o);if(d!==null){if(o=d.tag,o===13){if(o=c(d),o!==null){a.blockedOn=o,io(a.priority,function(){Yv(d)});return}}else if(o===31){if(o=f(d),o!==null){a.blockedOn=o,io(a.priority,function(){Yv(d)});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Np(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=pg(a.nativeEvent);if(d===null){d=a.nativeEvent;var p=new d.constructor(d.type,d);$u=p,d.target.dispatchEvent(p),$u=null}else return o=Po(d),o!==null&&jv(o),a.blockedOn=d,!1;o.shift()}return!0}function Xv(a,o,d){Np(a)&&d.delete(o)}function $x(){gg=!1,gr!==null&&Np(gr)&&(gr=null),yr!==null&&Np(yr)&&(yr=null),vr!==null&&Np(vr)&&(vr=null),lh.forEach(Xv),rh.forEach(Xv)}function Mp(a,o){a.blockedOn===o&&(a.blockedOn=null,gg||(gg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$x)))}var Dp=null;function Qv(a){Dp!==a&&(Dp=a,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Dp===a&&(Dp=null);for(var o=0;o<a.length;o+=3){var d=a[o],p=a[o+1],b=a[o+2];if(typeof p!="function"){if(mg(p||d)===null)continue;break}var C=Po(d);C!==null&&(a.splice(o,3),o-=3,Lf(C,{pending:!0,data:b,method:d.method,action:p},p,b))}}))}function ad(a){function o(V){return Mp(V,a)}gr!==null&&Mp(gr,a),yr!==null&&Mp(yr,a),vr!==null&&Mp(vr,a),lh.forEach(o),rh.forEach(o);for(var d=0;d<_r.length;d++){var p=_r[d];p.blockedOn===a&&(p.blockedOn=null)}for(;0<_r.length&&(d=_r[0],d.blockedOn===null);)Jv(d),d.blockedOn===null&&_r.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(p=0;p<d.length;p+=3){var b=d[p],C=d[p+1],M=b[si]||null;if(typeof C=="function")M||Qv(d);else if(M){var k=null;if(C&&C.hasAttribute("formAction")){if(b=C,M=C[si]||null)k=M.formAction;else if(mg(b)!==null)continue}else k=M.action;typeof k=="function"?d[p+1]=k:(d.splice(p,3),p-=3),Qv(d)}}}function Zv(){function a(C){C.canIntercept&&C.info==="react-transition"&&C.intercept({handler:function(){return new Promise(function(M){return b=M})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),p||setTimeout(d,20)}function d(){if(!p&&!navigation.transition){var C=navigation.currentEntry;C&&C.url!=null&&navigation.navigate(C.url,{state:C.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,b=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(d,100),function(){p=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function yg(a){this._internalRoot=a}zp.prototype.render=yg.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(i(409));var d=o.current,p=$i();qv(d,p,a,o,null,null)},zp.prototype.unmount=yg.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;qv(a.current,2,null,a,null,null),Oa(),o[ao]=null}};function zp(a){this._internalRoot=a}zp.prototype.unstable_scheduleHydration=function(a){if(a){var o=Ri();a={blockedOn:null,target:a,priority:o};for(var d=0;d<_r.length&&o!==0&&o<_r[d].priority;d++);_r.splice(d,0,a),d===0&&Jv(a)}};var Wv=e.version;if(Wv!=="19.2.4")throw Error(i(527,Wv,"19.2.4"));he.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(i(188)):(a=Object.keys(a).join(","),Error(i(268,a)));return a=m(o),a=a!==null?v(a):null,a=a===null?null:a.stateNode,a};var e5={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Up=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Up.isDisabled&&Up.supportsFiber)try{to=Up.inject(e5),ii=Up}catch{}}return dh.createRoot=function(a,o){if(!s(a))throw Error(i(299));var d=!1,p="",b=cp,C=Vf,M=jf;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(C=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=Bv(a,1,!1,null,null,d,p,null,b,C,M,Zv),a[ao]=o.current,Wm(a),new yg(o)},dh.hydrateRoot=function(a,o,d){if(!s(a))throw Error(i(299));var p=!1,b="",C=cp,M=Vf,k=jf,V=null;return d!=null&&(d.unstable_strictMode===!0&&(p=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onUncaughtError!==void 0&&(C=d.onUncaughtError),d.onCaughtError!==void 0&&(M=d.onCaughtError),d.onRecoverableError!==void 0&&(k=d.onRecoverableError),d.formState!==void 0&&(V=d.formState)),o=Bv(a,1,!0,o,d??null,p,b,V,C,M,k,Zv),o.context=Pv(null),d=o.current,p=$i(),p=At(p),b=Is(p),b.callback=null,bo(d,b,p),d=p,o.current.lanes=d,Pi(o,d),_e(o),a[ao]=o.current,Wm(a),new zp(o)},dh.version="19.2.4",dh}var r1;function c5(){if(r1)return Sg.exports;r1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sg.exports=u5(),Sg.exports}var d5=c5();const f5=Ly(d5);function bm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function h5(n,e,t,i){function s(l){return l instanceof t?l:new t(function(c){c(l)})}return new(t||(t=Promise))(function(l,c){function f(v){try{m(i.next(v))}catch(E){c(E)}}function h(v){try{m(i.throw(v))}catch(E){c(E)}}function m(v){v.done?l(v.value):s(v.value).then(f,h)}m((i=i.apply(n,e||[])).next())})}const p5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e);class Hy extends Error{constructor(e,t="FunctionsError",i){super(e),this.name=t,this.context=i}}class m5 extends Hy{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class u1 extends Hy{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class c1 extends Hy{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Qg;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Qg||(Qg={}));class g5{constructor(e,{headers:t={},customFetch:i,region:s=Qg.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=p5(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return h5(this,arguments,void 0,function*(t,i={}){var s;let l,c;try{const{headers:f,method:h,body:m,signal:v,timeout:E}=i;let x={},{region:R}=i;R||(R=this.region);const N=new URL(`${this.url}/${t}`);R&&R!=="any"&&(x["x-region"]=R,N.searchParams.set("forceFunctionRegion",R));let z;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(x["Content-Type"]="application/octet-stream",z=m):typeof m=="string"?(x["Content-Type"]="text/plain",z=m):typeof FormData<"u"&&m instanceof FormData?z=m:(x["Content-Type"]="application/json",z=JSON.stringify(m)):m&&typeof m!="string"&&!(typeof Blob<"u"&&m instanceof Blob)&&!(m instanceof ArrayBuffer)&&!(typeof FormData<"u"&&m instanceof FormData)?z=JSON.stringify(m):z=m;let D=v;E&&(c=new AbortController,l=setTimeout(()=>c.abort(),E),v?(D=c.signal,v.addEventListener("abort",()=>c.abort())):D=c.signal);const I=yield this.fetch(N.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},x),this.headers),f),body:z,signal:D}).catch(P=>{throw new m5(P)}),L=I.headers.get("x-relay-error");if(L&&L==="true")throw new u1(I);if(!I.ok)throw new c1(I);let U=((s=I.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),G;return U==="application/json"?G=yield I.json():U==="application/octet-stream"||U==="application/pdf"?G=yield I.blob():U==="text/event-stream"?G=I:U==="multipart/form-data"?G=yield I.formData():G=yield I.text(),{data:G,error:null,response:I}}catch(f){return{data:null,error:f,response:f instanceof c1||f instanceof u1?f.context:void 0}}finally{l&&clearTimeout(l)}})}}var y5=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},v5=class{constructor(n){var e,t,i;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(e=n.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=n.signal,this.isMaybeSingle=(t=n.isMaybeSingle)!==null&&t!==void 0?t:!1,this.urlLengthLimit=(i=n.urlLengthLimit)!==null&&i!==void 0?i:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,e){return this.headers=new Headers(this.headers),this.headers.set(n,e),this}then(n,e){var t=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let s=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let c=null,f=null,h=null,m=l.status,v=l.statusText;if(l.ok){var E,x;if(t.method!=="HEAD"){var R;const I=await l.text();I===""||(t.headers.get("Accept")==="text/csv"||t.headers.get("Accept")&&(!((R=t.headers.get("Accept"))===null||R===void 0)&&R.includes("application/vnd.pgrst.plan+text"))?f=I:f=JSON.parse(I))}const z=(E=t.headers.get("Prefer"))===null||E===void 0?void 0:E.match(/count=(exact|planned|estimated)/),D=(x=l.headers.get("content-range"))===null||x===void 0?void 0:x.split("/");z&&D&&D.length>1&&(h=parseInt(D[1])),t.isMaybeSingle&&t.method==="GET"&&Array.isArray(f)&&(f.length>1?(c={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,h=null,m=406,v="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var N;const z=await l.text();try{c=JSON.parse(z),Array.isArray(c)&&l.status===404&&(f=[],c=null,m=200,v="OK")}catch{l.status===404&&z===""?(m=204,v="No Content"):c={message:z}}if(c&&t.isMaybeSingle&&(!(c==null||(N=c.details)===null||N===void 0)&&N.includes("0 rows"))&&(c=null,m=200,v="OK"),c&&t.shouldThrowOnError)throw new y5(c)}return{error:c,data:f,count:h,status:m,statusText:v}});return this.shouldThrowOnError||(s=s.catch(l=>{var c;let f="",h="",m="";const v=l==null?void 0:l.cause;if(v){var E,x,R,N;const I=(E=v==null?void 0:v.message)!==null&&E!==void 0?E:"",L=(x=v==null?void 0:v.code)!==null&&x!==void 0?x:"";f=`${(R=l==null?void 0:l.name)!==null&&R!==void 0?R:"FetchError"}: ${l==null?void 0:l.message}`,f+=`

Caused by: ${(N=v==null?void 0:v.name)!==null&&N!==void 0?N:"Error"}: ${I}`,L&&(f+=` (${L})`),v!=null&&v.stack&&(f+=`
${v.stack}`)}else{var z;f=(z=l==null?void 0:l.stack)!==null&&z!==void 0?z:""}const D=this.url.toString().length;return(l==null?void 0:l.name)==="AbortError"||(l==null?void 0:l.code)==="ABORT_ERR"?(m="",h="Request was aborted (timeout or manual cancellation)",D>this.urlLengthLimit&&(h+=`. Note: Your request URL is ${D} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):((v==null?void 0:v.name)==="HeadersOverflowError"||(v==null?void 0:v.code)==="UND_ERR_HEADERS_OVERFLOW")&&(m="",h="HTTP headers exceeded server limits (typically 16KB)",D>this.urlLengthLimit&&(h+=`. Your request URL is ${D} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(c=l==null?void 0:l.name)!==null&&c!==void 0?c:"FetchError"}: ${l==null?void 0:l.message}`,details:f,hint:h,code:m},data:null,count:null,status:0,statusText:""}})),s.then(n,e)}returns(){return this}overrideTypes(){return this}},_5=class extends v5{select(n){let e=!1;const t=(n??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",t),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:e=!0,nullsFirst:t,foreignTable:i,referencedTable:s=i}={}){const l=s?`${s}.order`:"order",c=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${c?`${c},`:""}${n}.${e?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:e,referencedTable:t=e}={}){const i=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${n}`),this}range(n,e,{foreignTable:t,referencedTable:i=t}={}){const s=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${n}`),this.url.searchParams.set(l,`${e-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:e=!1,settings:t=!1,buffers:i=!1,wal:s=!1,format:l="text"}={}){var c;const f=[n?"analyze":null,e?"verbose":null,t?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),h=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${h}"; options=${f};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const d1=new RegExp("[,()]");var md=class extends _5{eq(n,e){return this.url.searchParams.append(n,`eq.${e}`),this}neq(n,e){return this.url.searchParams.append(n,`neq.${e}`),this}gt(n,e){return this.url.searchParams.append(n,`gt.${e}`),this}gte(n,e){return this.url.searchParams.append(n,`gte.${e}`),this}lt(n,e){return this.url.searchParams.append(n,`lt.${e}`),this}lte(n,e){return this.url.searchParams.append(n,`lte.${e}`),this}like(n,e){return this.url.searchParams.append(n,`like.${e}`),this}likeAllOf(n,e){return this.url.searchParams.append(n,`like(all).{${e.join(",")}}`),this}likeAnyOf(n,e){return this.url.searchParams.append(n,`like(any).{${e.join(",")}}`),this}ilike(n,e){return this.url.searchParams.append(n,`ilike.${e}`),this}ilikeAllOf(n,e){return this.url.searchParams.append(n,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(n,e){return this.url.searchParams.append(n,`ilike(any).{${e.join(",")}}`),this}regexMatch(n,e){return this.url.searchParams.append(n,`match.${e}`),this}regexIMatch(n,e){return this.url.searchParams.append(n,`imatch.${e}`),this}is(n,e){return this.url.searchParams.append(n,`is.${e}`),this}isDistinct(n,e){return this.url.searchParams.append(n,`isdistinct.${e}`),this}in(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&d1.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`in.(${t})`),this}notIn(n,e){const t=Array.from(new Set(e)).map(i=>typeof i=="string"&&d1.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(n,`not.in.(${t})`),this}contains(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cs.{${e.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(e)}`),this}containedBy(n,e){return typeof e=="string"?this.url.searchParams.append(n,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(n,`cd.{${e.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(e)}`),this}rangeGt(n,e){return this.url.searchParams.append(n,`sr.${e}`),this}rangeGte(n,e){return this.url.searchParams.append(n,`nxl.${e}`),this}rangeLt(n,e){return this.url.searchParams.append(n,`sl.${e}`),this}rangeLte(n,e){return this.url.searchParams.append(n,`nxr.${e}`),this}rangeAdjacent(n,e){return this.url.searchParams.append(n,`adj.${e}`),this}overlaps(n,e){return typeof e=="string"?this.url.searchParams.append(n,`ov.${e}`):this.url.searchParams.append(n,`ov.{${e.join(",")}}`),this}textSearch(n,e,{config:t,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const l=t===void 0?"":`(${t})`;return this.url.searchParams.append(n,`${s}fts${l}.${e}`),this}match(n){return Object.entries(n).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(n,e,t){return this.url.searchParams.append(n,`not.${e}.${t}`),this}or(n,{foreignTable:e,referencedTable:t=e}={}){const i=t?`${t}.or`:"or";return this.url.searchParams.append(i,`(${n})`),this}filter(n,e,t){return this.url.searchParams.append(n,`${e}.${t}`),this}},S5=class{constructor(n,{headers:e={},schema:t,fetch:i,urlLengthLimit:s=8e3}){this.url=n,this.headers=new Headers(e),this.schema=t,this.fetch=i,this.urlLengthLimit=s}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,e){const{head:t=!1,count:i}=e??{},s=t?"HEAD":"GET";let l=!1;const c=(n??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join(""),{url:f,headers:h}=this.cloneRequestState();return f.searchParams.set("select",c),i&&h.append("Prefer",`count=${i}`),new md({method:s,url:f,headers:h,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:e,defaultToNull:t=!0}={}){var i;const s="POST",{url:l,headers:c}=this.cloneRequestState();if(e&&c.append("Prefer",`count=${e}`),t||c.append("Prefer","missing=default"),Array.isArray(n)){const f=n.reduce((h,m)=>h.concat(Object.keys(m)),[]);if(f.length>0){const h=[...new Set(f)].map(m=>`"${m}"`);l.searchParams.set("columns",h.join(","))}}return new md({method:s,url:l,headers:c,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:e,ignoreDuplicates:t=!1,count:i,defaultToNull:s=!0}={}){var l;const c="POST",{url:f,headers:h}=this.cloneRequestState();if(h.append("Prefer",`resolution=${t?"ignore":"merge"}-duplicates`),e!==void 0&&f.searchParams.set("on_conflict",e),i&&h.append("Prefer",`count=${i}`),s||h.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((v,E)=>v.concat(Object.keys(E)),[]);if(m.length>0){const v=[...new Set(m)].map(E=>`"${E}"`);f.searchParams.set("columns",v.join(","))}}return new md({method:c,url:f,headers:h,schema:this.schema,body:n,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:e}={}){var t;const i="PATCH",{url:s,headers:l}=this.cloneRequestState();return e&&l.append("Prefer",`count=${e}`),new md({method:i,url:s,headers:l,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var e;const t="DELETE",{url:i,headers:s}=this.cloneRequestState();return n&&s.append("Prefer",`count=${n}`),new md({method:t,url:i,headers:s,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}};function Oh(n){"@babel/helpers - typeof";return Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Oh(n)}function b5(n,e){if(Oh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Oh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function x5(n){var e=b5(n,"string");return Oh(e)=="symbol"?e:e+""}function E5(n,e,t){return(e=x5(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function f1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Ip(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?f1(Object(t),!0).forEach(function(i){E5(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):f1(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}var T5=class uS{constructor(e,{headers:t={},schema:i,fetch:s,timeout:l,urlLengthLimit:c=8e3}={}){this.url=e,this.headers=new Headers(t),this.schemaName=i,this.urlLengthLimit=c;const f=s??globalThis.fetch;l!==void 0&&l>0?this.fetch=(h,m)=>{const v=new AbortController,E=setTimeout(()=>v.abort(),l),x=m==null?void 0:m.signal;if(x){if(x.aborted)return clearTimeout(E),f(h,m);const R=()=>{clearTimeout(E),v.abort()};return x.addEventListener("abort",R,{once:!0}),f(h,Ip(Ip({},m),{},{signal:v.signal})).finally(()=>{clearTimeout(E),x.removeEventListener("abort",R)})}return f(h,Ip(Ip({},m),{},{signal:v.signal})).finally(()=>clearTimeout(E))}:this.fetch=f}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new S5(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(e){return new uS(this.url,{headers:this.headers,schema:e,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(e,t={},{head:i=!1,get:s=!1,count:l}={}){var c;let f;const h=new URL(`${this.url}/rpc/${e}`);let m;const v=R=>R!==null&&typeof R=="object"&&(!Array.isArray(R)||R.some(v)),E=i&&Object.values(t).some(v);E?(f="POST",m=t):i||s?(f=i?"HEAD":"GET",Object.entries(t).filter(([R,N])=>N!==void 0).map(([R,N])=>[R,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([R,N])=>{h.searchParams.append(R,N)})):(f="POST",m=t);const x=new Headers(this.headers);return E?x.set("Prefer",l?`count=${l},return=minimal`:"return=minimal"):l&&x.set("Prefer",`count=${l}`),new md({method:f,url:h,headers:x,schema:this.schemaName,body:m,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch,urlLengthLimit:this.urlLengthLimit})}};class C5{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const t=globalThis.process;if(t){const i=t.versions;if(i&&i.node){const s=i.node,l=parseInt(s.replace(/^v/,"").split(".")[0]);return l>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${l} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${l} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const i=this.getWebSocketConstructor();return new i(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const A5="2.95.3",w5=`realtime-js/${A5}`,R5="1.0.0",cS="2.0.0",h1=cS,Zg=1e4,N5=1e3,M5=100;var Er;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(Er||(Er={}));var ei;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(ei||(ei={}));var Fs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Fs||(Fs={}));var Wg;(function(n){n.websocket="websocket"})(Wg||(Wg={}));var Du;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Du||(Du={}));class D5{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,t){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return t(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer((t=e.payload)===null||t===void 0?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,i;const s=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,s)}_encodeJsonUserBroadcastPush(e){var t,i;const s=(i=(t=e.payload)===null||t===void 0?void 0:t.payload)!==null&&i!==void 0?i:{},c=new TextEncoder().encode(JSON.stringify(s)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,t,i){var s,l;const c=e.topic,f=(s=e.ref)!==null&&s!==void 0?s:"",h=(l=e.join_ref)!==null&&l!==void 0?l:"",m=e.payload.event,v=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},E=Object.keys(v).length===0?"":JSON.stringify(v);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`metadata length ${E.length} exceeds maximum of 255`);const x=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+f.length+c.length+m.length+E.length,R=new ArrayBuffer(this.HEADER_LENGTH+x);let N=new DataView(R),z=0;N.setUint8(z++,this.KINDS.userBroadcastPush),N.setUint8(z++,h.length),N.setUint8(z++,f.length),N.setUint8(z++,c.length),N.setUint8(z++,m.length),N.setUint8(z++,E.length),N.setUint8(z++,t),Array.from(h,I=>N.setUint8(z++,I.charCodeAt(0))),Array.from(f,I=>N.setUint8(z++,I.charCodeAt(0))),Array.from(c,I=>N.setUint8(z++,I.charCodeAt(0))),Array.from(m,I=>N.setUint8(z++,I.charCodeAt(0))),Array.from(E,I=>N.setUint8(z++,I.charCodeAt(0)));var D=new Uint8Array(R.byteLength+i.byteLength);return D.set(new Uint8Array(R),0),D.set(new Uint8Array(i),R.byteLength),D.buffer}decode(e,t){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return t(i)}if(typeof e=="string"){const i=JSON.parse(e),[s,l,c,f,h]=i;return t({join_ref:s,ref:l,topic:c,event:f,payload:h})}return t({})}_binaryDecode(e){const t=new DataView(e),i=t.getUint8(0),s=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,s)}}_decodeUserBroadcast(e,t,i){const s=t.getUint8(1),l=t.getUint8(2),c=t.getUint8(3),f=t.getUint8(4);let h=this.HEADER_LENGTH+4;const m=i.decode(e.slice(h,h+s));h=h+s;const v=i.decode(e.slice(h,h+l));h=h+l;const E=i.decode(e.slice(h,h+c));h=h+c;const x=e.slice(h,e.byteLength),R=f===this.JSON_ENCODING?JSON.parse(i.decode(x)):x,N={type:this.BROADCAST_EVENT,event:v,payload:R};return c>0&&(N.meta=JSON.parse(E)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:N}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||((t=e==null?void 0:e.constructor)===null||t===void 0?void 0:t.name)==="ArrayBuffer"}_pick(e,t){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>t.includes(i)))}}class dS{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Wt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Wt||(Wt={}));const p1=(n,e,t={})=>{var i;const s=(i=t.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,c)=>(l[c]=z5(c,n,e,s),l),{}):{}},z5=(n,e,t,i)=>{const s=e.find(f=>f.name===n),l=s==null?void 0:s.type,c=t[n];return l&&!i.includes(l)?fS(l,c):$g(c)},fS=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return k5(e,t)}switch(n){case Wt.bool:return U5(e);case Wt.float4:case Wt.float8:case Wt.int2:case Wt.int4:case Wt.int8:case Wt.numeric:case Wt.oid:return I5(e);case Wt.json:case Wt.jsonb:return O5(e);case Wt.timestamp:return L5(e);case Wt.abstime:case Wt.date:case Wt.daterange:case Wt.int4range:case Wt.int8range:case Wt.money:case Wt.reltime:case Wt.text:case Wt.time:case Wt.timestamptz:case Wt.timetz:case Wt.tsrange:case Wt.tstzrange:return $g(e);default:return $g(e)}},$g=n=>n,U5=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},I5=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},O5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},k5=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,i=n[t];if(n[0]==="{"&&i==="}"){let l;const c=n.slice(1,t);try{l=JSON.parse("["+c+"]")}catch{l=c?c.split(","):[]}return l.map(f=>fS(e,f))}return n},L5=n=>typeof n=="string"?n.replace(" ","T"):n,hS=n=>{const e=new URL(n);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Tg{constructor(e,t,i={},s=Zg){this.channel=e,this.event=t,this.payload=i,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var m1;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(m1||(m1={}));class Nh{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},s=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nh.syncState(this.state,s,l,c),this.pendingDiffs.forEach(h=>{this.state=Nh.syncDiff(this.state,h,l,c)}),this.pendingDiffs=[],f()}),this.channel._on(i.diff,{},s=>{const{onJoin:l,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Nh.syncDiff(this.state,s,l,c),f())}),this.onJoin((s,l,c)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:l,newPresences:c})}),this.onLeave((s,l,c)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:l,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,i,s){const l=this.cloneDeep(e),c=this.transformState(t),f={},h={};return this.map(l,(m,v)=>{c[m]||(h[m]=v)}),this.map(c,(m,v)=>{const E=l[m];if(E){const x=v.map(D=>D.presence_ref),R=E.map(D=>D.presence_ref),N=v.filter(D=>R.indexOf(D.presence_ref)<0),z=E.filter(D=>x.indexOf(D.presence_ref)<0);N.length>0&&(f[m]=N),z.length>0&&(h[m]=z)}else f[m]=v}),this.syncDiff(l,{joins:f,leaves:h},i,s)}static syncDiff(e,t,i,s){const{joins:l,leaves:c}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return i||(i=()=>{}),s||(s=()=>{}),this.map(l,(f,h)=>{var m;const v=(m=e[f])!==null&&m!==void 0?m:[];if(e[f]=this.cloneDeep(h),v.length>0){const E=e[f].map(R=>R.presence_ref),x=v.filter(R=>E.indexOf(R.presence_ref)<0);e[f].unshift(...x)}i(f,v,h)}),this.map(c,(f,h)=>{let m=e[f];if(!m)return;const v=h.map(E=>E.presence_ref);m=m.filter(E=>v.indexOf(E.presence_ref)<0),e[f]=m,s(f,m,h),m.length===0&&delete e[f]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(i=>t(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,i)=>{const s=e[i];return"metas"in s?t[i]=s.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):t[i]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var g1;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(g1||(g1={}));var Mh;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Mh||(Mh={}));var Sl;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Sl||(Sl={}));class Sd{constructor(e,t={config:{}},i){var s,l;if(this.topic=e,this.params=t,this.socket=i,this.bindings={},this.state=ei.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Tg(this,Fs.join,this.params,this.timeout),this.rejoinTimer=new dS(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ei.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ei.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ei.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ei.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=ei.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Fs.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new Nh(this),this.broadcastEndpointURL=hS(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var i,s,l;if(this.socket.isConnected()||this.socket.connect(),this.state==ei.closed){const{config:{broadcast:c,presence:f,private:h}}=this.params,m=(s=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(R=>R.filter))!==null&&s!==void 0?s:[],v=!!this.bindings[Mh.PRESENCE]&&this.bindings[Mh.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,E={},x={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:v}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(E.access_token=this.socket.accessTokenValue),this._onError(R=>e==null?void 0:e(Sl.CHANNEL_ERROR,R)),this._onClose(()=>e==null?void 0:e(Sl.CLOSED)),this.updateJoinPayload(Object.assign({config:x},E)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:R})=>{var N;if(this.socket._isManualToken()||this.socket.setAuth(),R===void 0){e==null||e(Sl.SUBSCRIBED);return}else{const z=this.bindings.postgres_changes,D=(N=z==null?void 0:z.length)!==null&&N!==void 0?N:0,I=[];for(let L=0;L<D;L++){const U=z[L],{filter:{event:G,schema:P,table:K,filter:$}}=U,J=R&&R[L];if(J&&J.event===G&&Sd.isFilterValueEqual(J.schema,P)&&Sd.isFilterValueEqual(J.table,K)&&Sd.isFilterValueEqual(J.filter,$))I.push(Object.assign(Object.assign({},U),{id:J.id}));else{this.unsubscribe(),this.state=ei.errored,e==null||e(Sl.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=I,e&&e(Sl.SUBSCRIBED);return}}).receive("error",R=>{this.state=ei.errored,e==null||e(Sl.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(R).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Sl.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,i){return this.state===ei.joined&&e===Mh.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,t,i)}async httpSend(e,t,i={}){var s;if(t==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const c={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(s=i.timeout)!==null&&s!==void 0?s:this.timeout);if(f.status===202)return{success:!0};let h=f.statusText;try{const m=await f.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,t={}){var i,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:c}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const h={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(i=t.timeout)!==null&&i!==void 0?i:this.timeout);return await((s=m.body)===null||s===void 0?void 0:s.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var c,f,h;const m=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||h===void 0)&&h.ack)&&l("ok"),m.receive("ok",()=>l("ok")),m.receive("error",()=>l("error")),m.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ei.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Fs.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(s=>{i=new Tg(this,Fs.leave,{},e),i.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ei.closed,this.bindings={}}async _fetchWithTimeout(e,t,i){const s=new AbortController,l=setTimeout(()=>s.abort(),i),c=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(l),c}_push(e,t,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Tg(this,e,t,i);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>M5){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,i){var s,l;const c=e.toLocaleLowerCase(),{close:f,error:h,leave:m,join:v}=Fs;if(i&&[f,h,m,v].indexOf(c)>=0&&i!==this._joinRef())return;let x=this._onMessage(c,t,i);if(t&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(R=>{var N,z,D;return((N=R.filter)===null||N===void 0?void 0:N.event)==="*"||((D=(z=R.filter)===null||z===void 0?void 0:z.event)===null||D===void 0?void 0:D.toLocaleLowerCase())===c}).map(R=>R.callback(x,i)):(l=this.bindings[c])===null||l===void 0||l.filter(R=>{var N,z,D,I,L,U;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in R){const G=R.id,P=(N=R.filter)===null||N===void 0?void 0:N.event;return G&&((z=t.ids)===null||z===void 0?void 0:z.includes(G))&&(P==="*"||(P==null?void 0:P.toLocaleLowerCase())===((D=t.data)===null||D===void 0?void 0:D.type.toLocaleLowerCase()))}else{const G=(L=(I=R==null?void 0:R.filter)===null||I===void 0?void 0:I.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return G==="*"||G===((U=t==null?void 0:t.event)===null||U===void 0?void 0:U.toLocaleLowerCase())}else return R.type.toLocaleLowerCase()===c}).map(R=>{if(typeof x=="object"&&"ids"in x){const N=x.data,{schema:z,table:D,commit_timestamp:I,type:L,errors:U}=N;x=Object.assign(Object.assign({},{schema:z,table:D,commit_timestamp:I,eventType:L,new:{},old:{},errors:U}),this._getPayloadRecords(N))}R.callback(x,i)})}_isClosed(){return this.state===ei.closed}_isJoined(){return this.state===ei.joined}_isJoining(){return this.state===ei.joining}_isLeaving(){return this.state===ei.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const s=e.toLocaleLowerCase(),l={type:s,filter:t,callback:i};return this.bindings[s]?this.bindings[s].push(l):this.bindings[s]=[l],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(s=>{var l;return!(((l=s.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Sd.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}static isFilterValueEqual(e,t){return(e??void 0)===(t??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Fs.close,{},e)}_onError(e){this._on(Fs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ei.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=p1(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=p1(e.columns,e.old_record)),t}}const Cg=()=>{},Op={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},G5=[1e3,2e3,5e3,1e4],H5=1e4,B5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class P5{constructor(e,t){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zg,this.transport=null,this.heartbeatIntervalMs=Op.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Cg,this.ref=0,this.reconnectTimer=null,this.vsn=h1,this.logger=Cg,this.conn=null,this.sendBuffer=[],this.serializer=new D5,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=s=>s?(...l)=>s(...l):(...l)=>fetch(...l),!(!((i=t==null?void 0:t.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Wg.websocket}`,this.httpEndpoint=hS(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t==null?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=C5.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,t??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return t==="ok"&&this._remove(e),this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,i){this.logger(e,t,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Er.connecting:return Du.Connecting;case Er.open:return Du.Open;case Er.closing:return Du.Closing;default:return Du.Closed}}isConnected(){return this.connectionState()===Du.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const i=`realtime:${e}`,s=this.getChannels().find(l=>l.topic===i);if(s)return s;{const l=new Sd(`realtime:${e}`,t,this);return this.channels.push(l),l}}push(e){const{topic:t,event:i,payload:s,ref:l}=e,c=()=>{this.encode(e,f=>{var h;(h=this.conn)===null||h===void 0||h.send(f)})};this.log("push",`${t} ${i} (${l})`,s),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(N5,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},Op.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply"&&t.ref&&t.ref===this.pendingHeartbeatRef){const m=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error",m)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:i,event:s,payload:l,ref:c}=t,f=c?`(${c})`:"",h=l.status||"";this.log("receive",`${h} ${i} ${s} ${f}`.trim(),l),this.channels.filter(m=>m._isMember(i)).forEach(m=>m._trigger(s,l,c)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Er.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Er.open||this.conn.readyState===Er.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(t=>{this.log("error","error waiting for auth on connect",t),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this._terminateWorker()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(t){this.log("error","error in heartbeat callback",t)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(Fs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const i=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${i}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const i=new Blob([B5],{type:"application/javascript"});t=URL.createObjectURL(i)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t,i=!1;if(e)t=e,i=!0;else if(this.accessToken)try{t=await this.accessToken()}catch(s){this.log("error","Error fetching access token from callback",s),t=this.accessTokenValue}else t=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(s=>{const l={access_token:t,version:w5};t&&s.updateJoinPayload(l),s.joinedOnce&&s._isJoined()&&s._push(Fs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(t=>{this.log("error",`Error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new dS(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Op.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,i,s,l,c,f,h,m,v,E,x,R;switch(this.transport=(t=e==null?void 0:e.transport)!==null&&t!==void 0?t:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:Zg,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Op.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:Cg,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:h1,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:(N=>G5[N-1]||H5),this.vsn){case R5:this.encode=(v=e==null?void 0:e.encode)!==null&&v!==void 0?v:((N,z)=>z(JSON.stringify(N))),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:((N,z)=>z(JSON.parse(N)));break;case cS:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:this.serializer.encode.bind(this.serializer),this.decode=(R=e==null?void 0:e.decode)!==null&&R!==void 0?R:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var kh=class extends Error{constructor(n,e){var t;super(n),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((t=e.icebergType)==null?void 0:t.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function q5(n,e,t){const i=new URL(e,n);if(t)for(const[s,l]of Object.entries(t))l!==void 0&&i.searchParams.set(s,l);return i.toString()}async function V5(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function j5(n){const e=n.fetchImpl??globalThis.fetch;return{async request({method:t,path:i,query:s,body:l,headers:c}){const f=q5(n.baseUrl,i,s),h=await V5(n.auth),m=await e(f,{method:t,headers:{...l?{"Content-Type":"application/json"}:{},...h,...c},body:l?JSON.stringify(l):void 0}),v=await m.text(),E=(m.headers.get("content-type")||"").includes("application/json"),x=E&&v?JSON.parse(v):v;if(!m.ok){const R=E?x:void 0,N=R==null?void 0:R.error;throw new kh((N==null?void 0:N.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:N==null?void 0:N.type,icebergCode:N==null?void 0:N.code,details:R})}return{status:m.status,headers:m.headers,data:x}}}}function kp(n){return n.join("")}var Y5=class{constructor(n,e=""){this.client=n,this.prefix=e}async listNamespaces(n){const e=n?{parent:kp(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(n,e){const t={namespace:n.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:t})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${kp(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${kp(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${kp(n.namespace)}`}),!0}catch(e){if(e instanceof kh&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(n,e){try{return await this.createNamespace(n,e)}catch(t){if(t instanceof kh&&t.status===409)return;throw t}}};function sd(n){return n.join("")}var F5=class{constructor(n,e="",t){this.client=n,this.prefix=e,this.accessDelegation=t}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables`})).data.identifiers}async createTable(n,e){const t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables`,body:e,headers:t})).data.metadata}async updateTable(n,e){const t=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables/${n.name}`,body:e});return{"metadata-location":t.data["metadata-location"],metadata:t.data.metadata}}async dropTable(n,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(n){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables/${n.name}`,headers:e})).data.metadata}async tableExists(n){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${sd(n.namespace)}/tables/${n.name}`,headers:e}),!0}catch(t){if(t instanceof kh&&t.status===404)return!1;throw t}}async createTableIfNotExists(n,e){try{return await this.createTable(n,e)}catch(t){if(t instanceof kh&&t.status===409)return await this.loadTable({namespace:n.namespace,name:e.name});throw t}}},K5=class{constructor(n){var i;let e="v1";n.catalogName&&(e+=`/${n.catalogName}`);const t=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=j5({baseUrl:t,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(i=n.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new Y5(this.client,e),this.tableOps=new F5(this.client,e,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,e){return this.namespaceOps.createNamespace(n,e)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,e){return this.tableOps.createTable(n,e)}async updateTable(n,e){return this.tableOps.updateTable(n,e)}async dropTable(n,e){await this.tableOps.dropTable(n,e)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,e){return this.namespaceOps.createNamespaceIfNotExists(n,e)}async createTableIfNotExists(n,e){return this.tableOps.createTableIfNotExists(n,e)}},xm=class extends Error{constructor(n,e="storage",t,i){super(n),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=t,this.statusCode=i}};function Em(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Lp=class extends xm{constructor(n,e,t,i="storage"){super(n,i,e,t),this.name=i==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=t}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},pS=class extends xm{constructor(n,e,t="storage"){super(n,t),this.name=t==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const J5=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),X5=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ey=n=>{if(Array.isArray(n))return n.map(t=>ey(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,i])=>{const s=t.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[s]=ey(i)}),e},Q5=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Lh(n){"@babel/helpers - typeof";return Lh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lh(n)}function Z5(n,e){if(Lh(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Lh(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function W5(n){var e=Z5(n,"string");return Lh(e)=="symbol"?e:e+""}function $5(n,e,t){return(e=W5(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function y1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function We(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?y1(Object(t),!0).forEach(function(i){$5(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):y1(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const v1=n=>{var e;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(e=n.error)===null||e===void 0?void 0:e.message)||JSON.stringify(n)},eE=async(n,e,t,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(t!=null&&t.noResolveJson)){const s=n,l=s.status||500;if(typeof s.json=="function")s.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||l+"";e(new Lp(v1(c),l,f,i))}).catch(()=>{if(i==="vectors"){const c=l+"";e(new Lp(s.statusText||`HTTP ${l} error`,l,c,i))}else{const c=l+"";e(new Lp(s.statusText||`HTTP ${l} error`,l,c,i))}});else{const c=l+"";e(new Lp(s.statusText||`HTTP ${l} error`,l,c,i))}}else e(new pS(v1(n),n,i))},tE=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"||n==="HEAD"||!i?We(We({},s),t):(X5(i)?(s.headers=We({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(i)):s.body=i,e!=null&&e.duplex&&(s.duplex=e.duplex),We(We({},s),t))};async function fh(n,e,t,i,s,l,c){return new Promise((f,h)=>{n(t,tE(e,i,s,l)).then(m=>{if(!m.ok)throw m;if(i!=null&&i.noResolveJson)return m;if(c==="vectors"){const v=m.headers.get("content-type");if(m.headers.get("content-length")==="0"||m.status===204)return{};if(!v||!v.includes("application/json"))return{}}return m.json()}).then(m=>f(m)).catch(m=>eE(m,h,i,c))})}function mS(n="storage"){return{get:async(e,t,i,s)=>fh(e,"GET",t,i,s,void 0,n),post:async(e,t,i,s,l)=>fh(e,"POST",t,s,l,i,n),put:async(e,t,i,s,l)=>fh(e,"PUT",t,s,l,i,n),head:async(e,t,i,s)=>fh(e,"HEAD",t,We(We({},i),{},{noResolveJson:!0}),s,void 0,n),remove:async(e,t,i,s,l)=>fh(e,"DELETE",t,s,l,i,n)}}const nE=mS("storage"),{get:Gh,post:Ys,put:ty,head:iE,remove:By}=nE,La=mS("vectors");var Nd=class{constructor(n,e={},t,i="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=e,this.fetch=J5(t),this.namespace=i}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(n){var e=this;try{return{data:await n(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(Em(t))return{data:null,error:t};throw t}}},aE=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e}then(n,e){return this.execute().then(n,e)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Em(e))return{data:null,error:e};throw e}}};let gS;gS=Symbol.toStringTag;var sE=class{constructor(n,e){this.downloadFn=n,this.shouldThrowOnError=e,this[gS]="BlobDownloadBuilder",this.promise=null}asStream(){return new aE(this.downloadFn,this.shouldThrowOnError)}then(n,e){return this.getPromise().then(n,e)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(e){if(n.shouldThrowOnError)throw e;if(Em(e))return{data:null,error:e};throw e}}};const oE={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var lE=class extends Nd{constructor(n,e={},t,i){super(n,e,i,"storage"),this.bucketId=t}async uploadOrUpdate(n,e,t,i){var s=this;return s.handleOperation(async()=>{let l;const c=We(We({},_1),i);let f=We(We({},s.headers),n==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),h&&l.append("metadata",s.encodeMetadata(h)),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.has("cacheControl")||l.append("cacheControl",c.cacheControl),h&&!l.has("metadata")&&l.append("metadata",s.encodeMetadata(h))):(l=t,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,h&&(f["x-metadata"]=s.toBase64(s.encodeMetadata(h))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!c.duplex&&(c.duplex="half")),i!=null&&i.headers&&(f=We(We({},f),i.headers));const m=s._removeEmptyFolders(e),v=s._getFinalPath(m),E=await(n=="PUT"?ty:Ys)(s.fetch,`${s.url}/object/${v}`,l,We({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{path:m,id:E.Id,fullPath:E.Key}})}async upload(n,e,t){return this.uploadOrUpdate("POST",n,e,t)}async uploadToSignedUrl(n,e,t,i){var s=this;const l=s._removeEmptyFolders(n),c=s._getFinalPath(l),f=new URL(s.url+`/object/upload/sign/${c}`);return f.searchParams.set("token",e),s.handleOperation(async()=>{let h;const m=We({upsert:_1.upsert},i),v=We(We({},s.headers),{"x-upsert":String(m.upsert)});return typeof Blob<"u"&&t instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",t)):typeof FormData<"u"&&t instanceof FormData?(h=t,h.append("cacheControl",m.cacheControl)):(h=t,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType),{path:l,fullPath:(await ty(s.fetch,f.toString(),h,{headers:v})).Key}})}async createSignedUploadUrl(n,e){var t=this;return t.handleOperation(async()=>{let i=t._getFinalPath(n);const s=We({},t.headers);e!=null&&e.upsert&&(s["x-upsert"]="true");const l=await Ys(t.fetch,`${t.url}/object/upload/sign/${i}`,{},{headers:s}),c=new URL(t.url+l.url),f=c.searchParams.get("token");if(!f)throw new xm("No token returned by API");return{signedUrl:c.toString(),path:n,token:f}})}async update(n,e,t){return this.uploadOrUpdate("PUT",n,e,t)}async move(n,e,t){var i=this;return i.handleOperation(async()=>await Ys(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers}))}async copy(n,e,t){var i=this;return i.handleOperation(async()=>({path:(await Ys(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:n,destinationKey:e,destinationBucket:t==null?void 0:t.destinationBucket},{headers:i.headers})).Key}))}async createSignedUrl(n,e,t){var i=this;return i.handleOperation(async()=>{let s=i._getFinalPath(n),l=await Ys(i.fetch,`${i.url}/object/sign/${s}`,We({expiresIn:e},t!=null&&t.transform?{transform:t.transform}:{}),{headers:i.headers});const c=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{signedUrl:encodeURI(`${i.url}${l.signedURL}${c}`)}})}async createSignedUrls(n,e,t){var i=this;return i.handleOperation(async()=>{const s=await Ys(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:n},{headers:i.headers}),l=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s.map(c=>We(We({},c),{},{signedUrl:c.signedURL?encodeURI(`${i.url}${c.signedURL}${l}`):null}))})}download(n,e,t){const i=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),l=s?`?${s}`:"",c=this._getFinalPath(n),f=()=>Gh(this.fetch,`${this.url}/${i}/${c}${l}`,{headers:this.headers,noResolveJson:!0},t);return new sE(f,this.shouldThrowOnError)}async info(n){var e=this;const t=e._getFinalPath(n);return e.handleOperation(async()=>ey(await Gh(e.fetch,`${e.url}/object/info/${t}`,{headers:e.headers})))}async exists(n){var e=this;const t=e._getFinalPath(n);try{return await iE(e.fetch,`${e.url}/object/${t}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(Em(i)&&i instanceof pS){const s=i.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:i}}throw i}}getPublicUrl(n,e){const t=this._getFinalPath(n),i=[],s=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&i.push(s);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});c!==""&&i.push(c);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${t}${f}`)}}}async remove(n){var e=this;return e.handleOperation(async()=>await By(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:n},{headers:e.headers}))}async list(n,e,t){var i=this;return i.handleOperation(async()=>{const s=We(We(We({},oE),e),{},{prefix:n||""});return await Ys(i.fetch,`${i.url}/object/list/${i.bucketId}`,s,{headers:i.headers},t)})}async listV2(n,e){var t=this;return t.handleOperation(async()=>{const i=We({},n);return await Ys(t.fetch,`${t.url}/object/list-v2/${t.bucketId}`,i,{headers:t.headers},e)})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const e=[];return n.width&&e.push(`width=${n.width}`),n.height&&e.push(`height=${n.height}`),n.resize&&e.push(`resize=${n.resize}`),n.format&&e.push(`format=${n.format}`),n.quality&&e.push(`quality=${n.quality}`),e.join("&")}};const rE="2.95.3",Fh={"X-Client-Info":`storage-js/${rE}`};var uE=class extends Nd{constructor(n,e={},t,i){const s=new URL(n);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."));const l=s.href.replace(/\/$/,""),c=We(We({},Fh),e);super(l,c,t,"storage")}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=e.listBucketOptionsToQueryString(n);return await Gh(e.fetch,`${e.url}/bucket${t}`,{headers:e.headers})})}async getBucket(n){var e=this;return e.handleOperation(async()=>await Gh(e.fetch,`${e.url}/bucket/${n}`,{headers:e.headers}))}async createBucket(n,e={public:!1}){var t=this;return t.handleOperation(async()=>await Ys(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async updateBucket(n,e){var t=this;return t.handleOperation(async()=>await ty(t.fetch,`${t.url}/bucket/${n}`,{id:n,name:n,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:t.headers}))}async emptyBucket(n){var e=this;return e.handleOperation(async()=>await Ys(e.fetch,`${e.url}/bucket/${n}/empty`,{},{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await By(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(n){const e={};return n&&("limit"in n&&(e.limit=String(n.limit)),"offset"in n&&(e.offset=String(n.offset)),n.search&&(e.search=n.search),n.sortColumn&&(e.sortColumn=n.sortColumn),n.sortOrder&&(e.sortOrder=n.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},cE=class extends Nd{constructor(n,e={},t){const i=n.replace(/\/$/,""),s=We(We({},Fh),e);super(i,s,t,"storage")}async createBucket(n){var e=this;return e.handleOperation(async()=>await Ys(e.fetch,`${e.url}/bucket`,{name:n},{headers:e.headers}))}async listBuckets(n){var e=this;return e.handleOperation(async()=>{const t=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&t.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&t.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&t.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&t.set("sortOrder",n.sortOrder),n!=null&&n.search&&t.set("search",n.search);const i=t.toString(),s=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return await Gh(e.fetch,s,{headers:e.headers})})}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await By(e.fetch,`${e.url}/bucket/${n}`,{},{headers:e.headers}))}from(n){var e=this;if(!Q5(n))throw new xm("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const t=new K5({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(t,{get(s,l){const c=s[l];return typeof c!="function"?c:async(...f)=>{try{return{data:await c.apply(s,f),error:null}}catch(h){if(i)throw h;return{data:null,error:h}}}}})}},dE=class extends Nd{constructor(n,e={},t){const i=n.replace(/\/$/,""),s=We(We({},Fh),{},{"Content-Type":"application/json"},e);super(i,s,t,"vectors")}async createIndex(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/CreateIndex`,n,{headers:e.headers})||{})}async getIndex(n,e){var t=this;return t.handleOperation(async()=>await La.post(t.fetch,`${t.url}/GetIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers}))}async listIndexes(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/ListIndexes`,n,{headers:e.headers}))}async deleteIndex(n,e){var t=this;return t.handleOperation(async()=>await La.post(t.fetch,`${t.url}/DeleteIndex`,{vectorBucketName:n,indexName:e},{headers:t.headers})||{})}},fE=class extends Nd{constructor(n,e={},t){const i=n.replace(/\/$/,""),s=We(We({},Fh),{},{"Content-Type":"application/json"},e);super(i,s,t,"vectors")}async putVectors(n){var e=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/PutVectors`,n,{headers:e.headers})||{})}async getVectors(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/GetVectors`,n,{headers:e.headers}))}async listVectors(n){var e=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/ListVectors`,n,{headers:e.headers}))}async queryVectors(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/QueryVectors`,n,{headers:e.headers}))}async deleteVectors(n){var e=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/DeleteVectors`,n,{headers:e.headers})||{})}},hE=class extends Nd{constructor(n,e={},t){const i=n.replace(/\/$/,""),s=We(We({},Fh),{},{"Content-Type":"application/json"},e);super(i,s,t,"vectors")}async createBucket(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}async getBucket(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:n},{headers:e.headers}))}async listBuckets(n={}){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/ListVectorBuckets`,n,{headers:e.headers}))}async deleteBucket(n){var e=this;return e.handleOperation(async()=>await La.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:e.headers})||{})}},pE=class extends hE{constructor(n,e={}){super(n,e.headers||{},e.fetch)}from(n){return new mE(this.url,this.headers,n,this.fetch)}async createBucket(n){var e=()=>super.createBucket,t=this;return e().call(t,n)}async getBucket(n){var e=()=>super.getBucket,t=this;return e().call(t,n)}async listBuckets(n={}){var e=()=>super.listBuckets,t=this;return e().call(t,n)}async deleteBucket(n){var e=()=>super.deleteBucket,t=this;return e().call(t,n)}},mE=class extends dE{constructor(n,e,t,i){super(n,e,i),this.vectorBucketName=t}async createIndex(n){var e=()=>super.createIndex,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName}))}async listIndexes(n={}){var e=()=>super.listIndexes,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName}))}async getIndex(n){var e=()=>super.getIndex,t=this;return e().call(t,t.vectorBucketName,n)}async deleteIndex(n){var e=()=>super.deleteIndex,t=this;return e().call(t,t.vectorBucketName,n)}index(n){return new gE(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},gE=class extends fE{constructor(n,e,t,i,s){super(n,e,s),this.vectorBucketName=t,this.indexName=i}async putVectors(n){var e=()=>super.putVectors,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async getVectors(n){var e=()=>super.getVectors,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async listVectors(n={}){var e=()=>super.listVectors,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async queryVectors(n){var e=()=>super.queryVectors,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}async deleteVectors(n){var e=()=>super.deleteVectors,t=this;return e().call(t,We(We({},n),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))}},yE=class extends uE{constructor(n,e={},t,i){super(n,e,t,i)}from(n){return new lE(this.url,this.headers,n,this.fetch)}get vectors(){return new pE(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new cE(this.url+"/iceberg",this.headers,this.fetch)}};const yS="2.95.3",gd=30*1e3,ny=3,Ag=ny*gd,vE="http://localhost:9999",_E="supabase.auth.token",SE={"X-Client-Info":`gotrue-js/${yS}`},iy="X-Supabase-Api-Version",vS={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bE=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,xE=600*1e3;class Hh extends Error{constructor(e,t,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=i}}function Pe(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class EE extends Hh{constructor(e,t,i){super(e,t,i),this.name="AuthApiError",this.status=t,this.code=i}}function TE(n){return Pe(n)&&n.name==="AuthApiError"}class zu extends Hh{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xl extends Hh{constructor(e,t,i,s){super(e,i,s),this.name=t,this.status=i}}class ka extends xl{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function wg(n){return Pe(n)&&n.name==="AuthSessionMissingError"}class od extends xl{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Gp extends xl{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Hp extends xl{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function CE(n){return Pe(n)&&n.name==="AuthImplicitGrantRedirectError"}class S1 extends xl{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class AE extends xl{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ay extends xl{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Rg(n){return Pe(n)&&n.name==="AuthRetryableFetchError"}class b1 extends xl{constructor(e,t,i){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=i}}class sy extends xl{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const lm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x1=` 	
\r=`.split(""),wE=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<x1.length;e+=1)n[x1[e].charCodeAt(0)]=-2;for(let e=0;e<lm.length;e+=1)n[lm[e].charCodeAt(0)]=e;return n})();function E1(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(lm[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;t(lm[i]),e.queuedBits-=6}}function _S(n,e,t){const i=wE[n];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function T1(n){const e=[],t=c=>{e.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},l=c=>{ME(c,i,t)};for(let c=0;c<n.length;c+=1)_S(n.charCodeAt(c),s,l);return e.join("")}function RE(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function NE(n,e){for(let t=0;t<n.length;t+=1){let i=n.charCodeAt(t);if(i>55295&&i<=56319){const s=(i-55296)*1024&65535;i=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}RE(i,e)}}function ME(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function Td(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)_S(n.charCodeAt(s),t,i);return new Uint8Array(e)}function DE(n){const e=[];return NE(n,t=>e.push(t)),new Uint8Array(e)}function Uu(n){const e=[],t={queue:0,queuedBits:0},i=s=>{e.push(s)};return n.forEach(s=>E1(s,t,i)),E1(null,t,i),e.join("")}function zE(n){return Math.round(Date.now()/1e3)+n}function UE(){return Symbol("auth-callback")}const wi=()=>typeof window<"u"&&typeof document<"u",Cu={tested:!1,writable:!1},SS=()=>{if(!wi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cu.tested)return Cu.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Cu.tested=!0,Cu.writable=!0}catch{Cu.tested=!0,Cu.writable=!1}return Cu.writable};function IE(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,l)=>{e[l]=s})}catch{}return t.searchParams.forEach((i,s)=>{e[s]=i}),e}const bS=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),OE=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",yd=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},Au=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Ci=async(n,e)=>{await n.removeItem(e)};class Tm{constructor(){this.promise=new Tm.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Tm.promiseConstructor=Promise;function Bp(n){const e=n.split(".");if(e.length!==3)throw new sy("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!bE.test(e[i]))throw new sy("JWT not in base64url format");return{header:JSON.parse(T1(e[0])),payload:JSON.parse(T1(e[1])),signature:Td(e[2]),raw:{header:e[0],payload:e[1]}}}async function kE(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function LE(n,e){return new Promise((i,s)=>{(async()=>{for(let l=0;l<1/0;l++)try{const c=await n(l);if(!e(l,null,c)){i(c);return}}catch(c){if(!e(l,c)){s(c);return}}})()})}function GE(n){return("0"+n.toString(16)).substr(-2)}function HE(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=t.length;let s="";for(let l=0;l<56;l++)s+=t.charAt(Math.floor(Math.random()*i));return s}return crypto.getRandomValues(e),Array.from(e,GE).join("")}async function BE(n){const t=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(i);return Array.from(s).map(l=>String.fromCharCode(l)).join("")}async function PE(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await BE(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ld(n,e,t=!1){const i=HE();let s=i;t&&(s+="/PASSWORD_RECOVERY"),await yd(n,`${e}-code-verifier`,s);const l=await PE(i);return[l,i===l?"plain":"s256"]}const qE=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function VE(n){const e=n.headers.get(iy);if(!e||!e.match(qE))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function jE(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function YE(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const FE=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function rd(n){if(!FE.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ng(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const i=t.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function KE(n,e){return new Proxy(n,{get:(t,i,s)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,i,s)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,i,s)}})}function C1(n){return JSON.parse(JSON.stringify(n))}const Nu=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),JE=[502,503,504];async function A1(n){var e;if(!OE(n))throw new ay(Nu(n),0);if(JE.includes(n.status))throw new ay(Nu(n),n.status);let t;try{t=await n.json()}catch(l){throw new zu(Nu(l),l)}let i;const s=VE(n);if(s&&s.getTime()>=vS["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?i=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(i=t.error_code),i){if(i==="weak_password")throw new b1(Nu(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new ka}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((l,c)=>l&&typeof c=="string",!0))throw new b1(Nu(t),n.status,t.weak_password.reasons);throw new EE(Nu(t),n.status||500,i)}const XE=(n,e,t,i)=>{const s={method:n,headers:(e==null?void 0:e.headers)||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(i),Object.assign(Object.assign({},s),t))};async function Qe(n,e,t,i){var s;const l=Object.assign({},i==null?void 0:i.headers);l[iy]||(l[iy]=vS["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const c=(s=i==null?void 0:i.query)!==null&&s!==void 0?s:{};i!=null&&i.redirectTo&&(c.redirect_to=i.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await QE(n,e,t+f,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(h):{data:Object.assign({},h),error:null}}async function QE(n,e,t,i,s,l){const c=XE(e,i,s,l);let f;try{f=await n(t,Object.assign({},c))}catch(h){throw console.error(h),new ay(Nu(h),0)}if(f.ok||await A1(f),i!=null&&i.noResolveJson)return f;try{return await f.json()}catch(h){await A1(h)}}function js(n){var e;let t=null;$E(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=zE(n.expires_in)));const i=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:i},error:null}}function w1(n){const e=js(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,i)=>t&&typeof i=="string",!0)&&(e.data.weak_password=n.weak_password),e}function Tr(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function ZE(n){return{data:n,error:null}}function WE(n){const{action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:l}=n,c=bm(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:t,hashed_token:i,redirect_to:s,verification_type:l},h=Object.assign({},c);return{data:{properties:f,user:h},error:null}}function R1(n){return n}function $E(n){return n.access_token&&n.refresh_token&&n.expires_in}const Mg=["global","local","others"];class e4{constructor({url:e="",headers:t={},fetch:i}){this.url=e,this.headers=t,this.fetch=bS(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Mg[0]){if(Mg.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mg.join(", ")}`);try{return await Qe(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Pe(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,t={}){try{return await Qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Tr})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:t}=e,i=bm(e,["options"]),s=Object.assign(Object.assign({},i),t);return"newEmail"in i&&(s.new_email=i==null?void 0:i.newEmail,delete s.newEmail),await Qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:WE,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(Pe(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Tr})}catch(t){if(Pe(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,i,s,l,c,f,h;try{const m={nextPage:null,lastPage:0,total:0},v=await Qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:R1});if(v.error)throw v.error;const E=await v.json(),x=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,R=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return R.length>0&&(R.forEach(N=>{const z=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(N.split(";")[1].split("=")[1]);m[`${D}Page`]=z}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},E),m),error:null}}catch(m){if(Pe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){rd(e);try{return await Qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Tr})}catch(t){if(Pe(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){rd(e);try{return await Qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Tr})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,t=!1){rd(e);try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Tr})}catch(i){if(Pe(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){rd(e.userId);try{const{data:t,error:i}=await Qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:i}}catch(t){if(Pe(t))return{data:null,error:t};throw t}}async _deleteFactor(e){rd(e.userId),rd(e.id);try{return{data:await Qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,i,s,l,c,f,h;try{const m={nextPage:null,lastPage:0,total:0},v=await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(t=e==null?void 0:e.page)===null||t===void 0?void 0:t.toString())!==null&&i!==void 0?i:"",per_page:(l=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&l!==void 0?l:""},xform:R1});if(v.error)throw v.error;const E=await v.json(),x=(c=v.headers.get("x-total-count"))!==null&&c!==void 0?c:0,R=(h=(f=v.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&h!==void 0?h:[];return R.length>0&&(R.forEach(N=>{const z=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),D=JSON.parse(N.split(";")[1].split("=")[1]);m[`${D}Page`]=z}),m.total=parseInt(x)),{data:Object.assign(Object.assign({},E),m),error:null}}catch(m){if(Pe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Pe(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await Qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Pe(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await Qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Pe(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Pe(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await Qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(Pe(t))return{data:null,error:t};throw t}}}function N1(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}const ud={debug:!!(globalThis&&SS()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class xS extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class t4 extends xS{}async function n4(n,e,t){ud.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),ud.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async s=>{if(s){ud.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{ud.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw ud.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new t4(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(ud.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function i4(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ES(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function a4(n){return parseInt(n,16)}function s4(n){const e=new TextEncoder().encode(n);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function o4(n){var e;const{chainId:t,domain:i,expirationTime:s,issuedAt:l=new Date,nonce:c,notBefore:f,requestId:h,resources:m,scheme:v,uri:E,version:x}=n;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!E)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=n.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const R=ES(n.address),N=v?`${v}://${i}`:i,z=n.statement?`${n.statement}
`:"",D=`${N} wants you to sign in with your Ethereum account:
${R}

${z}`;let I=`URI: ${E}
Version: ${x}
Chain ID: ${t}${c?`
Nonce: ${c}`:""}
Issued At: ${l.toISOString()}`;if(s&&(I+=`
Expiration Time: ${s.toISOString()}`),f&&(I+=`
Not Before: ${f.toISOString()}`),h&&(I+=`
Request ID: ${h}`),m){let L=`
Resources:`;for(const U of m){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);L+=`
- ${U}`}I+=L}return`${D}
${I}`}class Kn extends Error{constructor({message:e,code:t,cause:i,name:s}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=s??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=t}}class rm extends Kn{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function l4({error:n,options:e}){var t,i,s;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((t=l.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new Kn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Kn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((s=l.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Kn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new Kn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new Kn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Kn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new Kn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const c=window.location.hostname;if(TS(c)){if(l.rp.id!==c)return new Kn({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new Kn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new Kn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function r4({error:n,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Kn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new Kn({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(TS(i)){if(t.rpId!==i)return new Kn({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new Kn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new Kn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new Kn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class u4{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const c4=new u4;function d4(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:e,user:t,excludeCredentials:i}=n,s=bm(n,["challenge","user","excludeCredentials"]),l=Td(e).buffer,c=Object.assign(Object.assign({},t),{id:Td(t.id).buffer}),f=Object.assign(Object.assign({},s),{challenge:l,user:c});if(i&&i.length>0){f.excludeCredentials=new Array(i.length);for(let h=0;h<i.length;h++){const m=i[h];f.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Td(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function f4(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:e,allowCredentials:t}=n,i=bm(n,["challenge","allowCredentials"]),s=Td(e).buffer,l=Object.assign(Object.assign({},i),{challenge:s});if(t&&t.length>0){l.allowCredentials=new Array(t.length);for(let c=0;c<t.length;c++){const f=t[c];l.allowCredentials[c]=Object.assign(Object.assign({},f),{id:Td(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function h4(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n;return{id:n.id,rawId:n.id,response:{attestationObject:Uu(new Uint8Array(n.response.attestationObject)),clientDataJSON:Uu(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function p4(n){var e;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const t=n,i=n.getClientExtensionResults(),s=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Uu(new Uint8Array(s.authenticatorData)),clientDataJSON:Uu(new Uint8Array(s.clientDataJSON)),signature:Uu(new Uint8Array(s.signature)),userHandle:s.userHandle?Uu(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function TS(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function M1(){var n,e;return!!(wi()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function m4(n){try{const e=await navigator.credentials.create(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rm("Browser returned unexpected credential type",e)}:{data:null,error:new rm("Empty credential response",e)}}catch(e){return{data:null,error:l4({error:e,options:n})}}}async function g4(n){try{const e=await navigator.credentials.get(n);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new rm("Browser returned unexpected credential type",e)}:{data:null,error:new rm("Empty credential response",e)}}catch(e){return{data:null,error:r4({error:e,options:n})}}}const y4={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},v4={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function um(...n){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),i={};for(const s of n)if(s)for(const l in s){const c=s[l];if(c!==void 0)if(Array.isArray(c))i[l]=c;else if(t(c))i[l]=c;else if(e(c)){const f=i[l];e(f)?i[l]=um(f,c):i[l]=um(c)}else i[l]=c}return i}function _4(n,e){return um(y4,n,e||{})}function S4(n,e){return um(v4,n,e||{})}class b4{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:i,signal:s},l){var c;try{const{data:f,error:h}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!f)return{data:null,error:h};const m=s??c4.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:v}=f.webauthn.credential_options.publicKey;if(!v.name){const E=i;if(E)v.name=`${v.id}:${E}`;else{const R=(await this.client.getUser()).data.user,N=((c=R==null?void 0:R.user_metadata)===null||c===void 0?void 0:c.name)||(R==null?void 0:R.email)||(R==null?void 0:R.id)||"User";v.name=`${v.id}:${N}`}}v.displayName||(v.displayName=v.name)}switch(f.webauthn.type){case"create":{const v=_4(f.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:E,error:x}=await m4({publicKey:v,signal:m});return E?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:E}},error:null}:{data:null,error:x}}case"request":{const v=S4(f.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:E,error:x}=await g4(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:v,signal:m}));return E?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:E}},error:null}:{data:null,error:x}}}}catch(f){return Pe(f)?{data:null,error:f}:{data:null,error:new zu("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:t,webauthn:i}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!t)return{data:null,error:new Hh("rpId is required for WebAuthn authentication")};try{if(!M1())return{data:null,error:new zu("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:i},signal:s},{request:l});if(!c)return{data:null,error:f};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:t,rpOrigins:i,credential_response:h.credential_response}})}catch(c){return Pe(c)?{data:null,error:c}:{data:null,error:new zu("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:s}={}},l){if(!t)return{data:null,error:new Hh("rpId is required for WebAuthn registration")};try{if(!M1())return{data:null,error:new zu("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(v=>{var E;return(E=v.data)===null||E===void 0?void 0:E.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:f};const{data:h,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:t,rpOrigins:i},signal:s},{create:l});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:t,rpOrigins:i,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(c){return Pe(c)?{data:null,error:c}:{data:null,error:new zu("Unexpected error in register",c)}}}}i4();const x4={url:vE,storageKey:_E,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:SE,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function D1(n,e,t){return await t()}const cd={};class Bh{get jwks(){var e,t;return(t=(e=cd[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){cd[this.storageKey]=Object.assign(Object.assign({},cd[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=cd[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cd[this.storageKey]=Object.assign(Object.assign({},cd[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},x4),e);if(this.storageKey=l.storageKey,this.instanceID=(t=Bh.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,Bh.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&wi()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new e4({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=bS(l.fetch),this.lock=l.lock||D1,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,this.lockAcquireTimeout=l.lockAcquireTimeout,l.lock?this.lock=l.lock:this.persistSession&&wi()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=n4:this.lock=D1,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new b4(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:SS()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=N1(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=N1(this.memoryStorage)),wi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c);try{await this._notifyAllSubscribers(c.data.event,c.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(c=>{this._debug("#initialize()","error",c)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${yS}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},i="none";if(wi()&&(t=IE(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":await this._isPKCECallback(t)&&(i="pkce")),wi()&&this.detectSessionInUrl&&i!=="none"){const{data:s,error:l}=await this._getSessionFromURL(t,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),CE(l)){const h=(e=l.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:l}}return{error:l}}const{session:c,redirectType:f}=s;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Pe(t)?this._returnResult({error:t}):this._returnResult({error:new zu("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,i,s;try{const l=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e==null?void 0:e.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:js}),{data:c,error:f}=l;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(Pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var t,i,s;try{let l;if("email"in e){const{email:v,password:E,options:x}=e;let R=null,N=null;this.flowType==="pkce"&&([R,N]=await ld(this.storage,this.storageKey)),l=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:v,password:E,data:(t=x==null?void 0:x.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:R,code_challenge_method:N},xform:js})}else if("phone"in e){const{phone:v,password:E,options:x}=e;l=await Qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:E,data:(i=x==null?void 0:x.data)!==null&&i!==void 0?i:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:js})}else throw new Gp("You must provide either an email or phone number and a password");const{data:c,error:f}=l;if(f||!c)return await Ci(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(l){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let t;if("email"in e){const{email:l,password:c,options:f}=e;t=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:w1})}else if("phone"in e){const{phone:l,password:c,options:f}=e;t=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:w1})}else throw new Gp("You must provide either an email or phone number and a password");const{data:i,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!i||!i.session||!i.user){const l=new od;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,i,s,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,i,s,l,c,f,h,m,v,E,x;let R,N;if("message"in e)R=e.message,N=e.signature;else{const{chain:z,wallet:D,statement:I,options:L}=e;let U;if(wi())if(typeof D=="object")U=D;else{const B=window;if("ethereum"in B&&typeof B.ethereum=="object"&&"request"in B.ethereum&&typeof B.ethereum.request=="function")U=B.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=D}const G=new URL((t=L==null?void 0:L.url)!==null&&t!==void 0?t:window.location.href),P=await U.request({method:"eth_requestAccounts"}).then(B=>B).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!P||P.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const K=ES(P[0]);let $=(i=L==null?void 0:L.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!$){const B=await U.request({method:"eth_chainId"});$=a4(B)}const J={domain:G.host,address:K,statement:I,uri:G.href,version:"1",chainId:$,nonce:(s=L==null?void 0:L.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(c=(l=L==null?void 0:L.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=L==null?void 0:L.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(h=L==null?void 0:L.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=L==null?void 0:L.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=L==null?void 0:L.signInWithEthereum)===null||v===void 0?void 0:v.resources};R=o4(J),N=await U.request({method:"personal_sign",params:[s4(R),K]})}try{const{data:z,error:D}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:R,signature:N},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:js});if(D)throw D;if(!z||!z.session||!z.user){const I=new od;return this._returnResult({data:{user:null,session:null},error:I})}return z.session&&(await this._saveSession(z.session),await this._notifyAllSubscribers("SIGNED_IN",z.session)),this._returnResult({data:Object.assign({},z),error:D})}catch(z){if(Pe(z))return this._returnResult({data:{user:null,session:null},error:z});throw z}}async signInWithSolana(e){var t,i,s,l,c,f,h,m,v,E,x,R;let N,z;if("message"in e)N=e.message,z=e.signature;else{const{chain:D,wallet:I,statement:L,options:U}=e;let G;if(wi())if(typeof I=="object")G=I;else{const K=window;if("solana"in K&&typeof K.solana=="object"&&("signIn"in K.solana&&typeof K.solana.signIn=="function"||"signMessage"in K.solana&&typeof K.solana.signMessage=="function"))G=K.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof I!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");G=I}const P=new URL((t=U==null?void 0:U.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in G&&G.signIn){const K=await G.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:P.host,uri:P.href}),L?{statement:L}:null));let $;if(Array.isArray(K)&&K[0]&&typeof K[0]=="object")$=K[0];else if(K&&typeof K=="object"&&"signedMessage"in K&&"signature"in K)$=K;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)N=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),z=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in G)||typeof G.signMessage!="function"||!("publicKey"in G)||typeof G!="object"||!G.publicKey||!("toBase58"in G.publicKey)||typeof G.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${P.host} wants you to sign in with your Solana account:`,G.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${P.href}`,`Issued At: ${(s=(i=U==null?void 0:U.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((l=U==null?void 0:U.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((c=U==null?void 0:U.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((h=U==null?void 0:U.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((E=(v=U==null?void 0:U.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||E===void 0)&&E.length?["Resources",...U.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const K=await G.signMessage(new TextEncoder().encode(N),"utf8");if(!K||!(K instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");z=K}}try{const{data:D,error:I}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Uu(z)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(R=e.options)===null||R===void 0?void 0:R.captchaToken}}:null),xform:js});if(I)throw I;if(!D||!D.session||!D.user){const L=new od;return this._returnResult({data:{user:null,session:null},error:L})}return D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("SIGNED_IN",D.session)),this._returnResult({data:Object.assign({},D),error:I})}catch(D){if(Pe(D))return this._returnResult({data:{user:null,session:null},error:D});throw D}}async _exchangeCodeForSession(e){const t=await Au(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new AE;const{data:l,error:c}=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:js});if(await Ci(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!l||!l.session||!l.user){const f=new od;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:s??null}),error:c})}catch(l){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:t,provider:i,token:s,access_token:l,nonce:c}=e,f=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:l,nonce:c,gotrue_meta_security:{captcha_token:t==null?void 0:t.captchaToken}},xform:js}),{data:h,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const v=new od;return this._returnResult({data:{user:null,session:null},error:v})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,i,s,l,c;try{if("email"in e){const{email:f,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await ld(this.storage,this.storageKey));const{error:E}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},create_user:(i=h==null?void 0:h.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}if("phone"in e){const{phone:f,options:h}=e,{data:m,error:v}=await Qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(s=h==null?void 0:h.data)!==null&&s!==void 0?s:{},create_user:(l=h==null?void 0:h.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v})}throw new Gp("You must provide either an email or phone number.")}catch(f){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var t,i;try{let s,l;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:f}=await Qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:s,xform:js});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,m=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(s){if(Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,i,s,l,c;try{let f=null,h=null;this.flowType==="pkce"&&([f,h]=await ld(this.storage,this.storageKey));const m=await Qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:h}),headers:this.headers,xform:ZE});return!((l=m.data)===null||l===void 0)&&l.url&&wi()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new ka;const{error:s}=await Qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(Pe(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:i,type:s,options:l}=e,{error:c}=await Qe(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:i,type:s,options:l}=e,{data:c,error:f}=await Qe(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new Gp("You must provide either an email or phone number and a type")}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await i,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=t();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await Au(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Ag:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const c=await Au(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=Ng()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=KE(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const t=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return t.data.user&&(this.suppressGetSessionWarning=!0),t}async _getUser(e){try{return e?await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Tr}):await this._useSession(async t=>{var i,s,l;const{data:c,error:f}=t;if(f)throw f;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ka}:await Qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(s=c.session)===null||s===void 0?void 0:s.access_token)!==null&&l!==void 0?l:void 0,xform:Tr})})}catch(t){if(Pe(t))return wg(t)&&(await this._removeSession(),await Ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async i=>{const{data:s,error:l}=i;if(l)throw l;if(!s.session)throw new ka;const c=s.session;let f=null,h=null;this.flowType==="pkce"&&e.email!=null&&([f,h]=await ld(this.storage,this.storageKey));const{data:m,error:v}=await Qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t==null?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:h}),jwt:c.access_token,xform:Tr});if(v)throw v;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(i){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ka;const t=Date.now()/1e3;let i=t,s=!0,l=null;const{payload:c}=Bp(e.access_token);if(c.exp&&(i=c.exp,s=i<=t),s){const{data:f,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!f)return{data:{user:null,session:null},error:null};l=f}else{const{data:f,error:h}=await this._getUser(e.access_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});l={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-t,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(t){if(Pe(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var i;if(!e){const{data:c,error:f}=t;if(f)throw f;e=(i=c.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new ka;const{data:s,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(Pe(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!wi())throw new Hp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Hp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new S1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Hp("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new S1("No code detected.");const{data:L,error:U}=await this._exchangeCodeForSession(e.code);if(U)throw U;const G=new URL(window.location.href);return G.searchParams.delete("code"),window.history.replaceState(window.history.state,"",G.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:s,access_token:l,refresh_token:c,expires_in:f,expires_at:h,token_type:m}=e;if(!l||!f||!c||!m)throw new Hp("No session defined in URL");const v=Math.round(Date.now()/1e3),E=parseInt(f);let x=v+E;h&&(x=parseInt(h));const R=x-v;R*1e3<=gd&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${R}s, should have been closer to ${E}s`);const N=x-E;v-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,x,v):v-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,x,v);const{data:z,error:D}=await this._getUser(l);if(D)throw D;const I={provider_token:i,provider_refresh_token:s,access_token:l,expires_in:E,expires_at:x,refresh_token:c,token_type:m,user:z.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:I,redirectType:e.type},error:null})}catch(i){if(Pe(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Au(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var i;const{data:s,error:l}=t;if(l&&!wg(l))return this._returnResult({error:l});const c=(i=s.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:f}=await this.admin.signOut(c,e);if(f&&!(TE(f)&&(f.status===404||f.status===401||f.status===403)||wg(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await Ci(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=UE(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async t=>{var i,s;try{const{data:{session:l},error:c}=t;if(c)throw c;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,t={}){let i=null,s=null;this.flowType==="pkce"&&([i,s]=await ld(this.storage,this.storageKey,!0));try{return await Qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(l){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:t,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:i,error:s}=await this._useSession(async l=>{var c,f,h,m,v;const{data:E,error:x}=l;if(x)throw x;const R=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Qe(this.fetch,"GET",R,{headers:this.headers,jwt:(v=(m=E.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(s)throw s;return wi()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Pe(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var i;try{const{error:s,data:{session:l}}=t;if(s)throw s;const{options:c,provider:f,token:h,access_token:m,nonce:v}=e,E=await Qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:f,id_token:h,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:js}),{data:x,error:R}=E;return R?this._returnResult({data:{user:null,session:null},error:R}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new od}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:R}))}catch(s){if(await Ci(this.storage,`${this.storageKey}-code-verifier`),Pe(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var i,s;const{data:l,error:c}=t;if(c)throw c;return await Qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await LE(async s=>(s>0&&await kE(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await Qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:js})),(s,l)=>{const c=200*Math.pow(2,s);return l&&Rg(l)&&Date.now()+c-i<gd})}catch(i){if(this._debug(t,"error",i),Pe(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),wi()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,t;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const s=await Au(this.storage,this.storageKey);if(s&&this.userStorage){let c=await Au(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:s.user},await yd(this.userStorage,this.storageKey+"-user",c)),s.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:Ng()}else if(s&&!s.user&&!s.user){const c=await Au(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(s.user=c.user,await Ci(this.storage,this.storageKey+"-user"),await yd(this.storage,this.storageKey,s)):s.user=Ng()}if(this._debug(i,"session from storage",s),!this._isValidSession(s)){this._debug(i,"session is not valid"),s!==null&&await this._removeSession();return}const l=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Ag;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Ag}s`),l){if(this.autoRefreshToken&&s.refresh_token){const{error:c}=await this._callRefreshToken(s.refresh_token);c&&(console.error(c),Rg(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(s.access_token);!f&&(c!=null&&c.user)?(s.user=c.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(i,"error",s),console.error(s);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var t,i;if(!e)throw new ka;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Tm;const{data:l,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!l.session)throw new ka;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const f={data:l.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(l){if(this._debug(s,"error",l),Pe(l)){const c={data:null,error:l};return Rg(l)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,i=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});const l=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,t)}catch(h){l.push(h)}});if(await Promise.all(c),l.length>0){for(let f=0;f<l.length;f+=1)console.error(l[f]);throw l[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Ci(this.storage,`${this.storageKey}-code-verifier`);const t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&await yd(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const l=C1(s);await yd(this.storage,this.storageKey,l)}else{const s=C1(t);await yd(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ci(this.storage,this.storageKey),await Ci(this.storage,this.storageKey+"-code-verifier"),await Ci(this.storage,this.storageKey+"-user"),this.userStorage&&await Ci(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&wi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),gd);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const t=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((i.expires_at*1e3-e)/gd);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${gd}ms, refresh threshold is ${ny} ticks`),s<=ny&&await this._callRefreshToken(i.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof xS)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!wi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,i){const s=[`provider=${encodeURIComponent(t)}`];if(i!=null&&i.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,c]=await ld(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(c)}`});s.push(f.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);s.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var i;const{data:s,error:l}=t;return l?this._returnResult({data:null,error:l}):await Qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var i,s;const{data:l,error:c}=t;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await Qe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&h.type==="totp"&&(!((s=h==null?void 0:h.totp)===null||s===void 0)&&s.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?h4(e.webauthn.credential_response):p4(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:h}=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:h}))})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async t=>{var i;const{data:s,error:l}=t;if(l)return this._returnResult({data:null,error:l});const c=await Qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=s==null?void 0:s.session)===null||i===void 0?void 0:i.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:d4(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:f4(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:i}=await this.getUser();if(i)return{data:null,error:i};const s={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=t==null?void 0:t.factors)!==null&&e!==void 0?e:[])s.all.push(l),l.status==="verified"&&s[l.factor_type].push(l);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(e){var t,i,s,l;if(e)try{const{payload:R}=Bp(e);let N=null;R.aal&&(N=R.aal);let z=N;const{data:{user:D},error:I}=await this.getUser(e);if(I)return this._returnResult({data:null,error:I});((i=(t=D==null?void 0:D.factors)===null||t===void 0?void 0:t.filter(G=>G.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(z="aal2");const U=R.amr||[];return{data:{currentLevel:N,nextLevel:z,currentAuthenticationMethods:U},error:null}}catch(R){if(Pe(R))return this._returnResult({data:null,error:R});throw R}const{data:{session:c},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Bp(c.access_token);let m=null;h.aal&&(m=h.aal);let v=m;((l=(s=c.user.factors)===null||s===void 0?void 0:s.filter(R=>R.status==="verified"))!==null&&l!==void 0?l:[]).length>0&&(v="aal2");const x=h.amr||[];return{data:{currentLevel:m,nextLevel:v,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:i},error:s}=t;return s?this._returnResult({data:null,error:s}):i?await Qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new ka})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:s},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new ka});const c=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&wi()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(i){if(Pe(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,t){try{return await this._useSession(async i=>{const{data:{session:s},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!s)return this._returnResult({data:null,error:new ka});const c=await Qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&wi()&&!(t!=null&&t.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(i){if(Pe(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?await Qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new ka})})}catch(e){if(Pe(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async t=>{const{data:{session:i},error:s}=t;return s?this._returnResult({data:null,error:s}):i?(await Qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ka})})}catch(t){if(Pe(t))return this._returnResult({data:null,error:t});throw t}}async fetchJwk(e,t={keys:[]}){let i=t.keys.find(f=>f.kid===e);if(i)return i;const s=Date.now();if(i=this.jwks.keys.find(f=>f.kid===e),i&&this.jwks_cached_at+xE>s)return i;const{data:l,error:c}=await Qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=s,i=l.keys.find(f=>f.kid===e),!i)?null:i}async getClaims(e,t={}){try{let i=e;if(!i){const{data:R,error:N}=await this.getSession();if(N||!R.session)return this._returnResult({data:null,error:N});i=R.session.access_token}const{header:s,payload:l,signature:c,raw:{header:f,payload:h}}=Bp(i);t!=null&&t.allowExpired||jE(l.exp);const m=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t!=null&&t.keys?{keys:t.keys}:t==null?void 0:t.jwks);if(!m){const{error:R}=await this.getUser(i);if(R)throw R;return{data:{claims:l,header:s,signature:c},error:null}}const v=YE(s.alg),E=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,E,c,DE(`${f}.${h}`)))throw new sy("Invalid JWT signature");return{data:{claims:l,header:s,signature:c},error:null}}catch(i){if(Pe(i))return this._returnResult({data:null,error:i});throw i}}}Bh.nextInstanceID={};const E4=Bh,T4="2.95.3";let xh="";typeof Deno<"u"?xh="deno":typeof document<"u"?xh="web":typeof navigator<"u"&&navigator.product==="ReactNative"?xh="react-native":xh="node";const C4={"X-Client-Info":`supabase-js-${xh}/${T4}`},A4={headers:C4},w4={schema:"public"},R4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N4={};function Ph(n){"@babel/helpers - typeof";return Ph=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ph(n)}function M4(n,e){if(Ph(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(Ph(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function D4(n){var e=M4(n,"string");return Ph(e)=="symbol"?e:e+""}function z4(n,e,t){return(e=D4(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function z1(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Mn(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?z1(Object(t),!0).forEach(function(i){z4(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):z1(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}const U4=n=>n?(...e)=>n(...e):(...e)=>fetch(...e),I4=()=>Headers,O4=(n,e,t)=>{const i=U4(t),s=I4();return async(l,c)=>{var f;const h=(f=await e())!==null&&f!==void 0?f:n;let m=new s(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",n),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),i(l,Mn(Mn({},c),{},{headers:m}))}};function k4(n){return n.endsWith("/")?n:n+"/"}function L4(n,e){var t,i;const{db:s,auth:l,realtime:c,global:f}=n,{db:h,auth:m,realtime:v,global:E}=e,x={db:Mn(Mn({},h),s),auth:Mn(Mn({},m),l),realtime:Mn(Mn({},v),c),storage:{},global:Mn(Mn(Mn({},E),f),{},{headers:Mn(Mn({},(t=E==null?void 0:E.headers)!==null&&t!==void 0?t:{}),(i=f==null?void 0:f.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?x.accessToken=n.accessToken:delete x.accessToken,x}function G4(n){const e=n==null?void 0:n.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(k4(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var H4=class extends E4{constructor(n){super(n)}},B4=class{constructor(n,e,t){var i,s;this.supabaseUrl=n,this.supabaseKey=e;const l=G4(n);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:w4,realtime:N4,auth:Mn(Mn({},R4),{},{storageKey:c}),global:A4},h=L4(t??{},f);if(this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=h.global.headers)!==null&&s!==void 0?s:{},h.accessToken)this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(v,E)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(E)} is not possible`)}});else{var m;this.auth=this._initSupabaseAuthClient((m=h.auth)!==null&&m!==void 0?m:{},this.headers,h.global.fetch)}this.fetch=O4(e,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Mn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new T5(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch,timeout:h.db.timeout,urlLengthLimit:h.db.urlLengthLimit}),this.storage=new yE(this.storageUrl.href,this.headers,this.fetch,t==null?void 0:t.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new g5(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,e={},t={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,e,t)}channel(n,e={config:{}}){return this.realtime.channel(n,e)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,e,t;if(n.accessToken)return await n.accessToken();const{data:i}=await n.auth.getSession();return(e=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:s,storageKey:l,flowType:c,lock:f,debug:h,throwOnError:m},v,E){const x={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new H4({url:this.authUrl.href,headers:Mn(Mn({},x),v),storageKey:l,autoRefreshToken:n,persistSession:e,detectSessionInUrl:t,storage:i,userStorage:s,flowType:c,lock:f,debug:h,throwOnError:m,fetch:E,hasCustomAuthorizationHeader:Object.keys(this.headers).some(R=>R.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new P5(this.realtimeUrl.href,Mn(Mn({},n),{},{params:Mn(Mn({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,e)=>{this._handleTokenChanged(n,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(n,e,t){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==t?(this.changedAccessToken=t,this.realtime.setAuth(t)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const P4=(n,e,t)=>new B4(n,e,t);function q4(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const e=n.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}q4()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const V4="https://nscufuwxkaqdtqlyebmx.supabase.co",j4="sb_publishable_eYuBH3lXQZUvBlJcNL-YKw_Ibw80bvU",Jn=P4(V4,j4),wr={async signUp(n,e,t){const{data:i,error:s}=await Jn.auth.signUp({email:n,password:e,options:{data:{full_name:t}}});return{data:i,error:s}},async signIn(n,e){const{data:t,error:i}=await Jn.auth.signInWithPassword({email:n,password:e});return{data:t,error:i}},async signOut(){const{error:n}=await Jn.auth.signOut();return{error:n}},async getCurrentUser(){const{data:{user:n}}=await Jn.auth.getUser();return n},async getSession(){const{data:{session:n}}=await Jn.auth.getSession();return n}},ms={async getUserProfile(n){const{data:e,error:t}=await Jn.from("profiles").select("*").eq("id",n).single();return{data:e,error:t}},async updateUserCredits(n,e){const{data:t,error:i}=await Jn.from("profiles").update({credits:e,updated_at:new Date().toISOString()}).eq("id",n).select().single();return{data:t,error:i}},async getUserProjects(n){const{data:e,error:t}=await Jn.from("projects").select("*").eq("user_id",n).order("updated_at",{ascending:!1});return{data:e,error:t}},async saveProject(n,e,t,i){const{data:s,error:l}=await Jn.from("projects").insert({user_id:n,name:e,editor_state:t,thumbnail:i}).select().single();return{data:s,error:l}},async updateProject(n,e,t,i){const{data:s,error:l}=await Jn.from("projects").update({name:e,editor_state:t,thumbnail:i,updated_at:new Date().toISOString()}).eq("id",n).select().single();return{data:s,error:l}},async deleteProject(n){const{error:e}=await Jn.from("projects").delete().eq("id",n);return{error:e}},async getProject(n){const{data:e,error:t}=await Jn.from("projects").select("*").eq("id",n).single();return{data:e,error:t}},async sendEmail(n){const{data:e,error:t}=await Jn.functions.invoke("send-email",{body:n});if(t)throw t;return e}},vd={async getAllUsers(){const{data:n,error:e}=await Jn.from("profiles").select("*").order("created_at",{ascending:!1});return{data:n,error:e}},async getUserStats(){const{data:n,error:e}=await Jn.from("profiles").select("credits, created_at");if(e)return{data:null,error:e};const t=(n==null?void 0:n.length)||0,i=(n==null?void 0:n.reduce((c,f)=>c+(f.credits||0),0))||0,s=new Date;s.setHours(0,0,0,0);const l=(n==null?void 0:n.filter(c=>new Date(c.created_at)>=s).length)||0;return{data:{totalUsers:t,totalCredits:i,joinsToday:l},error:null}},async updateUserCredits(n,e){const{data:t,error:i}=await Jn.from("profiles").update({credits:e,updated_at:new Date().toISOString()}).eq("id",n).select().single();return{data:t,error:i}},async deleteUser(n){await Jn.from("projects").delete().eq("user_id",n);const{error:e}=await Jn.from("profiles").delete().eq("id",n);return{error:e}},async toggleAdminStatus(n,e){const{data:t,error:i}=await Jn.from("profiles").update({is_admin:e,updated_at:new Date().toISOString()}).eq("id",n).select().single();return{data:t,error:i}},async isUserAdmin(n){const{data:e,error:t}=await Jn.from("profiles").select("is_admin").eq("id",n).single();return t?!1:(e==null?void 0:e.is_admin)||!1}},Y4="6LfJsmIsAAAAAPhgKRBB8UUcMYuyvox5xj8g4BjX",Py=()=>{const[n,e]=ee.useState(!1);return ee.useEffect(()=>{const i=()=>{window.grecaptcha&&window.grecaptcha.enterprise?e(!0):setTimeout(i,100)};i()},[]),{executeRecaptcha:ee.useCallback(async i=>{var s;if(!n||!((s=window.grecaptcha)!=null&&s.enterprise))return console.warn("ReCaptcha not ready"),null;try{return await window.grecaptcha.enterprise.execute(Y4,{action:i})}catch(l){return console.error("ReCaptcha execution failed:",l),null}},[n]),isReady:n}},F4=({onSuccess:n,onSwitchToSignup:e})=>{const[t,i]=ee.useState(""),[s,l]=ee.useState(""),[c,f]=ee.useState(""),[h,m]=ee.useState(!1),{executeRecaptcha:v}=Py(),E=async x=>{if(x.preventDefault(),f(""),m(!0),!await v("LOGIN")){f("Verification failed. Please try again."),m(!1);return}const{data:N,error:z}=await wr.signIn(t,s);if(z){f(z.message),m(!1);return}N.user&&n()};return T.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[T.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[T.jsx("h1",{style:{color:"#fff",fontSize:"32px",marginBottom:"10px"},children:"Welcome Back"}),T.jsx("p",{style:{color:"#888",fontSize:"14px"},children:"Sign in to continue to BatchoVideo"})]}),T.jsxs("form",{onSubmit:E,children:[T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Email"}),T.jsx("input",{type:"email",value:t,onChange:x=>i(x.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:"you@example.com"})]}),T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Password"}),T.jsx("input",{type:"password",value:s,onChange:x=>l(x.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:""})]}),c&&T.jsx("div",{style:{backgroundColor:"#ff4444",color:"#fff",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:c}),T.jsx("button",{type:"submit",disabled:h,style:{width:"100%",padding:"14px",backgroundColor:h?"#555":"#667eea",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:h?"not-allowed":"pointer",transition:"background-color 0.2s"},children:h?"Signing in...":"Sign In"})]}),T.jsxs("p",{style:{color:"#666",fontSize:"11px",marginTop:"15px",textAlign:"center",lineHeight:"1.4"},children:["This site is protected by reCAPTCHA and the Google",T.jsx("a",{href:"https://policies.google.com/privacy",style:{color:"#888",textDecoration:"underline",margin:"0 4px"},children:"Privacy Policy"})," and",T.jsx("a",{href:"https://policies.google.com/terms",style:{color:"#888",textDecoration:"underline",margin:"0 4px"},children:"Terms of Service"})," apply."]}),T.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:T.jsxs("p",{style:{color:"#888",fontSize:"14px"},children:["Don't have an account?"," ",T.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#667eea",cursor:"pointer",textDecoration:"underline",fontSize:"14px"},children:"Sign up"})]})})]})})},K4=({onSuccess:n,onSwitchToLogin:e})=>{const[t,i]=ee.useState(""),[s,l]=ee.useState(""),[c,f]=ee.useState(""),[h,m]=ee.useState(""),[v,E]=ee.useState(""),[x,R]=ee.useState(!1),{executeRecaptcha:N}=Py(),z=async D=>{if(D.preventDefault(),E(""),c!==h){E("Passwords do not match");return}if(c.length<6){E("Password must be at least 6 characters");return}if(R(!0),!await N("SIGNUP")){E("Verification failed. Please try again."),R(!1);return}const{data:L,error:U}=await wr.signUp(s,c,t);if(U){E(U.message),R(!1);return}L.user&&(await ms.sendEmail({to:s,subject:"New User Signup",message:t,type:"signup"}).catch(console.error),n())};return T.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderRadius:"16px",padding:"40px",maxWidth:"400px",width:"100%",boxShadow:"0 20px 60px rgba(0,0,0,0.3)"},children:[T.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[T.jsx("h1",{style:{color:"#fff",fontSize:"32px",marginBottom:"10px"},children:"Create Account"}),T.jsx("p",{style:{color:"#888",fontSize:"14px"},children:"Start creating amazing videos today"})]}),T.jsxs("form",{onSubmit:z,children:[T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Full Name"}),T.jsx("input",{type:"text",value:t,onChange:D=>i(D.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:"John Doe"})]}),T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Email"}),T.jsx("input",{type:"email",value:s,onChange:D=>l(D.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:"you@example.com"})]}),T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Password"}),T.jsx("input",{type:"password",value:c,onChange:D=>f(D.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:""})]}),T.jsxs("div",{style:{marginBottom:"20px"},children:[T.jsx("label",{style:{display:"block",color:"#fff",marginBottom:"8px",fontSize:"14px"},children:"Confirm Password"}),T.jsx("input",{type:"password",value:h,onChange:D=>m(D.target.value),required:!0,style:{width:"100%",padding:"12px",backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a",borderRadius:"8px",color:"#fff",fontSize:"14px",outline:"none"},placeholder:""})]}),v&&T.jsx("div",{style:{backgroundColor:"#ff4444",color:"#fff",padding:"12px",borderRadius:"8px",marginBottom:"20px",fontSize:"14px"},children:v}),T.jsxs("button",{type:"submit",disabled:x,style:{width:"100%",padding:"14px",backgroundColor:x?"#555":"#667eea",color:"#fff",border:"none",borderRadius:"8px",fontSize:"16px",fontWeight:"bold",cursor:x?"not-allowed":"pointer",transition:"background-color 0.2s",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[x&&T.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),x?"Creating account...":"Sign Up"]}),T.jsxs("p",{style:{color:"#666",fontSize:"11px",marginTop:"15px",textAlign:"center",lineHeight:"1.4"},children:["This site is protected by reCAPTCHA and the Google",T.jsx("a",{href:"https://policies.google.com/privacy",style:{color:"#888",textDecoration:"underline",margin:"0 4px"},children:"Privacy Policy"})," and",T.jsx("a",{href:"https://policies.google.com/terms",style:{color:"#888",textDecoration:"underline",margin:"0 4px"},children:"Terms of Service"})," apply."]})]}),T.jsx("div",{style:{marginTop:"20px",textAlign:"center"},children:T.jsxs("p",{style:{color:"#888",fontSize:"14px"},children:["Already have an account?"," ",T.jsx("button",{onClick:e,style:{background:"none",border:"none",color:"#667eea",cursor:"pointer",textDecoration:"underline",fontSize:"14px"},children:"Sign in"})]})}),T.jsx("div",{style:{marginTop:"20px",padding:"15px",backgroundColor:"#2a2a2a",borderRadius:"8px"},children:T.jsx("p",{style:{color:"#4CAF50",fontSize:"13px",margin:0,textAlign:"center"},children:" Get 3 free credits when you sign up!"})})]})})};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CS=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U1=n=>{const e=X4(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=ee.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:l,iconNode:c,...f},h)=>ee.createElement("svg",{ref:h,...Q4,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:CS("lucide",s),...!l&&!Z4(f)&&{"aria-hidden":"true"},...f},[...c.map(([m,v])=>ee.createElement(m,v)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(n,e)=>{const t=ee.forwardRef(({className:i,...s},l)=>ee.createElement(W4,{ref:l,iconNode:e,className:CS(`lucide-${J4(U1(n))}`,`lucide-${n}`,i),...s}));return t.displayName=U1(n),t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],eT=Oe("arrow-right",$4);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tT=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nT=Oe("check",tT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],aT=Oe("chevron-down",iT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],oT=Oe("chevron-left",sT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],rT=Oe("chevron-right",lT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],cT=Oe("circle-alert",uT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],AS=Oe("circle-check",dT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],hT=Oe("circle-plus",fT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wS=Oe("circle",pT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],RS=Oe("clock",mT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],yT=Oe("cloud",gT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],NS=Oe("copy",vT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ST=Oe("credit-card",_T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],qh=Oe("crown",bT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],ET=Oe("dollar-sign",xT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Iu=Oe("download",TT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],AT=Oe("eye-off",CT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],MS=Oe("eye",wT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]],Dg=Oe("folder-open",RT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],MT=Oe("grip-vertical",NT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],zT=Oe("hand",DT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],IT=Oe("heart",UT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],kT=Oe("hexagon",OT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qy=Oe("image",LT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],HT=Oe("info",GT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],oy=Oe("layers",BT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],qT=Oe("library",PT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ly=Oe("loader-circle",VT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],YT=Oe("lock-open",jT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],DS=Oe("lock",FT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],JT=Oe("log-out",KT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],QT=Oe("mail",XT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],WT=Oe("maximize-2",ZT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],e3=Oe("menu",$T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],n3=Oe("message-square",t3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"M5 12h14",key:"1ays0h"}]],Vy=Oe("minus",i3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],s3=Oe("monitor",a3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M4.037 4.688a.495.495 0 0 1 .651-.651l16 6.5a.5.5 0 0 1-.063.947l-6.124 1.58a2 2 0 0 0-1.438 1.435l-1.579 6.126a.5.5 0 0 1-.947.063z",key:"edeuup"}]],zS=Oe("mouse-pointer-2",o3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],I1=Oe("palette",l3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],u3=Oe("panels-top-left",r3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],d3=Oe("pause",c3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],h3=Oe("pen",f3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],m3=Oe("play",p3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],US=Oe("plus",g3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],v3=Oe("redo-2",y3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],O1=Oe("rotate-ccw",_3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],b3=Oe("save",S3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],E3=Oe("search",x3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],C3=Oe("send",T3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]],w3=Oe("shapes",A3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],k1=Oe("shield-check",R3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ry=Oe("shield",N3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Kh=Oe("sparkles",M3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],IS=Oe("square",D3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],U3=Oe("star",z3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],O3=Oe("target",I3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],L3=Oe("text-align-center",k3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G3=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],H3=Oe("text-align-end",G3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B3=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],P3=Oe("text-align-start",B3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],jy=Oe("trash-2",q3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]],j3=Oe("triangle",V3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],Yy=Oe("type",Y3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],K3=Oe("undo-2",F3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],X3=Oe("user-plus",J3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],OS=Oe("users",Q3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Cm=Oe("video",Z3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W3=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],$3=Oe("volume-2",W3);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],tC=Oe("volume-x",eC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Fy=Oe("wand-sparkles",nC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Jh=Oe("x",iC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],uy=Oe("zap",aC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],oC=Oe("zoom-in",sC);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],rC=Oe("zoom-out",lC),uC=({onNewProject:n,onLoadProject:e,onLogout:t,onAdminClick:i})=>{const[s,l]=ee.useState(null),[c,f]=ee.useState(null),[h,m]=ee.useState([]),[v,E]=ee.useState(!0);ee.useEffect(()=>{x()},[]);const x=async()=>{const z=await wr.getCurrentUser();if(!z){t();return}l(z);const{data:D}=await ms.getUserProfile(z.id);f(D);const{data:I}=await ms.getUserProjects(z.id);m(I||[]),E(!1)},R=async z=>{confirm("Are you sure you want to delete this project?")&&(await ms.deleteProject(z),m(h.filter(D=>D.id!==z)))},N=async()=>{await wr.signOut(),t()};return v?T.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0a0a0a"},children:T.jsx("div",{style:{color:"#fff",fontSize:"18px"},children:"Loading..."})}):T.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff"},children:[T.jsxs("div",{style:{backgroundColor:"#1a1a1a",borderBottom:"1px solid #2a2a2a",padding:"20px 40px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{children:[T.jsx("div",{style:{height:"32px",marginBottom:"8px"},children:T.jsx("img",{src:"/batchoVideo.svg",alt:"batchoVideo",style:{height:"100%"}})}),T.jsxs("p",{style:{color:"#888",fontSize:"14px",margin:"5px 0 0 0"},children:["Welcome back, ",(c==null?void 0:c.full_name)||(s==null?void 0:s.email)]})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[T.jsxs("div",{style:{backgroundColor:"#2a2a2a",padding:"10px 20px",borderRadius:"8px",display:"flex",alignItems:"center",gap:"10px"},children:[T.jsx(ST,{size:20,color:"#667eea"}),T.jsxs("span",{style:{fontWeight:"bold"},children:[(c==null?void 0:c.credits)||0," Credits"]})]}),i&&T.jsx("button",{onClick:i,style:{backgroundColor:"#1e3a8a",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:"Admin"}),T.jsxs("button",{onClick:N,style:{backgroundColor:"#2a2a2a",color:"#fff",border:"none",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx(JT,{size:18}),"Logout"]})]})]}),T.jsxs("div",{style:{padding:"40px"},children:[T.jsxs("div",{style:{marginBottom:"30px"},children:[T.jsx("h2",{style:{fontSize:"28px",marginBottom:"10px"},children:"Your Projects"}),T.jsx("p",{style:{color:"#888",fontSize:"14px"},children:"Create and manage your video projects"})]}),T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px"},children:[T.jsxs("div",{onClick:n,style:{backgroundColor:"#1a1a1a",border:"2px dashed #3a3a3a",borderRadius:"12px",padding:"40px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",cursor:"pointer",minHeight:"200px",transition:"all 0.2s"},onMouseEnter:z=>{z.currentTarget.style.borderColor="#667eea",z.currentTarget.style.backgroundColor="#2a2a2a"},onMouseLeave:z=>{z.currentTarget.style.borderColor="#3a3a3a",z.currentTarget.style.backgroundColor="#1a1a1a"},children:[T.jsx(hT,{size:48,color:"#667eea",style:{marginBottom:"15px"}}),T.jsx("span",{style:{fontSize:"18px",fontWeight:"bold"},children:"New Project"}),T.jsx("span",{style:{color:"#888",fontSize:"14px",marginTop:"5px"},children:"Start creating"})]}),h.map(z=>T.jsxs("div",{style:{backgroundColor:"#1a1a1a",border:"1px solid #2a2a2a",borderRadius:"12px",overflow:"hidden",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:D=>{D.currentTarget.style.borderColor="#667eea",D.currentTarget.style.transform="translateY(-4px)"},onMouseLeave:D=>{D.currentTarget.style.borderColor="#2a2a2a",D.currentTarget.style.transform="translateY(0)"},children:[T.jsx("div",{onClick:()=>e(z),style:{backgroundColor:"#2a2a2a",height:"150px",display:"flex",alignItems:"center",justifyContent:"center",backgroundImage:z.thumbnail?`url(${z.thumbnail})`:"none",backgroundSize:"cover",backgroundPosition:"center"},children:!z.thumbnail&&T.jsx("span",{style:{color:"#666",fontSize:"48px"},children:""})}),T.jsxs("div",{style:{padding:"15px"},children:[T.jsx("h3",{style:{fontSize:"16px",marginBottom:"5px"},children:z.name}),T.jsxs("p",{style:{color:"#888",fontSize:"12px",marginBottom:"15px"},children:["Updated ",new Date(z.updated_at).toLocaleDateString()]}),T.jsxs("div",{style:{display:"flex",gap:"10px"},children:[T.jsx("button",{onClick:()=>e(z),style:{flex:1,backgroundColor:"#667eea",color:"#fff",border:"none",padding:"8px",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Open"}),T.jsx("button",{onClick:D=>{D.stopPropagation(),R(z.id)},style:{backgroundColor:"#2a2a2a",color:"#ff4444",border:"none",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"14px"},children:"Delete"})]})]})]},z.id))]}),h.length===0&&T.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",color:"#666"},children:[T.jsx("p",{style:{fontSize:"18px",marginBottom:"10px"},children:"No projects yet"}),T.jsx("p",{style:{fontSize:"14px"},children:'Click "New Project" to get started!'})]})]})]})},cC=Math.PI/180;function dC(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Ou=typeof global<"u"?global:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},Re={_global:Ou,version:"10.2.0",isBrowser:dC(),isUnminified:/param/.test((function(n){}).toString()),dblClickWindow:400,getAngle(n){return Re.angleDeg?n*cC:n},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_renderBackend:"web",legacyTextRendering:!1,pixelRatio:typeof window<"u"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return Re.DD.isDragging},isTransforming(){var n,e;return(e=(n=Re.Transformer)===null||n===void 0?void 0:n.isTransforming())!==null&&e!==void 0?e:!1},isDragReady(){return!!Re.DD.node},releaseCanvasOnDestroy:!0,document:Ou.document,_injectGlobal(n){typeof Ou.Konva<"u"&&console.error("Several Konva instances detected. It is not recommended to use multiple Konva instances in the same environment."),Ou.Konva=n}},En=n=>{Re[n.prototype.getClassName()]=n};Re._injectGlobal(Re);const fC=`Konva.js unsupported environment.

Looks like you are trying to use Konva.js in Node.js environment. because "document" object is undefined.

To use Konva.js in Node.js environment, you need to use the "canvas-backend" or "skia-backend" module.

bash: npm install canvas
js: import "konva/canvas-backend";

or

bash: npm install skia-canvas
js: import "konva/skia-backend";
`,L1=()=>{if(typeof document>"u")throw new Error(fC)};class Ga{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Ga(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),s=this.m[0]*t+this.m[2]*i,l=this.m[1]*t+this.m[3]*i,c=this.m[0]*-i+this.m[2]*t,f=this.m[1]*-i+this.m[3]*t;return this.m[0]=s,this.m[1]=l,this.m[2]=c,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const i=this.m[0]+this.m[2]*t,s=this.m[1]+this.m[3]*t,l=this.m[2]+this.m[0]*e,c=this.m[3]+this.m[1]*e;return this.m[0]=i,this.m[1]=s,this.m[2]=l,this.m[3]=c,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],i=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],l=this.m[1]*e.m[2]+this.m[3]*e.m[3],c=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,i=-this.m[1]*e,s=-this.m[2]*e,l=this.m[0]*e,c=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=i,this.m[2]=s,this.m[3]=l,this.m[4]=c,this.m[5]=f,this}getMatrix(){return this.m}decompose(){const e=this.m[0],t=this.m[1],i=this.m[2],s=this.m[3],l=this.m[4],c=this.m[5],f=e*s-t*i,h={x:l,y:c,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||t!=0){const m=Math.sqrt(e*e+t*t);h.rotation=t>0?Math.acos(e/m):-Math.acos(e/m),h.scaleX=m,h.scaleY=f/m,h.skewX=(e*i+t*s)/f,h.skewY=0}else if(i!=0||s!=0){const m=Math.sqrt(i*i+s*s);h.rotation=Math.PI/2-(s>0?Math.acos(-i/m):-Math.acos(i/m)),h.scaleX=f/m,h.scaleY=m,h.skewX=0,h.skewY=(e*i+t*s)/f}return h.rotation=Q._getRotation(h.rotation),h}}const hC="[object Array]",pC="[object Number]",mC="[object String]",gC="[object Boolean]",yC=Math.PI/180,vC=180/Math.PI,hh="#",_C="",SC="0",bC="Konva warning: ",G1="Konva error: ",xC="rgb(",zg={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},EC=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let Pp=[],ph=null;const TC=typeof requestAnimationFrame<"u"&&requestAnimationFrame||function(n){setTimeout(n,16)},Q={_isElement(n){return!!(n&&n.nodeType==1)},_isFunction(n){return!!(n&&n.constructor&&n.call&&n.apply)},_isPlainObject(n){return!!n&&n.constructor===Object},_isArray(n){return Object.prototype.toString.call(n)===hC},_isNumber(n){return Object.prototype.toString.call(n)===pC&&!isNaN(n)&&isFinite(n)},_isString(n){return Object.prototype.toString.call(n)===mC},_isBoolean(n){return Object.prototype.toString.call(n)===gC},isObject(n){return n instanceof Object},isValidSelector(n){if(typeof n!="string")return!1;const e=n[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(n){return n===0||n>0?1:-1},requestAnimFrame(n){Pp.push(n),Pp.length===1&&TC(function(){const e=Pp;Pp=[],e.forEach(function(t){t()})})},createCanvasElement(){L1();const n=document.createElement("canvas");try{n.style=n.style||{}}catch{}return n},createImageElement(){return L1(),document.createElement("img")},_isInDocument(n){for(;n=n.parentNode;)if(n==document)return!0;return!1},_urlToImage(n,e){const t=Q.createImageElement();t.onload=function(){e(t)},t.src=n},_rgbToHex(n,e,t){return((1<<24)+(n<<16)+(e<<8)+t).toString(16).slice(1)},_hexToRgb(n){n=n.replace(hh,_C);const e=parseInt(n,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){let n=(Math.random()*16777215<<0).toString(16);for(;n.length<6;)n=SC+n;return hh+n},isCanvasFarblingActive(){if(ph!==null)return ph;if(typeof document>"u")return ph=!1,!1;const n=this.createCanvasElement();n.width=10,n.height=10;const e=n.getContext("2d",{willReadFrequently:!0});e.clearRect(0,0,10,10),e.fillStyle="#282828",e.fillRect(0,0,10,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=0;s<100;s++)if(t[s*4]!==40||t[s*4+1]!==40||t[s*4+2]!==40||t[s*4+3]!==255){i=!0;break}return ph=i,this.releaseCanvas(n),ph},getHitColor(){const n=this.getRandomColor();return this.isCanvasFarblingActive()?this.getSnappedHexColor(n):n},getHitColorKey(n,e,t){return this.isCanvasFarblingActive()&&(n=Math.round(n/5)*5,e=Math.round(e/5)*5,t=Math.round(t/5)*5),hh+this._rgbToHex(n,e,t)},getSnappedHexColor(n){const e=this._hexToRgb(n);return hh+this._rgbToHex(Math.round(e.r/5)*5,Math.round(e.g/5)*5,Math.round(e.b/5)*5)},getRGB(n){let e;return n in zg?(e=zg[n],{r:e[0],g:e[1],b:e[2]}):n[0]===hh?this._hexToRgb(n.substring(1)):n.substr(0,4)===xC?(e=EC.exec(n.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(n){return n=n||"black",Q._namedColorToRBA(n)||Q._hex3ColorToRGBA(n)||Q._hex4ColorToRGBA(n)||Q._hex6ColorToRGBA(n)||Q._hex8ColorToRGBA(n)||Q._rgbColorToRGBA(n)||Q._rgbaColorToRGBA(n)||Q._hslColorToRGBA(n)},_namedColorToRBA(n){const e=zg[n.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(n){if(n.indexOf("rgb(")===0){n=n.match(/rgb\(([^)]+)\)/)[1];const e=n.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(n){if(n.indexOf("rgba(")===0){n=n.match(/rgba\(([^)]+)\)/)[1];const e=n.split(/ *, */).map((t,i)=>t.slice(-1)==="%"?i===3?parseInt(t)/100:parseInt(t)/100*255:Number(t));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex8ColorToRGBA(n){if(n[0]==="#"&&n.length===9)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:parseInt(n.slice(7,9),16)/255}},_hex6ColorToRGBA(n){if(n[0]==="#"&&n.length===7)return{r:parseInt(n.slice(1,3),16),g:parseInt(n.slice(3,5),16),b:parseInt(n.slice(5,7),16),a:1}},_hex4ColorToRGBA(n){if(n[0]==="#"&&n.length===5)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:parseInt(n[4]+n[4],16)/255}},_hex3ColorToRGBA(n){if(n[0]==="#"&&n.length===4)return{r:parseInt(n[1]+n[1],16),g:parseInt(n[2]+n[2],16),b:parseInt(n[3]+n[3],16),a:1}},_hslColorToRGBA(n){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(n)){const[e,...t]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(n),i=Number(t[0])/360,s=Number(t[1])/100,l=Number(t[2])/100;let c,f,h;if(s===0)return h=l*255,{r:Math.round(h),g:Math.round(h),b:Math.round(h),a:1};l<.5?c=l*(1+s):c=l+s-l*s;const m=2*l-c,v=[0,0,0];for(let E=0;E<3;E++)f=i+1/3*-(E-1),f<0&&f++,f>1&&f--,6*f<1?h=m+(c-m)*6*f:2*f<1?h=c:3*f<2?h=m+(c-m)*(2/3-f)*6:h=m,v[E]=h*255;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection(n,e){return!(e.x>n.x+n.width||e.x+e.width<n.x||e.y>n.y+n.height||e.y+e.height<n.y)},cloneObject(n){const e={};for(const t in n)this._isPlainObject(n[t])?e[t]=this.cloneObject(n[t]):this._isArray(n[t])?e[t]=this.cloneArray(n[t]):e[t]=n[t];return e},cloneArray(n){return n.slice(0)},degToRad(n){return n*yC},radToDeg(n){return n*vC},_degToRad(n){return Q.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Q.degToRad(n)},_radToDeg(n){return Q.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Q.radToDeg(n)},_getRotation(n){return Re.angleDeg?Q.radToDeg(n):n},_capitalize(n){return n.charAt(0).toUpperCase()+n.slice(1)},throw(n){throw new Error(G1+n)},error(n){console.error(G1+n)},warn(n){Re.showWarnings&&console.warn(bC+n)},each(n,e){for(const t in n)e(t,n[t])},_inRange(n,e,t){return e<=n&&n<t},_getProjectionToSegment(n,e,t,i,s,l){let c,f,h;const m=(n-t)*(n-t)+(e-i)*(e-i);if(m==0)c=n,f=e,h=(s-t)*(s-t)+(l-i)*(l-i);else{const v=((s-n)*(t-n)+(l-e)*(i-e))/m;v<0?(c=n,f=e,h=(n-s)*(n-s)+(e-l)*(e-l)):v>1?(c=t,f=i,h=(t-s)*(t-s)+(i-l)*(i-l)):(c=n+v*(t-n),f=e+v*(i-e),h=(c-s)*(c-s)+(f-l)*(f-l))}return[c,f,h]},_getProjectionToLine(n,e,t){const i=Q.cloneObject(n);let s=Number.MAX_VALUE;return e.forEach(function(l,c){if(!t&&c===e.length-1)return;const f=e[(c+1)%e.length],h=Q._getProjectionToSegment(l.x,l.y,f.x,f.y,n.x,n.y),m=h[0],v=h[1],E=h[2];E<s&&(i.x=m,i.y=v,s=E)}),i},_prepareArrayForTween(n,e,t){const i=[],s=[];if(n.length>e.length){const c=e;e=n,n=c}for(let c=0;c<n.length;c+=2)i.push({x:n[c],y:n[c+1]});for(let c=0;c<e.length;c+=2)s.push({x:e[c],y:e[c+1]});const l=[];return s.forEach(function(c){const f=Q._getProjectionToLine(c,i,t);l.push(f.x),l.push(f.y)}),l},_prepareToStringify(n){let e;n.visitedByCircularReferenceRemoval=!0;for(const t in n)if(n.hasOwnProperty(t)&&n[t]&&typeof n[t]=="object"){if(e=Object.getOwnPropertyDescriptor(n,t),n[t].visitedByCircularReferenceRemoval||Q._isElement(n[t]))if(e.configurable)delete n[t];else return null;else if(Q._prepareToStringify(n[t])===null)if(e.configurable)delete n[t];else return null}return delete n.visitedByCircularReferenceRemoval,n},_assign(n,e){for(const t in e)n[t]=e[t];return n},_getFirstPointerId(n){return n.touches?n.changedTouches[0].identifier:n.pointerId||999},releaseCanvas(...n){Re.releaseCanvasOnDestroy&&n.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(n,e,t,i){let s=e<0?e:0,l=t<0?t:0;e=Math.abs(e),t=Math.abs(t);let c=0,f=0,h=0,m=0;typeof i=="number"?c=f=h=m=Math.min(i,e/2,t/2):(c=Math.min(i[0]||0,e/2,t/2),f=Math.min(i[1]||0,e/2,t/2),m=Math.min(i[2]||0,e/2,t/2),h=Math.min(i[3]||0,e/2,t/2)),n.moveTo(s+c,l),n.lineTo(s+e-f,l),n.arc(s+e-f,l+f,f,Math.PI*3/2,0,!1),n.lineTo(s+e,l+t-m),n.arc(s+e-m,l+t-m,m,0,Math.PI/2,!1),n.lineTo(s+h,l+t),n.arc(s+h,l+t-h,h,Math.PI/2,Math.PI,!1),n.lineTo(s,l+c),n.arc(s+c,l+c,c,Math.PI,Math.PI*3/2,!1)},drawRoundedPolygonPath(n,e,t,i,s){i=Math.abs(i);for(let l=0;l<t;l++){const c=e[(l-1+t)%t],f=e[l],h=e[(l+1)%t],m={x:f.x-c.x,y:f.y-c.y},v={x:h.x-f.x,y:h.y-f.y},E=Math.hypot(m.x,m.y),x=Math.hypot(v.x,v.y);let R;typeof s=="number"?R=s:R=l<s.length?s[l]:0,R=i*Math.cos(Math.PI/t)*Math.min(1,R/i*2);const z={x:m.x/E,y:m.y/E},D={x:v.x/x,y:v.y/x},I={x:f.x-z.x*R,y:f.y-z.y*R},L={x:f.x+D.x*R,y:f.y+D.y*R};l===0?n.moveTo(I.x,I.y):n.lineTo(I.x,I.y),n.arcTo(f.x,f.y,L.x,L.y,R)}}};function CC(n){const e=[],t=n.length,i=Q;for(let s=0;s<t;s++){let l=n[s];i._isNumber(l)?l=Math.round(l*1e3)/1e3:i._isString(l)||(l=l+""),e.push(l)}return e}const H1=",",AC="(",wC=")",RC="([",NC="])",MC=";",DC="()",zC="=",B1=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],UC=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","filter"],IC=100;let qp=null;function P1(){if(qp!==null)return qp;try{const e=Q.createCanvasElement().getContext("2d");return e?!!e&&"filter"in e:(qp=!1,!1)}catch{return qp=!1,!1}}class Am{constructor(e){this.canvas=e,Re.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let i=this.traceArr,s=i.length,l="",c,f,h,m;for(c=0;c<s;c++)f=i[c],h=f.method,h?(m=f.args,l+=h,e?l+=DC:Q._isArray(m[0])?l+=RC+m.join(H1)+NC:(t&&(m=m.map(v=>typeof v=="number"?Math.floor(v):v)),l+=AC+m.join(H1)+wC)):(l+=f.property,e||(l+=zC+f.val)),l+=MC;return l}clearTrace(){this.traceArr=[]}_trace(e){let t=this.traceArr,i;t.push(e),i=t.length,i>=IC&&t.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}_applyMiterLimit(e){const t=e.attrs.miterLimit;t!=null&&this.setAttr("miterLimit",t)}setAttr(e,t){this._context[e]=t}arc(e,t,i,s,l,c){this._context.arc(e,t,i,s,l,c)}arcTo(e,t,i,s,l){this._context.arcTo(e,t,i,s,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,i,s,l,c){this._context.bezierCurveTo(e,t,i,s,l,c)}clearRect(e,t,i,s){this._context.clearRect(e,t,i,s)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const i=arguments;if(i.length===2)return this._context.createImageData(e,t);if(i.length===1)return this._context.createImageData(e)}createLinearGradient(e,t,i,s){return this._context.createLinearGradient(e,t,i,s)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,i,s,l,c){return this._context.createRadialGradient(e,t,i,s,l,c)}drawImage(e,t,i,s,l,c,f,h,m){const v=arguments,E=this._context;v.length===3?E.drawImage(e,t,i):v.length===5?E.drawImage(e,t,i,s,l):v.length===9&&E.drawImage(e,t,i,s,l,c,f,h,m)}ellipse(e,t,i,s,l,c,f,h){this._context.ellipse(e,t,i,s,l,c,f,h)}isPointInPath(e,t,i,s){return i?this._context.isPointInPath(i,e,t,s):this._context.isPointInPath(e,t,s)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,i,s){this._context.fillRect(e,t,i,s)}strokeRect(e,t,i,s){this._context.strokeRect(e,t,i,s)}fillText(e,t,i,s){s?this._context.fillText(e,t,i,s):this._context.fillText(e,t,i)}measureText(e){return this._context.measureText(e)}getImageData(e,t,i,s){return this._context.getImageData(e,t,i,s)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,i,s){this._context.rect(e,t,i,s)}roundRect(e,t,i,s,l){this._context.roundRect(e,t,i,s,l)}putImageData(e,t,i){this._context.putImageData(e,t,i)}quadraticCurveTo(e,t,i,s){this._context.quadraticCurveTo(e,t,i,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,i,s,l,c){this._context.setTransform(e,t,i,s,l,c)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,i,s){this._context.strokeText(e,t,i,s)}transform(e,t,i,s,l,c){this._context.transform(e,t,i,s,l,c)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e=this,t=B1.length,i=this.setAttr,s,l;const c=function(f){let h=e[f],m;e[f]=function(){return l=CC(Array.prototype.slice.call(arguments,0)),m=h.apply(e,arguments),e._trace({method:f,args:l}),m}};for(s=0;s<t;s++)c(B1[s]);e.setAttr=function(){i.apply(e,arguments);const f=arguments[0];let h=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(h=h/this.canvas.getPixelRatio()),e._trace({property:f,val:h})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||t==="source-over"||this.setAttr("globalCompositeOperation",t)}}UC.forEach(function(n){Object.defineProperty(Am.prototype,n,{get(){return this._context[n]},set(e){this._context[n]=e}})});class OC extends Am{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),i=e.getFillPriority();if(t&&i==="color"){this._fillColor(e);return}const s=e.getFillPatternImage();if(s&&i==="pattern"){this._fillPattern(e);return}const l=e.getFillLinearGradientColorStops();if(l&&i==="linear-gradient"){this._fillLinearGradient(e);return}const c=e.getFillRadialGradientColorStops();if(c&&i==="radial-gradient"){this._fillRadialGradient(e);return}t?this._fillColor(e):s?this._fillPattern(e):l?this._fillLinearGradient(e):c&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),i=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(t.x,t.y,i.x,i.y);if(s){for(let c=0;c<s.length;c+=2)l.addColorStop(s[c],s[c+1]);this.setAttr("strokeStyle",l)}}_stroke(e){const t=e.dash(),i=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!i){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),i||this.restore()}}_applyShadow(e){var t,i,s;const l=(t=e.getShadowRGBA())!==null&&t!==void 0?t:"black",c=(i=e.getShadowBlur())!==null&&i!==void 0?i:5,f=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},h=e.getAbsoluteScale(),m=this.canvas.getPixelRatio(),v=h.x*m,E=h.y*m;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",c*Math.min(Math.abs(v),Math.abs(E))),this.setAttr("shadowOffsetX",f.x*v),this.setAttr("shadowOffsetY",f.y*E)}}class kC extends Am{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const l=this.getCanvas().getPixelRatio();this.setTransform(l,0,0,l,0,0)}this._applyLineCap(e);const i=e.hitStrokeWidth(),s=i==="auto"?e.strokeWidth():i;this.setAttr("lineWidth",s),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}let Vp;function LC(){if(Vp)return Vp;const n=Q.createCanvasElement(),e=n.getContext("2d");return Vp=(function(){const t=Re._global.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i})(),Q.releaseCanvas(n),Vp}class Ky{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const i=(e||{}).pixelRatio||Re.pixelRatio||LC();this.pixelRatio=i,this._canvas=Q.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(s){return Q.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}class Cr extends Ky{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new OC(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}}class Jy extends Ky{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new kC(this),this.setSize(e.width,e.height)}}const Ot={get isDragging(){let n=!1;return Ot._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){let n;return Ot._dragElements.forEach(e=>{n=e.node}),n},_dragElements:new Map,_drag(n){const e=[];Ot._dragElements.forEach((t,i)=>{const{node:s}=t,l=s.getStage();l.setPointersPositions(n),t.pointerId===void 0&&(t.pointerId=Q._getFirstPointerId(n));const c=l._changedPointerPositions.find(f=>f.id===t.pointerId);if(c){if(t.dragStatus!=="dragging"){const f=s.dragDistance();if(Math.max(Math.abs(c.x-t.startPointerPos.x),Math.abs(c.y-t.startPointerPos.y))<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,t),e.push(s)}}),e.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:n},!0)})},_endDragBefore(n){const e=[];Ot._dragElements.forEach(t=>{const{node:i}=t,s=i.getStage();if(n&&s.setPointersPositions(n),!s._changedPointerPositions.find(f=>f.id===t.pointerId))return;(t.dragStatus==="dragging"||t.dragStatus==="stopped")&&(Ot.justDragged=!0,Re._mouseListenClick=!1,Re._touchListenClick=!1,Re._pointerListenClick=!1,t.dragStatus="stopped");const c=t.node.getLayer()||t.node instanceof Re.Stage&&t.node;c&&e.indexOf(c)===-1&&e.push(c)}),e.forEach(t=>{t.draw()})},_endDragAfter(n){Ot._dragElements.forEach((e,t)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:n},!0),e.dragStatus!=="dragging"&&Ot._dragElements.delete(t)})}};Re.isBrowser&&(window.addEventListener("mouseup",Ot._endDragBefore,!0),window.addEventListener("touchend",Ot._endDragBefore,!0),window.addEventListener("touchcancel",Ot._endDragBefore,!0),window.addEventListener("mousemove",Ot._drag),window.addEventListener("touchmove",Ot._drag),window.addEventListener("mouseup",Ot._endDragAfter,!1),window.addEventListener("touchend",Ot._endDragAfter,!1),window.addEventListener("touchcancel",Ot._endDragAfter,!1));function Rr(n){return Q._isString(n)?'"'+n+'"':Object.prototype.toString.call(n)==="[object Number]"||Q._isBoolean(n)?n:Object.prototype.toString.call(n)}function kS(n){return n>255?255:n<0?0:Math.round(n)}function Ce(){if(Re.isUnminified)return function(n,e){return Q._isNumber(n)||Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),n}}function wm(n){if(Re.isUnminified)return function(e,t){let i=Q._isNumber(e),s=Q._isArray(e)&&e.length==n;return!i&&!s&&Q.warn(Rr(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+n+")"),e}}function Xy(){if(Re.isUnminified)return function(n,e){return Q._isNumber(n)||n==="auto"||Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),n}}function Lu(){if(Re.isUnminified)return function(n,e){return Q._isString(n)||Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),n}}function LS(){if(Re.isUnminified)return function(n,e){const t=Q._isString(n),i=Object.prototype.toString.call(n)==="[object CanvasGradient]"||n&&n.addColorStop;return t||i||Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),n}}function GC(){if(Re.isUnminified)return function(n,e){const t=Int8Array?Object.getPrototypeOf(Int8Array):null;return t&&n instanceof t||(Q._isArray(n)?n.forEach(function(i){Q._isNumber(i)||Q.warn('"'+e+'" attribute has non numeric element '+i+". Make sure that all elements are numbers.")}):Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.')),n}}function Xs(){if(Re.isUnminified)return function(n,e){return n===!0||n===!1||Q.warn(Rr(n)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),n}}function HC(n){if(Re.isUnminified)return function(e,t){return e==null||Q.isObject(e)||Q.warn(Rr(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+n),e}}const mh="get",gh="set",H={addGetterSetter(n,e,t,i,s){H.addGetter(n,e,t),H.addSetter(n,e,i,s),H.addOverloadedGetterSetter(n,e)},addGetter(n,e,t){const i=mh+Q._capitalize(e);n.prototype[i]=n.prototype[i]||function(){const s=this.attrs[e];return s===void 0?t:s}},addSetter(n,e,t,i){const s=gh+Q._capitalize(e);n.prototype[s]||H.overWriteSetter(n,e,t,i)},overWriteSetter(n,e,t,i){const s=gh+Q._capitalize(e);n.prototype[s]=function(l){return t&&l!==void 0&&l!==null&&(l=t.call(this,l,e)),this._setAttr(e,l),i&&i.call(this),this}},addComponentsGetterSetter(n,e,t,i,s){const l=t.length,c=Q._capitalize,f=mh+c(e),h=gh+c(e);n.prototype[f]=function(){const v={};for(let E=0;E<l;E++){const x=t[E];v[x]=this.getAttr(e+c(x))}return v};const m=HC(t);n.prototype[h]=function(v){const E=this.attrs[e];i&&(v=i.call(this,v,e)),m&&m.call(this,v,e);for(const x in v)v.hasOwnProperty(x)&&this._setAttr(e+c(x),v[x]);return v||t.forEach(x=>{this._setAttr(e+c(x),void 0)}),this._fireChangeEvent(e,E,v),s&&s.call(this),this},H.addOverloadedGetterSetter(n,e)},addOverloadedGetterSetter(n,e){const t=Q._capitalize(e),i=gh+t,s=mh+t;n.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(n,e,t,i){Q.error("Adding deprecated "+e);const s=mh+Q._capitalize(e),l=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";n.prototype[s]=function(){Q.error(l);const c=this.attrs[e];return c===void 0?t:c},H.addSetter(n,e,i,function(){Q.error(l)}),H.addOverloadedGetterSetter(n,e)},backCompat(n,e){Q.each(e,function(t,i){const s=n.prototype[i],l=mh+Q._capitalize(t),c=gh+Q._capitalize(t);function f(){s.apply(this,arguments),Q.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+i+'" instead.')}n.prototype[t]=f,n.prototype[l]=f,n.prototype[c]=f})},afterSetFilter(){this._filterUpToDate=!1}};function BC(n){const e=/(\w+)\(([^)]+)\)/g;let t;for(;(t=e.exec(n))!==null;){const[,i,s]=t;switch(i){case"blur":{const l=parseFloat(s.replace("px",""));return function(c){this.blurRadius(l*.5);const f=Re.Filters;f&&f.Blur&&f.Blur.call(this,c)}}case"brightness":{const l=s.includes("%")?parseFloat(s)/100:parseFloat(s);return function(c){this.brightness(l);const f=Re.Filters;f&&f.Brightness&&f.Brightness.call(this,c)}}case"contrast":{const l=parseFloat(s);return function(c){const f=100*(Math.sqrt(l)-1);this.contrast(f);const h=Re.Filters;h&&h.Contrast&&h.Contrast.call(this,c)}}case"grayscale":return function(l){const c=Re.Filters;c&&c.Grayscale&&c.Grayscale.call(this,l)};case"sepia":return function(l){const c=Re.Filters;c&&c.Sepia&&c.Sepia.call(this,l)};case"invert":return function(l){const c=Re.Filters;c&&c.Invert&&c.Invert.call(this,l)};default:Q.warn(`CSS filter "${i}" is not supported in fallback mode. Consider using function filters for better compatibility.`);break}}return()=>{}}const im="absoluteOpacity",q1="allEventListeners",_l="absoluteTransform",V1="absoluteScale",wu="canvas",PC="Change",qC="children",VC="konva",cy="listening",jC="mouseenter",YC="mouseleave",FC="pointerenter",KC="pointerleave",JC="touchenter",XC="touchleave",j1="set",Y1="Shape",am=" ",F1="stage",br="transform",QC="Stage",dy="visible",ZC=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(am);let WC=1;class Te{constructor(e){this._id=WC++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===br||e===_l)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,t){let i=this._cache.get(e);return(i===void 0||(e===br||e===_l)&&i.dirty===!0)&&(i=t.call(this),this._cache.set(e,i)),i}_calculate(e,t,i){if(!this._attachedDepsListeners.get(e)){const s=t.map(l=>l+"Change.konva").join(am);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,i)}_getCanvasCache(){return this._cache.get(wu)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===_l&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(wu)){const{scene:e,filter:t,hit:i}=this._cache.get(wu);Q.releaseCanvas(e._canvas,t._canvas,i._canvas),this._cache.delete(wu)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let i={};(t.x===void 0||t.y===void 0||t.width===void 0||t.height===void 0)&&(i=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let s=Math.ceil(t.width||i.width),l=Math.ceil(t.height||i.height),c=t.pixelRatio,f=t.x===void 0?Math.floor(i.x):t.x,h=t.y===void 0?Math.floor(i.y):t.y,m=t.offset||0,v=t.drawBorder||!1,E=t.hitCanvasPixelRatio||1;if(!s||!l){Q.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}const x=Math.abs(Math.round(i.x)-f)>.5?1:0,R=Math.abs(Math.round(i.y)-h)>.5?1:0;s+=m*2+x,l+=m*2+R,f-=m,h-=m;const N=new Cr({pixelRatio:c,width:s,height:l}),z=new Cr({pixelRatio:c,width:0,height:0,willReadFrequently:!0}),D=new Jy({pixelRatio:E,width:s,height:l}),I=N.getContext(),L=D.getContext(),U=new Cr({width:N.width/N.pixelRatio+Math.abs(f),height:N.height/N.pixelRatio+Math.abs(h),pixelRatio:N.pixelRatio}),G=U.getContext();return D.isCache=!0,N.isCache=!0,this._cache.delete(wu),this._filterUpToDate=!1,t.imageSmoothingEnabled===!1&&(N.getContext()._context.imageSmoothingEnabled=!1,z.getContext()._context.imageSmoothingEnabled=!1),I.save(),L.save(),G.save(),I.translate(-f,-h),L.translate(-f,-h),G.translate(-f,-h),U.x=f,U.y=h,this._isUnderCache=!0,this._clearSelfAndDescendantCache(im),this._clearSelfAndDescendantCache(V1),this.drawScene(N,this,U),this.drawHit(D,this),this._isUnderCache=!1,I.restore(),L.restore(),v&&(I.save(),I.beginPath(),I.rect(0,0,s,l),I.closePath(),I.setAttr("strokeStyle","red"),I.setAttr("lineWidth",5),I.stroke(),I.restore()),Q.releaseCanvas(U._canvas),this._cache.set(wu,{scene:N,filter:z,hit:D,x:f,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(wu)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let s=1/0,l=1/0,c=-1/0,f=-1/0;const h=this.getAbsoluteTransform(t);return i.forEach(function(m){const v=h.point(m);s===void 0&&(s=c=v.x,l=f=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y)}),{x:s,y:l,width:c-s,height:f-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const i=this._getCachedSceneCanvas(),s=i.pixelRatio;e.drawImage(i._canvas,0,0,i.width/s,i.height/s),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),i=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(i._canvas,0,0,i.width/i.pixelRatio,i.height/i.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e=this.filters(),t=this._getCanvasCache(),i=t.scene,s=t.filter,l=s.getContext(),c,f,h,m;if(!e||e.length===0)return i;if(this._filterUpToDate)return s;let v=!0;for(let x=0;x<e.length;x++)if(typeof e[x]=="string"&&P1(),typeof e[x]!="string"||!P1()){v=!1;break}const E=i.pixelRatio;if(s.setSize(i.width/i.pixelRatio,i.height/i.pixelRatio),v){const x=e.join(" ");return l.save(),l.setAttr("filter",x),l.drawImage(i._canvas,0,0,i.getWidth()/E,i.getHeight()/E),l.restore(),this._filterUpToDate=!0,s}try{for(c=e.length,l.clear(),l.drawImage(i._canvas,0,0,i.getWidth()/E,i.getHeight()/E),f=l.getImageData(0,0,s.getWidth(),s.getHeight()),h=0;h<c;h++)m=e[h],typeof m=="string"&&(m=BC(m)),m.call(this,f),l.putImageData(f,0,0)}catch(x){Q.error("Unable to apply filter. "+x.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}return this._filterUpToDate=!0,s}on(e,t){if(this._cache&&this._cache.delete(q1),arguments.length===3)return this._delegate.apply(this,arguments);const i=e.split(am);for(let s=0;s<i.length;s++){const c=i[s].split("."),f=c[0],h=c[1]||"";this.eventListeners[f]||(this.eventListeners[f]=[]),this.eventListeners[f].push({name:h,handler:t})}return this}off(e,t){let i=(e||"").split(am),s=i.length,l,c,f,h,m,v;if(this._cache&&this._cache.delete(q1),!e)for(c in this.eventListeners)this._off(c);for(l=0;l<s;l++)if(f=i[l],h=f.split("."),m=h[0],v=h[1],m)this.eventListeners[m]&&this._off(m,v,t);else for(c in this.eventListeners)this._off(c,v,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(i){t.call(this,i.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,i){const s=this;this.on(e,function(l){const c=l.target.findAncestors(t,!0,s);for(let f=0;f<c.length;f++)l=Q.cloneObject(l),l.currentTarget=c[f],i.call(c[f],l)})}remove(){return this.isDragging()&&this.stopDrag(),Ot._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(_l),this._clearSelfAndDescendantCache(im),this._clearSelfAndDescendantCache(V1),this._clearSelfAndDescendantCache(F1),this._clearSelfAndDescendantCache(dy),this._clearSelfAndDescendantCache(cy)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+Q._capitalize(e);return Q._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,i;if(!e)return this;for(t in e)t!==qC&&(i=j1+Q._capitalize(t),Q._isFunction(this[i])?this[i](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(cy,this._isListening)}_isListening(e){if(!this.listening())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isListening(e):!0}isVisible(){return this._getCache(dy,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const i=this.getParent();return i&&i!==e&&this!==e?i._isVisible(e):!0}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const i=this.getLayer();let s=!1;Ot._dragElements.forEach(c=>{c.dragStatus==="dragging"&&(c.node.nodeType==="Stage"||c.node.getLayer()===i)&&(s=!0)});const l=!t&&!Re.hitOnDragEnabled&&(s||Re.isTransforming());return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e=this.getDepth(),t=this,i=0,s,l,c,f;function h(v){for(s=[],l=v.length,c=0;c<l;c++)f=v[c],i++,f.nodeType!==Y1&&(s=s.concat(f.getChildren().slice())),f._id===t._id&&(c=l);s.length>0&&s[0].getDepth()<=e&&h(s)}const m=this.getStage();return t.nodeType!==QC&&m&&h(m.getChildren()),i}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(br),this._clearSelfAndDescendantCache(_l)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const i=this.getAbsoluteTransform().copy();return i.invert(),i.point(t)}getAbsolutePosition(e){let t=!1,i=this.parent;for(;i;){if(i.isCached()){t=!0;break}i=i.parent}t&&!e&&(e=!0);const s=this.getAbsoluteTransform(e).getMatrix(),l=new Ga,c=this.offset();return l.m=s.slice(),l.translate(c.x,c.y),l.getTranslation()}setAbsolutePosition(e){const{x:t,y:i,...s}=this._clearTransform();this.attrs.x=t,this.attrs.y=i,this._clearCache(br);const l=this._getAbsoluteTransform().copy();return l.invert(),l.translate(e.x,e.y),e={x:this.attrs.x+l.getTranslation().x,y:this.attrs.y+l.getTranslation().y},this._setTransform(s),this.setPosition({x:e.x,y:e.y}),this._clearCache(br),this._clearSelfAndDescendantCache(_l),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,i=e.y,s=this.x(),l=this.y();return t!==void 0&&(s+=t),i!==void 0&&(l+=i),this.setPosition({x:s,y:l}),this}_eachAncestorReverse(e,t){let i=[],s=this.getParent(),l,c;if(!(t&&t._id===this._id)){for(i.unshift(this);s&&(!t||s._id!==t._id);)i.unshift(s),s=s.parent;for(l=i.length,c=0;c<l;c++)e(i[c])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return Q.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return Q.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index,t=this.parent.getChildren().length;return e<t-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return Q.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return Q.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return Q.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&Q.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(im,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e=this.getAttrs(),t,i,s,l,c;const f={attrs:{},className:this.getClassName()};for(t in e)i=e[t],c=Q.isObject(i)&&!Q._isPlainObject(i)&&!Q._isArray(i),!c&&(s=typeof this[t]=="function"&&this[t],delete e[t],l=s?s.call(this):null,e[t]=i,l!==i&&(f.attrs[t]=i));return Q._prepareToStringify(f)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,i){const s=[];t&&this._isMatch(e)&&s.push(this);let l=this.parent;for(;l;){if(l===i)return s;l._isMatch(e)&&s.push(l),l=l.parent}return s}isAncestorOf(e){return!1}findAncestor(e,t,i){return this.findAncestors(e,t,i)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);let t=e.replace(/ /g,"").split(","),i=t.length,s,l;for(s=0;s<i;s++)if(l=t[s],Q.isValidSelector(l)||(Q.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Q.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Q.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(F1,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},i){return t.target=t.target||this,i?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(_l,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new Ga,this._eachAncestorReverse(function(i){const s=i.transformsEnabled();s==="all"?t.multiply(i.getTransform()):s==="position"&&t.translate(i.x()-i.offsetX(),i.y()-i.offsetY())},e),t;{t=this._cache.get(_l)||new Ga,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const i=this.transformsEnabled();if(i==="all")t.multiply(this.getTransform());else if(i==="position"){const s=this.attrs.x||0,l=this.attrs.y||0,c=this.attrs.offsetX||0,f=this.attrs.offsetY||0;t.translate(s-c,l-f)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(br,this._getTransform)}_getTransform(){var e,t;const i=this._cache.get(br)||new Ga;i.reset();const s=this.x(),l=this.y(),c=Re.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,h=(t=this.attrs.scaleY)!==null&&t!==void 0?t:1,m=this.attrs.skewX||0,v=this.attrs.skewY||0,E=this.attrs.offsetX||0,x=this.attrs.offsetY||0;return(s!==0||l!==0)&&i.translate(s,l),c!==0&&i.rotate(c),(m!==0||v!==0)&&i.skew(m,v),(f!==1||h!==1)&&i.scale(f,h),(E!==0||x!==0)&&i.translate(-1*E,-1*x),i.dirty=!1,i}clone(e){let t=Q.cloneObject(this.attrs),i,s,l,c,f;for(i in e)t[i]=e[i];const h=new this.constructor(t);for(i in this.eventListeners)for(s=this.eventListeners[i],l=s.length,c=0;c<l;c++)f=s[c],f.name.indexOf(VC)<0&&(h.eventListeners[i]||(h.eventListeners[i]=[]),h.eventListeners[i].push(f));return h}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),i=this.getStage(),s=e.x!==void 0?e.x:Math.floor(t.x),l=e.y!==void 0?e.y:Math.floor(t.y),c=e.pixelRatio||1,f=new Cr({width:e.width||Math.ceil(t.width)||(i?i.width():0),height:e.height||Math.ceil(t.height)||(i?i.height():0),pixelRatio:c}),h=f.getContext(),m=new Cr({width:f.width/f.pixelRatio+Math.abs(s),height:f.height/f.pixelRatio+Math.abs(l),pixelRatio:f.pixelRatio});return e.imageSmoothingEnabled===!1&&(h._context.imageSmoothingEnabled=!1),h.save(),(s||l)&&h.translate(-1*s,-1*l),this.drawScene(f,void 0,m),h.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};const t=e.mimeType||null,i=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(t,i);return e.callback&&e.callback(s),s}toImage(e){return new Promise((t,i)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,Q._urlToImage(this.toDataURL(e),function(l){t(l),s==null||s(l)})}catch(s){i(s)}})}toBlob(e){return new Promise((t,i)=>{try{const s=e==null?void 0:e.callback;s&&delete e.callback,this.toCanvas(e).toBlob(l=>{t(l),s==null||s(l)},e==null?void 0:e.mimeType,e==null?void 0:e.quality)}catch(s){i(s)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Re.dragDistance}_off(e,t,i){let s=this.eventListeners[e],l,c,f;for(l=0;l<s.length;l++)if(c=s[l].name,f=s[l].handler,(c!=="konva"||t==="konva")&&(!t||c===t)&&(!i||i===f)){if(s.splice(l,1),s.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,t,i){this._fire(e+PC,{oldVal:t,newVal:i})}addName(e){if(!this.hasName(e)){const t=this.name(),i=t?t+" "+e:e;this.name(i)}return this}hasName(e){if(!e)return!1;const t=this.name();return t?(t||"").split(/\s/g).indexOf(e)!==-1:!1}removeName(e){const t=(this.name()||"").split(/\s/g),i=t.indexOf(e);return i!==-1&&(t.splice(i,1),this.name(t.join(" "))),this}setAttr(e,t){const i=this[j1+Q._capitalize(e)];return Q._isFunction(i)?i.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(Re.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,t){const i=this.attrs[e];i===t&&!Q.isObject(t)||(t==null?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,i,t),this._requestDraw())}_setComponentAttr(e,t,i){let s;i!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=i,this._fireChangeEvent(e,s,i))}_fireAndBubble(e,t,i){t&&this.nodeType===Y1&&(t.target=this);const s=[jC,YC,FC,KC,JC,XC];if(!(s.indexOf(e)!==-1&&(i&&(this===i||this.isAncestorOf&&this.isAncestorOf(i))||this.nodeType==="Stage"&&!i))){this._fire(e,t);const c=s.indexOf(e)!==-1&&i&&i.isAncestorOf&&i.isAncestorOf(this)&&!i.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!c&&(i&&i.parent?this._fireAndBubble.call(this.parent,e,t,i):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,i;const{nodeType:s}=this,l=Te.protoListenerMap.get(s)||{};let c=l==null?void 0:l[e];if(c===void 0){c=[];let f=Object.getPrototypeOf(this);for(;f;){const h=(i=(t=f.eventListeners)===null||t===void 0?void 0:t[e])!==null&&i!==void 0?i:[];c.push(...h),f=Object.getPrototypeOf(f)}l[e]=c,Te.protoListenerMap.set(s,l)}return c}_fire(e,t){t=t||{},t.currentTarget=this,t.type=e;const i=this._getProtoListeners(e);if(i)for(let l=0;l<i.length;l++)i[l].handler.call(this,t);const s=this.eventListeners[e];if(s)for(let l=0;l<s.length;l++)s[l].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,i=this.getStage(),s=this.getAbsolutePosition();if(!i)return;const l=i._getPointerById(t)||i._changedPointerPositions[0]||s;Ot._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-s.x,y:l.y-s.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){Ot._dragElements.has(this._id)||this._createDragElement(e);const i=Ot._dragElements.get(this._id);i.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const i=this.getStage()._getPointerById(t.pointerId);if(!i)return;let s={x:i.x-t.offset.x,y:i.y-t.offset.y};const l=this.dragBoundFunc();if(l!==void 0){const c=l.call(this,s,e);c?s=c:Q.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}stopDrag(e){const t=Ot._dragElements.get(this._id);t&&(t.dragStatus="stopped"),Ot._endDragBefore(e),Ot._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=Ot._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(!(e.evt.button!==void 0)||Re.dragButtons.indexOf(e.evt.button)>=0)||this.isDragging())return;let s=!1;Ot._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(s=!0)}),s||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=Ot._dragElements.get(this._id),i=t&&t.dragStatus==="dragging",s=t&&t.dragStatus==="ready";i?this.stopDrag():s&&Ot._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const i={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return Q.haveIntersection(i,this.getClientRect())}static create(e,t){return Q._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let i=Te.prototype.getClassName.call(e),s=e.children,l,c,f;t&&(e.attrs.container=t),Re[i]||(Q.warn('Can not find a node with class name "'+i+'". Fallback to "Shape".'),i="Shape");const h=Re[i];if(l=new h(e.attrs),s)for(c=s.length,f=0;f<c;f++)l.add(Te._createNode(s[f]));return l}}Te.protoListenerMap=new Map;Te.prototype.nodeType="Node";Te.prototype._attrsAffectingSize=[];Te.prototype.eventListeners={};Te.prototype.on.call(Te.prototype,ZC,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(br),this._clearSelfAndDescendantCache(_l)});Te.prototype.on.call(Te.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(dy)});Te.prototype.on.call(Te.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(cy)});Te.prototype.on.call(Te.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(im)});const Ft=H.addGetterSetter;Ft(Te,"zIndex");Ft(Te,"absolutePosition");Ft(Te,"position");Ft(Te,"x",0,Ce());Ft(Te,"y",0,Ce());Ft(Te,"globalCompositeOperation","source-over",Lu());Ft(Te,"opacity",1,Ce());Ft(Te,"name","",Lu());Ft(Te,"id","",Lu());Ft(Te,"rotation",0,Ce());H.addComponentsGetterSetter(Te,"scale",["x","y"]);Ft(Te,"scaleX",1,Ce());Ft(Te,"scaleY",1,Ce());H.addComponentsGetterSetter(Te,"skew",["x","y"]);Ft(Te,"skewX",0,Ce());Ft(Te,"skewY",0,Ce());H.addComponentsGetterSetter(Te,"offset",["x","y"]);Ft(Te,"offsetX",0,Ce());Ft(Te,"offsetY",0,Ce());Ft(Te,"dragDistance",void 0,Ce());Ft(Te,"width",0,Ce());Ft(Te,"height",0,Ce());Ft(Te,"listening",!0,Xs());Ft(Te,"preventDefault",!0,Xs());Ft(Te,"filters",void 0,function(n){return this._filterUpToDate=!1,n});Ft(Te,"visible",!0,Xs());Ft(Te,"transformsEnabled","all",Lu());Ft(Te,"size");Ft(Te,"dragBoundFunc");Ft(Te,"draggable",!1,Xs());H.backCompat(Te,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class Ha extends Te{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(e.length===0)return this;if(e.length>1){for(let i=0;i<e.length;i++)this.add(e[i]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const i=[];return this._descendants(s=>{const l=s._isMatch(e);return l&&i.push(s),!!(l&&t)}),i}_descendants(e){let t=!1;const i=this.getChildren();for(const s of i){if(t=e(s),t)return!0;if(s.hasChildren()&&(t=s._descendants(e),t))return!0}return!1}toObject(){const e=Te.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=Te.prototype.clone.call(this,e);return this.getChildren().forEach(function(i){t.add(i.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(i=>{i.isVisible()&&i.intersects(e)&&t.push(i)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),!this.isCached()&&((t=this.children)===null||t===void 0||t.forEach(function(i){i._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(t,i){t.index=i}),this._requestDraw()}drawScene(e,t,i){const s=this.getLayer(),l=e||s&&s.getCanvas(),c=l&&l.getContext(),f=this._getCanvasCache(),h=f&&f.scene,m=l&&l.isCache;if(!this.isVisible()&&!m)return this;if(h){c.save();const v=this.getAbsoluteTransform(t).getMatrix();c.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedSceneCanvas(c),c.restore()}else this._drawChildren("drawScene",l,t,i);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const i=this.getLayer(),s=e||i&&i.hitCanvas,l=s&&s.getContext(),c=this._getCanvasCache();if(c&&c.hit){l.save();const h=this.getAbsoluteTransform(t).getMatrix();l.transform(h[0],h[1],h[2],h[3],h[4],h[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",s,t);return this}_drawChildren(e,t,i,s){var l;const c=t&&t.getContext(),f=this.clipWidth(),h=this.clipHeight(),m=this.clipFunc(),v=typeof f=="number"&&typeof h=="number"||m,E=i===this;if(v){c.save();const R=this.getAbsoluteTransform(i);let N=R.getMatrix();c.transform(N[0],N[1],N[2],N[3],N[4],N[5]),c.beginPath();let z;if(m)z=m.call(this,c,this);else{const D=this.clipX(),I=this.clipY();c.rect(D||0,I||0,f,h)}c.clip.apply(c,z),N=R.copy().invert().getMatrix(),c.transform(N[0],N[1],N[2],N[3],N[4],N[5])}const x=!E&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";x&&(c.save(),c._applyGlobalCompositeOperation(this)),(l=this.children)===null||l===void 0||l.forEach(function(R){R[e](t,i,s)}),x&&c.restore(),v&&c.restore()}getClientRect(e={}){var t;const i=e.skipTransform,s=e.relativeTo;let l,c,f,h,m={x:1/0,y:1/0,width:0,height:0};const v=this;(t=this.children)===null||t===void 0||t.forEach(function(R){if(!R.visible())return;const N=R.getClientRect({relativeTo:v,skipShadow:e.skipShadow,skipStroke:e.skipStroke});N.width===0&&N.height===0||(l===void 0?(l=N.x,c=N.y,f=N.x+N.width,h=N.y+N.height):(l=Math.min(l,N.x),c=Math.min(c,N.y),f=Math.max(f,N.x+N.width),h=Math.max(h,N.y+N.height)))});const E=this.find("Shape");let x=!1;for(let R=0;R<E.length;R++)if(E[R]._isVisible(this)){x=!0;break}return x&&l!==void 0?m={x:l,y:c,width:f-l,height:h-c}:m={x:0,y:0,width:0,height:0},i?m:this._transformedRect(m,s)}}H.addComponentsGetterSetter(Ha,"clip",["x","y","width","height"]);H.addGetterSetter(Ha,"clipX",void 0,Ce());H.addGetterSetter(Ha,"clipY",void 0,Ce());H.addGetterSetter(Ha,"clipWidth",void 0,Ce());H.addGetterSetter(Ha,"clipHeight",void 0,Ce());H.addGetterSetter(Ha,"clipFunc");const Vh=new Map,GS=Re._global.PointerEvent!==void 0;function Ug(n){return Vh.get(n)}function Qy(n){return{evt:n,pointerId:n.pointerId}}function HS(n,e){return Vh.get(n)===e}function BS(n,e){Dh(n),e.getStage()&&(Vh.set(n,e),GS&&e._fire("gotpointercapture",Qy(new PointerEvent("gotpointercapture"))))}function Dh(n,e){const t=Vh.get(n);if(!t)return;const i=t.getStage();i&&i.content,Vh.delete(n),GS&&t._fire("lostpointercapture",Qy(new PointerEvent("lostpointercapture")))}const $C="Stage",e6="string",K1="px",t6="mouseout",PS="mouseleave",qS="mouseover",VS="mouseenter",jS="mousemove",YS="mousedown",FS="mouseup",Eh="pointermove",Th="pointerdown",bd="pointerup",Ch="pointercancel",n6="lostpointercapture",jp="pointerout",Ah="pointerleave",Yp="pointerover",Fp="pointerenter",fy="contextmenu",KS="touchstart",JS="touchend",XS="touchmove",QS="touchcancel",hy="wheel",i6=5,a6=[[VS,"_pointerenter"],[YS,"_pointerdown"],[jS,"_pointermove"],[FS,"_pointerup"],[PS,"_pointerleave"],[KS,"_pointerdown"],[XS,"_pointermove"],[JS,"_pointerup"],[QS,"_pointercancel"],[qS,"_pointerover"],[hy,"_wheel"],[fy,"_contextmenu"],[Th,"_pointerdown"],[Eh,"_pointermove"],[bd,"_pointerup"],[Ch,"_pointercancel"],[Ah,"_pointerleave"],[n6,"_lostpointercapture"]],Ig={mouse:{[jp]:t6,[Ah]:PS,[Yp]:qS,[Fp]:VS,[Eh]:jS,[Th]:YS,[bd]:FS,[Ch]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[jp]:"touchout",[Ah]:"touchleave",[Yp]:"touchover",[Fp]:"touchenter",[Eh]:XS,[Th]:KS,[bd]:JS,[Ch]:QS,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[jp]:jp,[Ah]:Ah,[Yp]:Yp,[Fp]:Fp,[Eh]:Eh,[Th]:Th,[bd]:bd,[Ch]:Ch,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},wh=n=>n.indexOf("pointer")>=0?"pointer":n.indexOf("touch")>=0?"touch":"mouse",dd=n=>{const e=wh(n);if(e==="pointer")return Re.pointerEventsEnabled&&Ig.pointer;if(e==="touch")return Ig.touch;if(e==="mouse")return Ig.mouse};function J1(n={}){return(n.clipFunc||n.clipWidth||n.clipHeight)&&Q.warn("Stage does not support clipping. Please use clip for Layers or Groups."),n}const s6="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",zh=[];let Rm=class extends Ha{constructor(e){super(J1(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),zh.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{J1(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t=e.getType()==="Layer",i=e.getType()==="FastLayer";t||i||Q.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===e6){let t;if(e.charAt(0)==="."){const i=e.slice(1);e=document.getElementsByClassName(i)[0]}else e.charAt(0)!=="#"?t=e:t=e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let i=0;i<t;i++)e[i].clear();return this}clone(e){return e||(e={}),e.container=typeof document<"u"&&document.createElement("div"),Ha.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&Q._isInDocument(e)&&this.container().removeChild(e);const t=zh.indexOf(this);return t>-1&&zh.splice(t,1),Q.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(Q.warn(s6),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e={...e},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new Cr({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),i=t.getContext()._context,s=this.children;return(e.x||e.y)&&i.translate(-1*e.x,-1*e.y),s.forEach(function(l){if(!l.isVisible())return;const c=l._toKonvaCanvas(e);i.drawImage(c._canvas,e.x,e.y,c.getWidth()/c.getPixelRatio(),c.getHeight()/c.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children,i=t.length,s=i-1;for(let l=s;l>=0;l--){const c=t[l].getIntersection(e);if(c)return c}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+K1,this.content.style.height=t+K1),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(i=>{i.setSize({width:e,height:t}),i.draw()})}add(e,...t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.add(arguments[s]);return this}super.add(e);const i=this.children.length;return i>i6&&Q.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),Re.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return HS(e,this)}setPointerCapture(e){BS(e,this)}releaseCapture(e){Dh(e)}getLayers(){return this.children}_bindContentEvents(){Re.isBrowser&&a6.forEach(([e,t])=>{this.content.addEventListener(e,i=>{this[t](i)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=dd(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=dd(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=dd(e.type),i=wh(e.type);if(!t)return;this.setPointersPositions(e);const s=this._getTargetShape(i),l=!(Re.isDragging()||Re.isTransforming())||Re.hitOnDragEnabled;s&&l?(s._fireAndBubble(t.pointerout,{evt:e}),s._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[i+"targetShape"]=null):l&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=dd(e.type),i=wh(e.type);if(!t)return;this.setPointersPositions(e);let s=!1;this._changedPointerPositions.forEach(l=>{const c=this.getIntersection(l);if(Ot.justDragged=!1,Re["_"+i+"ListenClick"]=!0,!c||!c.isListening()){this[i+"ClickStartShape"]=void 0;return}Re.capturePointerEventsEnabled&&c.setPointerCapture(l.id),this[i+"ClickStartShape"]=c,c._fireAndBubble(t.pointerdown,{evt:e,pointerId:l.id}),s=!0;const f=e.type.indexOf("touch")>=0;c.preventDefault()&&e.cancelable&&f&&e.preventDefault()}),s||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=dd(e.type),i=wh(e.type);if(!t)return;const s=e.type.indexOf("touch")>=0||e.pointerType==="touch";if(Re.isDragging()&&Ot.node.preventDefault()&&e.cancelable&&s&&e.preventDefault(),this.setPointersPositions(e),!(!(Re.isDragging()||Re.isTransforming())||Re.hitOnDragEnabled))return;const c={};let f=!1;const h=this._getTargetShape(i);this._changedPointerPositions.forEach(m=>{const v=Ug(m.id)||this.getIntersection(m),E=m.id,x={evt:e,pointerId:E},R=h!==v;if(R&&h&&(h._fireAndBubble(t.pointerout,{...x},v),h._fireAndBubble(t.pointerleave,{...x},v)),v){if(c[v._id])return;c[v._id]=!0}v&&v.isListening()?(f=!0,R&&(v._fireAndBubble(t.pointerover,{...x},h),v._fireAndBubble(t.pointerenter,{...x},h),this[i+"targetShape"]=v),v._fireAndBubble(t.pointermove,{...x})):h&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:E}),this[i+"targetShape"]=null)}),f||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=dd(e.type),i=wh(e.type);if(!t)return;this.setPointersPositions(e);const s=this[i+"ClickStartShape"],l=this[i+"ClickEndShape"],c={};let f=!1;this._changedPointerPositions.forEach(h=>{const m=Ug(h.id)||this.getIntersection(h);if(m){if(m.releaseCapture(h.id),c[m._id])return;c[m._id]=!0}const v=h.id,E={evt:e,pointerId:v};let x=!1;Re["_"+i+"InDblClickWindow"]?(x=!0,clearTimeout(this[i+"DblTimeout"])):Ot.justDragged||(Re["_"+i+"InDblClickWindow"]=!0,clearTimeout(this[i+"DblTimeout"])),this[i+"DblTimeout"]=setTimeout(function(){Re["_"+i+"InDblClickWindow"]=!1},Re.dblClickWindow),m&&m.isListening()?(f=!0,this[i+"ClickEndShape"]=m,m._fireAndBubble(t.pointerup,{...E}),Re["_"+i+"ListenClick"]&&s&&s===m&&(m._fireAndBubble(t.pointerclick,{...E}),x&&l&&l===m&&m._fireAndBubble(t.pointerdblclick,{...E}))):(this[i+"ClickEndShape"]=null,f||(this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),f=!0),Re["_"+i+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:v}),x&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:v}))}),f||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Re["_"+i+"ListenClick"]=!1,e.cancelable&&i!=="touch"&&i!=="pointer"&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(fy,{evt:e}):this._fire(fy,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(hy,{evt:e}):this._fire(hy,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=Ug(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(bd,Qy(e)),Dh(e.pointerId)}_lostpointercapture(e){Dh(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let i=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-t.left)/t.scaleX,y:(l.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-t.left)/t.scaleX,y:(l.clientY-t.top)/t.scaleY})})):(i=(e.clientX-t.left)/t.scaleX,s=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:i,y:s},this._pointerPositions=[{x:i,y:s,id:Q._getFirstPointerId(e)}],this._changedPointerPositions=[{x:i,y:s,id:Q._getFirstPointerId(e)}])}_setPointerPosition(e){Q.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Cr({width:this.width(),height:this.height()}),this.bufferHitCanvas=new Jy({pixelRatio:1,width:this.width(),height:this.height()}),!Re.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return Q.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}};Rm.prototype.nodeType=$C;En(Rm);H.addGetterSetter(Rm,"container");Re.isBrowser&&document.addEventListener("visibilitychange",()=>{zh.forEach(n=>{n.batchDraw()})});const ZS="hasShadow",WS="shadowRGBA",$S="patternImage",eb="linearGradient",tb="radialGradient";let Kp;function Og(){return Kp||(Kp=Q.createCanvasElement().getContext("2d"),Kp)}const Uh={};function o6(n){const e=this.attrs.fillRule;e?n.fill(e):n.fill()}function l6(n){n.stroke()}function r6(n){const e=this.attrs.fillRule;e?n.fill(e):n.fill()}function u6(n){n.stroke()}function c6(){this._clearCache(ZS)}function d6(){this._clearCache(WS)}function f6(){this._clearCache($S)}function h6(){this._clearCache(eb)}function p6(){this._clearCache(tb)}class Se extends Te{constructor(e){super(e);let t,i=0;for(;t=Q.getHitColor(),!(t&&!(t in Uh));)if(i++,i>=1e4){Q.warn("Failed to find a unique color key for a shape. Konva may work incorrectly. Most likely your browser is using canvas farbling. Consider disabling it."),t=Q.getRandomColor();break}this.colorKey=t,Uh[t]=this}getContext(){return Q.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Q.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(ZS,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache($S,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=Og().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const i=new Ga;i.translate(this.fillPatternX(),this.fillPatternY()),i.rotate(Re.getAngle(this.fillPatternRotation())),i.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),i.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=i.getMatrix(),l=typeof DOMMatrix>"u"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);t.setTransform(l)}return t}}_getLinearGradient(){return this._getCache(eb,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=Og(),i=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),l=t.createLinearGradient(i.x,i.y,s.x,s.y);for(let c=0;c<e.length;c+=2)l.addColorStop(e[c],e[c+1]);return l}}_getRadialGradient(){return this._getCache(tb,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=Og(),i=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),l=t.createRadialGradient(i.x,i.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius());for(let c=0;c<e.length;c+=2)l.addColorStop(e[c],e[c+1]);return l}}getShadowRGBA(){return this._getCache(WS,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=Q.colorToRGBA(this.shadowColor());if(e)return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const i=t.bufferHitCanvas;return i.getContext().clear(),this.drawHit(i,void 0,!0),i.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return Te.prototype.destroy.call(this),delete Uh[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(!((t=this.attrs.perfectDrawEnabled)!==null&&t!==void 0?t:!0))return!1;const s=e||this.hasFill(),l=this.hasStroke(),c=this.getAbsoluteOpacity()!==1;if(s&&l&&c)return!0;const f=this.hasShadow(),h=this.shadowForStrokeEnabled();return!!(s&&l&&f&&h)}setStrokeHitEnabled(e){Q.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,i=this.getParent();for(;i;){if(i.isCached()){t=!0;break}i=i.getParent()}const s=e.skipTransform,l=e.relativeTo||t&&this.getStage()||void 0,c=this.getSelfRect(),h=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,m=c.width+h,v=c.height+h,E=!e.skipShadow&&this.hasShadow(),x=E?this.shadowOffsetX():0,R=E?this.shadowOffsetY():0,N=m+Math.abs(x),z=v+Math.abs(R),D=E&&this.shadowBlur()||0,I=N+D*2,L=z+D*2,U={width:I,height:L,x:-(h/2+D)+Math.min(x,0)+c.x,y:-(h/2+D)+Math.min(R,0)+c.y};return s?U:this._transformedRect(U,l)}drawScene(e,t,i){const s=this.getLayer(),l=e||s.getCanvas(),c=l.getContext(),f=this._getCanvasCache(),h=this.getSceneFunc(),m=this.hasShadow();let v;const E=t===this;if(!this.isVisible()&&!E)return this;if(f){c.save();const x=this.getAbsoluteTransform(t).getMatrix();return c.transform(x[0],x[1],x[2],x[3],x[4],x[5]),this._drawCachedSceneCanvas(c),c.restore(),this}if(!h)return this;if(c.save(),this._useBufferCanvas()){v=this.getStage();const x=i||v.bufferCanvas,R=x.getContext();i?(R.save(),R.setTransform(1,0,0,1,0,0),R.clearRect(0,0,x.width,x.height),R.restore()):R.clear(),R.save(),R._applyLineJoin(this),R._applyMiterLimit(this);const N=this.getAbsoluteTransform(t).getMatrix();R.transform(N[0],N[1],N[2],N[3],N[4],N[5]),h.call(this,R,this),R.restore();const z=x.pixelRatio;m&&c._applyShadow(this),E||(c._applyOpacity(this),c._applyGlobalCompositeOperation(this)),c.drawImage(x._canvas,x.x||0,x.y||0,x.width/z,x.height/z)}else{if(c._applyLineJoin(this),c._applyMiterLimit(this),!E){const x=this.getAbsoluteTransform(t).getMatrix();c.transform(x[0],x[1],x[2],x[3],x[4],x[5]),c._applyOpacity(this),c._applyGlobalCompositeOperation(this)}m&&c._applyShadow(this),h.call(this,c,this)}return c.restore(),this}drawHit(e,t,i=!1){if(!this.shouldDrawHit(t,i))return this;const s=this.getLayer(),l=e||s.hitCanvas,c=l&&l.getContext(),f=this.hitFunc()||this.sceneFunc(),h=this._getCanvasCache(),m=h&&h.hit;if(this.colorKey||Q.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),m){c.save();const E=this.getAbsoluteTransform(t).getMatrix();return c.transform(E[0],E[1],E[2],E[3],E[4],E[5]),this._drawCachedHitCanvas(c),c.restore(),this}if(!f)return this;if(c.save(),c._applyLineJoin(this),c._applyMiterLimit(this),!(this===t)){const E=this.getAbsoluteTransform(t).getMatrix();c.transform(E[0],E[1],E[2],E[3],E[4],E[5])}return f.call(this,c,this),c.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),i=this._getCachedSceneCanvas(),s=t.hit,l=s.getContext(),c=s.getWidth(),f=s.getHeight();l.clear(),l.drawImage(i._canvas,0,0,c,f);try{const h=l.getImageData(0,0,c,f),m=h.data,v=m.length,E=Q._hexToRgb(this.colorKey);for(let x=0;x<v;x+=4)m[x+3]>e?(m[x]=E.r,m[x+1]=E.g,m[x+2]=E.b,m[x+3]=255):m[x+3]=0;l.putImageData(h,0,0)}catch(h){Q.error("Unable to draw hit graph from cached scene canvas. "+h.message)}return this}hasPointerCapture(e){return HS(e,this)}setPointerCapture(e){BS(e,this)}releaseCapture(e){Dh(e)}}Se.prototype._fillFunc=o6;Se.prototype._strokeFunc=l6;Se.prototype._fillFuncHit=r6;Se.prototype._strokeFuncHit=u6;Se.prototype._centroid=!1;Se.prototype.nodeType="Shape";En(Se);Se.prototype.eventListeners={};Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",c6);Se.prototype.on.call(Se.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",d6);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",f6);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",h6);Se.prototype.on.call(Se.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",p6);H.addGetterSetter(Se,"stroke",void 0,LS());H.addGetterSetter(Se,"strokeWidth",2,Ce());H.addGetterSetter(Se,"fillAfterStrokeEnabled",!1);H.addGetterSetter(Se,"hitStrokeWidth","auto",Xy());H.addGetterSetter(Se,"strokeHitEnabled",!0,Xs());H.addGetterSetter(Se,"perfectDrawEnabled",!0,Xs());H.addGetterSetter(Se,"shadowForStrokeEnabled",!0,Xs());H.addGetterSetter(Se,"lineJoin");H.addGetterSetter(Se,"lineCap");H.addGetterSetter(Se,"miterLimit");H.addGetterSetter(Se,"sceneFunc");H.addGetterSetter(Se,"hitFunc");H.addGetterSetter(Se,"dash");H.addGetterSetter(Se,"dashOffset",0,Ce());H.addGetterSetter(Se,"shadowColor",void 0,Lu());H.addGetterSetter(Se,"shadowBlur",0,Ce());H.addGetterSetter(Se,"shadowOpacity",1,Ce());H.addComponentsGetterSetter(Se,"shadowOffset",["x","y"]);H.addGetterSetter(Se,"shadowOffsetX",0,Ce());H.addGetterSetter(Se,"shadowOffsetY",0,Ce());H.addGetterSetter(Se,"fillPatternImage");H.addGetterSetter(Se,"fill",void 0,LS());H.addGetterSetter(Se,"fillPatternX",0,Ce());H.addGetterSetter(Se,"fillPatternY",0,Ce());H.addGetterSetter(Se,"fillLinearGradientColorStops");H.addGetterSetter(Se,"strokeLinearGradientColorStops");H.addGetterSetter(Se,"fillRadialGradientStartRadius",0);H.addGetterSetter(Se,"fillRadialGradientEndRadius",0);H.addGetterSetter(Se,"fillRadialGradientColorStops");H.addGetterSetter(Se,"fillPatternRepeat","repeat");H.addGetterSetter(Se,"fillEnabled",!0);H.addGetterSetter(Se,"strokeEnabled",!0);H.addGetterSetter(Se,"shadowEnabled",!0);H.addGetterSetter(Se,"dashEnabled",!0);H.addGetterSetter(Se,"strokeScaleEnabled",!0);H.addGetterSetter(Se,"fillPriority","color");H.addComponentsGetterSetter(Se,"fillPatternOffset",["x","y"]);H.addGetterSetter(Se,"fillPatternOffsetX",0,Ce());H.addGetterSetter(Se,"fillPatternOffsetY",0,Ce());H.addComponentsGetterSetter(Se,"fillPatternScale",["x","y"]);H.addGetterSetter(Se,"fillPatternScaleX",1,Ce());H.addGetterSetter(Se,"fillPatternScaleY",1,Ce());H.addComponentsGetterSetter(Se,"fillLinearGradientStartPoint",["x","y"]);H.addComponentsGetterSetter(Se,"strokeLinearGradientStartPoint",["x","y"]);H.addGetterSetter(Se,"fillLinearGradientStartPointX",0);H.addGetterSetter(Se,"strokeLinearGradientStartPointX",0);H.addGetterSetter(Se,"fillLinearGradientStartPointY",0);H.addGetterSetter(Se,"strokeLinearGradientStartPointY",0);H.addComponentsGetterSetter(Se,"fillLinearGradientEndPoint",["x","y"]);H.addComponentsGetterSetter(Se,"strokeLinearGradientEndPoint",["x","y"]);H.addGetterSetter(Se,"fillLinearGradientEndPointX",0);H.addGetterSetter(Se,"strokeLinearGradientEndPointX",0);H.addGetterSetter(Se,"fillLinearGradientEndPointY",0);H.addGetterSetter(Se,"strokeLinearGradientEndPointY",0);H.addComponentsGetterSetter(Se,"fillRadialGradientStartPoint",["x","y"]);H.addGetterSetter(Se,"fillRadialGradientStartPointX",0);H.addGetterSetter(Se,"fillRadialGradientStartPointY",0);H.addComponentsGetterSetter(Se,"fillRadialGradientEndPoint",["x","y"]);H.addGetterSetter(Se,"fillRadialGradientEndPointX",0);H.addGetterSetter(Se,"fillRadialGradientEndPointY",0);H.addGetterSetter(Se,"fillPatternRotation",0);H.addGetterSetter(Se,"fillRule",void 0,Lu());H.backCompat(Se,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});const m6="beforeDraw",g6="draw",nb=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],y6=nb.length;let Gu=class extends Ha{constructor(e){super(e),this.canvas=new Cr,this.hitCanvas=new Jy({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){Te.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!Te.prototype.moveUp.call(this))return!1;const t=this.getStage();return!t||!t.content?!1:(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(Te.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(Te.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return Te.prototype.remove.call(this),e&&e.parentNode&&Q._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&Q.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e={...e},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),Te.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Q.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Q.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Q.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,i=!1;for(;;){for(let s=0;s<y6;s++){const l=nb[s],c=this._getIntersection({x:e.x+l.x*t,y:e.y+l.y*t}),f=c.shape;if(f)return f;if(i=!!c.antialiased,!c.antialiased)break}if(i)t+=1;else return null}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,i=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,s=i[3];if(s===255){const l=Q.getHitColorKey(i[0],i[1],i[2]),c=Uh[l];return c?{shape:c}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,t,i){const s=this.getLayer(),l=e||s&&s.getCanvas();return this._fire(m6,{node:this}),this.clearBeforeDraw()&&l.getContext().clear(),Ha.prototype.drawScene.call(this,l,t,i),this._fire(g6,{node:this}),this}drawHit(e,t){const i=this.getLayer(),s=e||i&&i.hitCanvas;return i&&i.clearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Ha.prototype.drawHit.call(this,s,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){Q.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return Q.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;!!this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return Q.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}};Gu.prototype.nodeType="Layer";En(Gu);H.addGetterSetter(Gu,"imageSmoothingEnabled",!0);H.addGetterSetter(Gu,"clearBeforeDraw",!0);H.addGetterSetter(Gu,"hitGraphEnabled",!0,Xs());class Zy extends Gu{constructor(e){super(e),this.listening(!1),Q.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Zy.prototype.nodeType="FastLayer";En(Zy);class wd extends Ha{_validateAdd(e){const t=e.getType();t!=="Group"&&t!=="Shape"&&Q.throw("You may only add groups and shapes to groups.")}}wd.prototype.nodeType="Group";En(wd);const kg=(function(){return Ou.performance&&Ou.performance.now?function(){return Ou.performance.now()}:function(){return new Date().getTime()}})();class gs{constructor(e,t){this.id=gs.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:kg(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,i=t.length;for(let s=0;s<i;s++)if(t[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const t=gs.animations,i=t.length;for(let s=0;s<i;s++)if(t[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=kg(),gs._addAnimation(this),this}stop(){return gs._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,i=this.animations,s=i.length;for(let l=0;l<s;l++)if(i[l].id===t){this.animations.splice(l,1);break}}static _runFrames(){const e={},t=this.animations;for(let i=0;i<t.length;i++){const s=t[i],l=s.layers,c=s.func;s._updateFrameObject(kg());const f=l.length;let h;if(c?h=c.call(s,s.frame)!==!1:h=!0,!!h)for(let m=0;m<f;m++){const v=l[m];v._id!==void 0&&(e[v._id]=v)}}for(const i in e)e.hasOwnProperty(i)&&e[i].batchDraw()}static _animationLoop(){const e=gs;e.animations.length?(e._runFrames(),Q.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Q.requestAnimFrame(this._animationLoop))}}gs.animations=[];gs.animIdCounter=0;gs.animRunning=!1;const v6={node:1,duration:1,easing:1,onFinish:1,yoyo:1},_6=1,X1=2,Q1=3,Z1=["fill","stroke","shadowColor"];let S6=0;class b6{constructor(e,t,i,s,l,c,f){this.prop=e,this.propFunc=t,this.begin=s,this._pos=s,this.duration=c,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=l-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=X1,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Q1,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;this.state===X1?this.setTime(e):this.state===Q1&&this.setTime(this.duration-e)}pause(){this.state=_6,this.fire("onPause")}getTimer(){return new Date().getTime()}}class $t{constructor(e){const t=this,i=e.node,s=i._id,l=e.easing||Ih.Linear,c=!!e.yoyo;let f,h;typeof e.duration>"u"?f=.3:e.duration===0?f=.001:f=e.duration,this.node=i,this._id=S6++;const m=i.getLayer()||(i instanceof Re.Stage?i.getLayers():null);m||Q.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new gs(function(){t.tween.onEnterFrame()},m),this.tween=new b6(h,function(v){t._tweenFunc(v)},l,0,1,f*1e3,c),this._addListeners(),$t.attrs[s]||($t.attrs[s]={}),$t.attrs[s][this._id]||($t.attrs[s][this._id]={}),$t.tweens[s]||($t.tweens[s]={});for(h in e)v6[h]===void 0&&this._addAttr(h,e[h]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const i=this.node,s=i._id;let l,c,f,h,m;const v=$t.tweens[s][e];v&&delete $t.attrs[s][v][e];let E=i.getAttr(e);if(Q._isArray(t))if(l=[],c=Math.max(t.length,E.length),e==="points"&&t.length!==E.length&&(t.length>E.length?(h=E,E=Q._prepareArrayForTween(E,t,i.closed())):(f=t,t=Q._prepareArrayForTween(t,E,i.closed()))),e.indexOf("fill")===0)for(let x=0;x<c;x++)if(x%2===0)l.push(t[x]-E[x]);else{const R=Q.colorToRGBA(E[x]);m=Q.colorToRGBA(t[x]),E[x]=R,l.push({r:m.r-R.r,g:m.g-R.g,b:m.b-R.b,a:m.a-R.a})}else for(let x=0;x<c;x++)l.push(t[x]-E[x]);else Z1.indexOf(e)!==-1?(E=Q.colorToRGBA(E),m=Q.colorToRGBA(t),l={r:m.r-E.r,g:m.g-E.g,b:m.b-E.b,a:m.a-E.a}):l=t-E;$t.attrs[s][this._id][e]={start:E,diff:l,end:t,trueEnd:f,trueStart:h},$t.tweens[s][e]=this._id}_tweenFunc(e){const t=this.node,i=$t.attrs[t._id][this._id];let s,l,c,f,h,m,v,E;for(s in i){if(l=i[s],c=l.start,f=l.diff,E=l.end,Q._isArray(c))if(h=[],v=Math.max(c.length,E.length),s.indexOf("fill")===0)for(m=0;m<v;m++)m%2===0?h.push((c[m]||0)+f[m]*e):h.push("rgba("+Math.round(c[m].r+f[m].r*e)+","+Math.round(c[m].g+f[m].g*e)+","+Math.round(c[m].b+f[m].b*e)+","+(c[m].a+f[m].a*e)+")");else for(m=0;m<v;m++)h.push((c[m]||0)+f[m]*e);else Z1.indexOf(s)!==-1?h="rgba("+Math.round(c.r+f.r*e)+","+Math.round(c.g+f.g*e)+","+Math.round(c.b+f.b*e)+","+(c.a+f.a*e)+")":h=c+f*e;t.setAttr(s,h)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=$t.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=$t.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,i=$t.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const s in i)delete $t.tweens[e][s];delete $t.attrs[e][t],$t.tweens[e]&&(Object.keys($t.tweens[e]).length===0&&delete $t.tweens[e],Object.keys($t.attrs[e]).length===0&&delete $t.attrs[e])}}$t.attrs={};$t.tweens={};Te.prototype.to=function(n){const e=n.onFinish;n.node=this,n.onFinish=function(){this.destroy(),e&&e()},new $t(n).play()};const Ih={BackEaseIn(n,e,t,i){return t*(n/=i)*n*((1.70158+1)*n-1.70158)+e},BackEaseOut(n,e,t,i){return t*((n=n/i-1)*n*((1.70158+1)*n+1.70158)+1)+e},BackEaseInOut(n,e,t,i){let s=1.70158;return(n/=i/2)<1?t/2*(n*n*(((s*=1.525)+1)*n-s))+e:t/2*((n-=2)*n*(((s*=1.525)+1)*n+s)+2)+e},ElasticEaseIn(n,e,t,i,s,l){let c=0;return n===0?e:(n/=i)===1?e+t:(l||(l=i*.3),!s||s<Math.abs(t)?(s=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/s),-(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+e)},ElasticEaseOut(n,e,t,i,s,l){let c=0;return n===0?e:(n/=i)===1?e+t:(l||(l=i*.3),!s||s<Math.abs(t)?(s=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/s),s*Math.pow(2,-10*n)*Math.sin((n*i-c)*(2*Math.PI)/l)+t+e)},ElasticEaseInOut(n,e,t,i,s,l){let c=0;return n===0?e:(n/=i/2)===2?e+t:(l||(l=i*(.3*1.5)),!s||s<Math.abs(t)?(s=t,c=l/4):c=l/(2*Math.PI)*Math.asin(t/s),n<1?-.5*(s*Math.pow(2,10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l))+e:s*Math.pow(2,-10*(n-=1))*Math.sin((n*i-c)*(2*Math.PI)/l)*.5+t+e)},BounceEaseOut(n,e,t,i){return(n/=i)<1/2.75?t*(7.5625*n*n)+e:n<2/2.75?t*(7.5625*(n-=1.5/2.75)*n+.75)+e:n<2.5/2.75?t*(7.5625*(n-=2.25/2.75)*n+.9375)+e:t*(7.5625*(n-=2.625/2.75)*n+.984375)+e},BounceEaseIn(n,e,t,i){return t-Ih.BounceEaseOut(i-n,0,t,i)+e},BounceEaseInOut(n,e,t,i){return n<i/2?Ih.BounceEaseIn(n*2,0,t,i)*.5+e:Ih.BounceEaseOut(n*2-i,0,t,i)*.5+t*.5+e},EaseIn(n,e,t,i){return t*(n/=i)*n+e},EaseOut(n,e,t,i){return-t*(n/=i)*(n-2)+e},EaseInOut(n,e,t,i){return(n/=i/2)<1?t/2*n*n+e:-t/2*(--n*(n-2)-1)+e},StrongEaseIn(n,e,t,i){return t*(n/=i)*n*n*n*n+e},StrongEaseOut(n,e,t,i){return t*((n=n/i-1)*n*n*n*n+1)+e},StrongEaseInOut(n,e,t,i){return(n/=i/2)<1?t/2*n*n*n*n*n+e:t/2*((n-=2)*n*n*n*n+2)+e},Linear(n,e,t,i){return t*n/i+e}},Rd=Q._assign(Re,{Util:Q,Transform:Ga,Node:Te,Container:Ha,Stage:Rm,stages:zh,Layer:Gu,FastLayer:Zy,Group:wd,DD:Ot,Shape:Se,shapes:Uh,Animation:gs,Tween:$t,Easings:Ih,Context:Am,Canvas:Ky});class El extends Se{_sceneFunc(e){const t=Re.getAngle(this.angle()),i=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,t,i),e.arc(0,0,this.innerRadius(),t,0,!i),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),t=this.outerRadius(),i=this.clockwise(),s=Re.getAngle(i?360-this.angle():this.angle()),l=Math.cos(Math.min(s,Math.PI)),c=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),h=Math.sin(Math.min(s,Math.PI/2)),m=l*(l>0?e:t),v=c*t,E=f*(f>0?e:t),x=h*(h>0?t:e);return{x:m,y:i?-1*x:E,width:v-m,height:x-E}}}El.prototype._centroid=!0;El.prototype.className="Arc";El.prototype._attrsAffectingSize=["innerRadius","outerRadius","angle","clockwise"];En(El);H.addGetterSetter(El,"innerRadius",0,Ce());H.addGetterSetter(El,"outerRadius",0,Ce());H.addGetterSetter(El,"angle",0,Ce());H.addGetterSetter(El,"clockwise",!1,Xs());function py(n,e,t,i,s,l,c){const f=Math.sqrt(Math.pow(t-n,2)+Math.pow(i-e,2)),h=Math.sqrt(Math.pow(s-t,2)+Math.pow(l-i,2)),m=c*f/(f+h),v=c*h/(f+h),E=t-m*(s-n),x=i-m*(l-e),R=t+v*(s-n),N=i+v*(l-e);return[E,x,R,N]}function W1(n,e){const t=n.length,i=[];for(let s=2;s<t-2;s+=2){const l=py(n[s-2],n[s-1],n[s],n[s+1],n[s+2],n[s+3],e);isNaN(l[0])||(i.push(l[0]),i.push(l[1]),i.push(n[s]),i.push(n[s+1]),i.push(l[2]),i.push(l[3]))}return i}function x6(n){const e=[[n[0],n[2],n[4],n[6]],[n[1],n[3],n[5],n[7]]],t=[];for(const i of e){const s=-3*i[0]+9*i[1]-9*i[2]+3*i[3];if(s!==0){const l=6*i[0]-12*i[1]+6*i[2],c=-3*i[0]+3*i[1],f=l*l-4*s*c;if(f>=0){const h=Math.sqrt(f);t.push((-l+h)/(2*s)),t.push((-l-h)/(2*s))}}}return t.filter(i=>i>0&&i<1).flatMap(i=>e.map(s=>{const l=1-i;return l*l*l*s[0]+3*l*l*i*s[1]+3*l*i*i*s[2]+i*i*i*s[3]}))}let Tl=class extends Se{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),i=t.length,s=this.tension(),l=this.closed(),c=this.bezier();if(!i)return;let f=0;if(e.beginPath(),e.moveTo(t[0],t[1]),s!==0&&i>4){const h=this.getTensionPoints(),m=h.length;for(f=l?0:4,l||e.quadraticCurveTo(h[0],h[1],h[2],h[3]);f<m-2;)e.bezierCurveTo(h[f++],h[f++],h[f++],h[f++],h[f++],h[f++]);l||e.quadraticCurveTo(h[m-2],h[m-1],t[i-2],t[i-1])}else if(c)for(f=2;f<i;)e.bezierCurveTo(t[f++],t[f++],t[f++],t[f++],t[f++],t[f++]);else for(f=2;f<i;f+=2)e.lineTo(t[f],t[f+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():W1(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,i=this.tension(),s=py(e[t-2],e[t-1],e[0],e[1],e[2],e[3],i),l=py(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],i),c=W1(e,i);return[s[2],s[3]].concat(c).concat([l[0],l[1],e[t-2],e[t-1],l[2],l[3],s[0],s[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.bezier()?e=[e[0],e[1],...x6(this.points()),e[e.length-2],e[e.length-1]]:e=this.points();let t=e[0],i=e[0],s=e[1],l=e[1],c,f;for(let h=0;h<e.length/2;h++)c=e[h*2],f=e[h*2+1],t=Math.min(t,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);return{x:t,y:s,width:i-t,height:l-s}}};Tl.prototype.className="Line";Tl.prototype._attrsAffectingSize=["points","bezier","tension"];En(Tl);H.addGetterSetter(Tl,"closed",!1);H.addGetterSetter(Tl,"bezier",!1);H.addGetterSetter(Tl,"tension",0,Ce());H.addGetterSetter(Tl,"points",[],GC());const E6=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],T6=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],C6=[[1],[1,1],[1,2,1],[1,3,3,1]],$1=(n,e,t)=>{let i,s;const c=t/2;i=0;for(let f=0;f<20;f++)s=c*E6[20][f]+c,i+=T6[20][f]*A6(n,e,s);return c*i},e2=(n,e,t)=>{t===void 0&&(t=1);const i=n[0]-2*n[1]+n[2],s=e[0]-2*e[1]+e[2],l=2*n[1]-2*n[0],c=2*e[1]-2*e[0],f=4*(i*i+s*s),h=4*(i*l+s*c),m=l*l+c*c;if(f===0)return t*Math.sqrt(Math.pow(n[2]-n[0],2)+Math.pow(e[2]-e[0],2));const v=h/(2*f),E=m/f,x=t+v,R=E-v*v,N=x*x+R>0?Math.sqrt(x*x+R):0,z=v*v+R>0?Math.sqrt(v*v+R):0,D=v+Math.sqrt(v*v+R)!==0?R*Math.log(Math.abs((x+N)/(v+z))):0;return Math.sqrt(f)/2*(x*N-v*z+D)};function A6(n,e,t){const i=my(1,t,n),s=my(1,t,e),l=i*i+s*s;return Math.sqrt(l)}const my=(n,e,t)=>{const i=t.length-1;let s,l;if(i===0)return 0;if(n===0){l=0;for(let c=0;c<=i;c++)l+=C6[i][c]*Math.pow(1-e,i-c)*Math.pow(e,c)*t[c];return l}else{s=new Array(i);for(let c=0;c<i;c++)s[c]=i*(t[c+1]-t[c]);return my(n-1,e,s)}},t2=(n,e,t)=>{let i=1,s=n/e,l=(n-t(s))/e,c=0;for(;i>.001;){const f=t(s+l),h=Math.abs(n-f)/e;if(h<i)i=h,s+=l;else{const m=t(s-l),v=Math.abs(n-m)/e;v<i?(i=v,s-=l):l/=2}if(c++,c>500)break}return s};class en extends Se{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute()})}_readDataAttribute(){this.dataArray=en.parsePathData(this.data()),this.pathLength=en.getPathLength(this.dataArray)}_sceneFunc(e){const t=this.dataArray;e.beginPath();let i=!1;for(let s=0;s<t.length;s++){const l=t[s].command,c=t[s].points;switch(l){case"L":e.lineTo(c[0],c[1]);break;case"M":e.moveTo(c[0],c[1]);break;case"C":e.bezierCurveTo(c[0],c[1],c[2],c[3],c[4],c[5]);break;case"Q":e.quadraticCurveTo(c[0],c[1],c[2],c[3]);break;case"A":const f=c[0],h=c[1],m=c[2],v=c[3],E=c[4],x=c[5],R=c[6],N=c[7],z=m>v?m:v,D=m>v?1:m/v,I=m>v?v/m:1;e.translate(f,h),e.rotate(R),e.scale(D,I),e.arc(0,0,z,E,E+x,1-N),e.scale(1/D,1/I),e.rotate(-R),e.translate(-f,-h);break;case"z":i=!0,e.closePath();break}}!i&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){let e=[];this.dataArray.forEach(function(h){if(h.command==="A"){const m=h.points[4],v=h.points[5],E=h.points[4]+v;let x=Math.PI/180;if(Math.abs(m-E)<x&&(x=Math.abs(m-E)),v<0)for(let R=m-x;R>E;R-=x){const N=en.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],R,0);e.push(N.x,N.y)}else for(let R=m+x;R<E;R+=x){const N=en.getPointOnEllipticalArc(h.points[0],h.points[1],h.points[2],h.points[3],R,0);e.push(N.x,N.y)}}else if(h.command==="C")for(let m=0;m<=1;m+=.01){const v=en.getPointOnCubicBezier(m,h.start.x,h.start.y,h.points[0],h.points[1],h.points[2],h.points[3],h.points[4],h.points[5]);e.push(v.x,v.y)}else e=e.concat(h.points)});let t=e[0],i=e[0],s=e[1],l=e[1],c,f;for(let h=0;h<e.length/2;h++)c=e[h*2],f=e[h*2+1],isNaN(c)||(t=Math.min(t,c),i=Math.max(i,c)),isNaN(f)||(s=Math.min(s,f),l=Math.max(l,f));return{x:t,y:s,width:i-t,height:l-s}}getLength(){return this.pathLength}getPointAtLength(e){return en.getPointAtLengthOfDataArray(e,this.dataArray)}static getLineLength(e,t,i,s){return Math.sqrt((i-e)*(i-e)+(s-t)*(s-t))}static getPathLength(e){let t=0;for(let i=0;i<e.length;++i)t+=e[i].pathLength;return t}static getPointAtLengthOfDataArray(e,t){let i,s=0,l=t.length;if(!l)return null;for(;s<l&&e>t[s].pathLength;)e-=t[s].pathLength,++s;if(s===l)return i=t[s-1].points.slice(-2),{x:i[0],y:i[1]};if(e<.01)return t[s].command==="M"?(i=t[s].points.slice(0,2),{x:i[0],y:i[1]}):{x:t[s].start.x,y:t[s].start.y};const c=t[s],f=c.points;switch(c.command){case"L":return en.getPointOnLine(e,c.start.x,c.start.y,f[0],f[1]);case"C":return en.getPointOnCubicBezier(t2(e,en.getPathLength(t),z=>$1([c.start.x,f[0],f[2],f[4]],[c.start.y,f[1],f[3],f[5]],z)),c.start.x,c.start.y,f[0],f[1],f[2],f[3],f[4],f[5]);case"Q":return en.getPointOnQuadraticBezier(t2(e,en.getPathLength(t),z=>e2([c.start.x,f[0],f[2]],[c.start.y,f[1],f[3]],z)),c.start.x,c.start.y,f[0],f[1],f[2],f[3]);case"A":const h=f[0],m=f[1],v=f[2],E=f[3],x=f[5],R=f[6];let N=f[4];return N+=x*e/c.pathLength,en.getPointOnEllipticalArc(h,m,v,E,N,R)}return null}static getPointOnLine(e,t,i,s,l,c,f){c=c??t,f=f??i;const h=this.getLineLength(t,i,s,l);if(h<1e-10)return{x:t,y:i};if(s===t)return{x:c,y:f+(l>i?e:-e)};const m=(l-i)/(s-t),v=Math.sqrt(e*e/(1+m*m))*(s<t?-1:1),E=m*v;if(Math.abs(f-i-m*(c-t))<1e-10)return{x:c+v,y:f+E};const x=((c-t)*(s-t)+(f-i)*(l-i))/(h*h),R=t+x*(s-t),N=i+x*(l-i),z=this.getLineLength(c,f,R,N),D=Math.sqrt(e*e-z*z),I=Math.sqrt(D*D/(1+m*m))*(s<t?-1:1),L=m*I;return{x:R+I,y:N+L}}static getPointOnCubicBezier(e,t,i,s,l,c,f,h,m){function v(D){return D*D*D}function E(D){return 3*D*D*(1-D)}function x(D){return 3*D*(1-D)*(1-D)}function R(D){return(1-D)*(1-D)*(1-D)}const N=h*v(e)+c*E(e)+s*x(e)+t*R(e),z=m*v(e)+f*E(e)+l*x(e)+i*R(e);return{x:N,y:z}}static getPointOnQuadraticBezier(e,t,i,s,l,c,f){function h(R){return R*R}function m(R){return 2*R*(1-R)}function v(R){return(1-R)*(1-R)}const E=c*h(e)+s*m(e)+t*v(e),x=f*h(e)+l*m(e)+i*v(e);return{x:E,y:x}}static getPointOnEllipticalArc(e,t,i,s,l,c){const f=Math.cos(c),h=Math.sin(c),m={x:i*Math.cos(l),y:s*Math.sin(l)};return{x:e+(m.x*f-m.y*h),y:t+(m.x*h+m.y*f)}}static parsePathData(e){if(!e)return[];let t=e;const i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];t=t.replace(new RegExp(" ","g"),",");for(let E=0;E<i.length;E++)t=t.replace(new RegExp(i[E],"g"),"|"+i[E]);const s=t.split("|"),l=[],c=[];let f=0,h=0;const m=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;let v;for(let E=1;E<s.length;E++){let x=s[E],R=x.charAt(0);for(x=x.slice(1),c.length=0;v=m.exec(x);)c.push(v[0]);let N=[],z=R==="A"||R==="a"?0:-1;for(let D=0,I=c.length;D<I;D++){const L=c[D];if(L==="00"){N.push(0,0),z>=0&&(z+=2,z>=7&&(z-=7));continue}if(z>=0){if(z===3){if(/^[01]{2}\d+(?:\.\d+)?$/.test(L)){N.push(parseInt(L[0],10)),N.push(parseInt(L[1],10)),N.push(parseFloat(L.slice(2))),z+=3,z>=7&&(z-=7);continue}if(L==="11"||L==="10"||L==="01"){N.push(parseInt(L[0],10)),N.push(parseInt(L[1],10)),z+=2,z>=7&&(z-=7);continue}if(L==="0"||L==="1"){N.push(parseInt(L,10)),z+=1,z>=7&&(z-=7);continue}}else if(z===4){if(/^[01]\d+(?:\.\d+)?$/.test(L)){N.push(parseInt(L[0],10)),N.push(parseFloat(L.slice(1))),z+=2,z>=7&&(z-=7);continue}if(L==="0"||L==="1"){N.push(parseInt(L,10)),z+=1,z>=7&&(z-=7);continue}}const U=parseFloat(L);isNaN(U)?N.push(0):N.push(U),z+=1,z>=7&&(z-=7)}else{const U=parseFloat(L);isNaN(U)?N.push(0):N.push(U)}}for(;N.length>0&&!isNaN(N[0]);){let D="",I=[];const L=f,U=h;let G,P,K,$,J,B,ue,xe,ae,Me;switch(R){case"l":f+=N.shift(),h+=N.shift(),D="L",I.push(f,h);break;case"L":f=N.shift(),h=N.shift(),I.push(f,h);break;case"m":const De=N.shift(),we=N.shift();if(f+=De,h+=we,D="M",l.length>2&&l[l.length-1].command==="z"){for(let Y=l.length-2;Y>=0;Y--)if(l[Y].command==="M"){f=l[Y].points[0]+De,h=l[Y].points[1]+we;break}}I.push(f,h),R="l";break;case"M":f=N.shift(),h=N.shift(),D="M",I.push(f,h),R="L";break;case"h":f+=N.shift(),D="L",I.push(f,h);break;case"H":f=N.shift(),D="L",I.push(f,h);break;case"v":h+=N.shift(),D="L",I.push(f,h);break;case"V":h=N.shift(),D="L",I.push(f,h);break;case"C":I.push(N.shift(),N.shift(),N.shift(),N.shift()),f=N.shift(),h=N.shift(),I.push(f,h);break;case"c":I.push(f+N.shift(),h+N.shift(),f+N.shift(),h+N.shift()),f+=N.shift(),h+=N.shift(),D="C",I.push(f,h);break;case"S":P=f,K=h,G=l[l.length-1],G.command==="C"&&(P=f+(f-G.points[2]),K=h+(h-G.points[3])),I.push(P,K,N.shift(),N.shift()),f=N.shift(),h=N.shift(),D="C",I.push(f,h);break;case"s":P=f,K=h,G=l[l.length-1],G.command==="C"&&(P=f+(f-G.points[2]),K=h+(h-G.points[3])),I.push(P,K,f+N.shift(),h+N.shift()),f+=N.shift(),h+=N.shift(),D="C",I.push(f,h);break;case"Q":I.push(N.shift(),N.shift()),f=N.shift(),h=N.shift(),I.push(f,h);break;case"q":I.push(f+N.shift(),h+N.shift()),f+=N.shift(),h+=N.shift(),D="Q",I.push(f,h);break;case"T":P=f,K=h,G=l[l.length-1],G.command==="Q"&&(P=f+(f-G.points[0]),K=h+(h-G.points[1])),f=N.shift(),h=N.shift(),D="Q",I.push(P,K,f,h);break;case"t":P=f,K=h,G=l[l.length-1],G.command==="Q"&&(P=f+(f-G.points[0]),K=h+(h-G.points[1])),f+=N.shift(),h+=N.shift(),D="Q",I.push(P,K,f,h);break;case"A":$=N.shift(),J=N.shift(),B=N.shift(),ue=N.shift(),xe=N.shift(),ae=f,Me=h,f=N.shift(),h=N.shift(),D="A",I=this.convertEndpointToCenterParameterization(ae,Me,f,h,ue,xe,$,J,B);break;case"a":$=N.shift(),J=N.shift(),B=N.shift(),ue=N.shift(),xe=N.shift(),ae=f,Me=h,f+=N.shift(),h+=N.shift(),D="A",I=this.convertEndpointToCenterParameterization(ae,Me,f,h,ue,xe,$,J,B);break}l.push({command:D||R,points:I,start:{x:L,y:U},pathLength:this.calcLength(L,U,D||R,I)})}(R==="z"||R==="Z")&&l.push({command:"z",points:[],start:void 0,pathLength:0})}return l}static calcLength(e,t,i,s){let l,c,f,h;const m=en;switch(i){case"L":return m.getLineLength(e,t,s[0],s[1]);case"C":return $1([e,s[0],s[2],s[4]],[t,s[1],s[3],s[5]],1);case"Q":return e2([e,s[0],s[2]],[t,s[1],s[3]],1);case"A":l=0;const v=s[4],E=s[5],x=s[4]+E;let R=Math.PI/180;if(Math.abs(v-x)<R&&(R=Math.abs(v-x)),c=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],v,0),E<0)for(h=v-R;h>x;h-=R)f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),l+=m.getLineLength(c.x,c.y,f.x,f.y),c=f;else for(h=v+R;h<x;h+=R)f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],h,0),l+=m.getLineLength(c.x,c.y,f.x,f.y),c=f;return f=m.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],x,0),l+=m.getLineLength(c.x,c.y,f.x,f.y),l}return 0}static convertEndpointToCenterParameterization(e,t,i,s,l,c,f,h,m){const v=m*(Math.PI/180),E=Math.cos(v)*(e-i)/2+Math.sin(v)*(t-s)/2,x=-1*Math.sin(v)*(e-i)/2+Math.cos(v)*(t-s)/2,R=E*E/(f*f)+x*x/(h*h);R>1&&(f*=Math.sqrt(R),h*=Math.sqrt(R));let N=Math.sqrt((f*f*(h*h)-f*f*(x*x)-h*h*(E*E))/(f*f*(x*x)+h*h*(E*E)));l===c&&(N*=-1),isNaN(N)&&(N=0);const z=N*f*x/h,D=N*-h*E/f,I=(e+i)/2+Math.cos(v)*z-Math.sin(v)*D,L=(t+s)/2+Math.sin(v)*z+Math.cos(v)*D,U=function(ue){return Math.sqrt(ue[0]*ue[0]+ue[1]*ue[1])},G=function(ue,xe){return(ue[0]*xe[0]+ue[1]*xe[1])/(U(ue)*U(xe))},P=function(ue,xe){return(ue[0]*xe[1]<ue[1]*xe[0]?-1:1)*Math.acos(G(ue,xe))},K=P([1,0],[(E-z)/f,(x-D)/h]),$=[(E-z)/f,(x-D)/h],J=[(-1*E-z)/f,(-1*x-D)/h];let B=P($,J);return G($,J)<=-1&&(B=Math.PI),G($,J)>=1&&(B=0),c===0&&B>0&&(B=B-2*Math.PI),c===1&&B<0&&(B=B+2*Math.PI),[I,L,f,h,K,B,v,c]}}en.prototype.className="Path";en.prototype._attrsAffectingSize=["data"];En(en);H.addGetterSetter(en,"data");class Hu extends Tl{_sceneFunc(e){super._sceneFunc(e);const t=Math.PI*2,i=this.points();let s=i;const l=this.tension()!==0&&i.length>4;l&&(s=this.getTensionPoints());const c=this.pointerLength(),f=i.length;let h,m;if(l){const x=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],i[f-2],i[f-1]],R=en.calcLength(s[s.length-4],s[s.length-3],"C",x),N=en.getPointOnQuadraticBezier(Math.min(1,1-c/R),x[0],x[1],x[2],x[3],x[4],x[5]);h=i[f-2]-N.x,m=i[f-1]-N.y}else h=i[f-2]-i[f-4],m=i[f-1]-i[f-3];const v=(Math.atan2(m,h)+t)%t,E=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(i[f-2],i[f-1]),e.rotate(v),e.moveTo(0,0),e.lineTo(-c,E/2),e.lineTo(-c,-E/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(i[0],i[1]),l?(h=(s[0]+s[2])/2-i[0],m=(s[1]+s[3])/2-i[1]):(h=i[2]-i[0],m=i[3]-i[1]),e.rotate((Math.atan2(-m,-h)+t)%t),e.moveTo(0,0),e.lineTo(-c,E/2),e.lineTo(-c,-E/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){const t=this.dashEnabled();t&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),t&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),t=this.pointerWidth()/2;return{x:e.x,y:e.y-t,width:e.width,height:e.height+t*2}}}Hu.prototype.className="Arrow";En(Hu);H.addGetterSetter(Hu,"pointerLength",10,Ce());H.addGetterSetter(Hu,"pointerWidth",10,Ce());H.addGetterSetter(Hu,"pointerAtBeginning",!1);H.addGetterSetter(Hu,"pointerAtEnding",!0);let Md=class extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}};Md.prototype._centroid=!0;Md.prototype.className="Circle";Md.prototype._attrsAffectingSize=["radius"];En(Md);H.addGetterSetter(Md,"radius",0,Ce());class Nr extends Se{_sceneFunc(e){const t=this.radiusX(),i=this.radiusY();e.beginPath(),e.save(),t!==i&&e.scale(1,i/t),e.arc(0,0,t,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}Nr.prototype.className="Ellipse";Nr.prototype._centroid=!0;Nr.prototype._attrsAffectingSize=["radiusX","radiusY"];En(Nr);H.addComponentsGetterSetter(Nr,"radius",["x","y"]);H.addGetterSetter(Nr,"radiusX",0,Ce());H.addGetterSetter(Nr,"radiusY",0,Ce());let Qs=class ib extends Se{constructor(e){super(e),this._loadListener=()=>{this._requestDraw()},this.on("imageChange.konva",t=>{this._removeImageLoad(t.oldVal),this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",this._loadListener)}_removeImageLoad(e){e&&e.removeEventListener&&e.removeEventListener("load",this._loadListener)}destroy(){return this._removeImageLoad(this.image()),super.destroy(),this}_useBufferCanvas(){const e=!!this.cornerRadius(),t=this.hasShadow();return e&&t?!0:super._useBufferCanvas(!0)}_sceneFunc(e){const t=this.getWidth(),i=this.getHeight(),s=this.cornerRadius(),l=this.attrs.image;let c;if(l){const f=this.attrs.cropWidth,h=this.attrs.cropHeight;f&&h?c=[l,this.cropX(),this.cropY(),f,h,0,0,t,i]:c=[l,0,0,t,i]}(this.hasFill()||this.hasStroke()||s)&&(e.beginPath(),s?Q.drawRoundedRectPath(e,t,i,s):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)),l&&(s&&e.clip(),e.drawImage.apply(e,c))}_hitFunc(e){const t=this.width(),i=this.height(),s=this.cornerRadius();e.beginPath(),s?Q.drawRoundedRectPath(e,t,i,s):e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,t,i;return(i=(e=this.attrs.width)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.width)!==null&&i!==void 0?i:0}getHeight(){var e,t,i;return(i=(e=this.attrs.height)!==null&&e!==void 0?e:(t=this.image())===null||t===void 0?void 0:t.height)!==null&&i!==void 0?i:0}static fromURL(e,t,i=null){const s=Q.createImageElement();s.onload=function(){const l=new ib({image:s});t(l)},s.onerror=i,s.crossOrigin="Anonymous",s.src=e}};Qs.prototype.className="Image";Qs.prototype._attrsAffectingSize=["image"];En(Qs);H.addGetterSetter(Qs,"cornerRadius",0,wm(4));H.addGetterSetter(Qs,"image");H.addComponentsGetterSetter(Qs,"crop",["x","y","width","height"]);H.addGetterSetter(Qs,"cropX",0,Ce());H.addGetterSetter(Qs,"cropY",0,Ce());H.addGetterSetter(Qs,"cropWidth",0,Ce());H.addGetterSetter(Qs,"cropHeight",0,Ce());const ab=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height","pointerDirection","pointerWidth","pointerHeight"],w6="Change.konva",R6="none",gy="up",yy="right",vy="down",_y="left",N6=ab.length;class Wy extends wd{constructor(e){super(e),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){let t=this,i;const s=function(){t._sync()};for(i=0;i<N6;i++)e.on(ab[i]+w6,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){let e=this.getText(),t=this.getTag(),i,s,l,c,f,h,m;if(e&&t){switch(i=e.width(),s=e.height(),l=t.pointerDirection(),c=t.pointerWidth(),m=t.pointerHeight(),f=0,h=0,l){case gy:f=i/2,h=-1*m;break;case yy:f=i+c,h=s/2;break;case vy:f=i/2,h=s+m;break;case _y:f=-1*c,h=s/2;break}t.setAttrs({x:-1*f,y:-1*h,width:i,height:s}),e.setAttrs({x:-1*f,y:-1*h})}}}Wy.prototype.className="Label";En(Wy);class Bu extends Se{_sceneFunc(e){const t=this.width(),i=this.height(),s=this.pointerDirection(),l=this.pointerWidth(),c=this.pointerHeight(),f=this.cornerRadius();let h=0,m=0,v=0,E=0;typeof f=="number"?h=m=v=E=Math.min(f,t/2,i/2):(h=Math.min(f[0]||0,t/2,i/2),m=Math.min(f[1]||0,t/2,i/2),E=Math.min(f[2]||0,t/2,i/2),v=Math.min(f[3]||0,t/2,i/2)),e.beginPath(),e.moveTo(h,0),s===gy&&(e.lineTo((t-l)/2,0),e.lineTo(t/2,-1*c),e.lineTo((t+l)/2,0)),e.lineTo(t-m,0),e.arc(t-m,m,m,Math.PI*3/2,0,!1),s===yy&&(e.lineTo(t,(i-c)/2),e.lineTo(t+l,i/2),e.lineTo(t,(i+c)/2)),e.lineTo(t,i-E),e.arc(t-E,i-E,E,0,Math.PI/2,!1),s===vy&&(e.lineTo((t+l)/2,i),e.lineTo(t/2,i+c),e.lineTo((t-l)/2,i)),e.lineTo(v,i),e.arc(v,i-v,v,Math.PI/2,Math.PI,!1),s===_y&&(e.lineTo(0,(i+c)/2),e.lineTo(-1*l,i/2),e.lineTo(0,(i-c)/2)),e.lineTo(0,h),e.arc(h,h,h,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){let e=0,t=0,i=this.pointerWidth(),s=this.pointerHeight(),l=this.pointerDirection(),c=this.width(),f=this.height();return l===gy?(t-=s,f+=s):l===vy?f+=s:l===_y?(e-=i*1.5,c+=i):l===yy&&(c+=i*1.5),{x:e,y:t,width:c,height:f}}}Bu.prototype.className="Tag";En(Bu);H.addGetterSetter(Bu,"pointerDirection",R6);H.addGetterSetter(Bu,"pointerWidth",0,Ce());H.addGetterSetter(Bu,"pointerHeight",0,Ce());H.addGetterSetter(Bu,"cornerRadius",0,wm(4));let Xh=class extends Se{_sceneFunc(e){const t=this.cornerRadius(),i=this.width(),s=this.height();e.beginPath(),t?Q.drawRoundedRectPath(e,i,s,t):e.rect(0,0,i,s),e.closePath(),e.fillStrokeShape(this)}};Xh.prototype.className="Rect";En(Xh);H.addGetterSetter(Xh,"cornerRadius",0,wm(4));class Mr extends Se{_sceneFunc(e){const t=this._getPoints(),i=this.radius(),s=this.sides(),l=this.cornerRadius();if(e.beginPath(),l)Q.drawRoundedPolygonPath(e,t,s,i,l);else{e.moveTo(t[0].x,t[0].y);for(let c=1;c<t.length;c++)e.lineTo(t[c].x,t[c].y)}e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,t=this.attrs.radius||0,i=[];for(let s=0;s<e;s++)i.push({x:t*Math.sin(s*2*Math.PI/e),y:-1*t*Math.cos(s*2*Math.PI/e)});return i}getSelfRect(){const e=this._getPoints();let t=e[0].x,i=e[0].x,s=e[0].y,l=e[0].y;return e.forEach(c=>{t=Math.min(t,c.x),i=Math.max(i,c.x),s=Math.min(s,c.y),l=Math.max(l,c.y)}),{x:t,y:s,width:i-t,height:l-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Mr.prototype.className="RegularPolygon";Mr.prototype._centroid=!0;Mr.prototype._attrsAffectingSize=["radius"];En(Mr);H.addGetterSetter(Mr,"radius",0,Ce());H.addGetterSetter(Mr,"sides",0,Ce());H.addGetterSetter(Mr,"cornerRadius",0,wm(4));const n2=Math.PI*2;class Pu extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,n2,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),n2,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}Pu.prototype.className="Ring";Pu.prototype._centroid=!0;Pu.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(Pu);H.addGetterSetter(Pu,"innerRadius",0,Ce());H.addGetterSetter(Pu,"outerRadius",0,Ce());class Go extends Se{constructor(e){super(e),this._updated=!0,this.anim=new gs(()=>{const t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){const t=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[t],c=this.frameOffsets(),f=l[s+0],h=l[s+1],m=l[s+2],v=l[s+3],E=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,m,v),e.closePath(),e.fillStrokeShape(this)),E)if(c){const x=c[t],R=i*2;e.drawImage(E,f,h,m,v,x[R+0],x[R+1],m,v)}else e.drawImage(E,f,h,m,v,0,0,m,v)}_hitFunc(e){const t=this.animation(),i=this.frameIndex(),s=i*4,l=this.animations()[t],c=this.frameOffsets(),f=l[s+2],h=l[s+3];if(e.beginPath(),c){const m=c[t],v=i*2;e.rect(m[v+0],m[v+1],f,h)}else e.rect(0,0,f,h);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){const e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(this.isRunning())return;const e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){const e=this.frameIndex(),t=this.animation(),i=this.animations(),s=i[t],l=s.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Go.prototype.className="Sprite";En(Go);H.addGetterSetter(Go,"animation");H.addGetterSetter(Go,"animations");H.addGetterSetter(Go,"frameOffsets");H.addGetterSetter(Go,"image");H.addGetterSetter(Go,"frameIndex",0,Ce());H.addGetterSetter(Go,"frameRate",17,Ce());H.backCompat(Go,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});let Dr=class extends Se{_sceneFunc(e){const t=this.innerRadius(),i=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-i);for(let l=1;l<s*2;l++){const c=l%2===0?i:t,f=c*Math.sin(l*Math.PI/s),h=-1*c*Math.cos(l*Math.PI/s);e.lineTo(f,h)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}};Dr.prototype.className="Star";Dr.prototype._centroid=!0;Dr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];En(Dr);H.addGetterSetter(Dr,"numPoints",5,Ce());H.addGetterSetter(Dr,"innerRadius",0,Ce());H.addGetterSetter(Dr,"outerRadius",0,Ce());function xr(n){return[...n].reduce((e,t,i,s)=>{if(new RegExp("\\p{Emoji}","u").test(t)){const l=s[i+1];l&&new RegExp("\\p{Emoji_Modifier}|\\u200D","u").test(l)?(e.push(t+l),s[i+1]=""):e.push(t)}else new RegExp("\\p{Regional_Indicator}{2}","u").test(t+(s[i+1]||""))?e.push(t+s[i+1]):i>0&&new RegExp("\\p{Mn}|\\p{Me}|\\p{Mc}","u").test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const fd="auto",M6="center",sb="inherit",yh="justify",D6="Change.konva",z6="2d",i2="-",ob="left",U6="text",I6="Text",O6="top",k6="bottom",a2="middle",lb="normal",L6="px ",Jp=" ",G6="right",s2="rtl",H6="word",B6="char",o2="none",Lg="",rb=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],P6=rb.length;function q6(n){return n.split(",").map(e=>{e=e.trim();const t=e.indexOf(" ")>=0,i=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!i&&(e=`"${e}"`),e}).join(", ")}let Xp;function Gg(){return Xp||(Xp=Q.createCanvasElement().getContext(z6),Xp)}function V6(n){n.fillText(this._partialText,this._partialTextX,this._partialTextY)}function j6(n){n.setAttr("miterLimit",2),n.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Y6(n){return n=n||{},!n.fillLinearGradientColorStops&&!n.fillRadialGradientColorStops&&!n.fillPatternImage&&(n.fill=n.fill||"black"),n}let tn=class extends Se{constructor(e){super(Y6(e)),this._partialTextX=0,this._partialTextY=0;for(let t=0;t<P6;t++)this.on(rb[t]+D6,this._setTextData);this._setTextData()}_sceneFunc(e){var t,i;const s=this.textArr,l=s.length;if(!this.text())return;let c=this.padding(),f=this.fontSize(),h=this.lineHeight()*f,m=this.verticalAlign(),v=this.direction(),E=0,x=this.align(),R=this.getWidth(),N=this.letterSpacing(),z=this.charRenderFunc(),D=this.fill(),I=this.textDecoration(),L=this.underlineOffset(),U=I.indexOf("underline")!==-1,G=I.indexOf("line-through")!==-1,P;v=v===sb?e.direction:v;let K=h/2,$=a2;if(!Re.legacyTextRendering){const J=this.measureSize("M");$="alphabetic";const B=(t=J.fontBoundingBoxAscent)!==null&&t!==void 0?t:J.actualBoundingBoxAscent,ue=(i=J.fontBoundingBoxDescent)!==null&&i!==void 0?i:J.actualBoundingBoxDescent;K=(B-ue)/2+h/2}for(v===s2&&e.setAttr("direction",v),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",$),e.setAttr("textAlign",ob),m===a2?E=(this.getHeight()-l*h-c*2)/2:m===k6&&(E=this.getHeight()-l*h-c*2),e.translate(c,E+c),P=0;P<l;P++){let J=0,B=0;const ue=s[P],xe=ue.text,ae=ue.width,Me=ue.lastInParagraph;if(e.save(),x===G6?J+=R-ae-c*2:x===M6&&(J+=(R-ae-c*2)/2),U){e.save(),e.beginPath();const we=L??(Re.legacyTextRendering?Math.round(f/2):Math.round(f/4)),Y=J,he=K+B+we;e.moveTo(Y,he);const fe=x===yh&&!Me?R-c*2:ae;e.lineTo(Y+Math.round(fe),he),e.lineWidth=f/15;const Ne=this._getLinearGradient();e.strokeStyle=Ne||D,e.stroke(),e.restore()}const De=J;if(v!==s2&&(N!==0||x===yh||z)){const we=xe.split(" ").length-1,Y=xr(xe);for(let he=0;he<Y.length;he++){const fe=Y[he];if(fe===" "&&!Me&&x===yh&&(J+=(R-c*2-ae)/we),this._partialTextX=J,this._partialTextY=K+B,this._partialText=fe,z){e.save();const Le=s.slice(0,P).reduce((W,be)=>W+xr(be.text).length,0),q=he+Le;z({char:fe,index:q,x:J,y:K+B,lineIndex:P,column:he,isLastInLine:Me,width:this.measureSize(fe).width,context:e})}e.fillStrokeShape(this),z&&e.restore(),J+=this.measureSize(fe).width+N}}else N!==0&&e.setAttr("letterSpacing",`${N}px`),this._partialTextX=J,this._partialTextY=K+B,this._partialText=xe,e.fillStrokeShape(this);if(G){e.save(),e.beginPath();const we=Re.legacyTextRendering?0:-Math.round(f/4),Y=De;e.moveTo(Y,K+B+we);const he=x===yh&&!Me?R-c*2:ae;e.lineTo(Y+Math.round(he),K+B+we),e.lineWidth=f/15;const fe=this._getLinearGradient();e.strokeStyle=fe||D,e.stroke(),e.restore()}e.restore(),l>1&&(K+=h)}}_hitFunc(e){const t=this.getWidth(),i=this.getHeight();e.beginPath(),e.rect(0,0,t,i),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=Q._isString(e)?e:e==null?"":e+"";return this._setAttr(U6,t),this}getWidth(){return this.attrs.width===fd||this.attrs.width===void 0?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){return this.attrs.height===fd||this.attrs.height===void 0?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Q.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,i,s,l,c,f,h,m,v,E,x;let R=Gg(),N=this.fontSize(),z;R.save(),R.font=this._getContextFont(),z=R.measureText(e),R.restore();const D=N/100;return{actualBoundingBoxAscent:(t=z.actualBoundingBoxAscent)!==null&&t!==void 0?t:71.58203125*D,actualBoundingBoxDescent:(i=z.actualBoundingBoxDescent)!==null&&i!==void 0?i:0,actualBoundingBoxLeft:(s=z.actualBoundingBoxLeft)!==null&&s!==void 0?s:-7.421875*D,actualBoundingBoxRight:(l=z.actualBoundingBoxRight)!==null&&l!==void 0?l:75.732421875*D,alphabeticBaseline:(c=z.alphabeticBaseline)!==null&&c!==void 0?c:0,emHeightAscent:(f=z.emHeightAscent)!==null&&f!==void 0?f:100*D,emHeightDescent:(h=z.emHeightDescent)!==null&&h!==void 0?h:-20*D,fontBoundingBoxAscent:(m=z.fontBoundingBoxAscent)!==null&&m!==void 0?m:91*D,fontBoundingBoxDescent:(v=z.fontBoundingBoxDescent)!==null&&v!==void 0?v:21*D,hangingBaseline:(E=z.hangingBaseline)!==null&&E!==void 0?E:72.80000305175781*D,ideographicBaseline:(x=z.ideographicBaseline)!==null&&x!==void 0?x:-21*D,width:z.width,height:N}}_getContextFont(){return this.fontStyle()+Jp+this.fontVariant()+Jp+(this.fontSize()+L6)+q6(this.fontFamily())}_addTextLine(e){this.align()===yh&&(e=e.trim());const i=this._getTextWidth(e);return this.textArr.push({text:e,width:i,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),i=e.length;return Gg().measureText(e).width+t*i}_setTextData(){let e=this.text().split(`
`),t=+this.fontSize(),i=0,s=this.lineHeight()*t,l=this.attrs.width,c=this.attrs.height,f=l!==fd&&l!==void 0,h=c!==fd&&c!==void 0,m=this.padding(),v=l-m*2,E=c-m*2,x=0,R=this.wrap(),N=R!==o2,z=R!==B6&&N,D=this.ellipsis();this.textArr=[],Gg().font=this._getContextFont();const I=D?this._getTextWidth(Lg):0;for(let L=0,U=e.length;L<U;++L){let G=e[L],P=this._getTextWidth(G);if(f&&P>v)for(;G.length>0;){let K=0,$=xr(G).length,J="",B=0;for(;K<$;){const ue=K+$>>>1,xe=xr(G),ae=xe.slice(0,ue+1).join(""),Me=this._getTextWidth(ae);(D&&h&&x+s>E?Me+I:Me)<=v?(K=ue+1,J=ae,B=Me):$=ue}if(J){if(z){const ae=xr(G),Me=xr(J),De=ae[Me.length],we=De===Jp||De===i2;let Y;if(we&&B<=v)Y=Me.length;else{const he=Me.lastIndexOf(Jp),fe=Me.lastIndexOf(i2);Y=Math.max(he,fe)+1}Y>0&&(K=Y,J=ae.slice(0,K).join(""),B=this._getTextWidth(J))}if(J=J.trimRight(),this._addTextLine(J),i=Math.max(i,B),x+=s,this._shouldHandleEllipsis(x)){this._tryToAddEllipsisToLastLine();break}if(G=xr(G).slice(K).join("").trimLeft(),G.length>0&&(P=this._getTextWidth(G),P<=v)){this._addTextLine(G),x+=s,i=Math.max(i,P);break}}else break}else this._addTextLine(G),x+=s,i=Math.max(i,P),this._shouldHandleEllipsis(x)&&L<U-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),h&&x+s>E)break}this.textHeight=t,this.textWidth=i}_shouldHandleEllipsis(e){const t=+this.fontSize(),i=this.lineHeight()*t,s=this.attrs.height,l=s!==fd&&s!==void 0,c=this.padding(),f=s-c*2;return!(this.wrap()!==o2)||l&&e+i>f}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==fd&&e!==void 0,i=this.padding(),s=e-i*2,l=this.ellipsis(),c=this.textArr[this.textArr.length-1];!c||!l||(t&&(this._getTextWidth(c.text+Lg)<s||(c.text=c.text.slice(0,c.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(c.text+Lg))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=this.textDecoration().indexOf("underline")!==-1||this.textDecoration().indexOf("line-through")!==-1,t=this.hasShadow();return e&&t?!0:super._useBufferCanvas()}};tn.prototype._fillFunc=V6;tn.prototype._strokeFunc=j6;tn.prototype.className=I6;tn.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];En(tn);H.overWriteSetter(tn,"width",Xy());H.overWriteSetter(tn,"height",Xy());H.addGetterSetter(tn,"direction",sb);H.addGetterSetter(tn,"fontFamily","Arial");H.addGetterSetter(tn,"fontSize",12,Ce());H.addGetterSetter(tn,"fontStyle",lb);H.addGetterSetter(tn,"fontVariant",lb);H.addGetterSetter(tn,"padding",0,Ce());H.addGetterSetter(tn,"align",ob);H.addGetterSetter(tn,"verticalAlign",O6);H.addGetterSetter(tn,"lineHeight",1,Ce());H.addGetterSetter(tn,"wrap",H6);H.addGetterSetter(tn,"ellipsis",!1,Xs());H.addGetterSetter(tn,"letterSpacing",0,Ce());H.addGetterSetter(tn,"text","",Lu());H.addGetterSetter(tn,"textDecoration","");H.addGetterSetter(tn,"underlineOffset",void 0,Ce());H.addGetterSetter(tn,"charRenderFunc",void 0);const F6="",ub="normal";function cb(n){n.fillText(this.partialText,0,0)}function db(n){n.strokeText(this.partialText,0,0)}class ti extends Se{constructor(e){super(e),this.dummyCanvas=Q.createCanvasElement(),this.dataArray=[],this._readDataAttribute(),this.on("dataChange.konva",function(){this._readDataAttribute(),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_getTextPathLength(){return en.getPathLength(this.dataArray)}_getPointAtLength(e){if(!this.attrs.data)return null;const t=this.pathLength;return e>t?null:en.getPointAtLengthOfDataArray(e,this.dataArray)}_readDataAttribute(){this.dataArray=en.parsePathData(this.attrs.data),this.pathLength=this._getTextPathLength()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();const t=this.textDecoration(),i=this.fill(),s=this.fontSize(),l=this.glyphInfo,c=t.indexOf("underline")!==-1,f=t.indexOf("line-through")!==-1;c&&e.beginPath();for(let h=0;h<l.length;h++){e.save();const m=l[h].p0;e.translate(m.x,m.y),e.rotate(l[h].rotation),this.partialText=l[h].text,e.fillStrokeShape(this),c&&(h===0&&e.moveTo(0,s/2+1),e.lineTo(l[h].width,s/2+1)),e.restore()}if(c&&(e.strokeStyle=i,e.lineWidth=s/20,e.stroke()),f){e.beginPath();for(let h=0;h<l.length;h++){e.save();const m=l[h].p0;e.translate(m.x,m.y),e.rotate(l[h].rotation),h===0&&e.moveTo(0,0),e.lineTo(l[h].width,0),e.restore()}e.strokeStyle=i,e.lineWidth=s/20,e.stroke()}e.restore()}_hitFunc(e){e.beginPath();const t=this.glyphInfo;if(t.length>=1){const i=t[0].p0;e.moveTo(i.x,i.y)}for(let i=0;i<t.length;i++){const s=t[i].p1;e.lineTo(s.x,s.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Q.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return tn.prototype.setText.call(this,e)}_getContextFont(){return tn.prototype._getContextFont.call(this)}_getTextSize(e){const i=this.dummyCanvas.getContext("2d");i.save(),i.font=this._getContextFont();const s=i.measureText(e);return i.restore(),{width:s.width,height:parseInt(`${this.fontSize()}`,10)}}_setTextData(){const e=xr(this.text()),t=[];let i=0;for(let E=0;E<e.length;E++)t.push({char:e[E],width:this._getTextSize(e[E]).width}),i+=t[E].width;const{height:s}=this._getTextSize(this.attrs.text);if(this.textWidth=i,this.textHeight=s,this.glyphInfo=[],!this.attrs.data)return null;const l=this.letterSpacing(),c=this.align(),f=this.kerningFunc(),h=Math.max(this.textWidth+((this.attrs.text||"").length-1)*l,0);let m=0;c==="center"&&(m=Math.max(0,this.pathLength/2-h/2)),c==="right"&&(m=Math.max(0,this.pathLength-h));let v=m;for(let E=0;E<t.length;E++){const x=this._getPointAtLength(v);if(!x)return;const R=t[E].char;let N=t[E].width+l;if(R===" "&&c==="justify"){const G=this.text().split(" ").length-1;N+=(this.pathLength-h)/G}const z=this._getPointAtLength(v+N);if(!z)return;const D=en.getLineLength(x.x,x.y,z.x,z.y);let I=0;if(f)try{I=f(t[E-1].char,R)*this.fontSize()}catch{I=0}x.x+=I,z.x+=I,this.textWidth+=I;const L=en.getPointOnLine(I+D/2,x.x,x.y,z.x,z.y),U=Math.atan2(z.y-x.y,z.x-x.x);this.glyphInfo.push({transposeX:L.x,transposeY:L.y,text:e[E],rotation:U,p0:x,p1:z,width:D}),v+=N}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};const e=[];this.glyphInfo.forEach(function(m){e.push(m.p0.x),e.push(m.p0.y),e.push(m.p1.x),e.push(m.p1.y)});let t=e[0]||0,i=e[0]||0,s=e[1]||0,l=e[1]||0,c,f;for(let m=0;m<e.length/2;m++)c=e[m*2],f=e[m*2+1],t=Math.min(t,c),i=Math.max(i,c),s=Math.min(s,f),l=Math.max(l,f);const h=this.fontSize();return{x:t-h/2,y:s-h/2,width:i-t+h,height:l-s+h}}destroy(){return Q.releaseCanvas(this.dummyCanvas),super.destroy()}}ti.prototype._fillFunc=cb;ti.prototype._strokeFunc=db;ti.prototype._fillFuncHit=cb;ti.prototype._strokeFuncHit=db;ti.prototype.className="TextPath";ti.prototype._attrsAffectingSize=["text","fontSize","data"];En(ti);H.addGetterSetter(ti,"data");H.addGetterSetter(ti,"fontFamily","Arial");H.addGetterSetter(ti,"fontSize",12,Ce());H.addGetterSetter(ti,"fontStyle",ub);H.addGetterSetter(ti,"align","left");H.addGetterSetter(ti,"letterSpacing",0,Ce());H.addGetterSetter(ti,"textBaseline","middle");H.addGetterSetter(ti,"fontVariant",ub);H.addGetterSetter(ti,"text",F6);H.addGetterSetter(ti,"textDecoration","");H.addGetterSetter(ti,"kerningFunc",void 0);const fb="tr-konva",K6=["resizeEnabledChange","rotateAnchorOffsetChange","rotateAnchorAngleChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange","anchorStyleFuncChange"].map(n=>n+`.${fb}`).join(" "),l2="nodesRect",J6=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange","draggableChange"],X6={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},Q6="ontouchstart"in Re._global;function Z6(n,e,t){if(n==="rotater")return t;e+=Q.degToRad(X6[n]||0);const i=(Q.radToDeg(e)%360+360)%360;return Q._inRange(i,315+22.5,360)||Q._inRange(i,0,22.5)?"ns-resize":Q._inRange(i,45-22.5,45+22.5)?"nesw-resize":Q._inRange(i,90-22.5,90+22.5)?"ew-resize":Q._inRange(i,135-22.5,135+22.5)?"nwse-resize":Q._inRange(i,180-22.5,180+22.5)?"ns-resize":Q._inRange(i,225-22.5,225+22.5)?"nesw-resize":Q._inRange(i,270-22.5,270+22.5)?"ew-resize":Q._inRange(i,315-22.5,315+22.5)?"nwse-resize":(Q.error("Transformer has unknown angle for cursor detection: "+i),"pointer")}const cm=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function W6(n){return{x:n.x+n.width/2*Math.cos(n.rotation)+n.height/2*Math.sin(-n.rotation),y:n.y+n.height/2*Math.cos(n.rotation)+n.width/2*Math.sin(n.rotation)}}function hb(n,e,t){const i=t.x+(n.x-t.x)*Math.cos(e)-(n.y-t.y)*Math.sin(e),s=t.y+(n.x-t.x)*Math.sin(e)+(n.y-t.y)*Math.cos(e);return{...n,rotation:n.rotation+e,x:i,y:s}}function $6(n,e){const t=W6(n);return hb(n,e,t)}function e8(n,e,t){let i=e;for(let s=0;s<n.length;s++){const l=Re.getAngle(n[s]),c=Math.abs(l-e)%(Math.PI*2);Math.min(c,Math.PI*2-c)<t&&(i=l)}return i}let Sy=0,Ct=class extends wd{constructor(e){super(e),this._movingAnchorName=null,this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(K6,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return Q.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return fb+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach();const t=e.filter(s=>s.isAncestorOf(this)?(Q.error("Konva.Transformer cannot be an a child of the node you are trying to attach"),!1):!0);return this._nodes=e=t,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(s=>{const l=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()};if(s._attrsAffectingSize.length){const c=s._attrsAffectingSize.map(f=>f+"Change."+this._getEventNamespace()).join(" ");s.on(c,l)}s.on(J6.map(c=>c+`.${this._getEventNamespace()}`).join(" "),l),s.on(`absoluteTransformChange.${this._getEventNamespace()}`,l),this._proxyDrag(s)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(e){let t;e.on(`dragstart.${this._getEventNamespace()}`,i=>{t=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(i,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,i=>{if(!t)return;const s=e.getAbsolutePosition(),l=s.x-t.x,c=s.y-t.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const h=f.getAbsolutePosition();f.setAbsolutePosition({x:h.x+l,y:h.y+c}),f.startDrag(i)}),t=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(l2),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(l2,this.__getNodeRect)}__getNodeShape(e,t=this.rotation(),i){const s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(i),c=e.getAbsolutePosition(i),f=s.x*l.x-e.offsetX()*l.x,h=s.y*l.y-e.offsetY()*l.y,m=(Re.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),v={x:c.x+f*Math.cos(m)+h*Math.sin(-m),y:c.y+h*Math.cos(m)+f*Math.sin(m),width:s.width*l.x,height:s.height*l.y,rotation:m};return hb(v,-Re.getAngle(t),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(m=>{const v=m.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),E=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}],x=m.getAbsoluteTransform();E.forEach(function(R){const N=x.point(R);t.push(N)})});const i=new Ga;i.rotate(-Re.getAngle(this.rotation()));let s=1/0,l=1/0,c=-1/0,f=-1/0;t.forEach(function(m){const v=i.point(m);s===void 0&&(s=c=v.x,l=f=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),c=Math.max(c,v.x),f=Math.max(f,v.y)}),i.invert();const h=i.point({x:s,y:l});return{x:h.x,y:h.y,width:c-s,height:f-l,rotation:Re.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),cm.forEach(e=>{this._createAnchor(e)}),this._createAnchor("rotater")}_createAnchor(e){const t=new Xh({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Q6?10:"auto"}),i=this;t.on("mousedown touchstart",function(s){i._handleMouseDown(s)}),t.on("dragstart",s=>{t.stopDrag(),s.cancelBubble=!0}),t.on("dragend",s=>{s.cancelBubble=!0}),t.on("mouseenter",()=>{const s=Re.getAngle(this.rotation()),l=this.rotateAnchorCursor(),c=Z6(e,s,l);t.getStage().content&&(t.getStage().content.style.cursor=c),this._cursorChange=!0}),t.on("mouseout",()=>{t.getStage().content&&(t.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(t)}_createBack(){const e=new Se({name:"back",width:0,height:0,sceneFunc(t,i){const s=i.getParent(),l=s.padding(),c=i.width(),f=i.height();if(t.beginPath(),t.rect(-l,-l,c+l*2,f+l*2),s.rotateEnabled()&&s.rotateLineVisible()){const h=s.rotateAnchorAngle(),m=s.rotateAnchorOffset(),v=Q.degToRad(h),E=Math.sin(v),x=-Math.cos(v),R=c/2,N=f/2;let z=1/0;x<0?z=Math.min(z,-N/x):x>0&&(z=Math.min(z,(f-N)/x)),E<0?z=Math.min(z,-R/E):E>0&&(z=Math.min(z,(c-R)/E));const D=R+E*z,I=N+x*z,L=Q._sign(f),U=D+E*m*L,G=I+x*m*L;t.moveTo(D,I),t.lineTo(U,G)}t.fillStrokeShape(i)},hitFunc:(t,i)=>{if(!this.shouldOverdrawWholeArea())return;const s=this.padding();t.beginPath(),t.rect(-s,-s,i.width()+s*2,i.height()+s*2),t.fillStrokeShape(i)}});this.add(e),this._proxyDrag(e),e.on("dragstart",t=>{t.cancelBubble=!0}),e.on("dragmove",t=>{t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(e){if(this._transforming)return;this._movingAnchorName=e.target.name().split(" ")[0];const t=this._getNodeRect(),i=t.width,s=t.height,l=Math.sqrt(Math.pow(i,2)+Math.pow(s,2));this.sin=Math.abs(s/l),this.cos=Math.abs(i/l),typeof window<"u"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;const c=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-c.x,y:f.y-c.y},Sy++,this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(h=>{h._fire("transformstart",{evt:e.evt,target:h})})}_handleMouseMove(e){let t,i,s;const l=this.findOne("."+this._movingAnchorName),c=l.getStage();c.setPointersPositions(e);const f=c.getPointerPosition();let h={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const m=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(h=this.anchorDragBoundFunc()(m,h,e)),l.setAbsolutePosition(h);const v=l.getAbsolutePosition();if(m.x===v.x&&m.y===v.y)return;if(this._movingAnchorName==="rotater"){const L=this._getNodeRect();t=l.x()-L.width/2,i=-l.y()+L.height/2;const U=Re.getAngle(this.rotateAnchorAngle());let G=Math.atan2(-i,t)+Math.PI/2-U;L.height<0&&(G-=Math.PI);const K=Re.getAngle(this.rotation())+G,$=Re.getAngle(this.rotationSnapTolerance()),B=e8(this.rotationSnaps(),K,$)-L.rotation,ue=$6(L,B);this._fitNodesInto(ue,e);return}const E=this.shiftBehavior();let x;E==="inverted"?x=this.keepRatio()&&!e.shiftKey:E==="none"?x=this.keepRatio():x=this.keepRatio()||e.shiftKey;let R=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(x){const L=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(L.x-l.x(),2)+Math.pow(L.y-l.y(),2));const U=this.findOne(".top-left").x()>L.x?-1:1,G=this.findOne(".top-left").y()>L.y?-1:1;t=s*this.cos*U,i=s*this.sin*G,this.findOne(".top-left").x(L.x-t),this.findOne(".top-left").y(L.y-i)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(x){const L=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(l.x()-L.x,2)+Math.pow(L.y-l.y(),2));const U=this.findOne(".top-right").x()<L.x?-1:1,G=this.findOne(".top-right").y()>L.y?-1:1;t=s*this.cos*U,i=s*this.sin*G,this.findOne(".top-right").x(L.x+t),this.findOne(".top-right").y(L.y-i)}var N=l.position();this.findOne(".top-left").y(N.y),this.findOne(".bottom-right").x(N.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(x){const L=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(L.x-l.x(),2)+Math.pow(l.y()-L.y,2));const U=L.x<l.x()?-1:1,G=l.y()<L.y?-1:1;t=s*this.cos*U,i=s*this.sin*G,l.x(L.x-t),l.y(L.y+i)}N=l.position(),this.findOne(".top-left").x(N.x),this.findOne(".bottom-right").y(N.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(x){const L=R?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(l.x()-L.x,2)+Math.pow(l.y()-L.y,2));const U=this.findOne(".bottom-right").x()<L.x?-1:1,G=this.findOne(".bottom-right").y()<L.y?-1:1;t=s*this.cos*U,i=s*this.sin*G,this.findOne(".bottom-right").x(L.x+t),this.findOne(".bottom-right").y(L.y+i)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(R=this.centeredScaling()||e.altKey,R){const L=this.findOne(".top-left"),U=this.findOne(".bottom-right"),G=L.x(),P=L.y(),K=this.getWidth()-U.x(),$=this.getHeight()-U.y();U.move({x:-G,y:-P}),L.move({x:K,y:$})}const z=this.findOne(".top-left").getAbsolutePosition();t=z.x,i=z.y;const D=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),I=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:t,y:i,width:D,height:I,rotation:Re.getAngle(this.rotation())},e)}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){var t;if(this._transforming){this._transforming=!1,typeof window<"u"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));const i=this.getNode();Sy--,this._fire("transformend",{evt:e,target:i}),(t=this.getLayer())===null||t===void 0||t.batchDraw(),i&&this._nodes.forEach(s=>{var l;s._fire("transformend",{evt:e,target:s}),(l=s.getLayer())===null||l===void 0||l.batchDraw()}),this._movingAnchorName=null}}_fitNodesInto(e,t){const i=this._getNodeRect(),s=1;if(Q._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(Q._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const l=new Ga;if(l.rotate(Re.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const x=l.point({x:-this.padding()*2,y:0});e.x+=x.x,e.y+=x.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const x=l.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.width+=this.padding()*2}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const x=l.point({x:0,y:-this.padding()*2});e.x+=x.x,e.y+=x.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.height+=this.padding()*2}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const x=l.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=x.x,this._anchorDragOffset.y-=x.y,e.height+=this.padding()*2}if(this.boundBoxFunc()){const x=this.boundBoxFunc()(i,e);x?e=x:Q.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const c=1e7,f=new Ga;f.translate(i.x,i.y),f.rotate(i.rotation),f.scale(i.width/c,i.height/c);const h=new Ga,m=e.width/c,v=e.height/c;this.flipEnabled()===!1?(h.translate(e.x,e.y),h.rotate(e.rotation),h.translate(e.width<0?e.width:0,e.height<0?e.height:0),h.scale(Math.abs(m),Math.abs(v))):(h.translate(e.x,e.y),h.rotate(e.rotation),h.scale(m,v));const E=h.multiply(f.invert());this._nodes.forEach(x=>{var R;if(!x.getStage())return;const N=x.getParent().getAbsoluteTransform(),z=x.getTransform().copy();z.translate(x.offsetX(),x.offsetY());const D=new Ga;D.multiply(N.copy().invert()).multiply(E).multiply(N).multiply(z);const I=D.decompose();x.setAttrs(I),(R=x.getLayer())===null||R===void 0||R.batchDraw()}),this.rotation(Q._getRotation(e.rotation)),this._nodes.forEach(x=>{this._fire("transform",{evt:t,target:x}),x._fire("transform",{evt:t,target:x})}),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,t){this.findOne(e).setAttrs(t)}update(){var e;const t=this._getNodeRect();this.rotation(Q._getRotation(t.rotation));const i=t.width,s=t.height,l=this.enabledAnchors(),c=this.resizeEnabled(),f=this.padding(),h=this.anchorSize(),m=this.find("._anchor");m.forEach(K=>{K.setAttrs({width:h,height:h,offsetX:h/2,offsetY:h/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:h/2+f,offsetY:h/2+f,visible:c&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:h/2+f,visible:c&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:h/2-f,offsetY:h/2+f,visible:c&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:h/2+f,visible:c&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:s/2,offsetX:h/2-f,visible:c&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:h/2+f,offsetY:h/2-f,visible:c&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:s,offsetY:h/2-f,visible:c&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:s,offsetX:h/2-f,offsetY:h/2-f,visible:c&&l.indexOf("bottom-right")>=0});const v=this.rotateAnchorAngle(),E=this.rotateAnchorOffset(),x=Q.degToRad(v),R=Math.sin(x),N=-Math.cos(x),z=i/2,D=s/2;let I=1/0;N<0?I=Math.min(I,-D/N):N>0&&(I=Math.min(I,(s-D)/N)),R<0?I=Math.min(I,-z/R):R>0&&(I=Math.min(I,(i-z)/R));const L=z+R*I,U=D+N*I,G=Q._sign(s);this._batchChangeChild(".rotater",{x:L+R*E*G,y:U+N*E*G-f*N,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),draggable:this.nodes().some(K=>K.draggable()),x:0,y:0});const P=this.anchorStyleFunc();P&&m.forEach(K=>{P(K)}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();const e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),wd.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return Te.prototype.toObject.call(this)}clone(e){return Te.prototype.clone.call(this,e)}getClientRect(){return this.nodes().length>0?super.getClientRect():{x:0,y:0,width:0,height:0}}};Ct.isTransforming=()=>Sy>0;function t8(n){return n instanceof Array||Q.warn("enabledAnchors value should be an array"),n instanceof Array&&n.forEach(function(e){cm.indexOf(e)===-1&&Q.warn("Unknown anchor name: "+e+". Available names are: "+cm.join(", "))}),n||[]}Ct.prototype.className="Transformer";En(Ct);H.addGetterSetter(Ct,"enabledAnchors",cm,t8);H.addGetterSetter(Ct,"flipEnabled",!0,Xs());H.addGetterSetter(Ct,"resizeEnabled",!0);H.addGetterSetter(Ct,"anchorSize",10,Ce());H.addGetterSetter(Ct,"rotateEnabled",!0);H.addGetterSetter(Ct,"rotateLineVisible",!0);H.addGetterSetter(Ct,"rotationSnaps",[]);H.addGetterSetter(Ct,"rotateAnchorOffset",50,Ce());H.addGetterSetter(Ct,"rotateAnchorAngle",0,Ce());H.addGetterSetter(Ct,"rotateAnchorCursor","crosshair");H.addGetterSetter(Ct,"rotationSnapTolerance",5,Ce());H.addGetterSetter(Ct,"borderEnabled",!0);H.addGetterSetter(Ct,"anchorStroke","rgb(0, 161, 255)");H.addGetterSetter(Ct,"anchorStrokeWidth",1,Ce());H.addGetterSetter(Ct,"anchorFill","white");H.addGetterSetter(Ct,"anchorCornerRadius",0,Ce());H.addGetterSetter(Ct,"borderStroke","rgb(0, 161, 255)");H.addGetterSetter(Ct,"borderStrokeWidth",1,Ce());H.addGetterSetter(Ct,"borderDash");H.addGetterSetter(Ct,"keepRatio",!0);H.addGetterSetter(Ct,"shiftBehavior","default");H.addGetterSetter(Ct,"centeredScaling",!1);H.addGetterSetter(Ct,"ignoreStroke",!1);H.addGetterSetter(Ct,"padding",0,Ce());H.addGetterSetter(Ct,"nodes");H.addGetterSetter(Ct,"node");H.addGetterSetter(Ct,"boundBoxFunc");H.addGetterSetter(Ct,"anchorDragBoundFunc");H.addGetterSetter(Ct,"anchorStyleFunc");H.addGetterSetter(Ct,"shouldOverdrawWholeArea",!1);H.addGetterSetter(Ct,"useSingleNodeRotation",!0);H.backCompat(Ct,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Cl extends Se{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,Re.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Cl.prototype.className="Wedge";Cl.prototype._centroid=!0;Cl.prototype._attrsAffectingSize=["radius"];En(Cl);H.addGetterSetter(Cl,"radius",0,Ce());H.addGetterSetter(Cl,"angle",0,Ce());H.addGetterSetter(Cl,"clockwise",!1);H.backCompat(Cl,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function r2(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}const n8=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],i8=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function a8(n,e){const t=n.data,i=n.width,s=n.height;let l,c,f,h,m,v,E,x,R,N,z,D,I,L,U,G,P,K,$,J;const B=e+e+1,ue=i-1,xe=s-1,ae=e+1,Me=ae*(ae+1)/2,De=new r2,we=n8[e],Y=i8[e];let he=null,fe=De,Ne=null,Le=null;for(let q=1;q<B;q++)fe=fe.next=new r2,q===ae&&(he=fe);fe.next=De,f=c=0;for(let q=0;q<s;q++){D=I=L=U=h=m=v=E=0,x=ae*(G=t[c]),R=ae*(P=t[c+1]),N=ae*(K=t[c+2]),z=ae*($=t[c+3]),h+=Me*G,m+=Me*P,v+=Me*K,E+=Me*$,fe=De;for(let W=0;W<ae;W++)fe.r=G,fe.g=P,fe.b=K,fe.a=$,fe=fe.next;for(let W=1;W<ae;W++)l=c+((ue<W?ue:W)<<2),h+=(fe.r=G=t[l])*(J=ae-W),m+=(fe.g=P=t[l+1])*J,v+=(fe.b=K=t[l+2])*J,E+=(fe.a=$=t[l+3])*J,D+=G,I+=P,L+=K,U+=$,fe=fe.next;Ne=De,Le=he;for(let W=0;W<i;W++)t[c+3]=$=E*we>>Y,$!==0?($=255/$,t[c]=(h*we>>Y)*$,t[c+1]=(m*we>>Y)*$,t[c+2]=(v*we>>Y)*$):t[c]=t[c+1]=t[c+2]=0,h-=x,m-=R,v-=N,E-=z,x-=Ne.r,R-=Ne.g,N-=Ne.b,z-=Ne.a,l=f+((l=W+e+1)<ue?l:ue)<<2,D+=Ne.r=t[l],I+=Ne.g=t[l+1],L+=Ne.b=t[l+2],U+=Ne.a=t[l+3],h+=D,m+=I,v+=L,E+=U,Ne=Ne.next,x+=G=Le.r,R+=P=Le.g,N+=K=Le.b,z+=$=Le.a,D-=G,I-=P,L-=K,U-=$,Le=Le.next,c+=4;f+=i}for(let q=0;q<i;q++){I=L=U=D=m=v=E=h=0,c=q<<2,x=ae*(G=t[c]),R=ae*(P=t[c+1]),N=ae*(K=t[c+2]),z=ae*($=t[c+3]),h+=Me*G,m+=Me*P,v+=Me*K,E+=Me*$,fe=De;for(let be=0;be<ae;be++)fe.r=G,fe.g=P,fe.b=K,fe.a=$,fe=fe.next;let W=i;for(let be=1;be<=e;be++)c=W+q<<2,h+=(fe.r=G=t[c])*(J=ae-be),m+=(fe.g=P=t[c+1])*J,v+=(fe.b=K=t[c+2])*J,E+=(fe.a=$=t[c+3])*J,D+=G,I+=P,L+=K,U+=$,fe=fe.next,be<xe&&(W+=i);c=q,Ne=De,Le=he;for(let be=0;be<s;be++)l=c<<2,t[l+3]=$=E*we>>Y,$>0?($=255/$,t[l]=(h*we>>Y)*$,t[l+1]=(m*we>>Y)*$,t[l+2]=(v*we>>Y)*$):t[l]=t[l+1]=t[l+2]=0,h-=x,m-=R,v-=N,E-=z,x-=Ne.r,R-=Ne.g,N-=Ne.b,z-=Ne.a,l=q+((l=be+ae)<xe?l:xe)*i<<2,h+=D+=Ne.r=t[l],m+=I+=Ne.g=t[l+1],v+=L+=Ne.b=t[l+2],E+=U+=Ne.a=t[l+3],Ne=Ne.next,x+=G=Le.r,R+=P=Le.g,N+=K=Le.b,z+=$=Le.a,D-=G,I-=P,L-=K,U-=$,Le=Le.next,c+=i}}const s8=function(e){const t=Math.round(this.blurRadius());t>0&&a8(e,t)};H.addGetterSetter(Te,"blurRadius",0,Ce(),H.afterSetFilter);const o8=function(n){const e=this.brightness()*255,t=n.data,i=t.length;for(let s=0;s<i;s+=4)t[s]+=e,t[s+1]+=e,t[s+2]+=e};H.addGetterSetter(Te,"brightness",0,Ce(),H.afterSetFilter);const l8=function(n){const e=this.brightness(),t=n.data,i=t.length;for(let s=0;s<i;s+=4)t[s]=Math.min(255,t[s]*e),t[s+1]=Math.min(255,t[s+1]*e),t[s+2]=Math.min(255,t[s+2]*e)},r8=function(n){const e=Math.pow((this.contrast()+100)/100,2),t=n.data,i=t.length;let s=150,l=150,c=150;for(let f=0;f<i;f+=4)s=t[f],l=t[f+1],c=t[f+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,c/=255,c-=.5,c*=e,c+=.5,c*=255,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,c=c<0?0:c>255?255:c,t[f]=s,t[f+1]=l,t[f+2]=c};H.addGetterSetter(Te,"contrast",0,Ce(),H.afterSetFilter);const u8=function(n){var e,t,i,s,l,c,f,h,m;const v=n.data,E=n.width,x=n.height,R=Math.min(1,Math.max(0,(t=(e=this.embossStrength)===null||e===void 0?void 0:e.call(this))!==null&&t!==void 0?t:.5)),N=Math.min(1,Math.max(0,(s=(i=this.embossWhiteLevel)===null||i===void 0?void 0:i.call(this))!==null&&s!==void 0?s:.5)),D=(f={"top-left":315,top:270,"top-right":225,right:180,"bottom-right":135,bottom:90,"bottom-left":45,left:0}[(c=(l=this.embossDirection)===null||l===void 0?void 0:l.call(this))!==null&&c!==void 0?c:"top-left"])!==null&&f!==void 0?f:315,I=!!((m=(h=this.embossBlend)===null||h===void 0?void 0:h.call(this))!==null&&m!==void 0&&m),L=R*10,U=N*255,G=D*Math.PI/180,P=Math.cos(G),K=Math.sin(G),$=128/1020*L,J=new Uint8ClampedArray(v),B=new Float32Array(E*x);for(let De=0,we=0;we<v.length;we+=4,De++)B[De]=.2126*J[we]+.7152*J[we+1]+.0722*J[we+2];const ue=[-1,0,1,-2,0,2,-1,0,1],xe=[-1,-2,-1,0,0,0,1,2,1],ae=[-E-1,-E,-E+1,-1,0,1,E-1,E,E+1],Me=De=>De<0?0:De>255?255:De;for(let De=1;De<x-1;De++)for(let we=1;we<E-1;we++){const Y=De*E+we;let he=0,fe=0;he+=B[Y+ae[0]]*ue[0],fe+=B[Y+ae[0]]*xe[0],he+=B[Y+ae[1]]*ue[1],fe+=B[Y+ae[1]]*xe[1],he+=B[Y+ae[2]]*ue[2],fe+=B[Y+ae[2]]*xe[2],he+=B[Y+ae[3]]*ue[3],fe+=B[Y+ae[3]]*xe[3],he+=B[Y+ae[5]]*ue[5],fe+=B[Y+ae[5]]*xe[5],he+=B[Y+ae[6]]*ue[6],fe+=B[Y+ae[6]]*xe[6],he+=B[Y+ae[7]]*ue[7],fe+=B[Y+ae[7]]*xe[7],he+=B[Y+ae[8]]*ue[8],fe+=B[Y+ae[8]]*xe[8];const Ne=P*he+K*fe,Le=Me(U+Ne*$),q=Y*4;if(I){const W=Le-U;v[q]=Me(J[q]+W),v[q+1]=Me(J[q+1]+W),v[q+2]=Me(J[q+2]+W),v[q+3]=J[q+3]}else v[q]=v[q+1]=v[q+2]=Le,v[q+3]=J[q+3]}for(let De=0;De<E;De++){let we=De*4,Y=((x-1)*E+De)*4;v[we]=J[we],v[we+1]=J[we+1],v[we+2]=J[we+2],v[we+3]=J[we+3],v[Y]=J[Y],v[Y+1]=J[Y+1],v[Y+2]=J[Y+2],v[Y+3]=J[Y+3]}for(let De=1;De<x-1;De++){let we=De*E*4,Y=(De*E+(E-1))*4;v[we]=J[we],v[we+1]=J[we+1],v[we+2]=J[we+2],v[we+3]=J[we+3],v[Y]=J[Y],v[Y+1]=J[Y+1],v[Y+2]=J[Y+2],v[Y+3]=J[Y+3]}return n};H.addGetterSetter(Te,"embossStrength",.5,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"embossWhiteLevel",.5,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"embossDirection","top-left",void 0,H.afterSetFilter);H.addGetterSetter(Te,"embossBlend",!1,void 0,H.afterSetFilter);function Hg(n,e,t,i,s){const l=t-e,c=s-i;if(l===0)return i+c/2;if(c===0)return i;let f=(n-e)/l;return f=c*f+i,f}const c8=function(n){const e=n.data,t=e.length;let i=e[0],s=i,l,c=e[1],f=c,h,m=e[2],v=m,E;const x=this.enhance();if(x===0)return;for(let U=0;U<t;U+=4)l=e[U+0],l<i?i=l:l>s&&(s=l),h=e[U+1],h<c?c=h:h>f&&(f=h),E=e[U+2],E<m?m=E:E>v&&(v=E);s===i&&(s=255,i=0),f===c&&(f=255,c=0),v===m&&(v=255,m=0);let R,N,z,D,I,L;if(x>0)R=s+x*(255-s),N=i-x*(i-0),z=f+x*(255-f),D=c-x*(c-0),I=v+x*(255-v),L=m-x*(m-0);else{const U=(s+i)*.5;R=s+x*(s-U),N=i+x*(i-U);const G=(f+c)*.5;z=f+x*(f-G),D=c+x*(c-G);const P=(v+m)*.5;I=v+x*(v-P),L=m+x*(m-P)}for(let U=0;U<t;U+=4)e[U+0]=Hg(e[U+0],i,s,N,R),e[U+1]=Hg(e[U+1],c,f,D,z),e[U+2]=Hg(e[U+2],m,v,L,I)};H.addGetterSetter(Te,"enhance",0,Ce(),H.afterSetFilter);const d8=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4){const s=.34*e[i]+.5*e[i+1]+.16*e[i+2];e[i]=s,e[i+1]=s,e[i+2]=s}};H.addGetterSetter(Te,"hue",0,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"saturation",0,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"luminance",0,Ce(),H.afterSetFilter);const f8=function(n){const e=n.data,t=e.length,i=1,s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=this.luminance()*127,f=i*s*Math.cos(l*Math.PI/180),h=i*s*Math.sin(l*Math.PI/180),m=.299*i+.701*f+.167*h,v=.587*i-.587*f+.33*h,E=.114*i-.114*f-.497*h,x=.299*i-.299*f-.328*h,R=.587*i+.413*f+.035*h,N=.114*i-.114*f+.293*h,z=.299*i-.3*f+1.25*h,D=.587*i-.586*f-1.05*h,I=.114*i+.886*f-.2*h;let L,U,G,P;for(let K=0;K<t;K+=4)L=e[K+0],U=e[K+1],G=e[K+2],P=e[K+3],e[K+0]=m*L+v*U+E*G+c,e[K+1]=x*L+R*U+N*G+c,e[K+2]=z*L+D*U+I*G+c,e[K+3]=P},h8=function(n){const e=n.data,t=e.length,i=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,c=i*s*Math.cos(l*Math.PI/180),f=i*s*Math.sin(l*Math.PI/180),h=.299*i+.701*c+.167*f,m=.587*i-.587*c+.33*f,v=.114*i-.114*c-.497*f,E=.299*i-.299*c-.328*f,x=.587*i+.413*c+.035*f,R=.114*i-.114*c+.293*f,N=.299*i-.3*c+1.25*f,z=.587*i-.586*c-1.05*f,D=.114*i+.886*c-.2*f;for(let I=0;I<t;I+=4){const L=e[I+0],U=e[I+1],G=e[I+2],P=e[I+3];e[I+0]=h*L+m*U+v*G,e[I+1]=E*L+x*U+R*G,e[I+2]=N*L+z*U+D*G,e[I+3]=P}};H.addGetterSetter(Te,"hue",0,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"saturation",0,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"value",0,Ce(),H.afterSetFilter);const p8=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2]},m8=function(n,e,t){const i=n.data,s=e.data,l=n.width,c=n.height,f=t.polarCenterX||l/2,h=t.polarCenterY||c/2;let m=Math.sqrt(f*f+h*h),v=l-f,E=c-h;const x=Math.sqrt(v*v+E*E);m=x>m?x:m;const R=c,N=l,z=360/N*Math.PI/180;for(let D=0;D<N;D+=1){const I=Math.sin(D*z),L=Math.cos(D*z);for(let U=0;U<R;U+=1){v=Math.floor(f+m*U/R*L),E=Math.floor(h+m*U/R*I);let G=(E*l+v)*4;const P=i[G+0],K=i[G+1],$=i[G+2],J=i[G+3];G=(D+U*l)*4,s[G+0]=P,s[G+1]=K,s[G+2]=$,s[G+3]=J}}},g8=function(n,e,t){const i=n.data,s=e.data,l=n.width,c=n.height,f=t.polarCenterX||l/2,h=t.polarCenterY||c/2;let m=Math.sqrt(f*f+h*h),v=l-f,E=c-h;const x=Math.sqrt(v*v+E*E);m=x>m?x:m;const R=c,N=l,z=0;let D,I;for(v=0;v<l;v+=1)for(E=0;E<c;E+=1){const L=v-f,U=E-h,G=Math.sqrt(L*L+U*U)*R/m;let P=(Math.atan2(U,L)*180/Math.PI+360+z)%360;P=P*N/360,D=Math.floor(P),I=Math.floor(G);let K=(I*l+D)*4;const $=i[K+0],J=i[K+1],B=i[K+2],ue=i[K+3];K=(E*l+v)*4,s[K+0]=$,s[K+1]=J,s[K+2]=B,s[K+3]=ue}},y8=function(n){const e=n.width,t=n.height;let i,s,l,c,f,h,m,v,E,x,R=Math.round(this.kaleidoscopePower());const N=Math.round(this.kaleidoscopeAngle()),z=Math.floor(e*(N%360)/360);if(R<1)return;const D=Q.createCanvasElement();D.width=e,D.height=t;const I=D.getContext("2d").getImageData(0,0,e,t);Q.releaseCanvas(D),m8(n,I,{polarCenterX:e/2,polarCenterY:t/2});let L=e/Math.pow(2,R);for(;L<=8;)L=L*2,R-=1;L=Math.ceil(L);let U=L,G=0,P=U,K=1;for(z+L>e&&(G=U,P=0,K=-1),s=0;s<t;s+=1)for(i=G;i!==P;i+=K)l=Math.round(i+z)%e,E=(e*s+l)*4,f=I.data[E+0],h=I.data[E+1],m=I.data[E+2],v=I.data[E+3],x=(e*s+i)*4,I.data[x+0]=f,I.data[x+1]=h,I.data[x+2]=m,I.data[x+3]=v;for(s=0;s<t;s+=1)for(U=Math.floor(L),c=0;c<R;c+=1){for(i=0;i<U+1;i+=1)E=(e*s+i)*4,f=I.data[E+0],h=I.data[E+1],m=I.data[E+2],v=I.data[E+3],x=(e*s+U*2-i-1)*4,I.data[x+0]=f,I.data[x+1]=h,I.data[x+2]=m,I.data[x+3]=v;U*=2}g8(I,n,{})};H.addGetterSetter(Te,"kaleidoscopePower",2,Ce(),H.afterSetFilter);H.addGetterSetter(Te,"kaleidoscopeAngle",0,Ce(),H.afterSetFilter);function Qp(n,e,t){let i=(t*n.width+e)*4;const s=[];return s.push(n.data[i++],n.data[i++],n.data[i++],n.data[i++]),s}function vh(n,e){return Math.sqrt(Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2)+Math.pow(n[2]-e[2],2))}function v8(n){const e=[0,0,0];for(let t=0;t<n.length;t++)e[0]+=n[t][0],e[1]+=n[t][1],e[2]+=n[t][2];return e[0]/=n.length,e[1]/=n.length,e[2]/=n.length,e}function _8(n,e){const t=Qp(n,0,0),i=Qp(n,n.width-1,0),s=Qp(n,0,n.height-1),l=Qp(n,n.width-1,n.height-1),c=e||10;if(vh(t,i)<c&&vh(i,l)<c&&vh(l,s)<c&&vh(s,t)<c){const f=v8([i,t,l,s]),h=[];for(let m=0;m<n.width*n.height;m++){const v=vh(f,[n.data[m*4],n.data[m*4+1],n.data[m*4+2]]);h[m]=v<c?0:255}return h}}function S8(n,e){for(let t=0;t<n.width*n.height;t++)n.data[4*t+3]=e[t]}function b8(n,e,t){const i=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<t;f++)for(let h=0;h<e;h++){const m=f*e+h;let v=0;for(let E=0;E<s;E++)for(let x=0;x<s;x++){const R=f+E-l,N=h+x-l;if(R>=0&&R<t&&N>=0&&N<e){const z=R*e+N,D=i[E*s+x];v+=n[z]*D}}c[m]=v===2040?255:0}return c}function x8(n,e,t){const i=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<t;f++)for(let h=0;h<e;h++){const m=f*e+h;let v=0;for(let E=0;E<s;E++)for(let x=0;x<s;x++){const R=f+E-l,N=h+x-l;if(R>=0&&R<t&&N>=0&&N<e){const z=R*e+N,D=i[E*s+x];v+=n[z]*D}}c[m]=v>=1020?255:0}return c}function E8(n,e,t){const i=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(i.length)),l=Math.floor(s/2),c=[];for(let f=0;f<t;f++)for(let h=0;h<e;h++){const m=f*e+h;let v=0;for(let E=0;E<s;E++)for(let x=0;x<s;x++){const R=f+E-l,N=h+x-l;if(R>=0&&R<t&&N>=0&&N<e){const z=R*e+N,D=i[E*s+x];v+=n[z]*D}}c[m]=v}return c}const T8=function(n){const e=this.threshold();let t=_8(n,e);return t&&(t=b8(t,n.width,n.height),t=x8(t,n.width,n.height),t=E8(t,n.width,n.height),S8(n,t)),n};H.addGetterSetter(Te,"threshold",0,Ce(),H.afterSetFilter);const C8=function(n){const e=this.noise()*255,t=n.data,i=t.length,s=e/2;for(let l=0;l<i;l+=4)t[l+0]+=s-2*s*Math.random(),t[l+1]+=s-2*s*Math.random(),t[l+2]+=s-2*s*Math.random()};H.addGetterSetter(Te,"noise",.2,Ce(),H.afterSetFilter);const A8=function(n){let e=Math.ceil(this.pixelSize()),t=n.width,i=n.height,s=Math.ceil(t/e),l=Math.ceil(i/e),c=n.data;if(e<=0){Q.error("pixelSize value can not be <= 0");return}for(let f=0;f<s;f+=1)for(let h=0;h<l;h+=1){let m=0,v=0,E=0,x=0;const R=f*e,N=R+e,z=h*e,D=z+e;let I=0;for(let L=R;L<N;L+=1)if(!(L>=t))for(let U=z;U<D;U+=1){if(U>=i)continue;const G=(t*U+L)*4;m+=c[G+0],v+=c[G+1],E+=c[G+2],x+=c[G+3],I+=1}m=m/I,v=v/I,E=E/I,x=x/I;for(let L=R;L<N;L+=1)if(!(L>=t))for(let U=z;U<D;U+=1){if(U>=i)continue;const G=(t*U+L)*4;c[G+0]=m,c[G+1]=v,c[G+2]=E,c[G+3]=x}}};H.addGetterSetter(Te,"pixelSize",8,Ce(),H.afterSetFilter);const w8=function(n){const e=Math.round(this.levels()*254)+1,t=n.data,i=t.length,s=255/e;for(let l=0;l<i;l+=1)t[l]=Math.floor(t[l]/s)*s};H.addGetterSetter(Te,"levels",.5,Ce(),H.afterSetFilter);const R8=function(n){const e=n.data,t=e.length,i=this.red(),s=this.green(),l=this.blue();for(let c=0;c<t;c+=4){const f=(.34*e[c]+.5*e[c+1]+.16*e[c+2])/255;e[c]=f*i,e[c+1]=f*s,e[c+2]=f*l,e[c+3]=e[c+3]}};H.addGetterSetter(Te,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});H.addGetterSetter(Te,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});H.addGetterSetter(Te,"blue",0,kS,H.afterSetFilter);const N8=function(n){const e=n.data,t=e.length,i=this.red(),s=this.green(),l=this.blue(),c=this.alpha();for(let f=0;f<t;f+=4){const h=1-c;e[f]=i*c+e[f]*h,e[f+1]=s*c+e[f+1]*h,e[f+2]=l*c+e[f+2]*h}};H.addGetterSetter(Te,"red",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});H.addGetterSetter(Te,"green",0,function(n){return this._filterUpToDate=!1,n>255?255:n<0?0:Math.round(n)});H.addGetterSetter(Te,"blue",0,kS,H.afterSetFilter);H.addGetterSetter(Te,"alpha",1,function(n){return this._filterUpToDate=!1,n>1?1:n<0?0:n});const M8=function(n){const e=n.data,t=e.length;for(let i=0;i<t;i+=4){const s=e[i+0],l=e[i+1],c=e[i+2];e[i+0]=Math.min(255,s*.393+l*.769+c*.189),e[i+1]=Math.min(255,s*.349+l*.686+c*.168),e[i+2]=Math.min(255,s*.272+l*.534+c*.131)}},D8=function(n){const t=n.data;for(let i=0;i<t.length;i+=4){const s=t[i],l=t[i+1],c=t[i+2];.2126*s+.7152*l+.0722*c>=128&&(t[i]=255-s,t[i+1]=255-l,t[i+2]=255-c)}return n},z8=function(n){const e=this.threshold()*255,t=n.data,i=t.length;for(let s=0;s<i;s+=1)t[s]=t[s]<e?0:255};H.addGetterSetter(Te,"threshold",.5,Ce(),H.afterSetFilter);const hd=Rd.Util._assign(Rd,{Arc:El,Arrow:Hu,Circle:Md,Ellipse:Nr,Image:Qs,Label:Wy,Tag:Bu,Line:Tl,Path:en,Rect:Xh,RegularPolygon:Mr,Ring:Pu,Sprite:Go,Star:Dr,Text:tn,TextPath:ti,Transformer:Ct,Wedge:Cl,Filters:{Blur:s8,Brightness:l8,Brighten:o8,Contrast:r8,Emboss:u8,Enhance:c8,Grayscale:d8,HSL:f8,HSV:h8,Invert:p8,Kaleidoscope:y8,Mask:T8,Noise:C8,Pixelate:A8,Posterize:w8,RGB:R8,RGBA:N8,Sepia:M8,Solarize:D8,Threshold:z8}});var Bg={exports:{}},Pg={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2;function U8(){return u2||(u2=1,(function(n){n.exports=function(e){function t(r,u,g,S){return new cf(r,u,g,S)}function i(){}function s(r){var u="https://react.dev/errors/"+r;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+r+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(r){var u=r,g=r;if(r.alternate)for(;u.return;)u=u.return;else{r=u;do u=r,(u.flags&4098)!==0&&(g=u.return),r=u.return;while(r)}return u.tag===3?g:null}function c(r){if(l(r)!==r)throw Error(s(188))}function f(r){var u=r.alternate;if(!u){if(u=l(r),u===null)throw Error(s(188));return u!==r?null:r}for(var g=r,S=u;;){var A=g.return;if(A===null)break;var w=A.alternate;if(w===null){if(S=A.return,S!==null){g=S;continue}break}if(A.child===w.child){for(w=A.child;w;){if(w===g)return c(A),r;if(w===S)return c(A),u;w=w.sibling}throw Error(s(188))}if(g.return!==S.return)g=A,S=w;else{for(var O=!1,j=A.child;j;){if(j===g){O=!0,g=A,S=w;break}if(j===S){O=!0,S=A,g=w;break}j=j.sibling}if(!O){for(j=w.child;j;){if(j===g){O=!0,g=w,S=A;break}if(j===S){O=!0,S=w,g=A;break}j=j.sibling}if(!O)throw Error(s(189))}}if(g.alternate!==S)throw Error(s(190))}if(g.tag!==3)throw Error(s(188));return g.stateNode.current===g?r:u}function h(r){var u=r.tag;if(u===5||u===26||u===27||u===6)return r;for(r=r.child;r!==null;){if(u=h(r),u!==null)return u;r=r.sibling}return null}function m(r){var u=r.tag;if(u===5||u===26||u===27||u===6)return r;for(r=r.child;r!==null;){if(r.tag!==4&&(u=m(r),u!==null))return u;r=r.sibling}return null}function v(r){return r===null||typeof r!="object"?null:(r=Is&&r[Is]||r["@@iterator"],typeof r=="function"?r:null)}function E(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===bo?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case el:return"Fragment";case nl:return"Profiler";case tl:return"StrictMode";case wc:return"Suspense";case Us:return"SuspenseList";case ou:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case $o:return"Portal";case fa:return r.displayName||"Context";case su:return(r._context.displayName||"Context")+".Consumer";case Wl:var u=r.render;return r=r.displayName,r||(r=u.displayName||u.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Rc:return u=r.displayName||null,u!==null?u:E(r.type)||"Memo";case yi:u=r._payload,r=r._init;try{return E(r(u))}catch{}}return null}function x(r){return{current:r}}function R(r){0>ll||(r.current=Pc[ll],Pc[ll]=null,ll--)}function N(r,u){ll++,Pc[ll]=r.current,r.current=u}function z(r){return r>>>=0,r===0?32:31-(qc(r)/hp|0)|0}function D(r){var u=r&42;if(u!==0)return u;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function I(r,u,g){var S=r.pendingLanes;if(S===0)return 0;var A=0,w=r.suspendedLanes,O=r.pingedLanes;r=r.warmLanes;var j=S&134217727;return j!==0?(S=j&~w,S!==0?A=D(S):(O&=j,O!==0?A=D(O):g||(g=j&~r,g!==0&&(A=D(g))))):(j=S&~w,j!==0?A=D(j):O!==0?A=D(O):g||(g=S&~r,g!==0&&(A=D(g)))),A===0?0:u!==0&&u!==A&&(u&w)===0&&(w=A&-A,g=u&-u,w>=g||w===32&&(g&4194048)!==0)?u:A}function L(r,u){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&u)===0}function U(r,u){switch(r){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var r=sr;return sr<<=1,(sr&62914560)===0&&(sr=4194304),r}function P(r){for(var u=[],g=0;31>g;g++)u.push(r);return u}function K(r,u){r.pendingLanes|=u,u!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function $(r,u,g,S,A,w){var O=r.pendingLanes;r.pendingLanes=g,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=g,r.entangledLanes&=g,r.errorRecoveryDisabledLanes&=g,r.shellSuspendCounter=0;var j=r.entanglements,le=r.expirationTimes,ye=r.hiddenUpdates;for(g=O&~g;0<g;){var Ae=31-Ii(g),_e=1<<Ae;j[Ae]=0,le[Ae]=-1;var Ue=ye[Ae];if(Ue!==null)for(ye[Ae]=null,Ae=0;Ae<Ue.length;Ae++){var tt=Ue[Ae];tt!==null&&(tt.lane&=-536870913)}g&=~_e}S!==0&&J(r,S,0),w!==0&&A===0&&r.tag!==0&&(r.suspendedLanes|=w&~(O&~u))}function J(r,u,g){r.pendingLanes|=u,r.suspendedLanes&=~u;var S=31-Ii(u);r.entangledLanes|=u,r.entanglements[S]=r.entanglements[S]|1073741824|g&261930}function B(r,u){var g=r.entangledLanes|=u;for(r=r.entanglements;g;){var S=31-Ii(g),A=1<<S;A&u|r[S]&u&&(r[S]|=u),g&=~A}}function ue(r,u){var g=u&-u;return g=(g&42)!==0?1:xe(g),(g&(r.suspendedLanes|u))!==0?0:g}function xe(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ae(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function Me(r){if(typeof Xf=="function"&&gp(r),Oi&&typeof Oi.setStrictMode=="function")try{Oi.setStrictMode(ul,r)}catch{}}function De(r,u){return r===u&&(r!==0||1/r===1/u)||r!==r&&u!==u}function we(r){if(Jc===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);Jc=u&&u[1]||"",ss=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Jc+r+ss}function Y(r,u){if(!r||mu)return"";mu=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(u){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(tt){var Ue=tt}Reflect.construct(r,[],_e)}else{try{_e.call()}catch(tt){Ue=tt}r.call(_e.prototype)}}else{try{throw Error()}catch(tt){Ue=tt}(_e=r())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(tt){if(tt&&Ue&&typeof tt.stack=="string")return[tt.stack,Ue.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=S.DetermineComponentFrameRoot(),O=w[0],j=w[1];if(O&&j){var le=O.split(`
`),ye=j.split(`
`);for(A=S=0;S<le.length&&!le[S].includes("DetermineComponentFrameRoot");)S++;for(;A<ye.length&&!ye[A].includes("DetermineComponentFrameRoot");)A++;if(S===le.length||A===ye.length)for(S=le.length-1,A=ye.length-1;1<=S&&0<=A&&le[S]!==ye[A];)A--;for(;1<=S&&0<=A;S--,A--)if(le[S]!==ye[A]){if(S!==1||A!==1)do if(S--,A--,0>A||le[S]!==ye[A]){var Ae=`
`+le[S].replace(" at new "," at ");return r.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",r.displayName)),Ae}while(1<=S&&0<=A);break}}}finally{mu=!1,Error.prepareStackTrace=g}return(g=r?r.displayName||r.name:"")?we(g):""}function he(r,u){switch(r.tag){case 26:case 27:case 5:return we(r.type);case 16:return we("Lazy");case 13:return r.child!==u&&u!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return Y(r.type,!1);case 11:return Y(r.type.render,!1);case 1:return Y(r.type,!0);case 31:return we("Activity");default:return""}}function fe(r){try{var u="",g=null;do u+=he(r,g),g=r,r=r.return;while(r);return u}catch(S){return`
Error generating stack: `+S.message+`
`+S.stack}}function Ne(r,u){if(typeof r=="object"&&r!==null){var g=Qf.get(r);return g!==void 0?g:(u={value:r,source:u,stack:fe(u)},Qf.set(r,u),u)}return{value:r,source:u,stack:fe(u)}}function Le(r,u){Ls[os++]=gu,Ls[os++]=Gt,Gt=r,gu=u}function q(r,u,g){ma[Xi++]=Qn,ma[Xi++]=za,ma[Xi++]=ga,ga=r;var S=Qn;r=za;var A=32-Ii(S)-1;S&=~(1<<A),g+=1;var w=32-Ii(u)+A;if(30<w){var O=A-A%5;w=(S&(1<<O)-1).toString(32),S>>=O,A-=O,Qn=1<<32-Ii(u)+A|g<<A|S,za=w+r}else Qn=1<<w|g<<A|S,za=r}function W(r){r.return!==null&&(Le(r,1),q(r,1,0))}function be(r){for(;r===Gt;)Gt=Ls[--os],Ls[os]=null,gu=Ls[--os],Ls[os]=null;for(;r===ga;)ga=ma[--Xi],ma[Xi]=null,za=ma[--Xi],ma[Xi]=null,Qn=ma[--Xi],ma[Xi]=null}function ze(r,u){ma[Xi++]=Qn,ma[Xi++]=za,ma[Xi++]=ga,Qn=u.id,za=u.overflow,ga=r}function Ze(r,u){N(Zn,u),N(Gs,r),N(Vn,null),r=N0(u),R(Vn),N(Vn,r)}function et(){R(Vn),R(Gs),R(Zn)}function xt(r){r.memoizedState!==null&&N(yu,r);var u=Vn.current,g=tr(u,r.type);u!==g&&(N(Gs,r),N(Vn,g))}function Ht(r){Gs.current===r&&(R(Vn),R(Gs)),yu.current===r&&(R(yu),vn?sl._currentValue=al:sl._currentValue2=al)}function gt(r){var u=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Pa(Ne(u,r)),Xc}function Ta(r,u){if(!Xt)throw Error(s(175));tp(r.stateNode,r.type,r.memoizedProps,u,r)||gt(r,!0)}function Ca(r){for(kn=r.return;kn;)switch(kn.tag){case 5:case 31:case 13:_i=!1;return;case 27:case 3:_i=!0;return;default:kn=kn.return}}function qe(r){if(!Xt||r!==kn)return!1;if(!pt)return Ca(r),pt=!0,!1;var u=r.tag;if(On?u!==3&&u!==27&&(u!==5||ar(r.type)&&!vi(r.type,r.memoizedProps))&&Qt&&gt(r):u!==3&&(u!==5||ar(r.type)&&!vi(r.type,r.memoizedProps))&&Qt&&gt(r),Ca(r),u===13){if(!Xt)throw Error(s(316));if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Qt=Gf(r)}else if(u===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(317));Qt=ip(r)}else Qt=On&&u===27?K0(r.type,Qt):kn?F0(r.stateNode):null;return!0}function Ba(){Xt&&(Qt=kn=null,pt=!1)}function na(){var r=ls;return r!==null&&(Li===null?Li=r:Li.push.apply(Li,r),ls=null),r}function Pa(r){ls===null?ls=[r]:ls.push(r)}function ia(r,u,g){vn?(N(ya,u._currentValue),u._currentValue=g):(N(ya,u._currentValue2),u._currentValue2=g)}function ni(r){var u=ya.current;vn?r._currentValue=u:r._currentValue2=u,R(ya)}function Ws(r,u,g){for(;r!==null;){var S=r.alternate;if((r.childLanes&u)!==u?(r.childLanes|=u,S!==null&&(S.childLanes|=u)):S!==null&&(S.childLanes&u)!==u&&(S.childLanes|=u),r===g)break;r=r.return}}function _s(r,u,g,S){var A=r.child;for(A!==null&&(A.return=r);A!==null;){var w=A.dependencies;if(w!==null){var O=A.child;w=w.firstContext;e:for(;w!==null;){var j=w;w=A;for(var le=0;le<u.length;le++)if(j.context===u[le]){w.lanes|=g,j=w.alternate,j!==null&&(j.lanes|=g),Ws(w.return,g,r),S||(O=null);break e}w=j.next}}else if(A.tag===18){if(O=A.return,O===null)throw Error(s(341));O.lanes|=g,w=O.alternate,w!==null&&(w.lanes|=g),Ws(O,g,r),O=null}else O=A.child;if(O!==null)O.return=A;else for(O=A;O!==null;){if(O===r){O=null;break}if(A=O.sibling,A!==null){A.return=O.return,O=A;break}O=O.return}A=O}}function dn(r,u,g,S){r=null;for(var A=u,w=!1;A!==null;){if(!w){if((A.flags&524288)!==0)w=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var O=A.alternate;if(O===null)throw Error(s(387));if(O=O.memoizedProps,O!==null){var j=A.type;Sn(A.pendingProps.value,O.value)||(r!==null?r.push(j):r=[j])}}else if(A===yu.current){if(O=A.alternate,O===null)throw Error(s(387));O.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(r!==null?r.push(sl):r=[sl])}A=A.return}r!==null&&_s(u,r,g,S),u.flags|=262144}function $s(r){for(r=r.firstContext;r!==null;){var u=r.context;if(!Sn(vn?u._currentValue:u._currentValue2,r.memoizedValue))return!0;r=r.next}return!1}function Aa(r){qt=r,Ua=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function gn(r){return Vu(qt,r)}function Hn(r,u){return qt===null&&Aa(r),Vu(r,u)}function Vu(r,u){var g=vn?u._currentValue:u._currentValue2;if(u={context:u,memoizedValue:g,next:null},Ua===null){if(r===null)throw Error(s(308));Ua=u,r.dependencies={lanes:0,firstContext:u},r.flags|=524288}else Ua=Ua.next=u;return g}function Rl(){return{controller:new yp,data:new Map,refCount:0}}function eo(r){r.refCount--,r.refCount===0&&jn(Xm,function(){r.controller.abort()})}function qa(){}function aa(r){r!==zt&&r.next===null&&(zt===null?vu=zt=r:zt=zt.next=r),va=!0,ci||(ci=!0,ai())}function Ss(r,u){if(!Qc&&va){Qc=!0;do for(var g=!1,S=vu;S!==null;){if(r!==0){var A=S.pendingLanes;if(A===0)var w=0;else{var O=S.suspendedLanes,j=S.pingedLanes;w=(1<<31-Ii(42|r)+1)-1,w&=A&~(O&~j),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(g=!0,wa(S,w))}else w=mt,w=I(S,S===ut?w:0,S.cancelPendingCommit!==null||S.timeoutHandle!==Ui),(w&3)===0||L(S,w)||(g=!0,wa(S,w));S=S.next}while(g);Qc=!1}}function bs(){ju()}function ju(){va=ci=!1;var r=0;Ao!==0&&il()&&(r=Ao);for(var u=ui(),g=null,S=vu;S!==null;){var A=S.next,w=to(S,u);w===0?(S.next=null,g===null?vu=A:g.next=A,A===null&&(zt=g)):(g=S,(r!==0||(w&3)!==0)&&(va=!0)),S=A}Nn!==0&&Nn!==5||Ss(r),Ao!==0&&(Ao=0)}function to(r,u){for(var g=r.suspendedLanes,S=r.pingedLanes,A=r.expirationTimes,w=r.pendingLanes&-62914561;0<w;){var O=31-Ii(w),j=1<<O,le=A[O];le===-1?((j&g)===0||(j&S)!==0)&&(A[O]=U(j,u)):le<=u&&(r.expiredLanes|=j),w&=~j}if(u=ut,g=mt,g=I(r,r===u?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==Ui),S=r.callbackNode,g===0||r===u&&(It===2||It===9)||r.cancelPendingCommit!==null)return S!==null&&S!==null&&jc(S),r.callbackNode=null,r.callbackPriority=0;if((g&3)===0||L(r,g)){if(u=g&-g,u===r.callbackPriority)return u;switch(S!==null&&jc(S),ae(g)){case 2:case 8:g=mp;break;case 32:g=pu;break;case 268435456:g=Fc;break;default:g=pu}return S=ii.bind(null,r),g=hu(g,S),r.callbackPriority=u,r.callbackNode=g,u}return S!==null&&S!==null&&jc(S),r.callbackPriority=2,r.callbackNode=null,2}function ii(r,u){if(Nn!==0&&Nn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var g=r.callbackNode;if(ns()&&r.callbackNode!==g)return null;var S=mt;return S=I(r,r===ut?S:0,r.cancelPendingCommit!==null||r.timeoutHandle!==Ui),S===0?null:(Da(r,S,u),to(r,ui()),r.callbackNode!=null&&r.callbackNode===g?ii.bind(null,r):null)}function wa(r,u){if(ns())return null;Da(r,u,!0)}function ai(){xf?Ef(function(){(dt&6)!==0?hu(Yc,bs):ju()}):hu(Yc,bs)}function Ir(){if(Ao===0){var r=Hs;r===0&&(r=Vc,Vc<<=1,(Vc&261888)===0&&(Vc=256)),Ao=r}return Ao}function Id(r,u){if(or===null){var g=or=[];Zf=0,Hs=Ir(),Ln={status:"pending",value:void 0,then:function(S){g.push(S)}}}return Zf++,u.then(ce,ce),u}function ce(){if(--Zf===0&&or!==null){Ln!==null&&(Ln.status="fulfilled");var r=or;or=null,Hs=0,Ln=null;for(var u=0;u<r.length;u++)(0,r[u])()}}function ge(r,u){var g=[],S={status:"pending",value:null,reason:null,then:function(A){g.push(A)}};return r.then(function(){S.status="fulfilled",S.value=u;for(var A=0;A<g.length;A++)(0,g[A])(u)},function(A){for(S.status="rejected",S.reason=A,A=0;A<g.length;A++)(0,g[A])(void 0)}),S}function ve(){var r=wo.current;return r!==null?r:ut.pooledCache}function He(r,u){u===null?N(wo,wo.current):N(wo,u.pool)}function yt(){var r=ve();return r===null?null:{parent:vn?Zt._currentValue:Zt._currentValue2,pool:r}}function kt(r,u){if(Sn(r,u))return!0;if(typeof r!="object"||r===null||typeof u!="object"||u===null)return!1;var g=Object.keys(r),S=Object.keys(u);if(g.length!==S.length)return!1;for(S=0;S<g.length;S++){var A=g[S];if(!Jm.call(u,A)||!Sn(r[A],u[A]))return!1}return!0}function yn(r){return r=r.status,r==="fulfilled"||r==="rejected"}function zn(r,u,g){switch(g=r[g],g===void 0?r.push(u):g!==u&&(u.then(qa,qa),u=g),u.status){case"fulfilled":return u.value;case"rejected":throw r=u.reason,Pi(r),r;default:if(typeof u.status=="string")u.then(qa,qa);else{if(r=ut,r!==null&&100<r.shellSuspendCounter)throw Error(s(482));r=u,r.status="pending",r.then(function(S){if(u.status==="pending"){var A=u;A.status="fulfilled",A.value=S}},function(S){if(u.status==="pending"){var A=u;A.status="rejected",A.reason=S}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw r=u.reason,Pi(r),r}throw Si=u,Gn}}function hi(r){try{var u=r._init;return u(r._payload)}catch(g){throw g!==null&&typeof g=="object"&&typeof g.then=="function"?(Si=g,Gn):g}}function Bi(){if(Si===null)throw Error(s(459));var r=Si;return Si=null,r}function Pi(r){if(r===Gn||r===Sa)throw Error(s(483))}function Ra(r){var u=cl;return cl+=1,Ro===null&&(Ro=[]),zn(Ro,r,u)}function Na(r,u){u=u.props.ref,r.ref=u!==void 0?u:null}function no(r,u){throw u.$$typeof===Wo?Error(s(525)):(r=Object.prototype.toString.call(u),Error(s(31,r==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":r)))}function Or(r){function u(ie,Z){if(r){var oe=ie.deletions;oe===null?(ie.deletions=[Z],ie.flags|=16):oe.push(Z)}}function g(ie,Z){if(!r)return null;for(;Z!==null;)u(ie,Z),Z=Z.sibling;return null}function S(ie){for(var Z=new Map;ie!==null;)ie.key!==null?Z.set(ie.key,ie):Z.set(ie.index,ie),ie=ie.sibling;return Z}function A(ie,Z){return ie=Ki(ie,Z),ie.index=0,ie.sibling=null,ie}function w(ie,Z,oe){return ie.index=oe,r?(oe=ie.alternate,oe!==null?(oe=oe.index,oe<Z?(ie.flags|=67108866,Z):oe):(ie.flags|=67108866,Z)):(ie.flags|=1048576,Z)}function O(ie){return r&&ie.alternate===null&&(ie.flags|=67108866),ie}function j(ie,Z,oe,Ee){return Z===null||Z.tag!==6?(Z=df(oe,ie.mode,Ee),Z.return=ie,Z):(Z=A(Z,oe),Z.return=ie,Z)}function le(ie,Z,oe,Ee){var Ye=oe.type;return Ye===el?Ae(ie,Z,oe.props.children,Ee,oe.key):Z!==null&&(Z.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===yi&&hi(Ye)===Z.type)?(Z=A(Z,oe.props),Na(Z,oe),Z.return=ie,Z):(Z=zs(oe.type,oe.key,oe.props,null,ie.mode,Ee),Na(Z,oe),Z.return=ie,Z)}function ye(ie,Z,oe,Ee){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==oe.containerInfo||Z.stateNode.implementation!==oe.implementation?(Z=hf(oe,ie.mode,Ee),Z.return=ie,Z):(Z=A(Z,oe.children||[]),Z.return=ie,Z)}function Ae(ie,Z,oe,Ee,Ye){return Z===null||Z.tag!==7?(Z=da(oe,ie.mode,Ee,Ye),Z.return=ie,Z):(Z=A(Z,oe),Z.return=ie,Z)}function _e(ie,Z,oe){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=df(""+Z,ie.mode,oe),Z.return=ie,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case is:return oe=zs(Z.type,Z.key,Z.props,null,ie.mode,oe),Na(oe,Z),oe.return=ie,oe;case $o:return Z=hf(Z,ie.mode,oe),Z.return=ie,Z;case yi:return Z=hi(Z),_e(ie,Z,oe)}if(xo(Z)||v(Z))return Z=da(Z,ie.mode,oe,null),Z.return=ie,Z;if(typeof Z.then=="function")return _e(ie,Ra(Z),oe);if(Z.$$typeof===fa)return _e(ie,Hn(ie,Z),oe);no(ie,Z)}return null}function Ue(ie,Z,oe,Ee){var Ye=Z!==null?Z.key:null;if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Ye!==null?null:j(ie,Z,""+oe,Ee);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case is:return oe.key===Ye?le(ie,Z,oe,Ee):null;case $o:return oe.key===Ye?ye(ie,Z,oe,Ee):null;case yi:return oe=hi(oe),Ue(ie,Z,oe,Ee)}if(xo(oe)||v(oe))return Ye!==null?null:Ae(ie,Z,oe,Ee,null);if(typeof oe.then=="function")return Ue(ie,Z,Ra(oe),Ee);if(oe.$$typeof===fa)return Ue(ie,Z,Hn(ie,oe),Ee);no(ie,oe)}return null}function tt(ie,Z,oe,Ee,Ye){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ie=ie.get(oe)||null,j(Z,ie,""+Ee,Ye);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case is:return ie=ie.get(Ee.key===null?oe:Ee.key)||null,le(Z,ie,Ee,Ye);case $o:return ie=ie.get(Ee.key===null?oe:Ee.key)||null,ye(Z,ie,Ee,Ye);case yi:return Ee=hi(Ee),tt(ie,Z,oe,Ee,Ye)}if(xo(Ee)||v(Ee))return ie=ie.get(oe)||null,Ae(Z,ie,Ee,Ye,null);if(typeof Ee.then=="function")return tt(ie,Z,oe,Ra(Ee),Ye);if(Ee.$$typeof===fa)return tt(ie,Z,oe,Hn(Z,Ee),Ye);no(Z,Ee)}return null}function Yn(ie,Z,oe,Ee){for(var Ye=null,cn=null,Ke=Z,Et=Z=0,Fn=null;Ke!==null&&Et<oe.length;Et++){Ke.index>Et?(Fn=Ke,Ke=null):Fn=Ke.sibling;var Rt=Ue(ie,Ke,oe[Et],Ee);if(Rt===null){Ke===null&&(Ke=Fn);break}r&&Ke&&Rt.alternate===null&&u(ie,Ke),Z=w(Rt,Z,Et),cn===null?Ye=Rt:cn.sibling=Rt,cn=Rt,Ke=Fn}if(Et===oe.length)return g(ie,Ke),pt&&Le(ie,Et),Ye;if(Ke===null){for(;Et<oe.length;Et++)Ke=_e(ie,oe[Et],Ee),Ke!==null&&(Z=w(Ke,Z,Et),cn===null?Ye=Ke:cn.sibling=Ke,cn=Ke);return pt&&Le(ie,Et),Ye}for(Ke=S(Ke);Et<oe.length;Et++)Fn=tt(Ke,ie,Et,oe[Et],Ee),Fn!==null&&(r&&Fn.alternate!==null&&Ke.delete(Fn.key===null?Et:Fn.key),Z=w(Fn,Z,Et),cn===null?Ye=Fn:cn.sibling=Fn,cn=Fn);return r&&Ke.forEach(function(Ea){return u(ie,Ea)}),pt&&Le(ie,Et),Ye}function pr(ie,Z,oe,Ee){if(oe==null)throw Error(s(151));for(var Ye=null,cn=null,Ke=Z,Et=Z=0,Fn=null,Rt=oe.next();Ke!==null&&!Rt.done;Et++,Rt=oe.next()){Ke.index>Et?(Fn=Ke,Ke=null):Fn=Ke.sibling;var Ea=Ue(ie,Ke,Rt.value,Ee);if(Ea===null){Ke===null&&(Ke=Fn);break}r&&Ke&&Ea.alternate===null&&u(ie,Ke),Z=w(Ea,Z,Et),cn===null?Ye=Ea:cn.sibling=Ea,cn=Ea,Ke=Fn}if(Rt.done)return g(ie,Ke),pt&&Le(ie,Et),Ye;if(Ke===null){for(;!Rt.done;Et++,Rt=oe.next())Rt=_e(ie,Rt.value,Ee),Rt!==null&&(Z=w(Rt,Z,Et),cn===null?Ye=Rt:cn.sibling=Rt,cn=Rt);return pt&&Le(ie,Et),Ye}for(Ke=S(Ke);!Rt.done;Et++,Rt=oe.next())Rt=tt(Ke,ie,Et,Rt.value,Ee),Rt!==null&&(r&&Rt.alternate!==null&&Ke.delete(Rt.key===null?Et:Rt.key),Z=w(Rt,Z,Et),cn===null?Ye=Rt:cn.sibling=Rt,cn=Rt);return r&&Ke.forEach(function(Qm){return u(ie,Qm)}),pt&&Le(ie,Et),Ye}function ko(ie,Z,oe,Ee){if(typeof oe=="object"&&oe!==null&&oe.type===el&&oe.key===null&&(oe=oe.props.children),typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case is:e:{for(var Ye=oe.key;Z!==null;){if(Z.key===Ye){if(Ye=oe.type,Ye===el){if(Z.tag===7){g(ie,Z.sibling),Ee=A(Z,oe.props.children),Ee.return=ie,ie=Ee;break e}}else if(Z.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===yi&&hi(Ye)===Z.type){g(ie,Z.sibling),Ee=A(Z,oe.props),Na(Ee,oe),Ee.return=ie,ie=Ee;break e}g(ie,Z);break}else u(ie,Z);Z=Z.sibling}oe.type===el?(Ee=da(oe.props.children,ie.mode,Ee,oe.key),Ee.return=ie,ie=Ee):(Ee=zs(oe.type,oe.key,oe.props,null,ie.mode,Ee),Na(Ee,oe),Ee.return=ie,ie=Ee)}return O(ie);case $o:e:{for(Ye=oe.key;Z!==null;){if(Z.key===Ye)if(Z.tag===4&&Z.stateNode.containerInfo===oe.containerInfo&&Z.stateNode.implementation===oe.implementation){g(ie,Z.sibling),Ee=A(Z,oe.children||[]),Ee.return=ie,ie=Ee;break e}else{g(ie,Z);break}else u(ie,Z);Z=Z.sibling}Ee=hf(oe,ie.mode,Ee),Ee.return=ie,ie=Ee}return O(ie);case yi:return oe=hi(oe),ko(ie,Z,oe,Ee)}if(xo(oe))return Yn(ie,Z,oe,Ee);if(v(oe)){if(Ye=v(oe),typeof Ye!="function")throw Error(s(150));return oe=Ye.call(oe),pr(ie,Z,oe,Ee)}if(typeof oe.then=="function")return ko(ie,Z,Ra(oe),Ee);if(oe.$$typeof===fa)return ko(ie,Z,Hn(ie,oe),Ee);no(ie,oe)}return typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint"?(oe=""+oe,Z!==null&&Z.tag===6?(g(ie,Z.sibling),Ee=A(Z,oe),Ee.return=ie,ie=Ee):(g(ie,Z),Ee=df(oe,ie.mode,Ee),Ee.return=ie,ie=Ee),O(ie)):g(ie,Z)}return function(ie,Z,oe,Ee){try{cl=0;var Ye=ko(ie,Z,oe,Ee);return Ro=null,Ye}catch(Ke){if(Ke===Gn||Ke===Sa)throw Ke;var cn=t(29,Ke,null,ie.mode);return cn.lanes=Ee,cn.return=ie,cn}finally{}}}function At(){for(var r=us,u=dl=us=0;u<r;){var g=$n[u];$n[u++]=null;var S=$n[u];$n[u++]=null;var A=$n[u];$n[u++]=null;var w=$n[u];if($n[u++]=null,S!==null&&A!==null){var O=S.pending;O===null?A.next=A:(A.next=O.next,O.next=A),S.pending=A}w!==0&&xs(g,A,w)}}function Un(r,u,g,S){$n[us++]=r,$n[us++]=u,$n[us++]=g,$n[us++]=S,dl|=S,r.lanes|=S,r=r.alternate,r!==null&&(r.lanes|=S)}function Ri(r,u,g,S){return Un(r,u,g,S),Tn(r)}function io(r,u){return Un(r,null,null,u),Tn(r)}function xs(r,u,g){r.lanes|=g;var S=r.alternate;S!==null&&(S.lanes|=g);for(var A=!1,w=r.return;w!==null;)w.childLanes|=g,S=w.alternate,S!==null&&(S.childLanes|=g),w.tag===22&&(r=w.stateNode,r===null||r._visibility&1||(A=!0)),r=w,w=w.return;return r.tag===3?(w=r.stateNode,A&&u!==null&&(A=31-Ii(g),r=w.hiddenUpdates,S=r[A],S===null?r[A]=[u]:S.push(u),u.lane=g|536870912),w):null}function Tn(r){if(50<wt)throw wt=0,Tu=null,Error(s(185));for(var u=r.return;u!==null;)r=u,u=r.return;return r.tag===3?r.stateNode:null}function si(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ao(r,u){r=r.updateQueue,u.updateQueue===r&&(u.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Va(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function so(r,u,g){var S=r.updateQueue;if(S===null)return null;if(S=S.shared,(dt&2)!==0){var A=S.pending;return A===null?u.next=u:(u.next=A.next,A.next=u),S.pending=u,u=Tn(r),xs(r,null,g),u}return Un(r,S,u,g),Tn(r)}function kr(r,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194048)!==0)){var S=u.lanes;S&=r.pendingLanes,g|=S,u.lanes=g,B(r,g)}}function Yu(r,u){var g=r.updateQueue,S=r.alternate;if(S!==null&&(S=S.updateQueue,g===S)){var A=null,w=null;if(g=g.firstBaseUpdate,g!==null){do{var O={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};w===null?A=w=O:w=w.next=O,g=g.next}while(g!==null);w===null?A=w=u:w=w.next=u}else A=w=u;g={baseState:S.baseState,firstBaseUpdate:A,lastBaseUpdate:w,shared:S.shared,callbacks:S.callbacks},r.updateQueue=g;return}r=g.lastBaseUpdate,r===null?g.firstBaseUpdate=u:r.next=u,g.lastBaseUpdate=u}function Es(){if(Wc){var r=Ln;if(r!==null)throw r}}function Ho(r,u,g,S){Wc=!1;var A=r.updateQueue;Qi=!1;var w=A.firstBaseUpdate,O=A.lastBaseUpdate,j=A.shared.pending;if(j!==null){A.shared.pending=null;var le=j,ye=le.next;le.next=null,O===null?w=ye:O.next=ye,O=le;var Ae=r.alternate;Ae!==null&&(Ae=Ae.updateQueue,j=Ae.lastBaseUpdate,j!==O&&(j===null?Ae.firstBaseUpdate=ye:j.next=ye,Ae.lastBaseUpdate=le))}if(w!==null){var _e=A.baseState;O=0,Ae=ye=le=null,j=w;do{var Ue=j.lane&-536870913,tt=Ue!==j.lane;if(tt?(mt&Ue)===Ue:(S&Ue)===Ue){Ue!==0&&Ue===Hs&&(Wc=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Yn=r,pr=j;Ue=u;var ko=g;switch(pr.tag){case 1:if(Yn=pr.payload,typeof Yn=="function"){_e=Yn.call(ko,_e,Ue);break e}_e=Yn;break e;case 3:Yn.flags=Yn.flags&-65537|128;case 0:if(Yn=pr.payload,Ue=typeof Yn=="function"?Yn.call(ko,_e,Ue):Yn,Ue==null)break e;_e=Ac({},_e,Ue);break e;case 2:Qi=!0}}Ue=j.callback,Ue!==null&&(r.flags|=64,tt&&(r.flags|=8192),tt=A.callbacks,tt===null?A.callbacks=[Ue]:tt.push(Ue))}else tt={lane:Ue,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Ae===null?(ye=Ae=tt,le=_e):Ae=Ae.next=tt,O|=Ue;if(j=j.next,j===null){if(j=A.shared.pending,j===null)break;tt=j,j=tt.next,tt.next=null,A.lastBaseUpdate=tt,A.shared.pending=null}}while(!0);Ae===null&&(le=_e),A.baseState=le,A.firstBaseUpdate=ye,A.lastBaseUpdate=Ae,w===null&&(A.shared.lanes=0),Ps|=O,r.lanes=O,r.memoizedState=_e}}function Bo(r,u){if(typeof r!="function")throw Error(s(191,r));r.call(u)}function Po(r,u){var g=r.callbacks;if(g!==null)for(r.callbacks=null,r=0;r<g.length;r++)Bo(g[r],u)}function Nl(r,u){r=ds,N(No,r),N(fl,u),ds=r|u.baseLanes}function oo(){N(No,ds),N(fl,fl.current)}function Cn(){ds=No.current,R(fl),R(No)}function Ts(r){var u=r.alternate;N(hn,hn.current&1),N(ki,r),bi===null&&(u===null||fl.current!==null||u.memoizedState!==null)&&(bi=r)}function Fu(r){N(hn,hn.current),N(ki,r),bi===null&&(bi=r)}function lo(r){r.tag===22?(N(hn,hn.current),N(ki,r),bi===null&&(bi=r)):qi()}function qi(){N(hn,hn.current),N(ki,ki.current)}function Vi(r){R(ki),bi===r&&(bi=null),R(hn)}function Lr(r){for(var u=r;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||To(g)||Ic(g)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function nn(){throw Error(s(321))}function Od(r,u){if(u===null)return!1;for(var g=0;g<u.length&&g<r.length;g++)if(!Sn(r[g],u[g]))return!1;return!0}function Ml(r,u,g,S,A,w){return Bs=w,at=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Ve.H=r===null||r.memoizedState===null?ln:cs,St=!1,w=g(S,A),St=!1,ot&&(w=ja(u,g,S,A)),Gr(r),w}function Gr(r){Ve.H=Zi;var u=Be!==null&&Be.next!==null;if(Bs=0,$e=Be=at=null,rt=!1,ba=0,Ia=null,u)throw Error(s(300));r===null||Yt||(r=r.dependencies,r!==null&&$s(r)&&(Yt=!0))}function ja(r,u,g,S){at=r;var A=0;do{if(ot&&(Ia=null),ba=0,ot=!1,25<=A)throw Error(s(301));if(A+=1,$e=Be=null,r.updateQueue!=null){var w=r.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Ve.H=Mo,w=u(g,S)}while(ot);return w}function sa(){var r=Ve.H,u=r.useState()[0];return u=typeof u.then=="function"?li(u):u,r=r.useState()[0],(Be!==null?Be.memoizedState:null)!==r&&(at.flags|=1024),u}function Ku(){var r=di!==0;return di=0,r}function kd(r,u,g){u.updateQueue=r.updateQueue,u.flags&=-2053,r.lanes&=~g}function Hr(r){if(rt){for(r=r.memoizedState;r!==null;){var u=r.queue;u!==null&&(u.pending=null),r=r.next}rt=!1}Bs=0,$e=Be=at=null,ot=!1,ba=di=0,Ia=null}function oi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?at.memoizedState=$e=r:$e=$e.next=r,$e}function Kt(){if(Be===null){var r=at.alternate;r=r!==null?r.memoizedState:null}else r=Be.next;var u=$e===null?at.memoizedState:$e.next;if(u!==null)$e=u,Be=r;else{if(r===null)throw at.alternate===null?Error(s(467)):Error(s(310));Be=r,r={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},$e===null?at.memoizedState=$e=r:$e=$e.next=r}return $e}function Ju(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function li(r){var u=ba;return ba+=1,Ia===null&&(Ia=[]),r=zn(Ia,r,u),u=at,($e===null?u.memoizedState:$e.next)===null&&(u=u.alternate,Ve.H=u===null||u.memoizedState===null?ln:cs),r}function Dl(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return li(r);if(r.$$typeof===fa)return gn(r)}throw Error(s(438,String(r)))}function Xu(r){var u=null,g=at.updateQueue;if(g!==null&&(u=g.memoCache),u==null){var S=at.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(u={data:S.data.map(function(A){return A.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),g===null&&(g=Ju(),at.updateQueue=g),g.memoCache=u,g=u.data[u.index],g===void 0)for(g=u.data[u.index]=Array(r),S=0;S<r;S++)g[S]=mf;return u.index++,g}function Ma(r,u){return typeof u=="function"?u(r):u}function Cs(r){var u=Kt();return Qu(u,Be,r)}function Qu(r,u,g){var S=r.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=g;var A=r.baseQueue,w=S.pending;if(w!==null){if(A!==null){var O=A.next;A.next=w.next,w.next=O}u.baseQueue=A=w,S.pending=null}if(w=r.baseState,A===null)r.memoizedState=w;else{u=A.next;var j=O=null,le=null,ye=u,Ae=!1;do{var _e=ye.lane&-536870913;if(_e!==ye.lane?(mt&_e)===_e:(Bs&_e)===_e){var Ue=ye.revertLane;if(Ue===0)le!==null&&(le=le.next={lane:0,revertLane:0,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null}),_e===Hs&&(Ae=!0);else if((Bs&Ue)===Ue){ye=ye.next,Ue===Hs&&(Ae=!0);continue}else _e={lane:0,revertLane:ye.revertLane,gesture:null,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},le===null?(j=le=_e,O=w):le=le.next=_e,at.lanes|=Ue,Ps|=Ue;_e=ye.action,St&&g(w,_e),w=ye.hasEagerState?ye.eagerState:g(w,_e)}else Ue={lane:_e,revertLane:ye.revertLane,gesture:ye.gesture,action:ye.action,hasEagerState:ye.hasEagerState,eagerState:ye.eagerState,next:null},le===null?(j=le=Ue,O=w):le=le.next=Ue,at.lanes|=_e,Ps|=_e;ye=ye.next}while(ye!==null&&ye!==u);if(le===null?O=w:le.next=j,!Sn(w,r.memoizedState)&&(Yt=!0,Ae&&(g=Ln,g!==null)))throw g;r.memoizedState=w,r.baseState=O,r.baseQueue=le,S.lastRenderedState=w}return A===null&&(S.lanes=0),[r.memoizedState,S.dispatch]}function Zu(r){var u=Kt(),g=u.queue;if(g===null)throw Error(s(311));g.lastRenderedReducer=r;var S=g.dispatch,A=g.pending,w=u.memoizedState;if(A!==null){g.pending=null;var O=A=A.next;do w=r(w,O.action),O=O.next;while(O!==A);Sn(w,u.memoizedState)||(Yt=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),g.lastRenderedState=w}return[w,S]}function qo(r,u,g){var S=at,A=Kt(),w=pt;if(w){if(g===void 0)throw Error(s(407));g=g()}else g=u();var O=!Sn((Be||A).memoizedState,g);if(O&&(A.memoizedState=g,Yt=!0),A=A.queue,Il(Gd.bind(null,S,A,r),[r]),A.getSnapshot!==u||O||$e!==null&&$e.memoizedState.tag&1){if(S.flags|=2048,ji(9,{destroy:void 0},Ld.bind(null,S,A,g,u),null),ut===null)throw Error(s(349));w||(Bs&127)!==0||Qh(S,u,g)}return g}function Qh(r,u,g){r.flags|=16384,r={getSnapshot:u,value:g},u=at.updateQueue,u===null?(u=Ju(),at.updateQueue=u,u.stores=[r]):(g=u.stores,g===null?u.stores=[r]:g.push(r))}function Ld(r,u,g,S){u.value=g,u.getSnapshot=S,Wu(u)&&Zh(r)}function Gd(r,u,g){return g(function(){Wu(u)&&Zh(r)})}function Wu(r){var u=r.getSnapshot;r=r.value;try{var g=u();return!Sn(r,g)}catch{return!0}}function Zh(r){var u=io(r,2);u!==null&&sn(u,r,2)}function Hd(r){var u=oi();if(typeof r=="function"){var g=r;if(r=g(),St){Me(!0);try{g()}finally{Me(!1)}}}return u.memoizedState=u.baseState=r,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:r},u}function Br(r,u,g,S){return r.baseState=g,Qu(r,Be,typeof S=="function"?S:Ma)}function As(r,u,g,S,A){if(oc(r))throw Error(s(485));if(r=u.action,r!==null){var w={payload:A,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(O){w.listeners.push(O)}};Ve.T!==null?g(!0):w.isTransition=!1,S(w),g=u.pending,g===null?(w.next=u.pending=w,$u(u,w)):(w.next=g.next,u.pending=g.next=w)}}function $u(r,u){var g=u.action,S=u.payload,A=r.state;if(u.isTransition){var w=Ve.T,O={};Ve.T=O;try{var j=g(A,S),le=Ve.S;le!==null&&le(O,j),ec(r,u,j)}catch(ye){ro(r,u,ye)}finally{w!==null&&O.types!==null&&(w.types=O.types),Ve.T=w}}else try{w=g(A,S),ec(r,u,w)}catch(ye){ro(r,u,ye)}}function ec(r,u,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(S){Vo(r,u,S)},function(S){return ro(r,u,S)}):Vo(r,u,g)}function Vo(r,u,g){u.status="fulfilled",u.value=g,Bd(u),r.state=g,u=r.pending,u!==null&&(g=u.next,g===u?r.pending=null:(g=g.next,u.next=g,$u(r,g)))}function ro(r,u,g){var S=r.pending;if(r.pending=null,S!==null){S=S.next;do u.status="rejected",u.reason=g,Bd(u),u=u.next;while(u!==S)}r.action=null}function Bd(r){r=r.listeners;for(var u=0;u<r.length;u++)(0,r[u])()}function tc(r,u){return u}function Pd(r,u){if(pt){var g=ut.formState;if(g!==null){e:{var S=at;if(pt){if(Qt){var A=Y0(Qt,_i);if(A){Qt=F0(A),S=If(A);break e}}gt(S)}S=!1}S&&(u=g[0])}}g=oi(),g.memoizedState=g.baseState=u,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tc,lastRenderedState:u},g.queue=S,g=i0.bind(null,at,S),S.dispatch=g,S=Hd(!1);var w=sc.bind(null,at,!1,S.queue);return S=oi(),A={state:u,dispatch:null,action:r,pending:null},S.queue=A,g=As.bind(null,at,A,w,g),A.dispatch=g,S.memoizedState=r,[u,g,!1]}function zl(r){var u=Kt();return Ya(u,Be,r)}function Ya(r,u,g){if(u=Qu(r,u,tc)[0],r=Cs(Ma)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var S=li(u)}catch(O){throw O===Gn?Sa:O}else S=u;u=Kt();var A=u.queue,w=A.dispatch;return g!==u.memoizedState&&(at.flags|=2048,ji(9,{destroy:void 0},qd.bind(null,A,g),null)),[S,w,r]}function qd(r,u){r.action=u}function Ul(r){var u=Kt(),g=Be;if(g!==null)return Ya(u,g,r);Kt(),u=u.memoizedState,g=Kt();var S=g.queue.dispatch;return g.memoizedState=r,[u,S,!1]}function ji(r,u,g,S){return r={tag:r,create:g,deps:S,inst:u,next:null},u=at.updateQueue,u===null&&(u=Ju(),at.updateQueue=u),g=u.lastEffect,g===null?u.lastEffect=r.next=r:(S=g.next,g.next=r,r.next=S,u.lastEffect=r),r}function nc(){return Kt().memoizedState}function jo(r,u,g,S){var A=oi();at.flags|=r,A.memoizedState=ji(1|u,{destroy:void 0},g,S===void 0?null:S)}function Pr(r,u,g,S){var A=Kt();S=S===void 0?null:S;var w=A.memoizedState.inst;Be!==null&&S!==null&&Od(S,Be.memoizedState.deps)?A.memoizedState=ji(u,w,g,S):(at.flags|=r,A.memoizedState=ji(1|u,w,g,S))}function qr(r,u){jo(8390656,8,r,u)}function Il(r,u){Pr(2048,8,r,u)}function Wh(r){at.flags|=4;var u=at.updateQueue;if(u===null)u=Ju(),at.updateQueue=u,u.events=[r];else{var g=u.events;g===null?u.events=[r]:g.push(r)}}function pi(r){var u=Kt().memoizedState;return Wh({ref:u,nextImpl:r}),function(){if((dt&2)!==0)throw Error(s(440));return u.impl.apply(void 0,arguments)}}function uo(r,u){return Pr(4,2,r,u)}function Vr(r,u){return Pr(4,4,r,u)}function Ol(r,u){if(typeof u=="function"){r=r();var g=u(r);return function(){typeof g=="function"?g():u(null)}}if(u!=null)return r=r(),u.current=r,function(){u.current=null}}function $h(r,u,g){g=g!=null?g.concat([r]):null,Pr(4,4,Ol.bind(null,u,r),g)}function jr(){}function ic(r,u){var g=Kt();u=u===void 0?null:u;var S=g.memoizedState;return u!==null&&Od(u,S[1])?S[0]:(g.memoizedState=[r,u],r)}function kl(r,u){var g=Kt();u=u===void 0?null:u;var S=g.memoizedState;if(u!==null&&Od(u,S[1]))return S[0];if(S=r(),St){Me(!0);try{r()}finally{Me(!1)}}return g.memoizedState=[S,u],S}function Ll(r,u,g){return g===void 0||(Bs&1073741824)!==0&&(mt&261930)===0?r.memoizedState=u:(r.memoizedState=g,r=Ns(),at.lanes|=r,Ps|=r,g)}function Vd(r,u,g,S){return Sn(g,u)?g:fl.current!==null?(r=Ll(r,g,S),Sn(r,u)||(Yt=!0),r):(Bs&42)===0||(Bs&1073741824)!==0&&(mt&261930)===0?(Yt=!0,r.memoizedState=g):(r=Ns(),at.lanes|=r,Ps|=r,u)}function e0(r,u,g,S,A){var w=ha();ht(w!==0&&8>w?w:8);var O=Ve.T,j={};Ve.T=j,sc(r,!1,u,g);try{var le=A(),ye=Ve.S;if(ye!==null&&ye(j,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Ae=ge(le,S);Yr(r,u,Ae,Jt(r))}else Yr(r,u,S,Jt(r))}catch(_e){Yr(r,u,{then:function(){},status:"rejected",reason:_e},Jt())}finally{ht(w),O!==null&&j.types!==null&&(O.types=j.types),Ve.T=O}}function t0(r){var u=r.memoizedState;if(u!==null)return u;u={memoizedState:al,baseState:al,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:al},next:null};var g={};return u.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:g},next:null},r.memoizedState=u,r=r.alternate,r!==null&&(r.memoizedState=u),u}function jd(){return gn(sl)}function ac(){return Kt().memoizedState}function n0(){return Kt().memoizedState}function Gm(r){for(var u=r.return;u!==null;){switch(u.tag){case 24:case 3:var g=Jt();r=Va(g);var S=so(u,r,g);S!==null&&(sn(S,u,g),kr(S,u,g)),u={cache:Rl()},r.payload=u;return}u=u.return}}function Hm(r,u,g){var S=Jt();g={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},oc(r)?a0(u,g):(g=Ri(r,u,g,S),g!==null&&(sn(g,r,S),s0(g,u,S)))}function i0(r,u,g){var S=Jt();Yr(r,u,g,S)}function Yr(r,u,g,S){var A={lane:S,revertLane:0,gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null};if(oc(r))a0(u,A);else{var w=r.alternate;if(r.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var O=u.lastRenderedState,j=w(O,g);if(A.hasEagerState=!0,A.eagerState=j,Sn(j,O))return Un(r,u,A,0),ut===null&&At(),!1}catch{}finally{}if(g=Ri(r,u,A,S),g!==null)return sn(g,r,S),s0(g,u,S),!0}return!1}function sc(r,u,g,S){if(S={lane:2,revertLane:Ir(),gesture:null,action:S,hasEagerState:!1,eagerState:null,next:null},oc(r)){if(u)throw Error(s(479))}else u=Ri(r,g,S,2),u!==null&&sn(u,r,2)}function oc(r){var u=r.alternate;return r===at||u!==null&&u===at}function a0(r,u){ot=rt=!0;var g=r.pending;g===null?u.next=u:(u.next=g.next,g.next=u),r.pending=u}function s0(r,u,g){if((g&4194048)!==0){var S=u.lanes;S&=r.pendingLanes,g|=S,u.lanes=g,B(r,g)}}function Yd(r,u,g,S){u=r.memoizedState,g=g(S,u),g=g==null?u:Ac({},u,g),r.memoizedState=g,r.lanes===0&&(r.updateQueue.baseState=g)}function lc(r,u,g,S,A,w,O){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(S,w,O):u.prototype&&u.prototype.isPureReactComponent?!kt(g,S)||!kt(A,w):!0}function o0(r,u,g,S){r=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,S),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,S),u.state!==r&&_u.enqueueReplaceState(u,u.state,null)}function Yo(r,u){var g=u;if("ref"in u){g={};for(var S in u)S!=="ref"&&(g[S]=u[S])}if(r=r.defaultProps){g===u&&(g=Ac({},g));for(var A in r)g[A]===void 0&&(g[A]=r[A])}return g}function rc(r,u){try{var g=r.onUncaughtError;g(u.value,{componentStack:u.stack})}catch(S){setTimeout(function(){throw S})}}function Fd(r,u,g){try{var S=r.onCaughtError;S(g.value,{componentStack:g.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function Kd(r,u,g){return g=Va(g),g.tag=3,g.payload={element:null},g.callback=function(){rc(r,u)},g}function l0(r){return r=Va(r),r.tag=3,r}function r0(r,u,g,S){var A=g.type.getDerivedStateFromError;if(typeof A=="function"){var w=S.value;r.payload=function(){return A(w)},r.callback=function(){Fd(u,g,S)}}var O=g.stateNode;O!==null&&typeof O.componentDidCatch=="function"&&(r.callback=function(){Fd(u,g,S),typeof A!="function"&&(qs===null?qs=new Set([this]):qs.add(this));var j=S.stack;this.componentDidCatch(S.value,{componentStack:j!==null?j:""})})}function Bm(r,u,g,S,A){if(g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(u=g.alternate,u!==null&&dn(u,g,A,!0),g=ki.current,g!==null){switch(g.tag){case 31:case 13:return bi===null?Jl():g.alternate===null&&un===0&&(un=3),g.flags&=-257,g.flags|=65536,g.lanes=A,S===rs?g.flags|=16384:(u=g.updateQueue,u===null?g.updateQueue=new Set([S]):u.add(S),Zl(r,S,A)),!1;case 22:return g.flags|=65536,S===rs?g.flags|=16384:(u=g.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([S])},g.updateQueue=u):(g=u.retryQueue,g===null?u.retryQueue=new Set([S]):g.add(S)),Zl(r,S,A)),!1}throw Error(s(435,g.tag))}return Zl(r,S,A),Jl(),!1}if(pt)return u=ki.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=A,S!==Xc&&(r=Error(s(422),{cause:S}),Pa(Ne(r,g)))):(S!==Xc&&(u=Error(s(423),{cause:S}),Pa(Ne(u,g))),r=r.current.alternate,r.flags|=65536,A&=-A,r.lanes|=A,S=Ne(S,g),A=Kd(r.stateNode,S,A),Yu(r,A),un!==4&&(un=2)),!1;var w=Error(s(520),{cause:S});if(w=Ne(w,g),bu===null?bu=[w]:bu.push(w),un!==4&&(un=2),u===null)return!0;S=Ne(S,g),g=u;do{switch(g.tag){case 3:return g.flags|=65536,r=A&-A,g.lanes|=r,r=Kd(g.stateNode,S,r),Yu(g,r),!1;case 1:if(u=g.type,w=g.stateNode,(g.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qs===null||!qs.has(w))))return g.flags|=65536,A&=-A,g.lanes|=A,A=l0(A),r0(A,r,g,S),Yu(g,A),!1}g=g.return}while(g!==null);return!1}function Xn(r,u,g,S){u.child=r===null?Wf(u,null,g,S):Wn(u,r.child,g,S)}function u0(r,u,g,S,A){g=g.render;var w=u.ref;if("ref"in S){var O={};for(var j in S)j!=="ref"&&(O[j]=S[j])}else O=S;return Aa(u),S=Ml(r,u,g,O,w,A),j=Ku(),r!==null&&!Yt?(kd(r,u,A),Fa(r,u,A)):(pt&&j&&W(u),u.flags|=1,Xn(r,u,S,A),u.child)}function c0(r,u,g,S,A){if(r===null){var w=g.type;return typeof w=="function"&&!Qo(w)&&w.defaultProps===void 0&&g.compare===null?(u.tag=15,u.type=w,d0(r,u,w,S,A)):(r=zs(g.type,null,S,u,u.mode,A),r.ref=u.ref,r.return=u,u.child=r)}if(w=r.child,!Kr(r,A)){var O=w.memoizedProps;if(g=g.compare,g=g!==null?g:kt,g(O,S)&&r.ref===u.ref)return Fa(r,u,A)}return u.flags|=1,r=Ki(w,S),r.ref=u.ref,r.return=u,u.child=r}function d0(r,u,g,S,A){if(r!==null){var w=r.memoizedProps;if(kt(w,S)&&r.ref===u.ref)if(Yt=!1,u.pendingProps=S=w,Kr(r,A))(r.flags&131072)!==0&&(Yt=!0);else return u.lanes=r.lanes,Fa(r,u,A)}return cc(r,u,g,S,A)}function f0(r,u,g,S){var A=S.children,w=r!==null?r.memoizedState:null;if(r===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),S.mode==="hidden"){if((u.flags&128)!==0){if(w=w!==null?w.baseLanes|g:g,r!==null){for(S=u.child=r.child,A=0;S!==null;)A=A|S.lanes|S.childLanes,S=S.sibling;S=A&~w}else S=0,u.child=null;return Gl(r,u,w,g,S)}if((g&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},r!==null&&He(u,w!==null?w.cachePool:null),w!==null?Nl(u,w):oo(),lo(u);else return S=u.lanes=536870912,Gl(r,u,w!==null?w.baseLanes|g:g,g,S)}else w!==null?(He(u,w.cachePool),Nl(u,w),qi(),u.memoizedState=null):(r!==null&&He(u,null),oo(),qi());return Xn(r,u,A,g),u.child}function Fo(r,u){return r!==null&&r.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function Gl(r,u,g,S,A){var w=ve();return w=w===null?null:{parent:vn?Zt._currentValue:Zt._currentValue2,pool:w},u.memoizedState={baseLanes:g,cachePool:w},r!==null&&He(u,null),oo(),lo(u),r!==null&&dn(r,u,S,!0),u.childLanes=A,null}function uc(r,u){return u=co({mode:u.mode,children:u.children},r.mode),u.ref=r.ref,r.child=u,u.return=r,u}function Jd(r,u,g){return Wn(u,r.child,null,g),r=uc(u,u.pendingProps),r.flags|=2,Vi(u),u.memoizedState=null,r}function h0(r,u,g){var S=u.pendingProps,A=(u.flags&128)!==0;if(u.flags&=-129,r===null){if(pt){if(S.mode==="hidden")return r=uc(u,S),u.lanes=536870912,Fo(null,r);if(Fu(u),(r=Qt)?(r=kf(r,_i),r!==null&&(u.memoizedState={dehydrated:r,treeContext:ga!==null?{id:Qn,overflow:za}:null,retryLane:536870912,hydrationErrors:null},g=ff(r),g.return=u,u.child=g,kn=u,Qt=null)):r=null,r===null)throw gt(u);return u.lanes=536870912,null}return uc(u,S)}var w=r.memoizedState;if(w!==null){var O=w.dehydrated;if(Fu(u),A)if(u.flags&256)u.flags&=-257,u=Jd(r,u,g);else if(u.memoizedState!==null)u.child=r.child,u.flags|=128,u=null;else throw Error(s(558));else if(Yt||dn(r,u,g,!1),A=(g&r.childLanes)!==0,Yt||A){if(S=ut,S!==null&&(O=ue(S,g),O!==0&&O!==w.retryLane))throw w.retryLane=O,io(r,O),sn(S,r,O),xi;Jl(),u=Jd(r,u,g)}else r=w.treeContext,Xt&&(Qt=Q0(O),kn=u,pt=!0,ls=null,_i=!1,r!==null&&ze(u,r)),u=uc(u,S),u.flags|=4096;return u}return r=Ki(r.child,{mode:S.mode,children:S.children}),r.ref=u.ref,u.child=r,r.return=u,r}function Fr(r,u){var g=u.ref;if(g===null)r!==null&&r.ref!==null&&(u.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(s(284));(r===null||r.ref!==g)&&(u.flags|=4194816)}}function cc(r,u,g,S,A){return Aa(u),g=Ml(r,u,g,S,void 0,A),S=Ku(),r!==null&&!Yt?(kd(r,u,A),Fa(r,u,A)):(pt&&S&&W(u),u.flags|=1,Xn(r,u,g,A),u.child)}function Xd(r,u,g,S,A,w){return Aa(u),u.updateQueue=null,g=ja(u,S,g,A),Gr(r),S=Ku(),r!==null&&!Yt?(kd(r,u,w),Fa(r,u,w)):(pt&&S&&W(u),u.flags|=1,Xn(r,u,g,w),u.child)}function Ko(r,u,g,S,A){if(Aa(u),u.stateNode===null){var w=as,O=g.contextType;typeof O=="object"&&O!==null&&(w=gn(O)),w=new g(S,w),u.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=_u,u.stateNode=w,w._reactInternals=u,w=u.stateNode,w.props=S,w.state=u.memoizedState,w.refs={},si(u),O=g.contextType,w.context=typeof O=="object"&&O!==null?gn(O):as,w.state=u.memoizedState,O=g.getDerivedStateFromProps,typeof O=="function"&&(Yd(u,g,O,S),w.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(O=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),O!==w.state&&_u.enqueueReplaceState(w,w.state,null),Ho(u,S,w,A),Es(),w.state=u.memoizedState),typeof w.componentDidMount=="function"&&(u.flags|=4194308),S=!0}else if(r===null){w=u.stateNode;var j=u.memoizedProps,le=Yo(g,j);w.props=le;var ye=w.context,Ae=g.contextType;O=as,typeof Ae=="object"&&Ae!==null&&(O=gn(Ae));var _e=g.getDerivedStateFromProps;Ae=typeof _e=="function"||typeof w.getSnapshotBeforeUpdate=="function",j=u.pendingProps!==j,Ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(j||ye!==O)&&o0(u,w,S,O),Qi=!1;var Ue=u.memoizedState;w.state=Ue,Ho(u,S,w,A),Es(),ye=u.memoizedState,j||Ue!==ye||Qi?(typeof _e=="function"&&(Yd(u,g,_e,S),ye=u.memoizedState),(le=Qi||lc(u,g,le,S,Ue,ye,O))?(Ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(u.flags|=4194308)):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=S,u.memoizedState=ye),w.props=S,w.state=ye,w.context=O,S=le):(typeof w.componentDidMount=="function"&&(u.flags|=4194308),S=!1)}else{w=u.stateNode,ao(r,u),O=u.memoizedProps,Ae=Yo(g,O),w.props=Ae,_e=u.pendingProps,Ue=w.context,ye=g.contextType,le=as,typeof ye=="object"&&ye!==null&&(le=gn(ye)),j=g.getDerivedStateFromProps,(ye=typeof j=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==_e||Ue!==le)&&o0(u,w,S,le),Qi=!1,Ue=u.memoizedState,w.state=Ue,Ho(u,S,w,A),Es();var tt=u.memoizedState;O!==_e||Ue!==tt||Qi||r!==null&&r.dependencies!==null&&$s(r.dependencies)?(typeof j=="function"&&(Yd(u,g,j,S),tt=u.memoizedState),(Ae=Qi||lc(u,g,Ae,S,Ue,tt,le)||r!==null&&r.dependencies!==null&&$s(r.dependencies))?(ye||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(S,tt,le),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(S,tt,le)),typeof w.componentDidUpdate=="function"&&(u.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Ue===r.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ue===r.memoizedState||(u.flags|=1024),u.memoizedProps=S,u.memoizedState=tt),w.props=S,w.state=tt,w.context=le,S=Ae):(typeof w.componentDidUpdate!="function"||O===r.memoizedProps&&Ue===r.memoizedState||(u.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===r.memoizedProps&&Ue===r.memoizedState||(u.flags|=1024),S=!1)}return w=S,Fr(r,u),S=(u.flags&128)!==0,w||S?(w=u.stateNode,g=S&&typeof g.getDerivedStateFromError!="function"?null:w.render(),u.flags|=1,r!==null&&S?(u.child=Wn(u,r.child,null,A),u.child=Wn(u,null,g,A)):Xn(r,u,g,A),u.memoizedState=w.state,r=u.child):r=Fa(r,u,A),r}function p0(r,u,g,S){return Ba(),u.flags|=256,Xn(r,u,g,S),u.child}function Qd(r){return{baseLanes:r,cachePool:yt()}}function Zd(r,u,g){return r=r!==null?r.childLanes&~g:0,u&&(r|=Ei),r}function Wd(r,u,g){var S=u.pendingProps,A=!1,w=(u.flags&128)!==0,O;if((O=w)||(O=r!==null&&r.memoizedState===null?!1:(hn.current&2)!==0),O&&(A=!0,u.flags&=-129),O=(u.flags&32)!==0,u.flags&=-33,r===null){if(pt){if(A?Ts(u):qi(),(r=Qt)?(r=ep(r,_i),r!==null&&(u.memoizedState={dehydrated:r,treeContext:ga!==null?{id:Qn,overflow:za}:null,retryLane:536870912,hydrationErrors:null},g=ff(r),g.return=u,u.child=g,kn=u,Qt=null)):r=null,r===null)throw gt(u);return Ic(r)?u.lanes=32:u.lanes=536870912,null}var j=S.children;return S=S.fallback,A?(qi(),A=u.mode,j=co({mode:"hidden",children:j},A),S=da(S,A,g,null),j.return=u,S.return=u,j.sibling=S,u.child=j,S=u.child,S.memoizedState=Qd(g),S.childLanes=Zd(r,O,g),u.memoizedState=hl,Fo(null,S)):(Ts(u),dc(u,j))}var le=r.memoizedState;if(le!==null&&(j=le.dehydrated,j!==null)){if(w)u.flags&256?(Ts(u),u.flags&=-257,u=Jo(r,u,g)):u.memoizedState!==null?(qi(),u.child=r.child,u.flags|=128,u=null):(qi(),j=S.fallback,A=u.mode,S=co({mode:"visible",children:S.children},A),j=da(j,A,g,null),j.flags|=2,S.return=u,j.return=u,S.sibling=j,u.child=S,Wn(u,r.child,null,g),S=u.child,S.memoizedState=Qd(g),S.childLanes=Zd(r,O,g),u.memoizedState=hl,u=Fo(null,S));else if(Ts(u),Ic(j))O=Oc(j).digest,S=Error(s(419)),S.stack="",S.digest=O,Pa({value:S,source:null,stack:null}),u=Jo(r,u,g);else if(Yt||dn(r,u,g,!1),O=(g&r.childLanes)!==0,Yt||O){if(O=ut,O!==null&&(S=ue(O,g),S!==0&&S!==le.retryLane))throw le.retryLane=S,io(r,S),sn(O,r,S),xi;To(j)||Jl(),u=Jo(r,u,g)}else To(j)?(u.flags|=192,u.child=r.child,u=null):(r=le.treeContext,Xt&&(Qt=Z0(j),kn=u,pt=!0,ls=null,_i=!1,r!==null&&ze(u,r)),u=dc(u,S.children),u.flags|=4096);return u}return A?(qi(),j=S.fallback,A=u.mode,le=r.child,w=le.sibling,S=Ki(le,{mode:"hidden",children:S.children}),S.subtreeFlags=le.subtreeFlags&65011712,w!==null?j=Ki(w,j):(j=da(j,A,g,null),j.flags|=2),j.return=u,S.return=u,S.sibling=j,u.child=S,Fo(null,S),S=u.child,j=r.child.memoizedState,j===null?j=Qd(g):(A=j.cachePool,A!==null?(le=vn?Zt._currentValue:Zt._currentValue2,A=A.parent!==le?{parent:le,pool:le}:A):A=yt(),j={baseLanes:j.baseLanes|g,cachePool:A}),S.memoizedState=j,S.childLanes=Zd(r,O,g),u.memoizedState=hl,Fo(r.child,S)):(Ts(u),g=r.child,r=g.sibling,g=Ki(g,{mode:"visible",children:S.children}),g.return=u,g.sibling=null,r!==null&&(O=u.deletions,O===null?(u.deletions=[r],u.flags|=16):O.push(r)),u.child=g,u.memoizedState=null,g)}function dc(r,u){return u=co({mode:"visible",children:u},r.mode),u.return=r,r.child=u}function co(r,u){return r=t(22,r,null,u),r.lanes=0,r}function Jo(r,u,g){return Wn(u,r.child,null,g),r=dc(u,u.pendingProps.children),r.flags|=2,u.memoizedState=null,r}function m0(r,u,g){r.lanes|=u;var S=r.alternate;S!==null&&(S.lanes|=u),Ws(r.return,u,g)}function Hl(r,u,g,S,A,w){var O=r.memoizedState;O===null?r.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:S,tail:g,tailMode:A,treeForkCount:w}:(O.isBackwards=u,O.rendering=null,O.renderingStartTime=0,O.last=S,O.tail=g,O.tailMode=A,O.treeForkCount=w)}function $d(r,u,g){var S=u.pendingProps,A=S.revealOrder,w=S.tail;S=S.children;var O=hn.current,j=(O&2)!==0;if(j?(O=O&1|2,u.flags|=128):O&=1,N(hn,O),Xn(r,u,S,g),S=pt?gu:0,!j&&r!==null&&(r.flags&128)!==0)e:for(r=u.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&m0(r,g,u);else if(r.tag===19)m0(r,g,u);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===u)break e;for(;r.sibling===null;){if(r.return===null||r.return===u)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(A){case"forwards":for(g=u.child,A=null;g!==null;)r=g.alternate,r!==null&&Lr(r)===null&&(A=g),g=g.sibling;g=A,g===null?(A=u.child,u.child=null):(A=g.sibling,g.sibling=null),Hl(u,!1,A,g,w,S);break;case"backwards":case"unstable_legacy-backwards":for(g=null,A=u.child,u.child=null;A!==null;){if(r=A.alternate,r!==null&&Lr(r)===null){u.child=A;break}r=A.sibling,A.sibling=g,g=A,A=r}Hl(u,!0,g,null,w,S);break;case"together":Hl(u,!1,null,null,void 0,S);break;default:u.memoizedState=null}return u.child}function Fa(r,u,g){if(r!==null&&(u.dependencies=r.dependencies),Ps|=u.lanes,(g&u.childLanes)===0)if(r!==null){if(dn(r,u,g,!1),(g&u.childLanes)===0)return null}else return null;if(r!==null&&u.child!==r.child)throw Error(s(153));if(u.child!==null){for(r=u.child,g=Ki(r,r.pendingProps),u.child=g,g.return=u;r.sibling!==null;)r=r.sibling,g=g.sibling=Ki(r,r.pendingProps),g.return=u;g.sibling=null}return u.child}function Kr(r,u){return(r.lanes&u)!==0?!0:(r=r.dependencies,!!(r!==null&&$s(r)))}function ef(r,u,g){switch(u.tag){case 3:Ze(u,u.stateNode.containerInfo),ia(u,Zt,r.memoizedState.cache),Ba();break;case 27:case 5:xt(u);break;case 4:Ze(u,u.stateNode.containerInfo);break;case 10:ia(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,Fu(u),null;break;case 13:var S=u.memoizedState;if(S!==null)return S.dehydrated!==null?(Ts(u),u.flags|=128,null):(g&u.child.childLanes)!==0?Wd(r,u,g):(Ts(u),r=Fa(r,u,g),r!==null?r.sibling:null);Ts(u);break;case 19:var A=(r.flags&128)!==0;if(S=(g&u.childLanes)!==0,S||(dn(r,u,g,!1),S=(g&u.childLanes)!==0),A){if(S)return $d(r,u,g);u.flags|=128}if(A=u.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),N(hn,hn.current),S)break;return null;case 22:return u.lanes=0,f0(r,u,g,u.pendingProps);case 24:ia(u,Zt,r.memoizedState.cache)}return Fa(r,u,g)}function tf(r,u,g){if(r!==null)if(r.memoizedProps!==u.pendingProps)Yt=!0;else{if(!Kr(r,g)&&(u.flags&128)===0)return Yt=!1,ef(r,u,g);Yt=(r.flags&131072)!==0}else Yt=!1,pt&&(u.flags&1048576)!==0&&q(u,gu,u.index);switch(u.lanes=0,u.tag){case 16:e:{var S=u.pendingProps;if(r=hi(u.elementType),u.type=r,typeof r=="function")Qo(r)?(S=Yo(r,S),u.tag=1,u=Ko(null,u,r,S,g)):(u.tag=0,u=cc(null,u,r,S,g));else{if(r!=null){var A=r.$$typeof;if(A===Wl){u.tag=11,u=u0(null,u,r,S,g);break e}else if(A===Rc){u.tag=14,u=c0(null,u,r,S,g);break e}}throw u=E(r)||r,Error(s(306,u,""))}}return u;case 0:return cc(r,u,u.type,u.pendingProps,g);case 1:return S=u.type,A=Yo(S,u.pendingProps),Ko(r,u,S,A,g);case 3:e:{if(Ze(u,u.stateNode.containerInfo),r===null)throw Error(s(387));var w=u.pendingProps;A=u.memoizedState,S=A.element,ao(r,u),Ho(u,w,null,g);var O=u.memoizedState;if(w=O.cache,ia(u,Zt,w),w!==A.cache&&_s(u,[Zt],g,!0),Es(),w=O.element,Xt&&A.isDehydrated)if(A={element:w,isDehydrated:!1,cache:O.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=p0(r,u,w,g);break e}else if(w!==S){S=Ne(Error(s(424)),u),Pa(S),u=p0(r,u,w,g);break e}else for(Xt&&(Qt=X0(u.stateNode.containerInfo),kn=u,pt=!0,ls=null,_i=!0),g=Wf(u,null,w,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ba(),w===S){u=Fa(r,u,g);break e}Xn(r,u,w,g)}u=u.child}return u;case 26:if(pa)return Fr(r,u),r===null?(g=Pf(u.type,null,u.pendingProps,null))?u.memoizedState=g:pt||(u.stateNode=Hc(u.type,u.pendingProps,Zn.current,u)):u.memoizedState=Pf(u.type,r.memoizedProps,u.pendingProps,r.memoizedState),null;case 27:if(On)return xt(u),r===null&&On&&pt&&(S=u.stateNode=Bc(u.type,u.pendingProps,Zn.current,Vn.current,!1),kn=u,_i=!0,Qt=Of(u.type,S,Qt)),Xn(r,u,u.pendingProps.children,g),Fr(r,u),r===null&&(u.flags|=4194304),u.child;case 5:return r===null&&pt&&(up(u.type,u.pendingProps,Vn.current),(A=S=Qt)&&(S=W0(S,u.type,u.pendingProps,_i),S!==null?(u.stateNode=S,kn=u,Qt=J0(S),_i=!1,A=!0):A=!1),A||gt(u)),xt(u),A=u.type,w=u.pendingProps,O=r!==null?r.memoizedProps:null,S=w.children,vi(A,w)?S=null:O!==null&&vi(A,O)&&(u.flags|=32),u.memoizedState!==null&&(A=Ml(r,u,sa,null,null,g),vn?sl._currentValue=A:sl._currentValue2=A),Fr(r,u),Xn(r,u,S,g),u.child;case 6:return r===null&&pt&&(Bf(u.pendingProps,Vn.current),(r=g=Qt)&&(g=$0(g,u.pendingProps,_i),g!==null?(u.stateNode=g,kn=u,Qt=null,r=!0):r=!1),r||gt(u)),null;case 13:return Wd(r,u,g);case 4:return Ze(u,u.stateNode.containerInfo),S=u.pendingProps,r===null?u.child=Wn(u,null,S,g):Xn(r,u,S,g),u.child;case 11:return u0(r,u,u.type,u.pendingProps,g);case 7:return Xn(r,u,u.pendingProps,g),u.child;case 8:return Xn(r,u,u.pendingProps.children,g),u.child;case 12:return Xn(r,u,u.pendingProps.children,g),u.child;case 10:return S=u.pendingProps,ia(u,u.type,S.value),Xn(r,u,S.children,g),u.child;case 9:return A=u.type._context,S=u.pendingProps.children,Aa(u),A=gn(A),S=S(A),u.flags|=1,Xn(r,u,S,g),u.child;case 14:return c0(r,u,u.type,u.pendingProps,g);case 15:return d0(r,u,u.type,u.pendingProps,g);case 19:return $d(r,u,g);case 31:return h0(r,u,g);case 22:return f0(r,u,g,u.pendingProps);case 24:return Aa(u),S=gn(Zt),r===null?(A=ve(),A===null&&(A=ut,w=Rl(),A.pooledCache=w,w.refCount++,w!==null&&(A.pooledCacheLanes|=g),A=w),u.memoizedState={parent:S,cache:A},si(u),ia(u,Zt,A)):((r.lanes&g)!==0&&(ao(r,u),Ho(u,null,null,g),Es()),A=r.memoizedState,w=u.memoizedState,A.parent!==S?(A={parent:S,cache:S},u.memoizedState=A,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=A),ia(u,Zt,S)):(S=w.cache,ia(u,Zt,S),S!==A.cache&&_s(u,[Zt],g,!0))),Xn(r,u,u.pendingProps.children,g),u.child;case 29:throw u.pendingProps}throw Error(s(156,u.tag))}function oa(r){r.flags|=4}function Jr(r){Ji&&(r.flags|=8)}function g0(r,u){if(r!==null&&r.child===u.child)return!1;if((u.flags&16)!==0)return!0;for(r=u.child;r!==null;){if((r.flags&8218)!==0||(r.subtreeFlags&8218)!==0)return!0;r=r.sibling}return!1}function nf(r,u,g,S){if(_t)for(g=u.child;g!==null;){if(g.tag===5||g.tag===6)ru(r,g.stateNode);else if(!(g.tag===4||On&&g.tag===27)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}else if(Ji)for(var A=u.child;A!==null;){if(A.tag===5){var w=A.stateNode;g&&S&&(w=j0(w,A.type,A.memoizedProps)),ru(r,w)}else if(A.tag===6)w=A.stateNode,g&&S&&(w=Uf(w,A.memoizedProps)),ru(r,w);else if(A.tag!==4){if(A.tag===22&&A.memoizedState!==null)w=A.child,w!==null&&(w.return=A),nf(r,A,!0,!0);else if(A.child!==null){A.child.return=A,A=A.child;continue}}if(A===u)break;for(;A.sibling===null;){if(A.return===null||A.return===u)return;A=A.return}A.sibling.return=A.return,A=A.sibling}}function y0(r,u,g,S){var A=!1;if(Ji)for(var w=u.child;w!==null;){if(w.tag===5){var O=w.stateNode;g&&S&&(O=j0(O,w.type,w.memoizedProps)),Df(r,O)}else if(w.tag===6)O=w.stateNode,g&&S&&(O=Uf(O,w.memoizedProps)),Df(r,O);else if(w.tag!==4){if(w.tag===22&&w.memoizedState!==null)A=w.child,A!==null&&(A.return=w),y0(r,w,!0,!0),A=!0;else if(w.child!==null){w.child.return=w,w=w.child;continue}}if(w===u)break;for(;w.sibling===null;){if(w.return===null||w.return===u)return A;w=w.return}w.sibling.return=w.return,w=w.sibling}return A}function v0(r,u){if(Ji&&g0(r,u)){r=u.stateNode;var g=r.containerInfo,S=Mf();y0(S,u,!1,!1),r.pendingChildren=S,oa(u),V0(g,S)}}function af(r,u,g,S){if(_t)r.memoizedProps!==S&&oa(u);else if(Ji){var A=r.stateNode,w=r.memoizedProps;if((r=g0(r,u))||w!==S){var O=Vn.current;w=q0(A,g,w,S,!r,null),w===A?u.stateNode=A:(Jr(u),zi(w,g,S,O)&&oa(u),u.stateNode=w,r&&nf(w,u,!1,!1))}else u.stateNode=A}}function mi(r,u,g,S,A){if((r.mode&32)!==0&&(g===null?uu(u,S):ir(u,g,S))){if(r.flags|=16777216,(A&335544128)===A||_f(u,S))if(on(r.stateNode,u,S))r.flags|=8192;else if(vt())r.flags|=8192;else throw Si=rs,Zc}else r.flags&=-16777217}function Bl(r,u){if(Yf(u)){if(r.flags|=16777216,!Ff(u))if(vt())r.flags|=8192;else throw Si=rs,Zc}else r.flags&=-16777217}function Xr(r,u){u!==null&&(r.flags|=4),r.flags&16384&&(u=r.tag!==22?G():536870912,r.lanes|=u,fr|=u)}function Pl(r,u){if(!pt)switch(r.tailMode){case"hidden":u=r.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?r.tail=null:g.sibling=null;break;case"collapsed":g=r.tail;for(var S=null;g!==null;)g.alternate!==null&&(S=g),g=g.sibling;S===null?u||r.tail===null?r.tail=null:r.tail.sibling=null:S.sibling=null}}function Bt(r){var u=r.alternate!==null&&r.alternate.child===r.child,g=0,S=0;if(u)for(var A=r.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags&65011712,S|=A.flags&65011712,A.return=r,A=A.sibling;else for(A=r.child;A!==null;)g|=A.lanes|A.childLanes,S|=A.subtreeFlags,S|=A.flags,A.return=r,A=A.sibling;return r.subtreeFlags|=S,r.childLanes=g,u}function _0(r,u,g){var S=u.pendingProps;switch(be(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(u),null;case 1:return Bt(u),null;case 3:return g=u.stateNode,S=null,r!==null&&(S=r.memoizedState.cache),u.memoizedState.cache!==S&&(u.flags|=2048),ni(Zt),et(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(r===null||r.child===null)&&(qe(u)?oa(u):r===null||r.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,na())),v0(r,u),Bt(u),null;case 26:if(pa){var A=u.type,w=u.memoizedState;return r===null?(oa(u),w!==null?(Bt(u),Bl(u,w)):(Bt(u),mi(u,A,null,S,g))):w?w!==r.memoizedState?(oa(u),Bt(u),Bl(u,w)):(Bt(u),u.flags&=-16777217):(w=r.memoizedProps,_t?w!==S&&oa(u):af(r,u,A,S),Bt(u),mi(u,A,w,S,g)),null}case 27:if(On){if(Ht(u),g=Zn.current,A=u.type,r!==null&&u.stateNode!=null)_t?r.memoizedProps!==S&&oa(u):af(r,u,A,S);else{if(!S){if(u.stateNode===null)throw Error(s(166));return Bt(u),null}r=Vn.current,qe(u)?Ta(u,r):(r=Bc(A,S,g,r,!0),u.stateNode=r,oa(u))}return Bt(u),null}case 5:if(Ht(u),A=u.type,r!==null&&u.stateNode!=null)af(r,u,A,S);else{if(!S){if(u.stateNode===null)throw Error(s(166));return Bt(u),null}if(w=Vn.current,qe(u))Ta(u,w),op(u.stateNode,A,S,w)&&(u.flags|=64);else{var O=yf(A,S,Zn.current,w,u);Jr(u),nf(O,u,!1,!1),u.stateNode=O,zi(O,A,S,w)&&oa(u)}}return Bt(u),mi(u,u.type,r===null?null:r.memoizedProps,u.pendingProps,g),null;case 6:if(r&&u.stateNode!=null)g=r.memoizedProps,_t?g!==S&&oa(u):Ji&&(g!==S?(r=Zn.current,g=Vn.current,Jr(u),u.stateNode=Os(S,r,g,u)):u.stateNode=r.stateNode);else{if(typeof S!="string"&&u.stateNode===null)throw Error(s(166));if(r=Zn.current,g=Vn.current,qe(u)){if(!Xt)throw Error(s(176));if(r=u.stateNode,g=u.memoizedProps,S=null,A=kn,A!==null)switch(A.tag){case 27:case 5:S=A.memoizedProps}Ym(r,g,u,S)||gt(u,!0)}else Jr(u),u.stateNode=Os(S,r,g,u)}return Bt(u),null;case 31:if(g=u.memoizedState,r===null||r.memoizedState!==null){if(S=qe(u),g!==null){if(r===null){if(!S)throw Error(s(318));if(!Xt)throw Error(s(556));if(r=u.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(s(557));Lf(r,u)}else Ba(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Bt(u),r=!1}else g=na(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=g),r=!0;if(!r)return u.flags&256?(Vi(u),u):(Vi(u),null);if((u.flags&128)!==0)throw Error(s(558))}return Bt(u),null;case 13:if(S=u.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(A=qe(u),S!==null&&S.dehydrated!==null){if(r===null){if(!A)throw Error(s(318));if(!Xt)throw Error(s(344));if(A=u.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(s(317));np(A,u)}else Ba(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Bt(u),A=!1}else A=na(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=A),A=!0;if(!A)return u.flags&256?(Vi(u),u):(Vi(u),null)}return Vi(u),(u.flags&128)!==0?(u.lanes=g,u):(g=S!==null,r=r!==null&&r.memoizedState!==null,g&&(S=u.child,A=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(A=S.alternate.memoizedState.cachePool.pool),w=null,S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(w=S.memoizedState.cachePool.pool),w!==A&&(S.flags|=2048)),g!==r&&g&&(u.child.flags|=8192),Xr(u,u.updateQueue),Bt(u),null);case 4:return et(),v0(r,u),r===null&&Lt(u.stateNode.containerInfo),Bt(u),null;case 10:return ni(u.type),Bt(u),null;case 19:if(R(hn),S=u.memoizedState,S===null)return Bt(u),null;if(A=(u.flags&128)!==0,w=S.rendering,w===null)if(A)Pl(S,!1);else{if(un!==0||r!==null&&(r.flags&128)!==0)for(r=u.child;r!==null;){if(w=Lr(r),w!==null){for(u.flags|=128,Pl(S,!1),r=w.updateQueue,u.updateQueue=r,Xr(u,r),u.subtreeFlags=0,r=g,g=u.child;g!==null;)Ec(g,r),g=g.sibling;return N(hn,hn.current&1|2),pt&&Le(u,S.treeForkCount),u.child}r=r.sibling}S.tail!==null&&ui()>Oo&&(u.flags|=128,A=!0,Pl(S,!1),u.lanes=4194304)}else{if(!A)if(r=Lr(w),r!==null){if(u.flags|=128,A=!0,r=r.updateQueue,u.updateQueue=r,Xr(u,r),Pl(S,!0),S.tail===null&&S.tailMode==="hidden"&&!w.alternate&&!pt)return Bt(u),null}else 2*ui()-S.renderingStartTime>Oo&&g!==536870912&&(u.flags|=128,A=!0,Pl(S,!1),u.lanes=4194304);S.isBackwards?(w.sibling=u.child,u.child=w):(r=S.last,r!==null?r.sibling=w:u.child=w,S.last=w)}return S.tail!==null?(r=S.tail,S.rendering=r,S.tail=r.sibling,S.renderingStartTime=ui(),r.sibling=null,g=hn.current,N(hn,A?g&1|2:g&1),pt&&Le(u,S.treeForkCount),r):(Bt(u),null);case 22:case 23:return Vi(u),Cn(),S=u.memoizedState!==null,r!==null?r.memoizedState!==null!==S&&(u.flags|=8192):S&&(u.flags|=8192),S?(g&536870912)!==0&&(u.flags&128)===0&&(Bt(u),u.subtreeFlags&6&&(u.flags|=8192)):Bt(u),g=u.updateQueue,g!==null&&Xr(u,g.retryQueue),g=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),S=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(S=u.memoizedState.cachePool.pool),S!==g&&(u.flags|=2048),r!==null&&R(wo),null;case 24:return g=null,r!==null&&(g=r.memoizedState.cache),u.memoizedState.cache!==g&&(u.flags|=2048),ni(Zt),Bt(u),null;case 25:return null;case 30:return null}throw Error(s(156,u.tag))}function sf(r,u){switch(be(u),u.tag){case 1:return r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 3:return ni(Zt),et(),r=u.flags,(r&65536)!==0&&(r&128)===0?(u.flags=r&-65537|128,u):null;case 26:case 27:case 5:return Ht(u),null;case 31:if(u.memoizedState!==null){if(Vi(u),u.alternate===null)throw Error(s(340));Ba()}return r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 13:if(Vi(u),r=u.memoizedState,r!==null&&r.dehydrated!==null){if(u.alternate===null)throw Error(s(340));Ba()}return r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 19:return R(hn),null;case 4:return et(),null;case 10:return ni(u.type),null;case 22:case 23:return Vi(u),Cn(),r!==null&&R(wo),r=u.flags,r&65536?(u.flags=r&-65537|128,u):null;case 24:return ni(Zt),null;case 25:return null;default:return null}}function S0(r,u){switch(be(u),u.tag){case 3:ni(Zt),et();break;case 26:case 27:case 5:Ht(u);break;case 4:et();break;case 31:u.memoizedState!==null&&Vi(u);break;case 13:Vi(u);break;case 19:R(hn);break;case 10:ni(u.type);break;case 22:case 23:Vi(u),Cn(),r!==null&&R(wo);break;case 24:ni(Zt)}}function Ka(r,u){try{var g=u.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var A=S.next;g=A;do{if((g.tag&r)===r){S=void 0;var w=g.create,O=g.inst;S=w(),O.destroy=S}g=g.next}while(g!==A)}}catch(j){Xe(u,u.return,j)}}function Ja(r,u,g){try{var S=u.updateQueue,A=S!==null?S.lastEffect:null;if(A!==null){var w=A.next;S=w;do{if((S.tag&r)===r){var O=S.inst,j=O.destroy;if(j!==void 0){O.destroy=void 0,A=u;var le=g,ye=j;try{ye()}catch(Ae){Xe(A,le,Ae)}}}S=S.next}while(S!==w)}}catch(Ae){Xe(u,u.return,Ae)}}function ql(r){var u=r.updateQueue;if(u!==null){var g=r.stateNode;try{Po(u,g)}catch(S){Xe(r,r.return,S)}}}function fc(r,u,g){g.props=Yo(r.type,r.memoizedProps),g.state=r.memoizedState;try{g.componentWillUnmount()}catch(S){Xe(r,u,S)}}function Vl(r,u){try{var g=r.ref;if(g!==null){switch(r.tag){case 26:case 27:case 5:var S=er(r.stateNode);break;case 30:S=r.stateNode;break;default:S=r.stateNode}typeof g=="function"?r.refCleanup=g(S):g.current=S}}catch(A){Xe(r,u,A)}}function ri(r,u){var g=r.ref,S=r.refCleanup;if(g!==null)if(typeof S=="function")try{S()}catch(A){Xe(r,u,A)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(A){Xe(r,u,A)}else g.current=null}function Xo(r){var u=r.type,g=r.memoizedProps,S=r.stateNode;try{I0(S,u,g,r)}catch(A){Xe(r,r.return,A)}}function Qr(r,u,g){try{O0(r.stateNode,r.type,g,u,r)}catch(S){Xe(r,r.return,S)}}function of(r){return r.tag===5||r.tag===3||(pa?r.tag===26:!1)||(On?r.tag===27&&ol(r.type):!1)||r.tag===4}function ws(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||of(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(On&&r.tag===27&&ol(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function hc(r,u,g){var S=r.tag;if(S===5||S===6)r=r.stateNode,u?L0(g,r,u):Af(g,r);else if(S!==4&&(On&&S===27&&ol(r.type)&&(g=r.stateNode,u=null),r=r.child,r!==null))for(hc(r,u,g),r=r.sibling;r!==null;)hc(r,u,g),r=r.sibling}function Zr(r,u,g){var S=r.tag;if(S===5||S===6)r=r.stateNode,u?k0(g,r,u):Cf(g,r);else if(S!==4&&(On&&S===27&&ol(r.type)&&(g=r.stateNode),r=r.child,r!==null))for(Zr(r,u,g),r=r.sibling;r!==null;)Zr(r,u,g),r=r.sibling}function lf(r,u,g){r=r.containerInfo;try{zf(r,g)}catch(S){Xe(u,u.return,S)}}function b0(r){var u=r.stateNode,g=r.memoizedProps;try{wn(r.type,g,u,r)}catch(S){Xe(r,r.return,S)}}function Pm(r,u){for(Nc(r.containerInfo),bn=u;bn!==null;)if(r=bn,u=r.child,(r.subtreeFlags&1028)!==0&&u!==null)u.return=r,bn=u;else for(;bn!==null;){r=bn;var g=r.alternate;switch(u=r.flags,r.tag){case 0:if((u&4)!==0&&(u=r.updateQueue,u=u!==null?u.events:null,u!==null))for(var S=0;S<u.length;S++){var A=u[S];A.ref.impl=A.nextImpl}break;case 11:case 15:break;case 1:if((u&1024)!==0&&g!==null){u=void 0,S=r,A=g.memoizedProps,g=g.memoizedState;var w=S.stateNode;try{var O=Yo(S.type,A);u=w.getSnapshotBeforeUpdate(O,g),w.__reactInternalSnapshotBeforeUpdate=u}catch(j){Xe(S,S.return,j)}}break;case 3:(u&1024)!==0&&_t&&Nf(r.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(s(163))}if(u=r.sibling,u!==null){u.return=r.return,bn=u;break}bn=r.return}}function x0(r,u,g){var S=g.flags;switch(g.tag){case 0:case 11:case 15:gi(r,g),S&4&&Ka(5,g);break;case 1:if(gi(r,g),S&4)if(r=g.stateNode,u===null)try{r.componentDidMount()}catch(O){Xe(g,g.return,O)}else{var A=Yo(g.type,u.memoizedProps);u=u.memoizedState;try{r.componentDidUpdate(A,u,r.__reactInternalSnapshotBeforeUpdate)}catch(O){Xe(g,g.return,O)}}S&64&&ql(g),S&512&&Vl(g,g.return);break;case 3:if(gi(r,g),S&64&&(S=g.updateQueue,S!==null)){if(r=null,g.child!==null)switch(g.child.tag){case 27:case 5:r=er(g.child.stateNode);break;case 1:r=g.child.stateNode}try{Po(S,r)}catch(O){Xe(g,g.return,O)}}break;case 27:On&&u===null&&S&4&&b0(g);case 26:case 5:if(gi(r,g),u===null){if(S&4)Xo(g);else if(S&64){r=g.type,u=g.memoizedProps,A=g.stateNode;try{ap(A,r,u,g)}catch(O){Xe(g,g.return,O)}}}S&512&&Vl(g,g.return);break;case 12:gi(r,g);break;case 31:gi(r,g),S&4&&ra(r,g);break;case 13:gi(r,g),S&4&&$r(r,g),S&64&&(S=g.memoizedState,S!==null&&(S=S.dehydrated,S!==null&&(g=qm.bind(null,g),kc(S,g))));break;case 22:if(S=g.memoizedState!==null||pn,!S){u=u!==null&&u.memoizedState!==null||mn,A=pn;var w=mn;pn=S,(mn=u)&&!w?ca(r,g,(g.subtreeFlags&8772)!==0):gi(r,g),pn=A,mn=w}break;case 30:break;default:gi(r,g)}}function rf(r){var u=r.alternate;u!==null&&(r.alternate=null,rf(u)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(u=r.stateNode,u!==null&&Mc(u)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function la(r,u,g){for(g=g.child;g!==null;)Wr(r,u,g),g=g.sibling}function Wr(r,u,g){if(Oi&&typeof Oi.onCommitFiberUnmount=="function")try{Oi.onCommitFiberUnmount(ul,g)}catch{}switch(g.tag){case 26:if(pa){mn||ri(g,u),la(r,u,g),g.memoizedState?Co(g.memoizedState):g.stateNode&&jf(g.stateNode);break}case 27:if(On){mn||ri(g,u);var S=rn,A=xn;ol(g.type)&&(rn=g.stateNode,xn=!1),la(r,u,g),qn(g.stateNode),rn=S,xn=A;break}case 5:mn||ri(g,u);case 6:if(_t){if(S=rn,A=xn,rn=null,la(r,u,g),rn=S,xn=A,rn!==null)if(xn)try{wf(rn,g.stateNode)}catch(w){Xe(g,u,w)}else try{G0(rn,g.stateNode)}catch(w){Xe(g,u,w)}}else la(r,u,g);break;case 18:_t&&rn!==null&&(xn?Lc(rn,g.stateNode):Hf(rn,g.stateNode));break;case 4:_t?(S=rn,A=xn,rn=g.stateNode.containerInfo,xn=!0,la(r,u,g),rn=S,xn=A):(Ji&&lf(g.stateNode,g,Mf()),la(r,u,g));break;case 0:case 11:case 14:case 15:Ja(2,g,u),mn||Ja(4,g,u),la(r,u,g);break;case 1:mn||(ri(g,u),S=g.stateNode,typeof S.componentWillUnmount=="function"&&fc(g,u,S)),la(r,u,g);break;case 21:la(r,u,g);break;case 22:mn=(S=mn)||g.memoizedState!==null,la(r,u,g),mn=S;break;default:la(r,u,g)}}function ra(r,u){if(Xt&&u.memoizedState===null&&(r=u.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Fm(r)}catch(g){Xe(u,u.return,g)}}}function $r(r,u){if(Xt&&u.memoizedState===null&&(r=u.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Km(r)}catch(g){Xe(u,u.return,g)}}function ua(r){switch(r.tag){case 31:case 13:case 19:var u=r.stateNode;return u===null&&(u=r.stateNode=new eh),u;case 22:return r=r.stateNode,u=r._retryCache,u===null&&(u=r._retryCache=new eh),u;default:throw Error(s(435,r.tag))}}function Rs(r,u){var g=ua(r);u.forEach(function(S){if(!g.has(S)){g.add(S);var A=Vm.bind(null,r,S);S.then(A,A)}})}function Bn(r,u){var g=u.deletions;if(g!==null)for(var S=0;S<g.length;S++){var A=g[S],w=r,O=u;if(_t){var j=O;e:for(;j!==null;){switch(j.tag){case 27:if(On){if(ol(j.type)){rn=j.stateNode,xn=!1;break e}break}case 5:rn=j.stateNode,xn=!1;break e;case 3:case 4:rn=j.stateNode.containerInfo,xn=!0;break e}j=j.return}if(rn===null)throw Error(s(160));Wr(w,O,A),rn=null,xn=!1}else Wr(w,O,A);w=A.alternate,w!==null&&(w.return=null),A.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)eu(u,r),u=u.sibling}function eu(r,u){var g=r.alternate,S=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:Bn(u,r),Pn(r),S&4&&(Ja(3,r,r.return),Ka(3,r),Ja(5,r,r.return));break;case 1:Bn(u,r),Pn(r),S&512&&(mn||g===null||ri(g,g.return)),S&64&&pn&&(r=r.updateQueue,r!==null&&(S=r.callbacks,S!==null&&(g=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=g===null?S:g.concat(S))));break;case 26:if(pa){var A=Ut;if(Bn(u,r),Pn(r),S&512&&(mn||g===null||ri(g,g.return)),S&4){S=g!==null?g.memoizedState:null;var w=r.memoizedState;g===null?w===null?r.stateNode===null?r.stateNode=cp(A,r.type,r.memoizedProps,r):Vf(A,r.type,r.stateNode):r.stateNode=qf(A,w,r.memoizedProps):S!==w?(S===null?g.stateNode!==null&&jf(g.stateNode):Co(S),w===null?Vf(A,r.type,r.stateNode):qf(A,w,r.memoizedProps)):w===null&&r.stateNode!==null&&Qr(r,r.memoizedProps,g.memoizedProps)}break}case 27:if(On){Bn(u,r),Pn(r),S&512&&(mn||g===null||ri(g,g.return)),g!==null&&S&4&&Qr(r,r.memoizedProps,g.memoizedProps);break}case 5:if(Bn(u,r),Pn(r),S&512&&(mn||g===null||ri(g,g.return)),_t){if(r.flags&32){A=r.stateNode;try{Rf(A)}catch(_e){Xe(r,r.return,_e)}}S&4&&r.stateNode!=null&&(A=r.memoizedProps,Qr(r,A,g!==null?g.memoizedProps:A)),S&1024&&(lr=!0)}else Ji&&r.alternate!==null&&(r.alternate.stateNode=r.stateNode);break;case 6:if(Bn(u,r),Pn(r),S&4&&_t){if(r.stateNode===null)throw Error(s(162));S=r.memoizedProps,g=g!==null?g.memoizedProps:S,A=r.stateNode;try{U0(A,g,S)}catch(_e){Xe(r,r.return,_e)}}break;case 3:if(pa?(dp(),A=Ut,Ut=fu(u.containerInfo),Bn(u,r),Ut=A):Bn(u,r),Pn(r),S&4){if(_t&&Xt&&g!==null&&g.memoizedState.isDehydrated)try{sp(u.containerInfo)}catch(_e){Xe(r,r.return,_e)}if(Ji){S=u.containerInfo,g=u.pendingChildren;try{zf(S,g)}catch(_e){Xe(r,r.return,_e)}}}lr&&(lr=!1,pc(r));break;case 4:pa?(g=Ut,Ut=fu(r.stateNode.containerInfo),Bn(u,r),Pn(r),Ut=g):(Bn(u,r),Pn(r)),S&4&&Ji&&lf(r.stateNode,r,r.stateNode.pendingChildren);break;case 12:Bn(u,r),Pn(r);break;case 31:Bn(u,r),Pn(r),S&4&&(S=r.updateQueue,S!==null&&(r.updateQueue=null,Rs(r,S)));break;case 13:Bn(u,r),Pn(r),r.child.flags&8192&&r.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(xu=ui()),S&4&&(S=r.updateQueue,S!==null&&(r.updateQueue=null,Rs(r,S)));break;case 22:A=r.memoizedState!==null;var O=g!==null&&g.memoizedState!==null,j=pn,le=mn;if(pn=j||A,mn=le||O,Bn(u,r),mn=le,pn=j,Pn(r),S&8192&&(u=r.stateNode,u._visibility=A?u._visibility&-2:u._visibility|1,A&&(g===null||O||pn||mn||fo(r)),_t)){e:if(g=null,_t)for(u=r;;){if(u.tag===5||pa&&u.tag===26){if(g===null){O=g=u;try{w=O.stateNode,A?jm(w):B0(O.stateNode,O.memoizedProps)}catch(_e){Xe(O,O.return,_e)}}}else if(u.tag===6){if(g===null){O=u;try{var ye=O.stateNode;A?H0(ye):P0(ye,O.memoizedProps)}catch(_e){Xe(O,O.return,_e)}}}else if(u.tag===18){if(g===null){O=u;try{var Ae=O.stateNode;A?lp(Ae):rp(O.stateNode)}catch(_e){Xe(O,O.return,_e)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===r)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;g===u&&(g=null),u=u.return}g===u&&(g=null),u.sibling.return=u.return,u=u.sibling}}S&4&&(S=r.updateQueue,S!==null&&(g=S.retryQueue,g!==null&&(S.retryQueue=null,Rs(r,g))));break;case 19:Bn(u,r),Pn(r),S&4&&(S=r.updateQueue,S!==null&&(r.updateQueue=null,Rs(r,S)));break;case 30:break;case 21:break;default:Bn(u,r),Pn(r)}}function Pn(r){var u=r.flags;if(u&2){try{for(var g,S=r.return;S!==null;){if(of(S)){g=S;break}S=S.return}if(_t){if(g==null)throw Error(s(160));switch(g.tag){case 27:if(On){var A=g.stateNode,w=ws(r);Zr(r,w,A);break}case 5:var O=g.stateNode;g.flags&32&&(Rf(O),g.flags&=-33);var j=ws(r);Zr(r,j,O);break;case 3:case 4:var le=g.stateNode.containerInfo,ye=ws(r);hc(r,ye,le);break;default:throw Error(s(161))}}}catch(Ae){Xe(r,r.return,Ae)}r.flags&=-3}u&4096&&(r.flags&=-4097)}function pc(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var u=r;pc(u),u.tag===5&&u.flags&1024&&bf(u.stateNode),r=r.sibling}}function gi(r,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)x0(r,u.alternate,u),u=u.sibling}function fo(r){for(r=r.child;r!==null;){var u=r;switch(u.tag){case 0:case 11:case 14:case 15:Ja(4,u,u.return),fo(u);break;case 1:ri(u,u.return);var g=u.stateNode;typeof g.componentWillUnmount=="function"&&fc(u,u.return,g),fo(u);break;case 27:On&&qn(u.stateNode);case 26:case 5:ri(u,u.return),fo(u);break;case 22:u.memoizedState===null&&fo(u);break;case 30:fo(u);break;default:fo(u)}r=r.sibling}}function ca(r,u,g){for(g=g&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var S=u.alternate,A=r,w=u,O=w.flags;switch(w.tag){case 0:case 11:case 15:ca(A,w,g),Ka(4,w);break;case 1:if(ca(A,w,g),S=w,A=S.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(ye){Xe(S,S.return,ye)}if(S=w,A=S.updateQueue,A!==null){var j=S.stateNode;try{var le=A.shared.hiddenCallbacks;if(le!==null)for(A.shared.hiddenCallbacks=null,A=0;A<le.length;A++)Bo(le[A],j)}catch(ye){Xe(S,S.return,ye)}}g&&O&64&&ql(w),Vl(w,w.return);break;case 27:On&&b0(w);case 26:case 5:ca(A,w,g),g&&S===null&&O&4&&Xo(w),Vl(w,w.return);break;case 12:ca(A,w,g);break;case 31:ca(A,w,g),g&&O&4&&ra(A,w);break;case 13:ca(A,w,g),g&&O&4&&$r(A,w);break;case 22:w.memoizedState===null&&ca(A,w,g),Vl(w,w.return);break;case 30:break;default:ca(A,w,g)}u=u.sibling}}function ho(r,u){var g=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(g=r.memoizedState.cachePool.pool),r=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(r=u.memoizedState.cachePool.pool),r!==g&&(r!=null&&r.refCount++,g!=null&&eo(g))}function uf(r,u){r=null,u.alternate!==null&&(r=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==r&&(u.refCount++,r!=null&&eo(r))}function an(r,u,g,S){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)mc(r,u,g,S),u=u.sibling}function mc(r,u,g,S){var A=u.flags;switch(u.tag){case 0:case 11:case 15:an(r,u,g,S),A&2048&&Ka(9,u);break;case 1:an(r,u,g,S);break;case 3:an(r,u,g,S),A&2048&&(r=null,u.alternate!==null&&(r=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==r&&(u.refCount++,r!=null&&eo(r)));break;case 12:if(A&2048){an(r,u,g,S),r=u.stateNode;try{var w=u.memoizedProps,O=w.id,j=w.onPostCommit;typeof j=="function"&&j(O,u.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(le){Xe(u,u.return,le)}}else an(r,u,g,S);break;case 31:an(r,u,g,S);break;case 13:an(r,u,g,S);break;case 23:break;case 22:w=u.stateNode,O=u.alternate,u.memoizedState!==null?w._visibility&2?an(r,u,g,S):jl(r,u):w._visibility&2?an(r,u,g,S):(w._visibility|=2,Ni(r,u,g,S,(u.subtreeFlags&10256)!==0||!1)),A&2048&&ho(O,u);break;case 24:an(r,u,g,S),A&2048&&uf(u.alternate,u);break;default:an(r,u,g,S)}}function Ni(r,u,g,S,A){for(A=A&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var w=r,O=u,j=g,le=S,ye=O.flags;switch(O.tag){case 0:case 11:case 15:Ni(w,O,j,le,A),Ka(8,O);break;case 23:break;case 22:var Ae=O.stateNode;O.memoizedState!==null?Ae._visibility&2?Ni(w,O,j,le,A):jl(w,O):(Ae._visibility|=2,Ni(w,O,j,le,A)),A&&ye&2048&&ho(O.alternate,O);break;case 24:Ni(w,O,j,le,A),A&&ye&2048&&uf(O.alternate,O);break;default:Ni(w,O,j,le,A)}u=u.sibling}}function jl(r,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var g=r,S=u,A=S.flags;switch(S.tag){case 22:jl(g,S),A&2048&&ho(S.alternate,S);break;case 24:jl(g,S),A&2048&&uf(S.alternate,S);break;default:jl(g,S)}u=u.sibling}}function Xa(r,u,g){if(r.subtreeFlags&Wi)for(r=r.child;r!==null;)po(r,u,g),r=r.sibling}function po(r,u,g){switch(r.tag){case 26:if(Xa(r,u,g),r.flags&Wi)if(r.memoizedState!==null)fp(g,Ut,r.memoizedState,r.memoizedProps);else{var S=r.stateNode,A=r.type;r=r.memoizedProps,((u&335544128)===u||_f(A,r))&&Dc(g,S,A,r)}break;case 5:Xa(r,u,g),r.flags&Wi&&(S=r.stateNode,A=r.type,r=r.memoizedProps,((u&335544128)===u||_f(A,r))&&Dc(g,S,A,r));break;case 3:case 4:pa?(S=Ut,Ut=fu(r.stateNode.containerInfo),Xa(r,u,g),Ut=S):Xa(r,u,g);break;case 22:r.memoizedState===null&&(S=r.alternate,S!==null&&S.memoizedState!==null?(S=Wi,Wi=16777216,Xa(r,u,g),Wi=S):Xa(r,u,g));break;default:Xa(r,u,g)}}function gc(r){var u=r.alternate;if(u!==null&&(r=u.child,r!==null)){u.child=null;do u=r.sibling,r.sibling=null,r=u;while(r!==null)}}function Yl(r){var u=r.deletions;if((r.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];bn=S,Yi(S,r)}gc(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yc(r),r=r.sibling}function yc(r){switch(r.tag){case 0:case 11:case 15:Yl(r),r.flags&2048&&Ja(9,r,r.return);break;case 3:Yl(r);break;case 12:Yl(r);break;case 22:var u=r.stateNode;r.memoizedState!==null&&u._visibility&2&&(r.return===null||r.return.tag!==13)?(u._visibility&=-3,tu(r)):Yl(r);break;default:Yl(r)}}function tu(r){var u=r.deletions;if((r.flags&16)!==0){if(u!==null)for(var g=0;g<u.length;g++){var S=u[g];bn=S,Yi(S,r)}gc(r)}for(r=r.child;r!==null;){switch(u=r,u.tag){case 0:case 11:case 15:Ja(8,u,u.return),tu(u);break;case 22:g=u.stateNode,g._visibility&2&&(g._visibility&=-3,tu(u));break;default:tu(u)}r=r.sibling}}function Yi(r,u){for(;bn!==null;){var g=bn;switch(g.tag){case 0:case 11:case 15:Ja(8,g,u);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var S=g.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:eo(g.memoizedState.cache)}if(S=g.child,S!==null)S.return=g,bn=S;else e:for(g=r;bn!==null;){S=bn;var A=S.sibling,w=S.return;if(rf(S),S===g){bn=null;break e}if(A!==null){A.return=w,bn=A;break e}bn=w}}}function mo(r){var u=it(r);if(u!=null){if(typeof u.memoizedProps["data-testname"]!="string")throw Error(s(364));return u}if(r=_n(r),r===null)throw Error(s(362));return r.stateNode.current}function go(r,u){var g=r.tag;switch(u.$$typeof){case xa:if(r.type===u.value)return!0;break;case ur:e:{for(u=u.value,r=[r,0],g=0;g<r.length;){var S=r[g++],A=S.tag,w=r[g++],O=u[w];if(A!==5&&A!==26&&A!==27||!Eo(S)){for(;O!=null&&go(S,O);)w++,O=u[w];if(w===u.length){u=!0;break e}else for(S=S.child;S!==null;)r.push(S,w),S=S.sibling}}u=!1}return u;case cr:if((g===5||g===26||g===27)&&Tf(r.stateNode,u.value))return!0;break;case Do:if((g===5||g===6||g===26||g===27)&&(r=cu(r),r!==null&&0<=r.indexOf(u.value)))return!0;break;case Su:if((g===5||g===26||g===27)&&(r=r.memoizedProps["data-testname"],typeof r=="string"&&r.toLowerCase()===u.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function Fl(r){switch(r.$$typeof){case xa:return"<"+(E(r.value)||"Unknown")+">";case ur:return":has("+(Fl(r)||"")+")";case cr:return'[role="'+r.value+'"]';case Do:return'"'+r.value+'"';case Su:return'[data-testname="'+r.value+'"]';default:throw Error(s(365))}}function Kl(r,u){var g=[];r=[r,0];for(var S=0;S<r.length;){var A=r[S++],w=A.tag,O=r[S++],j=u[O];if(w!==5&&w!==26&&w!==27||!Eo(A)){for(;j!=null&&go(A,j);)O++,j=u[O];if(O===u.length)g.push(A);else for(A=A.child;A!==null;)r.push(A,O),A=A.sibling}}return g}function Mi(r,u){if(!In)throw Error(s(363));r=mo(r),r=Kl(r,u),u=[],r=Array.from(r);for(var g=0;g<r.length;){var S=r[g++],A=S.tag;if(A===5||A===26||A===27)Eo(S)||u.push(S.stateNode);else for(S=S.child;S!==null;)r.push(S),S=S.sibling}return u}function Jt(){return(dt&2)!==0&&mt!==0?mt&-mt:Ve.T!==null?Ir():nr()}function Ns(){if(Ei===0)if((mt&536870912)===0||pt){var r=rl;rl<<=1,(rl&3932160)===0&&(rl=262144),Ei=r}else Ei=536870912;return r=ki.current,r!==null&&(r.flags|=32),Ei}function sn(r,u,g){(r===ut&&(It===2||It===9)||r.cancelPendingCommit!==null)&&(fn(r,0),Za(r,mt,Ei,!1)),K(r,g),((dt&2)===0||r!==ut)&&(r===ut&&((dt&2)===0&&(Io|=g),un===4&&Za(r,mt,Ei,!1)),aa(r))}function Da(r,u,g){if((dt&6)!==0)throw Error(s(327));var S=!g&&(u&127)===0&&(u&r.expiredLanes)===0||L(r,u),A=S?C0(r,u):Wa(r,u,!0),w=S;do{if(A===0){zo&&!S&&Za(r,u,0,!1);break}else{if(g=r.current.alternate,w&&!E0(g)){A=Wa(r,u,!1),w=!1;continue}if(A===2){if(w=u,r.errorRecoveryDisabledLanes&w)var O=0;else O=r.pendingLanes&-536870913,O=O!==0?O:O&536870912?536870912:0;if(O!==0){u=O;e:{var j=r;A=bu;var le=Xt&&j.current.memoizedState.isDehydrated;if(le&&(fn(j,O).flags|=256),O=Wa(j,O,!1),O!==2){if(Uo&&!le){j.errorRecoveryDisabledLanes|=w,Io|=w,A=4;break e}w=Li,Li=A,w!==null&&(Li===null?Li=w:Li.push.apply(Li,w))}A=O}if(w=!1,A!==2)continue}}if(A===1){fn(r,0),Za(r,u,0,!0);break}e:{switch(S=r,w=A,w){case 0:case 1:throw Error(s(345));case 4:if((u&4194048)!==u)break;case 6:Za(S,u,Ei,!Oa);break e;case 2:Li=null;break;case 3:case 5:break;default:throw Error(s(329))}if((u&62914560)===u&&(A=xu+300-ui(),10<A)){if(Za(S,u,Ei,!Oa),I(S,0,!0)!==0)break e;fs=u,S.timeoutHandle=vf(Qa.bind(null,S,g,Li,Eu,$c,u,Ei,Io,fr,Oa,w,"Throttled",-0,0),A);break e}Qa(S,g,Li,Eu,$c,u,Ei,Io,fr,Oa,w,null,-0,0)}}break}while(!0);aa(r)}function Qa(r,u,g,S,A,w,O,j,le,ye,Ae,_e,Ue,tt){if(r.timeoutHandle=Ui,_e=u.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e=Sf(),po(u,w,_e);var Yn=(w&62914560)===w?xu-ui():(w&4194048)===w?ml-ui():0;if(Yn=z0(_e,Yn),Yn!==null){fs=w,r.cancelPendingCommit=Yn(es.bind(null,r,u,w,g,S,A,O,j,le,Ae,_e,null,Ue,tt)),Za(r,w,O,!ye);return}}es(r,u,w,g,S,A,O,j,le)}function E0(r){for(var u=r;;){var g=u.tag;if((g===0||g===11||g===15)&&u.flags&16384&&(g=u.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var S=0;S<g.length;S++){var A=g[S],w=A.getSnapshot;A=A.value;try{if(!Sn(w(),A))return!1}catch{return!1}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===r)break;for(;u.sibling===null;){if(u.return===null||u.return===r)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Za(r,u,g,S){u&=~dr,u&=~Io,r.suspendedLanes|=u,r.pingedLanes&=~u,S&&(r.warmLanes|=u),S=r.expirationTimes;for(var A=u;0<A;){var w=31-Ii(A),O=1<<w;S[w]=-1,A&=~O}g!==0&&J(r,g,u)}function vc(){return(dt&6)===0?(Ss(0),!1):!0}function _c(){if(ft!==null){if(It===0)var r=ft.return;else r=ft,Ua=qt=null,Hr(r),Ro=null,cl=0,r=ft;for(;r!==null;)S0(r.alternate,r),r=r.return;ft=null}}function fn(r,u){var g=r.timeoutHandle;g!==Ui&&(r.timeoutHandle=Ui,D0(g)),g=r.cancelPendingCommit,g!==null&&(r.cancelPendingCommit=null,g()),fs=0,_c(),ut=r,ft=g=Ki(r.current,null),mt=u,It=0,Rn=null,Oa=!1,zo=L(r,u),Uo=!1,fr=Ei=dr=Io=Ps=un=0,Li=bu=null,$c=!1,(u&8)!==0&&(u|=u&32);var S=r.entangledLanes;if(S!==0)for(r=r.entanglements,S&=u;0<S;){var A=31-Ii(S),w=1<<A;u|=r[A],S&=~w}return ds=u,At(),g}function Pt(r,u){at=null,Ve.H=Zi,u===Gn||u===Sa?(u=Bi(),It=3):u===Zc?(u=Bi(),It=4):It=u===xi?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Rn=u,ft===null&&(un=1,rc(r,Ne(u,r.current)))}function vt(){var r=ki.current;return r===null?!0:(mt&4194048)===mt?bi===null:(mt&62914560)===mt||(mt&536870912)!==0?r===bi:!1}function Ms(){var r=Ve.H;return Ve.H=Zi,r===null?Zi:r}function Fi(){var r=Ve.A;return Ve.A=rr,r}function Jl(){un=4,Oa||(mt&4194048)!==mt&&ki.current!==null||(zo=!0),(Ps&134217727)===0&&(Io&134217727)===0||ut===null||Za(ut,mt,Ei,!1)}function Wa(r,u,g){var S=dt;dt|=2;var A=Ms(),w=Fi();(ut!==r||mt!==u)&&(Eu=null,fn(r,u)),u=!1;var O=un;e:do try{if(It!==0&&ft!==null){var j=ft,le=Rn;switch(It){case 8:_c(),O=6;break e;case 3:case 2:case 9:case 6:ki.current===null&&(u=!0);var ye=It;if(It=0,Rn=null,$a(r,j,le,ye),g&&zo){O=0;break e}break;default:ye=It,It=0,Rn=null,$a(r,j,le,ye)}}T0(),O=un;break}catch(Ae){Pt(r,Ae)}while(!0);return u&&r.shellSuspendCounter++,Ua=qt=null,dt=S,Ve.H=A,Ve.A=w,ft===null&&(ut=null,mt=0,At()),O}function T0(){for(;ft!==null;)yo(ft)}function C0(r,u){var g=dt;dt|=2;var S=Ms(),A=Fi();ut!==r||mt!==u?(Eu=null,Oo=ui()+500,fn(r,u)):zo=L(r,u);e:do try{if(It!==0&&ft!==null){u=ft;var w=Rn;t:switch(It){case 1:It=0,Rn=null,$a(r,u,w,1);break;case 2:case 9:if(yn(w)){It=0,Rn=null,Sc(u);break}u=function(){It!==2&&It!==9||ut!==r||(It=7),aa(r)},w.then(u,u);break e;case 3:It=7;break e;case 4:It=5;break e;case 7:yn(w)?(It=0,Rn=null,Sc(u)):(It=0,Rn=null,$a(r,u,w,7));break;case 5:var O=null;switch(ft.tag){case 26:O=ft.memoizedState;case 5:case 27:var j=ft,le=j.type,ye=j.pendingProps;if(O?Ff(O):on(j.stateNode,le,ye)){It=0,Rn=null;var Ae=j.sibling;if(Ae!==null)ft=Ae;else{var _e=j.return;_e!==null?(ft=_e,Ql(_e)):ft=null}break t}}It=0,Rn=null,$a(r,u,w,5);break;case 6:It=0,Rn=null,$a(r,u,w,6);break;case 8:_c(),un=6;break e;default:throw Error(s(462))}}Xl();break}catch(Ue){Pt(r,Ue)}while(!0);return Ua=qt=null,Ve.H=S,Ve.A=A,dt=g,ft!==null?0:(ut=null,mt=0,At(),un)}function Xl(){for(;ft!==null&&!pp();)yo(ft)}function yo(r){var u=tf(r.alternate,r,ds);r.memoizedProps=r.pendingProps,u===null?Ql(r):ft=u}function Sc(r){var u=r,g=u.alternate;switch(u.tag){case 15:case 0:u=Xd(g,u,u.pendingProps,u.type,void 0,mt);break;case 11:u=Xd(g,u,u.pendingProps,u.type.render,u.ref,mt);break;case 5:Hr(u);default:S0(g,u),u=ft=Ec(u,ds),u=tf(g,u,ds)}r.memoizedProps=r.pendingProps,u===null?Ql(r):ft=u}function $a(r,u,g,S){Ua=qt=null,Hr(u),Ro=null,cl=0;var A=u.return;try{if(Bm(r,A,u,g,mt)){un=1,rc(r,Ne(g,r.current)),ft=null;return}}catch(w){if(A!==null)throw ft=A,w;un=1,rc(r,Ne(g,r.current)),ft=null;return}u.flags&32768?(pt||S===1?r=!0:zo||(mt&536870912)!==0?r=!1:(Oa=r=!0,(S===2||S===9||S===3||S===6)&&(S=ki.current,S!==null&&S.tag===13&&(S.flags|=16384))),vo(u,r)):Ql(u)}function Ql(r){var u=r;do{if((u.flags&32768)!==0){vo(u,Oa);return}r=u.return;var g=_0(u.alternate,u,ds);if(g!==null){ft=g;return}if(u=u.sibling,u!==null){ft=u;return}ft=u=r}while(u!==null);un===0&&(un=5)}function vo(r,u){do{var g=sf(r.alternate,r);if(g!==null){g.flags&=32767,ft=g;return}if(g=r.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!u&&(r=r.sibling,r!==null)){ft=r;return}ft=r=g}while(r!==null);un=6,ft=null}function es(r,u,g,S,A,w,O,j,le){r.cancelPendingCommit=null;do ns();while(Nn!==0);if((dt&6)!==0)throw Error(s(327));if(u!==null){if(u===r.current)throw Error(s(177));if(w=u.lanes|u.childLanes,w|=dl,$(r,g,w,O,j,le),r===ut&&(ft=ut=null,mt=0),gl=u,Vs=r,fs=g,hr=w,ed=A,th=S,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,An(pu,function(){return nu(),null})):(r.callbackNode=null,r.callbackPriority=0),S=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||S){S=Ve.T,Ve.T=null,A=ha(),ht(2),O=dt,dt|=4;try{Pm(r,u,g)}finally{dt=O,ht(A),Ve.T=S}}Nn=1,Ds(),ts(),bc()}}function Ds(){if(Nn===1){Nn=0;var r=Vs,u=gl,g=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||g){g=Ve.T,Ve.T=null;var S=ha();ht(2);var A=dt;dt|=4;try{eu(u,r),M0(r.containerInfo)}finally{dt=A,ht(S),Ve.T=g}}r.current=u,Nn=2}}function ts(){if(Nn===2){Nn=0;var r=Vs,u=gl,g=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||g){g=Ve.T,Ve.T=null;var S=ha();ht(2);var A=dt;dt|=4;try{x0(r,u.alternate,u)}finally{dt=A,ht(S),Ve.T=g}}Nn=3}}function bc(){if(Nn===4||Nn===3){Nn=0,Jf();var r=Vs,u=gl,g=fs,S=th;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Nn=5:(Nn=0,gl=Vs=null,xc(r,r.pendingLanes));var A=r.pendingLanes;if(A===0&&(qs=null),ae(g),u=u.stateNode,Oi&&typeof Oi.onCommitFiberRoot=="function")try{Oi.onCommitFiberRoot(ul,u,void 0,(u.current.flags&128)===128)}catch{}if(S!==null){u=Ve.T,A=ha(),ht(2),Ve.T=null;try{for(var w=r.onRecoverableError,O=0;O<S.length;O++){var j=S[O];w(j.value,{componentStack:j.stack})}}finally{Ve.T=u,ht(A)}}(fs&3)!==0&&ns(),aa(r),A=r.pendingLanes,(g&261930)!==0&&(A&42)!==0?r===Tu?wt++:(wt=0,Tu=r):wt=0,Xt&&du(),Ss(0)}}function xc(r,u){(r.pooledCacheLanes&=u)===0&&(u=r.pooledCache,u!=null&&(r.pooledCache=null,eo(u)))}function ns(){return Ds(),ts(),bc(),nu()}function nu(){if(Nn!==5)return!1;var r=Vs,u=hr;hr=0;var g=ae(fs),S=32>g?32:g;g=Ve.T;var A=ha();try{ht(S),Ve.T=null,S=ed,ed=null;var w=Vs,O=fs;if(Nn=0,gl=Vs=null,fs=0,(dt&6)!==0)throw Error(s(331));var j=dt;if(dt|=4,yc(w.current),mc(w,w.current,O,S),dt=j,Ss(0,!1),Oi&&typeof Oi.onPostCommitFiberRoot=="function")try{Oi.onPostCommitFiberRoot(ul,w)}catch{}return!0}finally{ht(A),Ve.T=g,xc(r,u)}}function _o(r,u,g){u=Ne(g,u),u=Kd(r.stateNode,u,2),r=so(r,u,2),r!==null&&(K(r,2),aa(r))}function Xe(r,u,g){if(r.tag===3)_o(r,r,g);else for(;u!==null;){if(u.tag===3){_o(u,r,g);break}else if(u.tag===1){var S=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(qs===null||!qs.has(S))){r=Ne(g,r),g=l0(2),S=so(u,g,2),S!==null&&(r0(g,S,u,r),K(S,2),aa(S));break}}u=u.return}}function Zl(r,u,g){var S=r.pingCache;if(S===null){S=r.pingCache=new $i;var A=new Set;S.set(u,A)}else A=S.get(u),A===void 0&&(A=new Set,S.set(u,A));A.has(g)||(Uo=!0,A.add(g),r=A0.bind(null,r,u,g),u.then(r,r))}function A0(r,u,g){var S=r.pingCache;S!==null&&S.delete(u),r.pingedLanes|=r.suspendedLanes&g,r.warmLanes&=~g,ut===r&&(mt&g)===g&&(un===4||un===3&&(mt&62914560)===mt&&300>ui()-xu?(dt&2)===0&&fn(r,0):dr|=g,fr===mt&&(fr=0)),aa(r)}function w0(r,u){u===0&&(u=G()),r=io(r,u),r!==null&&(K(r,u),aa(r))}function qm(r){var u=r.memoizedState,g=0;u!==null&&(g=u.retryLane),w0(r,g)}function Vm(r,u){var g=0;switch(r.tag){case 31:case 13:var S=r.stateNode,A=r.memoizedState;A!==null&&(g=A.retryLane);break;case 19:S=r.stateNode;break;case 22:S=r.stateNode._retryCache;break;default:throw Error(s(314))}S!==null&&S.delete(u),w0(r,g)}function An(r,u){return hu(r,u)}function cf(r,u,g,S){this.tag=r,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qo(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Ki(r,u){var g=r.alternate;return g===null?(g=t(r.tag,u,r.key,r.mode),g.elementType=r.elementType,g.type=r.type,g.stateNode=r.stateNode,g.alternate=r,r.alternate=g):(g.pendingProps=u,g.type=r.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=r.flags&65011712,g.childLanes=r.childLanes,g.lanes=r.lanes,g.child=r.child,g.memoizedProps=r.memoizedProps,g.memoizedState=r.memoizedState,g.updateQueue=r.updateQueue,u=r.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=r.sibling,g.index=r.index,g.ref=r.ref,g.refCleanup=r.refCleanup,g}function Ec(r,u){r.flags&=65011714;var g=r.alternate;return g===null?(r.childLanes=0,r.lanes=u,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=g.childLanes,r.lanes=g.lanes,r.child=g.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=g.memoizedProps,r.memoizedState=g.memoizedState,r.updateQueue=g.updateQueue,r.type=g.type,u=g.dependencies,r.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),r}function zs(r,u,g,S,A,w){var O=0;if(S=r,typeof r=="function")Qo(r)&&(O=1);else if(typeof r=="string")O=pa&&On?Gc(r,g,Vn.current)?26:Kf(r)?27:5:pa?Gc(r,g,Vn.current)?26:5:On&&Kf(r)?27:5;else e:switch(r){case ou:return r=t(31,g,u,A),r.elementType=ou,r.lanes=w,r;case el:return da(g.children,A,w,u);case tl:O=8,A|=24;break;case nl:return r=t(12,g,u,A|2),r.elementType=nl,r.lanes=w,r;case wc:return r=t(13,g,u,A),r.elementType=wc,r.lanes=w,r;case Us:return r=t(19,g,u,A),r.elementType=Us,r.lanes=w,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case fa:O=10;break e;case su:O=9;break e;case Wl:O=11;break e;case Rc:O=14;break e;case yi:O=16,S=null;break e}O=29,g=Error(s(130,r===null?"null":typeof r,"")),S=null}return u=t(O,g,u,A),u.elementType=r,u.type=S,u.lanes=w,u}function da(r,u,g,S){return r=t(7,r,S,u),r.lanes=g,r}function df(r,u,g){return r=t(6,r,null,u),r.lanes=g,r}function ff(r){var u=t(18,null,null,0);return u.stateNode=r,u}function hf(r,u,g){return u=t(4,r.children!==null?r.children:[],r.key,u),u.lanes=g,u.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},u}function R0(r,u,g,S,A,w,O,j,le){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ui,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=P(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P(0),this.hiddenUpdates=P(null),this.identifierPrefix=S,this.onUncaughtError=A,this.onCaughtError=w,this.onRecoverableError=O,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=le,this.incompleteTransitions=new Map}function So(r,u,g,S,A,w,O,j,le,ye,Ae,_e){return r=new R0(r,u,g,O,le,ye,Ae,_e,j),u=1,w===!0&&(u|=24),w=t(3,null,null,u),r.current=w,w.stateNode=r,u=Rl(),u.refCount++,r.pooledCache=u,u.refCount++,w.memoizedState={element:S,isDehydrated:g,cache:u},si(w),r}function Tc(r){return r?(r=as,r):as}function iu(r){var u=r._reactInternals;if(u===void 0)throw typeof r.render=="function"?Error(s(188)):(r=Object.keys(r).join(","),Error(s(268,r)));return r=f(u),r=r!==null?h(r):null,r===null?null:er(r.stateNode)}function pf(r,u,g,S,A,w){A=Tc(A),S.context===null?S.context=A:S.pendingContext=A,S=Va(u),S.payload={element:g},w=w===void 0?null:w,w!==null&&(S.callback=w),g=so(r,S,u),g!==null&&(sn(g,r,u),kr(g,r,u))}function Zo(r,u){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var g=r.retryLane;r.retryLane=g!==0&&g<u?g:u}}function au(r,u){Zo(r,u),(r=r.alternate)&&Zo(r,u)}var lt={},Cc=Sm(),Di=Gy(),Ac=Object.assign,Wo=Symbol.for("react.element"),is=Symbol.for("react.transitional.element"),$o=Symbol.for("react.portal"),el=Symbol.for("react.fragment"),tl=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),su=Symbol.for("react.consumer"),fa=Symbol.for("react.context"),Wl=Symbol.for("react.forward_ref"),wc=Symbol.for("react.suspense"),Us=Symbol.for("react.suspense_list"),Rc=Symbol.for("react.memo"),yi=Symbol.for("react.lazy"),ou=Symbol.for("react.activity"),mf=Symbol.for("react.memo_cache_sentinel"),Is=Symbol.iterator,bo=Symbol.for("react.client.reference"),xo=Array.isArray,Ve=Cc.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,gf=e.rendererVersion,lu=e.rendererPackageName,$l=e.extraDevToolsConfig,er=e.getPublicInstance,N0=e.getRootHostContext,tr=e.getChildHostContext,Nc=e.prepareForCommit,M0=e.resetAfterCommit,yf=e.createInstance;e.cloneMutableInstance;var ru=e.appendInitialChild,zi=e.finalizeInitialChildren,vi=e.shouldSetTextContent,Os=e.createTextInstance;e.cloneMutableTextInstance;var vf=e.scheduleTimeout,D0=e.cancelTimeout,Ui=e.noTimeout,vn=e.isPrimaryRenderer;e.warnsIfNotActing;var _t=e.supportsMutation,Ji=e.supportsPersistence,Xt=e.supportsHydration,it=e.getInstanceFromNode;e.beforeActiveInstanceBlur;var Lt=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var ht=e.setCurrentUpdatePriority,ha=e.getCurrentUpdatePriority,nr=e.resolveUpdatePriority;e.trackSchedulerEvent,e.resolveEventType,e.resolveEventTimeStamp;var il=e.shouldAttemptEagerTransition,Mc=e.detachDeletedInstance;e.requestPostPaintCallback;var uu=e.maySuspendCommit,ir=e.maySuspendCommitOnUpdate,_f=e.maySuspendCommitInSyncRender,on=e.preloadInstance,Sf=e.startSuspendingCommit,Dc=e.suspendInstance;e.suspendOnActiveViewTransition;var z0=e.waitForCommitToBeReady;e.getSuspendedCommitReason;var al=e.NotPendingTransition,sl=e.HostTransitionContext,bf=e.resetFormInstance;e.bindToConsole;var xf=e.supportsMicrotasks,Ef=e.scheduleMicrotask,In=e.supportsTestSelectors,_n=e.findFiberRoot,zc=e.getBoundingRect,cu=e.getTextContent,Eo=e.isHiddenSubtree,Tf=e.matchAccessibilityRole,ks=e.setFocusIfFocusable,Uc=e.setupIntersectionObserver,Cf=e.appendChild,Af=e.appendChildToContainer,U0=e.commitTextUpdate,I0=e.commitMount,O0=e.commitUpdate,k0=e.insertBefore,L0=e.insertInContainerBefore,G0=e.removeChild,wf=e.removeChildFromContainer,Rf=e.resetTextContent,jm=e.hideInstance,H0=e.hideTextInstance,B0=e.unhideInstance,P0=e.unhideTextInstance;e.cancelViewTransitionName,e.cancelRootViewTransitionName,e.restoreRootViewTransitionName,e.cloneRootViewTransitionContainer,e.removeRootViewTransitionClone,e.measureClonedInstance,e.hasInstanceChanged,e.hasInstanceAffectedParent,e.startViewTransition,e.startGestureTransition,e.stopViewTransition,e.getCurrentGestureOffset,e.createViewTransitionInstance;var Nf=e.clearContainer;e.createFragmentInstance,e.updateFragmentInstanceFiber,e.commitNewChildToFragmentInstance,e.deleteChildFromFragmentInstance;var q0=e.cloneInstance,Mf=e.createContainerChildSet,Df=e.appendChildToContainerChildSet,V0=e.finalizeContainerChildren,zf=e.replaceContainerChildren,j0=e.cloneHiddenInstance,Uf=e.cloneHiddenTextInstance,To=e.isSuspenseInstancePending,Ic=e.isSuspenseInstanceFallback,Oc=e.getSuspenseInstanceFallbackErrorDetails,kc=e.registerSuspenseInstanceRetry,Y0=e.canHydrateFormStateMarker,If=e.isFormStateMarkerMatching,F0=e.getNextHydratableSibling,K0=e.getNextHydratableSiblingAfterSingleton,J0=e.getFirstHydratableChild,X0=e.getFirstHydratableChildWithinContainer,Q0=e.getFirstHydratableChildWithinActivityInstance,Z0=e.getFirstHydratableChildWithinSuspenseInstance,Of=e.getFirstHydratableChildWithinSingleton,W0=e.canHydrateInstance,$0=e.canHydrateTextInstance,kf=e.canHydrateActivityInstance,ep=e.canHydrateSuspenseInstance,tp=e.hydrateInstance,Ym=e.hydrateTextInstance,Lf=e.hydrateActivityInstance,np=e.hydrateSuspenseInstance,ip=e.getNextHydratableInstanceAfterActivityInstance,Gf=e.getNextHydratableInstanceAfterSuspenseInstance,ap=e.commitHydratedInstance,sp=e.commitHydratedContainer,Fm=e.commitHydratedActivityInstance,Km=e.commitHydratedSuspenseInstance,op=e.finalizeHydratedChildren,du=e.flushHydrationEvents;e.clearActivityBoundary;var Hf=e.clearSuspenseBoundary;e.clearActivityBoundaryFromContainer;var Lc=e.clearSuspenseBoundaryFromContainer,lp=e.hideDehydratedBoundary,rp=e.unhideDehydratedBoundary,ar=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var up=e.validateHydratableInstance,Bf=e.validateHydratableTextInstance,pa=e.supportsResources,Gc=e.isHostHoistableType,fu=e.getHoistableRoot,Pf=e.getResource,qf=e.acquireResource,Co=e.releaseResource,cp=e.hydrateHoistable,Vf=e.mountHoistable,jf=e.unmountHoistable,Hc=e.createHoistableInstance,dp=e.prepareToCommitHoistables,Yf=e.mayResourceSuspendCommit,Ff=e.preloadResource,fp=e.suspendResource,On=e.supportsSingletons,Bc=e.resolveSingletonInstance,wn=e.acquireSingletonInstance,qn=e.releaseSingletonInstance,Kf=e.isHostSingletonType,ol=e.isSingletonScope,Pc=[],ll=-1,as={},Ii=Math.clz32?Math.clz32:z,qc=Math.log,hp=Math.LN2,Vc=256,rl=262144,sr=4194304,hu=Di.unstable_scheduleCallback,jc=Di.unstable_cancelCallback,pp=Di.unstable_shouldYield,Jf=Di.unstable_requestPaint,ui=Di.unstable_now,Yc=Di.unstable_ImmediatePriority,mp=Di.unstable_UserBlockingPriority,pu=Di.unstable_NormalPriority,Fc=Di.unstable_IdlePriority,Xf=Di.log,gp=Di.unstable_setDisableYieldValue,ul=null,Oi=null,Sn=typeof Object.is=="function"?Object.is:De,Kc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Jm=Object.prototype.hasOwnProperty,Jc,ss,mu=!1,Qf=new WeakMap,Ls=[],os=0,Gt=null,gu=0,ma=[],Xi=0,ga=null,Qn=1,za="",Vn=x(null),Gs=x(null),Zn=x(null),yu=x(null),kn=null,Qt=null,pt=!1,ls=null,_i=!1,Xc=Error(s(519)),ya=x(null),qt=null,Ua=null,yp=typeof AbortController<"u"?AbortController:function(){var r=[],u=this.signal={aborted:!1,addEventListener:function(g,S){r.push(S)}};this.abort=function(){u.aborted=!0,r.forEach(function(g){return g()})}},jn=Di.unstable_scheduleCallback,Xm=Di.unstable_NormalPriority,Zt={$$typeof:fa,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},vu=null,zt=null,ci=!1,va=!1,Qc=!1,Ao=0,or=null,Zf=0,Hs=0,Ln=null,_a=Ve.S;Ve.S=function(r,u){ml=ui(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&Id(r,u),_a!==null&&_a(r,u)};var wo=x(null),Gn=Error(s(460)),Zc=Error(s(474)),Sa=Error(s(542)),rs={then:function(){}},Si=null,Ro=null,cl=0,Wn=Or(!0),Wf=Or(!1),$n=[],us=0,dl=0,Qi=!1,Wc=!1,fl=x(null),No=x(0),ki=x(null),bi=null,hn=x(0),Bs=0,at=null,Be=null,$e=null,rt=!1,ot=!1,St=!1,di=0,ba=0,Ia=null,$f=0,Zi={readContext:gn,use:Dl,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useLayoutEffect:nn,useInsertionEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useSyncExternalStore:nn,useId:nn,useHostTransitionStatus:nn,useFormState:nn,useActionState:nn,useOptimistic:nn,useMemoCache:nn,useCacheRefresh:nn};Zi.useEffectEvent=nn;var ln={readContext:gn,use:Dl,useCallback:function(r,u){return oi().memoizedState=[r,u===void 0?null:u],r},useContext:gn,useEffect:qr,useImperativeHandle:function(r,u,g){g=g!=null?g.concat([r]):null,jo(4194308,4,Ol.bind(null,u,r),g)},useLayoutEffect:function(r,u){return jo(4194308,4,r,u)},useInsertionEffect:function(r,u){jo(4,2,r,u)},useMemo:function(r,u){var g=oi();u=u===void 0?null:u;var S=r();if(St){Me(!0);try{r()}finally{Me(!1)}}return g.memoizedState=[S,u],S},useReducer:function(r,u,g){var S=oi();if(g!==void 0){var A=g(u);if(St){Me(!0);try{g(u)}finally{Me(!1)}}}else A=u;return S.memoizedState=S.baseState=A,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:A},S.queue=r,r=r.dispatch=Hm.bind(null,at,r),[S.memoizedState,r]},useRef:function(r){var u=oi();return r={current:r},u.memoizedState=r},useState:function(r){r=Hd(r);var u=r.queue,g=i0.bind(null,at,u);return u.dispatch=g,[r.memoizedState,g]},useDebugValue:jr,useDeferredValue:function(r,u){var g=oi();return Ll(g,r,u)},useTransition:function(){var r=Hd(!1);return r=e0.bind(null,at,r.queue,!0,!1),oi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,u,g){var S=at,A=oi();if(pt){if(g===void 0)throw Error(s(407));g=g()}else{if(g=u(),ut===null)throw Error(s(349));(mt&127)!==0||Qh(S,u,g)}A.memoizedState=g;var w={value:g,getSnapshot:u};return A.queue=w,qr(Gd.bind(null,S,w,r),[r]),S.flags|=2048,ji(9,{destroy:void 0},Ld.bind(null,S,w,g,u),null),g},useId:function(){var r=oi(),u=ut.identifierPrefix;if(pt){var g=za,S=Qn;g=(S&~(1<<32-Ii(S)-1)).toString(32)+g,u="_"+u+"R_"+g,g=di++,0<g&&(u+="H"+g.toString(32)),u+="_"}else g=$f++,u="_"+u+"r_"+g.toString(32)+"_";return r.memoizedState=u},useHostTransitionStatus:jd,useFormState:Pd,useActionState:Pd,useOptimistic:function(r){var u=oi();u.memoizedState=u.baseState=r;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=g,u=sc.bind(null,at,!0,g),g.dispatch=u,[r,u]},useMemoCache:Xu,useCacheRefresh:function(){return oi().memoizedState=Gm.bind(null,at)},useEffectEvent:function(r){var u=oi(),g={impl:r};return u.memoizedState=g,function(){if((dt&2)!==0)throw Error(s(440));return g.impl.apply(void 0,arguments)}}},cs={readContext:gn,use:Dl,useCallback:ic,useContext:gn,useEffect:Il,useImperativeHandle:$h,useInsertionEffect:uo,useLayoutEffect:Vr,useMemo:kl,useReducer:Cs,useRef:nc,useState:function(){return Cs(Ma)},useDebugValue:jr,useDeferredValue:function(r,u){var g=Kt();return Vd(g,Be.memoizedState,r,u)},useTransition:function(){var r=Cs(Ma)[0],u=Kt().memoizedState;return[typeof r=="boolean"?r:li(r),u]},useSyncExternalStore:qo,useId:ac,useHostTransitionStatus:jd,useFormState:zl,useActionState:zl,useOptimistic:function(r,u){var g=Kt();return Br(g,Be,r,u)},useMemoCache:Xu,useCacheRefresh:n0};cs.useEffectEvent=pi;var Mo={readContext:gn,use:Dl,useCallback:ic,useContext:gn,useEffect:Il,useImperativeHandle:$h,useInsertionEffect:uo,useLayoutEffect:Vr,useMemo:kl,useReducer:Zu,useRef:nc,useState:function(){return Zu(Ma)},useDebugValue:jr,useDeferredValue:function(r,u){var g=Kt();return Be===null?Ll(g,r,u):Vd(g,Be.memoizedState,r,u)},useTransition:function(){var r=Zu(Ma)[0],u=Kt().memoizedState;return[typeof r=="boolean"?r:li(r),u]},useSyncExternalStore:qo,useId:ac,useHostTransitionStatus:jd,useFormState:Ul,useActionState:Ul,useOptimistic:function(r,u){var g=Kt();return Be!==null?Br(g,Be,r,u):(g.baseState=r,[r,g.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:n0};Mo.useEffectEvent=pi;var _u={enqueueSetState:function(r,u,g){r=r._reactInternals;var S=Jt(),A=Va(S);A.payload=u,g!=null&&(A.callback=g),u=so(r,A,S),u!==null&&(sn(u,r,S),kr(u,r,S))},enqueueReplaceState:function(r,u,g){r=r._reactInternals;var S=Jt(),A=Va(S);A.tag=1,A.payload=u,g!=null&&(A.callback=g),u=so(r,A,S),u!==null&&(sn(u,r,S),kr(u,r,S))},enqueueForceUpdate:function(r,u){r=r._reactInternals;var g=Jt(),S=Va(g);S.tag=2,u!=null&&(S.callback=u),u=so(r,S,g),u!==null&&(sn(u,r,g),kr(u,r,g))}},xi=Error(s(461)),Yt=!1,hl={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null},pn=!1,mn=!1,lr=!1,eh=typeof WeakSet=="function"?WeakSet:Set,bn=null,rn=null,xn=!1,Ut=null,Wi=8192,rr={getCacheForType:function(r){var u=gn(Zt),g=u.data.get(r);return g===void 0&&(g=r(),u.data.set(r,g)),g},cacheSignal:function(){return gn(Zt).controller.signal}},xa=0,ur=1,cr=2,Su=3,Do=4;if(typeof Symbol=="function"&&Symbol.for){var pl=Symbol.for;xa=pl("selector.component"),ur=pl("selector.has_pseudo_class"),cr=pl("selector.role"),Su=pl("selector.test_id"),Do=pl("selector.text")}var $i=typeof WeakMap=="function"?WeakMap:Map,dt=0,ut=null,ft=null,mt=0,It=0,Rn=null,Oa=!1,zo=!1,Uo=!1,ds=0,un=0,Ps=0,Io=0,dr=0,Ei=0,fr=0,bu=null,Li=null,$c=!1,xu=0,ml=0,Oo=1/0,Eu=null,qs=null,Nn=0,Vs=null,gl=null,fs=0,hr=0,ed=null,th=null,wt=0,Tu=null;return lt.attemptContinuousHydration=function(r){if(r.tag===13||r.tag===31){var u=io(r,67108864);u!==null&&sn(u,r,67108864),au(r,67108864)}},lt.attemptHydrationAtCurrentPriority=function(r){if(r.tag===13||r.tag===31){var u=Jt();u=xe(u);var g=io(r,u);g!==null&&sn(g,r,u),au(r,u)}},lt.attemptSynchronousHydration=function(r){switch(r.tag){case 3:if(r=r.stateNode,r.current.memoizedState.isDehydrated){var u=D(r.pendingLanes);if(u!==0){for(r.pendingLanes|=2,r.entangledLanes|=2;u;){var g=1<<31-Ii(u);r.entanglements[1]|=g,u&=~g}aa(r),(dt&6)===0&&(Oo=ui()+500,Ss(0))}}break;case 31:case 13:u=io(r,2),u!==null&&sn(u,r,2),vc(),au(r,2)}},lt.batchedUpdates=function(r,u){return r(u)},lt.createComponentSelector=function(r){return{$$typeof:xa,value:r}},lt.createContainer=function(r,u,g,S,A,w,O,j,le,ye){return So(r,u,!1,null,g,S,w,null,O,j,le,ye)},lt.createHasPseudoClassSelector=function(r){return{$$typeof:ur,value:r}},lt.createHydrationContainer=function(r,u,g,S,A,w,O,j,le,ye,Ae,_e,Ue,tt){return r=So(g,S,!0,r,A,w,j,tt,le,ye,Ae,_e),r.context=Tc(null),g=r.current,S=Jt(),S=xe(S),A=Va(S),A.callback=u??null,so(g,A,S),u=S,r.current.lanes=u,K(r,u),aa(r),r},lt.createPortal=function(r,u,g){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:S==null?null:""+S,children:r,containerInfo:u,implementation:g}},lt.createRoleSelector=function(r){return{$$typeof:cr,value:r}},lt.createTestNameSelector=function(r){return{$$typeof:Su,value:r}},lt.createTextSelector=function(r){return{$$typeof:Do,value:r}},lt.defaultOnCaughtError=function(r){console.error(r)},lt.defaultOnRecoverableError=function(r){Kc(r)},lt.defaultOnUncaughtError=function(r){Kc(r)},lt.deferredUpdates=function(r){var u=Ve.T,g=ha();try{return ht(32),Ve.T=null,r()}finally{ht(g),Ve.T=u}},lt.discreteUpdates=function(r,u,g,S,A){var w=Ve.T,O=ha();try{return ht(2),Ve.T=null,r(u,g,S,A)}finally{ht(O),Ve.T=w,dt===0&&(Oo=ui()+500)}},lt.findAllNodes=Mi,lt.findBoundingRects=function(r,u){if(!In)throw Error(s(363));u=Mi(r,u),r=[];for(var g=0;g<u.length;g++)r.push(zc(u[g]));for(u=r.length-1;0<u;u--){g=r[u];for(var S=g.x,A=S+g.width,w=g.y,O=w+g.height,j=u-1;0<=j;j--)if(u!==j){var le=r[j],ye=le.x,Ae=ye+le.width,_e=le.y,Ue=_e+le.height;if(S>=ye&&w>=_e&&A<=Ae&&O<=Ue){r.splice(u,1);break}else if(S!==ye||g.width!==le.width||Ue<w||_e>O){if(!(w!==_e||g.height!==le.height||Ae<S||ye>A)){ye>S&&(le.width+=ye-S,le.x=S),Ae<A&&(le.width=A-ye),r.splice(u,1);break}}else{_e>w&&(le.height+=_e-w,le.y=w),Ue<O&&(le.height=O-_e),r.splice(u,1);break}}}return r},lt.findHostInstance=iu,lt.findHostInstanceWithNoPortals=function(r){return r=f(r),r=r!==null?m(r):null,r===null?null:er(r.stateNode)},lt.findHostInstanceWithWarning=function(r){return iu(r)},lt.flushPassiveEffects=ns,lt.flushSyncFromReconciler=function(r){var u=dt;dt|=1;var g=Ve.T,S=ha();try{if(ht(2),Ve.T=null,r)return r()}finally{ht(S),Ve.T=g,dt=u,(dt&6)===0&&Ss(0)}},lt.flushSyncWork=vc,lt.focusWithin=function(r,u){if(!In)throw Error(s(363));for(r=mo(r),u=Kl(r,u),u=Array.from(u),r=0;r<u.length;){var g=u[r++],S=g.tag;if(!Eo(g)){if((S===5||S===26||S===27)&&ks(g.stateNode))return!0;for(g=g.child;g!==null;)u.push(g),g=g.sibling}}return!1},lt.getFindAllNodesFailureDescription=function(r,u){if(!In)throw Error(s(363));var g=0,S=[];r=[mo(r),0];for(var A=0;A<r.length;){var w=r[A++],O=w.tag,j=r[A++],le=u[j];if((O!==5&&O!==26&&O!==27||!Eo(w))&&(go(w,le)&&(S.push(Fl(le)),j++,j>g&&(g=j)),j<u.length))for(w=w.child;w!==null;)r.push(w,j),w=w.sibling}if(g<u.length){for(r=[];g<u.length;g++)r.push(Fl(u[g]));return`findAllNodes was able to match part of the selector:
  `+(S.join(" > ")+`

No matching component was found for:
  `)+r.join(" > ")}return null},lt.getPublicRootInstance=function(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 27:case 5:return er(r.child.stateNode);default:return r.child.stateNode}},lt.injectIntoDevTools=function(){var r={bundleType:0,version:gf,rendererPackageName:lu,currentDispatcherRef:Ve,reconcilerVersion:"19.2.0"};if($l!==null&&(r.rendererConfig=$l),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")r=!1;else{var u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(u.isDisabled||!u.supportsFiber)r=!0;else{try{ul=u.inject(r),Oi=u}catch{}r=!!u.checkDCE}}return r},lt.isAlreadyRendering=function(){return(dt&6)!==0},lt.observeVisibleRects=function(r,u,g,S){if(!In)throw Error(s(363));r=Mi(r,u);var A=Uc(r,g,S).disconnect;return{disconnect:function(){A()}}},lt.shouldError=function(){return null},lt.shouldSuspend=function(){return!1},lt.startHostTransition=function(r,u,g,S){if(r.tag!==5)throw Error(s(476));var A=t0(r).queue;e0(r,A,u,al,g===null?i:function(){var w=t0(r);return w.next===null&&(w=r.alternate.memoizedState),Yr(r,w.next.queue,{},Jt()),g(S)})},lt.updateContainer=function(r,u,g,S){var A=u.current,w=Jt();return pf(A,w,r,u,g,S),w},lt.updateContainerSync=function(r,u,g,S){return pf(u.current,2,r,u,g,S),2},lt},n.exports.default=n.exports,Object.defineProperty(n.exports,"__esModule",{value:!0})})(Pg)),Pg.exports}var c2;function I8(){return c2||(c2=1,Bg.exports=U8()),Bg.exports}var O8=I8();const k8=Ly(O8);var qg={exports:{}},vl={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d2;function L8(){return d2||(d2=1,vl.ConcurrentRoot=1,vl.ContinuousEventPriority=8,vl.DefaultEventPriority=32,vl.DiscreteEventPriority=2,vl.IdleEventPriority=268435456,vl.LegacyRoot=0,vl.NoEventPriority=0),vl}var f2;function G8(){return f2||(f2=1,qg.exports=L8()),qg.exports}var Nm=G8();const h2={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let p2=!1,m2=!1;const dm=".react-konva-event",H8=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,B8=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,P8={};function Mm(n,e,t=P8){if(!p2&&"zIndex"in e&&(console.warn(B8),p2=!0),!m2&&e.draggable){var i=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;i&&!s&&(console.warn(H8),m2=!0)}for(var l in t)if(!h2[l]){var c=l.slice(0,2)==="on",f=t[l]!==e[l];if(c&&f){var h=l.substr(2).toLowerCase();h.substr(0,7)==="content"&&(h="content"+h.substr(7,1).toUpperCase()+h.substr(8)),n.off(h,t[l])}var m=!e.hasOwnProperty(l);m&&n.setAttr(l,void 0)}var v=e._useStrictMode,E={},x=!1;const R={};for(var l in e)if(!h2[l]){var c=l.slice(0,2)==="on",N=t[l]!==e[l];if(c&&N){var h=l.substr(2).toLowerCase();h.substr(0,7)==="content"&&(h="content"+h.substr(7,1).toUpperCase()+h.substr(8)),e[l]&&(R[h]=e[l])}!c&&(e[l]!==t[l]||v&&e[l]!==n.getAttr(l))&&(x=!0,E[l]=e[l])}x&&(n.setAttrs(E),zr(n));for(var h in R)n.off(h+dm),n.on(h+dm,R[h])}function zr(n){if(!Re.autoDrawEnabled){var e=n.getLayer()||n.getStage();e&&e.batchDraw()}}var Vg=Gy();const pb={},q8={};Rd.Node.prototype._applyProps=Mm;let mb=Nm.DefaultEventPriority;function V8(n,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}n.add(e),zr(n)}function j8(n,e,t){let i=Rd[n];i||(console.error(`Konva has no node with the type ${n}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${n}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),i=Rd.Group);const s={},l={};for(var c in e)if(c!=="ref"){var f=c.slice(0,2)==="on";f?l[c]=e[c]:s[c]=e[c]}const h=new i(s);return Mm(h,l),h}function Y8(n,e,t){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${n}"`)}function F8(n,e,t){return!1}function K8(n){return n}function J8(){return null}function X8(){return null}function Q8(n,e,t,i){return q8}function Z8(){}function W8(n){}function $8(n,e){return!1}function eA(){return pb}function tA(){return pb}const nA=setTimeout,iA=clearTimeout,aA=!0,sA=n=>{n()},oA=-1;function lA(n,e){return!1}const rA=!1,uA=!1,cA=!0,dA=!1,fA=!1;function hA(n,e){e.parent===n?e.moveToTop():n.add(e),zr(n)}function pA(n,e){e.parent===n?e.moveToTop():n.add(e),zr(n)}function gb(n,e,t){e._remove(),n.add(e),e.setZIndex(t.getZIndex()),zr(n)}function mA(n,e,t){gb(n,e,t)}function gA(n,e){e.destroy(),e.off(dm),zr(n)}function yA(n,e){e.destroy(),e.off(dm),zr(n)}function vA(n,e,t){console.error(`Text components are not yet supported in ReactKonva. You text is: "${t}"`)}function _A(n,e,t){}function SA(n,e,t,i){Mm(n,i,t)}function bA(n){n.hide(),zr(n)}function xA(n){}function EA(n,e){(e.visible==null||e.visible)&&n.show()}function TA(n,e){}function CA(n){}function AA(){}function wA(){return null}function RA(){}function NA(){}function MA(){return Nm.DefaultEventPriority}function DA(){}function zA(){return null}function UA(n){mb=n}function IA(){return mb}function OA(){return Nm.DiscreteEventPriority}function kA(){return!1}function LA(){}function GA(){return null}function HA(){return-1.1}function BA(){}function PA(){return!1}function qA(){return!0}function VA(){}function jA(){}function YA(){return null}const FA=null,KA=Dn.createContext(null);function JA(){}const XA=Object.freeze(Object.defineProperty({__proto__:null,HostTransitionContext:KA,NotPendingTransition:FA,afterActiveInstanceBlur:NA,appendChild:hA,appendChildToContainer:pA,appendInitialChild:V8,beforeActiveInstanceBlur:RA,cancelTimeout:iA,clearContainer:CA,commitMount:_A,commitTextUpdate:vA,commitUpdate:SA,createInstance:j8,createTextInstance:Y8,detachDeletedInstance:AA,finalizeInitialChildren:F8,getChildHostContext:tA,getCurrentEventPriority:MA,getCurrentUpdatePriority:IA,getInstanceFromNode:wA,getInstanceFromScope:zA,getPublicInstance:K8,getRootHostContext:eA,hideInstance:bA,hideTextInstance:xA,idlePriority:Vg.unstable_IdlePriority,insertBefore:gb,insertInContainerBefore:mA,isPrimaryRenderer:rA,maySuspendCommit:PA,noTimeout:oA,now:Vg.unstable_now,preloadInstance:qA,prepareForCommit:J8,preparePortalMount:X8,prepareScopeUpdate:DA,prepareUpdate:Q8,removeChild:gA,removeChildFromContainer:yA,requestPostPaintCallback:BA,resetAfterCommit:Z8,resetFormInstance:JA,resetTextContent:W8,resolveEventTimeStamp:HA,resolveEventType:GA,resolveUpdatePriority:OA,run:Vg.unstable_runWithPriority,scheduleMicrotask:sA,scheduleTimeout:nA,setCurrentUpdatePriority:UA,shouldAttemptEagerTransition:kA,shouldDeprioritizeSubtree:$8,shouldSetTextContent:lA,startSuspendingCommit:VA,supportsHydration:fA,supportsMicrotasks:aA,supportsMutation:cA,supportsPersistence:dA,suspendInstance:jA,trackSchedulerEvent:LA,unhideInstance:EA,unhideTextInstance:TA,waitForCommitToBeReady:YA,warnsIfNotActing:uA},Symbol.toStringTag,{value:"Module"}));function yb(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const s=yb(i,e,t);if(s)return s;i=i.sibling}}function vb(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const $y=vb(ee.createContext(null));class _b extends ee.Component{render(){return ee.createElement($y.Provider,{value:this._reactInternals},this.props.children)}}function QA(){const n=ee.useContext($y);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ee.useId();return ee.useMemo(()=>{for(const t of[n,n==null?void 0:n.alternate]){if(!t)continue;const i=yb(t,!1,s=>{let l=s.memoizedState;for(;l;){if(l.memoizedState===e)return!0;l=l.next}});if(i)return i}},[n,e])}const ZA=Symbol.for("react.context"),WA=n=>n!==null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===ZA;function $A(){const n=QA(),[e]=ee.useState(()=>new Map);e.clear();let t=n;for(;t;){const i=t.type;WA(i)&&i!==$y&&!e.has(i)&&e.set(i,ee.use(vb(i))),t=t.return}return e}function ew(){const n=$A();return ee.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>ee.createElement(e,null,ee.createElement(t.Provider,{...i,value:n.get(t)})),e=>ee.createElement(_b,{...e})),[n])}if(Dn.version.indexOf("19")===-1)throw new Error("react-konva version 19 is only compatible with React 19. Make sure to have the last version of react-konva and react or downgrade react-konva to version 18.");function tw(n){const e=Dn.useRef({});return Dn.useLayoutEffect(()=>{e.current=n}),Dn.useLayoutEffect(()=>()=>{e.current={}},[]),e.current}const nw=()=>{const n=Dn.useRef(0);return Dn.useMemo(()=>{n.current++},[]),n.current>1},iw=n=>{const e=Dn.useRef(null),t=Dn.useRef(null),i=Dn.useRef(null),s=tw(n),l=ew(),c=Dn.useRef(null),f=v=>{const{forwardedRef:E}=n;E&&(typeof E=="function"?E(v):E.current=v)},h=nw(),m=()=>{var v;f(null),_h.updateContainer(null,i.current,null),(v=t.current)==null||v.destroy(),t.current=null};return Dn.useLayoutEffect(()=>(c.current&&(clearTimeout(c.current),c.current=null),t.current?f(t.current):(t.current=new Rd.Stage({width:n.width,height:n.height,container:e.current}),f(t.current),i.current=_h.createContainer(t.current,Nm.ConcurrentRoot,null,!1,null,"",console.error,console.error,console.error,null),_h.updateContainer(Dn.createElement(l,{},n.children),i.current,null,()=>{})),()=>{h?c.current=setTimeout(m,0):m()}),[]),Dn.useLayoutEffect(()=>{f(t.current),Mm(t.current,n,s),_h.flushSyncFromReconciler(()=>{_h.updateContainer(Dn.createElement(l,{},n.children),i.current,null)})}),Dn.createElement("div",{ref:e,id:n.id,accessKey:n.accessKey,className:n.className,role:n.role,style:n.style,tabIndex:n.tabIndex,title:n.title})},aw="Layer",Sb="Rect",sw="Circle",g2="Line",y2="Image",ow="Text",lw="Star",rw="Transformer",_h=k8(XA),uw=Dn.forwardRef((n,e)=>Dn.createElement(_b,{},Dn.createElement(iw,{...n,forwardedRef:e}))),Ai=[];for(let n=0;n<256;++n)Ai.push((n+256).toString(16).slice(1));function cw(n,e=0){return(Ai[n[e+0]]+Ai[n[e+1]]+Ai[n[e+2]]+Ai[n[e+3]]+"-"+Ai[n[e+4]]+Ai[n[e+5]]+"-"+Ai[n[e+6]]+Ai[n[e+7]]+"-"+Ai[n[e+8]]+Ai[n[e+9]]+"-"+Ai[n[e+10]]+Ai[n[e+11]]+Ai[n[e+12]]+Ai[n[e+13]]+Ai[n[e+14]]+Ai[n[e+15]]).toLowerCase()}let jg;const dw=new Uint8Array(16);function fw(){if(!jg){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jg=crypto.getRandomValues.bind(crypto)}return jg(dw)}const hw=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),v2={randomUUID:hw};function pw(n,e,t){var s;n=n||{};const i=n.random??((s=n.rng)==null?void 0:s.call(n))??fw();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,cw(i)}function Ru(n,e,t){return v2.randomUUID&&!n?v2.randomUUID():pw(n)}var Fe=(n=>(n.TEXT="TEXT",n.RECT="RECT",n.CIRCLE="CIRCLE",n.LINE="LINE",n.IMAGE="IMAGE",n.POLYGON="POLYGON",n.TRIANGLE="TRIANGLE",n.STAR="STAR",n))(Fe||{});const fm={"1:1":{w:1080,h:1080},"2:3":{w:1080,h:1620},"3:2":{w:1620,h:1080},"3:4":{w:1080,h:1440},"4:3":{w:1440,h:1080},"4:5":{w:1080,h:1350},"5:4":{w:1350,h:1080},"9:16":{w:1080,h:1920},"16:9":{w:1920,h:1080},"1.85:1 Flat":{w:1998,h:1080},"2.39:1 CinemaScope":{w:2581,h:1080},"21:9 UltraWide":{w:2560,h:1080},"1.43:1 IMAX":{w:1430,h:1e3}},_2=5,S2=.05,Zp="page-1",mw=({onAddElement:n,onToolSelect:e,activeTool:t})=>{const[i,s]=ee.useState(!1),l=ee.useRef(null);ee.useEffect(()=>{const m=v=>{l.current&&!l.current.contains(v.target)&&s(!1)};return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[]);const c=[{id:"select",icon:zS,label:"Select (V)"},{id:"hand",icon:zT,label:"Hand (H)"}],f=[{id:Fe.RECT,icon:IS,label:"Rectangle"},{id:Fe.CIRCLE,icon:wS,label:"Circle"},{id:Fe.TRIANGLE,icon:j3,label:"Triangle"},{id:Fe.POLYGON,icon:kT,label:"Polygon"},{id:Fe.STAR,icon:U3,label:"Star"},{id:Fe.LINE,icon:Vy,label:"Line"}],h=m=>{n(m),s(!1)};return T.jsxs("div",{className:"w-16 bg-[#121214] border-r border-zinc-800 flex flex-col items-center py-6 gap-6 z-30 shadow-2xl",children:[T.jsx("div",{className:"flex flex-col gap-3 pb-6 border-b border-zinc-800/50 w-full items-center",children:c.map(m=>T.jsxs("button",{onClick:()=>e(m.id),className:`p-3 rounded-xl transition-all group relative ${t===m.id?"bg-blue-600 text-white shadow-[0_0_15px_rgba(37,99,235,0.4)]":"text-zinc-500 hover:bg-zinc-800 hover:text-white"}`,children:[T.jsx(m.icon,{size:22,strokeWidth:2}),T.jsx("span",{className:"absolute left-16 bg-zinc-800 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity border border-zinc-700 shadow-xl",children:m.label})]},m.id))}),T.jsxs("div",{className:"flex flex-col gap-3 pt-2 w-full items-center",children:[T.jsxs("button",{onClick:()=>n(Fe.TEXT),className:"p-3 rounded-xl transition-all group relative text-zinc-500 hover:bg-zinc-800 hover:text-white",children:[T.jsx(Yy,{size:22,strokeWidth:2}),T.jsx("span",{className:"absolute left-16 bg-zinc-800 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity border border-zinc-700 shadow-xl",children:"Text"})]}),T.jsxs("div",{className:"relative",ref:l,children:[T.jsxs("button",{onClick:()=>s(!i),className:`p-3 rounded-xl transition-all group relative ${i?"bg-zinc-800 text-white":"text-zinc-500 hover:bg-zinc-800 hover:text-white"}`,children:[T.jsx(w3,{size:22,strokeWidth:2}),T.jsx(rT,{size:10,className:`absolute bottom-1 right-1 transition-transform ${i?"rotate-90":""}`}),T.jsx("span",{className:"absolute left-16 bg-zinc-800 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity border border-zinc-700 shadow-xl",children:"Shapes"})]}),i&&T.jsx("div",{className:"absolute left-full top-0 ml-2 bg-[#1e1e20] border border-zinc-700 rounded-xl shadow-2xl p-2 flex flex-col gap-1 z-[100] min-w-[140px] animate-in slide-in-from-left-2 duration-200",children:f.map(m=>T.jsxs("button",{onClick:()=>h(m.id),className:"flex items-center gap-3 px-3 py-2 rounded-lg text-zinc-400 hover:bg-zinc-800 hover:text-white transition-colors text-xs font-medium",children:[T.jsx(m.icon,{size:16}),m.label]},m.id))})]}),T.jsxs("button",{onClick:()=>n("IMAGE_UPLOAD"),className:"p-3 rounded-xl transition-all group relative text-zinc-500 hover:bg-zinc-800 hover:text-white",children:[T.jsx(qy,{size:22,strokeWidth:2}),T.jsx("span",{className:"absolute left-16 bg-zinc-800 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity border border-zinc-700 shadow-xl",children:"Image"})]}),T.jsxs("button",{onClick:()=>n("VIDEO_UPLOAD"),className:"p-3 rounded-xl transition-all group relative text-zinc-500 hover:bg-zinc-800 hover:text-white",children:[T.jsx(Cm,{size:22,strokeWidth:2}),T.jsx("span",{className:"absolute left-16 bg-zinc-800 text-white px-2 py-1 rounded text-[10px] font-bold uppercase tracking-wider opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-opacity border border-zinc-700 shadow-xl",children:"Video"})]})]})]})},gw=({pages:n,activePageId:e,onPageSelect:t,onAddPage:i,onDuplicatePage:s,onDeletePage:l,onRenamePage:c})=>T.jsxs("div",{className:"p-4 border-b border-zinc-800",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsx("h3",{className:"text-xs font-bold text-zinc-500 tracking-wider",children:"Scenes"}),T.jsx("button",{onClick:i,className:"p-1.5 hover:bg-zinc-800 rounded-md text-zinc-400 hover:text-white transition-all active:scale-90",children:T.jsx(US,{size:18})})]}),T.jsx("div",{className:"grid grid-cols-2 gap-3 max-h-[400px] overflow-y-auto no-scrollbar pb-2",children:n.map((f,h)=>T.jsxs("div",{onClick:()=>t(f.id),className:`relative group cursor-pointer rounded-xl border-2 transition-all flex flex-col overflow-hidden ${e===f.id?"border-blue-500 bg-zinc-800 shadow-[0_0_20px_rgba(59,130,246,0.15)]":"border-zinc-800 bg-zinc-900/50 hover:border-zinc-700"}`,children:[T.jsxs("div",{className:"h-28 flex items-center justify-center text-[10px] text-zinc-500 relative overflow-hidden bg-[#0a0a0b]",children:[f.thumbnail?T.jsx("img",{src:f.thumbnail,alt:f.name,className:"w-full h-full object-contain p-2"}):T.jsx("div",{className:"flex flex-col items-center gap-1 opacity-20",children:T.jsx("div",{className:"w-10 h-10 rounded-lg border-2 border-zinc-700 border-dashed"})}),e===f.id&&T.jsx("div",{className:"absolute inset-0 bg-blue-500/5 pointer-events-none"}),T.jsx("div",{className:"absolute top-2 left-2 w-5 h-5 bg-black/60 backdrop-blur-md rounded flex items-center justify-center text-[9px] font-bold text-zinc-400 border border-white/10",children:h+1})]}),T.jsx("div",{className:"bg-[#1a1a1c] p-1.5 border-t border-zinc-800",children:T.jsx("input",{type:"text",value:f.name,onChange:m=>c(f.id,m.target.value),onClick:m=>m.stopPropagation(),className:"w-full bg-transparent border-0 text-[10px] font-semibold text-zinc-300 focus:text-white focus:outline-none focus:ring-0 px-1 py-0.5 rounded hover:bg-white/5 transition-colors text-center"})}),T.jsxs("div",{className:"absolute top-2 right-2 flex gap-1.5 opacity-0 group-hover:opacity-100 transition-all transform translate-x-2 group-hover:translate-x-0",children:[T.jsx("button",{onClick:m=>{m.stopPropagation(),s(f.id)},className:"p-1.5 bg-zinc-900/90 backdrop-blur-md hover:bg-zinc-800 rounded-md text-zinc-400 hover:text-white shadow-2xl transition-all border border-white/5 active:scale-90",title:"Duplicate Scene",children:T.jsx(NS,{size:12})}),n.length>1&&T.jsx("button",{onClick:m=>{m.stopPropagation(),l(f.id)},className:"p-1.5 bg-red-950/90 backdrop-blur-md hover:bg-red-800 rounded-md text-zinc-300 hover:text-white shadow-2xl transition-all border border-red-500/20 active:scale-90",title:"Delete Scene",children:T.jsx(jy,{size:12})})]})]},f.id))})]}),yw=({layers:n,selectedLayerId:e,onSelect:t,onUpdateLayer:i,onDuplicateLayer:s,onReorder:l})=>{const[c,f]=ee.useState(null),h=[...n].reverse(),m=x=>{f(x)},v=(x,R)=>{if(x.preventDefault(),c===null||c===R)return;const N=[...h],z=N.splice(c,1)[0];N.splice(R,0,z),f(R),l([...N].reverse())},E=x=>{if(x.type===Fe.IMAGE)return x.mediaType==="video"?Cm:qy;switch(x.type){case Fe.TEXT:return Yy;case Fe.RECT:return IS;case Fe.CIRCLE:return wS;case Fe.LINE:return Vy;default:return oy}};return T.jsxs("div",{className:"p-4 flex flex-col gap-2",children:[T.jsxs("div",{className:"flex items-center justify-between mb-2",children:[T.jsx("h3",{className:"text-xs font-bold text-zinc-500 tracking-wider",children:"Layers"}),T.jsxs("span",{className:"text-[10px] text-zinc-600 font-mono",children:[n.length," items"]})]}),T.jsx("div",{className:"flex flex-col gap-1 max-h-60 overflow-y-auto no-scrollbar",children:h.length===0?T.jsx("div",{className:"py-4 text-center text-zinc-600 text-[10px] italic border border-dashed border-zinc-800 rounded",children:"No layers yet"}):h.map((x,R)=>{const N=E(x),z=e===x.id,D=x.visible===!1,I=x.locked===!0;return T.jsxs("div",{draggable:!0,onDragStart:()=>m(R),onDragOver:L=>v(L,R),onDragEnd:()=>f(null),onClick:()=>t(x.id),className:`group flex items-center gap-2 px-2 py-1.5 rounded text-xs cursor-pointer transition-all border ${z?"bg-blue-600/10 border-blue-500 text-blue-400":"bg-zinc-800/50 border-transparent text-zinc-400 hover:bg-zinc-800 hover:text-zinc-200"} ${c===R?"opacity-50 scale-95":"opacity-100"}`,children:[T.jsx("div",{className:"text-zinc-600 group-hover:text-zinc-400",children:T.jsx(MT,{size:12})}),T.jsx(N,{size:14,className:z?"text-blue-400":"text-zinc-500"}),T.jsx("span",{className:"flex-1 truncate font-medium",children:x.name}),T.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[T.jsx("button",{onClick:L=>{L.stopPropagation(),s(x.id)},className:"p-1 rounded hover:bg-zinc-700 text-zinc-500 hover:text-blue-400",title:"Duplicate Layer",children:T.jsx(NS,{size:12})}),T.jsx("button",{onClick:L=>{L.stopPropagation(),i(x.id,{visible:!x.visible})},className:`p-1 rounded hover:bg-zinc-700 ${D?"text-red-400 opacity-100":"text-zinc-500"}`,children:D?T.jsx(AT,{size:12}):T.jsx(MS,{size:12})}),T.jsx("button",{onClick:L=>{L.stopPropagation(),i(x.id,{locked:!x.locked})},className:`p-1 rounded hover:bg-zinc-700 ${I?"text-orange-400 opacity-100":"text-zinc-500"}`,children:I?T.jsx(DS,{size:12}):T.jsx(YT,{size:12})})]})]},x.id)})})]})},vw=[{id:"none",name:"None"},{id:"bw",name:"Black & White"},{id:"kodachrome",name:"Kodachrome"},{id:"astia",name:"Astia"},{id:"polaroid",name:"Polaroid"},{id:"technicolor",name:"Technicolor"},{id:"vintage",name:"Vintage"},{id:"noir",name:"Noir"},{id:"dramatic",name:"Dramatic"},{id:"cyberpunk",name:"Cyberpunk"},{id:"cinematic",name:"Cinematic"}],_w=n=>{switch(n){case"bw":return{contrast:0,saturation:-1,brightness:0};case"kodachrome":return{contrast:20,saturation:.3,brightness:0,red:20,green:0,blue:-10};case"astia":return{contrast:5,saturation:.1,brightness:.05,red:5,green:0,blue:5};case"polaroid":return{contrast:-10,saturation:-.2,brightness:.1,red:10,green:10,blue:0};case"technicolor":return{contrast:30,saturation:.5,brightness:-.05,red:30,green:-10,blue:-10};case"vintage":return{contrast:-20,saturation:-.4,brightness:0,red:30,green:20,blue:-10};case"noir":return{contrast:50,saturation:-1,brightness:-.1};case"dramatic":return{contrast:40,saturation:-.2,brightness:-.05,red:-10,green:-10,blue:20};case"cyberpunk":return{contrast:20,saturation:.4,brightness:0,red:-10,green:-20,blue:40};case"cinematic":return{contrast:15,saturation:-.1,brightness:-.05,red:0,green:0,blue:10};default:return null}},Yg=[{name:"Baskerville",family:'"Libre Baskerville", serif'},{name:"BEBAS NEUE",family:'"Bebas Neue", sans-serif'},{name:"Bodoni Moda",family:'"Bodoni Moda", serif'},{name:"Didot",family:'"GFS Didot", serif'},{name:"Futura",family:'Futura, "Trebuchet MS", sans-serif'},{name:"Glamour",family:'"Playfair Display", serif'},{name:"Helvetica",family:"Helvetica, Arial, sans-serif"},{name:"Inter",family:'"Inter", sans-serif'},{name:"Manrope",family:'"Manrope", sans-serif'},{name:"Merriweather",family:'"Merriweather", serif'},{name:"Roboto Slab",family:'"Roboto Slab", serif'}],Sw=({pages:n,activePageId:e,selectedLayer:t,onUpdateLayer:i,onDuplicateLayer:s,onUpdatePage:l,onSelectLayer:c,onReorderLayers:f,onPageAction:h,onGenerateVideo:m})=>{const v=n.find(U=>U.id===e),[E,x]=ee.useState(!1),R=ee.useRef(null);ee.useEffect(()=>{const U=G=>{R.current&&!R.current.contains(G.target)&&x(!1)};return document.addEventListener("mousedown",U),()=>document.removeEventListener("mousedown",U)},[]);const N=U=>{t&&i(t.id,U)},z=U=>{const G=fm[U];l({aspectRatio:U,width:G.w,height:G.h})},D=({label:U,value:G,onChange:P,step:K=1,suffix:$="",icon:J})=>T.jsxs("div",{className:"flex flex-col gap-1.5",children:[U&&T.jsxs("label",{className:"text-[11px] text-zinc-400 font-medium flex items-center gap-1.5",children:[J&&T.jsx(J,{size:12,className:"text-zinc-500"}),U]}),T.jsxs("div",{className:"flex items-center gap-1",children:[T.jsx("button",{onClick:()=>P(parseFloat((G-K).toFixed(2))),className:"w-8 h-8 flex items-center justify-center bg-zinc-800/80 border border-zinc-700/50 rounded hover:bg-zinc-700 text-zinc-400 transition-colors active:scale-90",children:T.jsx(Vy,{size:14})}),T.jsxs("div",{className:"flex-1 relative",children:[T.jsx("input",{type:"number",value:G,step:K,onChange:B=>P(parseFloat(B.target.value)||0),className:"w-full bg-zinc-800 border border-zinc-700 rounded px-2 h-8 text-center text-xs text-white focus:outline-none focus:border-blue-500 appearance-none font-mono"}),$&&T.jsx("span",{className:"absolute right-2 top-1/2 -translate-y-1/2 text-[10px] text-zinc-500 pointer-events-none",children:$})]}),T.jsx("button",{onClick:()=>P(parseFloat((G+K).toFixed(2))),className:"w-8 h-8 flex items-center justify-center bg-zinc-800/80 border border-zinc-700/50 rounded hover:bg-zinc-700 text-zinc-400 transition-colors active:scale-90",children:T.jsx(US,{size:14})})]})]}),I=({label:U,value:G,onChange:P,type:K="number",step:$="1",min:J,max:B})=>T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold tracking-wide",children:U}),T.jsx("input",{type:K,value:G,step:$,min:J,max:B,onChange:ue=>{const xe=K==="number"||K==="range"?parseFloat(ue.target.value):ue.target.value;P(xe)},className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-1.5 text-xs text-white focus:outline-none focus:border-blue-500 font-mono"})]}),L=Yg.find(U=>U.family===(t==null?void 0:t.fontFamily))||Yg[7];return T.jsxs("div",{className:"w-80 bg-[#121214] border-l border-zinc-800 flex flex-col overflow-y-auto no-scrollbar shadow-2xl",children:[T.jsx(gw,{pages:n,activePageId:e,onPageSelect:h.select,onAddPage:h.add,onDuplicatePage:h.duplicate,onDeletePage:h.delete,onRenamePage:h.rename}),T.jsx("div",{className:"p-4 space-y-6",children:t?T.jsxs(T.Fragment,{children:[T.jsxs("section",{children:[T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider mb-4 uppercase",children:t.type===Fe.IMAGE&&t.mediaType==="video"?"Video Layout":"Layer Layout"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold tracking-wide",children:"Identifier"}),T.jsx("input",{type:"text",value:t.name,onChange:U=>N({name:U.target.value}),className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-1.5 text-xs text-white focus:outline-none focus:border-blue-500"})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-4",children:[T.jsx(I,{label:"X",value:Math.round(t.x),onChange:U=>N({x:U})}),T.jsx(I,{label:"Y",value:Math.round(t.y),onChange:U=>N({y:U})}),T.jsx(I,{label:"Width",value:Math.round(t.width),onChange:U=>N({width:U})}),T.jsx(I,{label:"Height",value:Math.round(t.height),onChange:U=>N({height:U})})]}),T.jsxs("div",{className:"mt-6 space-y-6",children:[T.jsx(D,{label:"Opacity",value:Math.round(t.opacity*100),onChange:U=>N({opacity:Math.max(0,Math.min(100,U))/100}),suffix:"%"}),T.jsx(D,{label:"Rotation",value:Math.round(t.rotation),onChange:U=>N({rotation:U}),suffix:"",icon:O1})]})]})]}),T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsxs("div",{className:"flex items-center justify-between mb-4",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx(uy,{size:14,className:"text-amber-500"}),T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider uppercase",children:"Motion & FX"})]}),T.jsx("span",{className:"text-[9px] text-amber-500/50 font-black tracking-widest uppercase",children:"Experimental"})]}),T.jsx("div",{className:"space-y-3",children:T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Entry Transition"}),T.jsxs("select",{disabled:!0,className:"bg-zinc-800 border border-zinc-700 rounded px-3 h-9 text-xs text-zinc-400 cursor-not-allowed opacity-50",children:[T.jsx("option",{children:"None"}),T.jsx("option",{children:"Fade In"}),T.jsx("option",{children:"Slide Left"}),T.jsx("option",{children:"Scale Bounce"})]})]})})]}),t.type===Fe.TEXT&&T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider mb-4 uppercase",children:"Typography"}),T.jsxs("div",{className:"space-y-5",children:[T.jsxs("div",{className:"relative",ref:R,children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold block mb-1.5",children:"Font Family"}),T.jsxs("button",{onClick:()=>x(!E),className:"w-full flex items-center justify-between bg-zinc-800 border border-zinc-700 rounded px-3 h-10 text-xs text-white hover:bg-zinc-700 transition-all shadow-inner",children:[T.jsx("span",{style:{fontFamily:L.family},className:"truncate pr-2",children:L.name}),T.jsx(aT,{size:14,className:`text-zinc-500 transition-transform duration-200 ${E?"rotate-180":""}`})]}),E&&T.jsx("div",{className:"absolute top-full left-0 right-0 mt-1.5 bg-[#1e1e20] border border-zinc-700 rounded-lg shadow-2xl z-[100] overflow-hidden max-h-80 overflow-y-auto no-scrollbar ring-1 ring-black/50",children:Yg.map(U=>T.jsxs("button",{onClick:()=>{N({fontFamily:U.family}),x(!1)},className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-zinc-800 transition-colors group",children:[T.jsx("span",{style:{fontFamily:U.family},className:"text-sm text-zinc-200 group-hover:text-white",children:U.name}),L.name===U.name&&T.jsx(nT,{size:14,className:"text-blue-500"})]},U.name))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsxs("div",{className:"flex flex-col gap-1",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Weight"}),T.jsxs("select",{value:t.fontWeight,onChange:U=>N({fontWeight:U.target.value}),className:"bg-zinc-800 border border-zinc-700 rounded px-2 h-8 text-xs text-white focus:outline-none focus:border-blue-500 cursor-pointer",children:[T.jsx("option",{value:"normal",children:"Normal"}),T.jsx("option",{value:"bold",children:"Bold"}),T.jsx("option",{value:"900",children:"Black"}),T.jsx("option",{value:"100",children:"Thin"})]})]}),T.jsx(I,{label:"Size",value:t.fontSize,onChange:U=>N({fontSize:U})})]}),T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Alignment"}),T.jsx("div",{className:"flex bg-zinc-800 rounded p-1 border border-zinc-700 h-9",children:[{id:"left",icon:P3},{id:"center",icon:L3},{id:"right",icon:H3}].map(U=>T.jsx("button",{onClick:()=>N({align:U.id}),className:`flex-1 flex justify-center items-center rounded transition-all ${t.align===U.id?"bg-zinc-700 text-blue-400 shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:T.jsx(U.icon,{size:16})},U.id))})]}),T.jsx(D,{label:"Letter Spacing",value:t.letterSpacing,onChange:U=>N({letterSpacing:U})}),T.jsx(D,{label:"Line Height",value:t.lineHeight,onChange:U=>N({lineHeight:U}),step:.01}),T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Text Color"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"color",value:t.fill,onChange:U=>N({fill:U.target.value}),className:"w-10 h-8 bg-transparent border-0 rounded cursor-pointer p-0"}),T.jsx("input",{type:"text",value:t.fill,onChange:U=>N({fill:U.target.value}),className:"flex-1 bg-zinc-800 border border-zinc-700 rounded px-2 h-8 text-[10px] text-white font-mono uppercase"})]})]}),T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Content"}),T.jsx("textarea",{value:t.text,onChange:U=>N({text:U.target.value}),className:"bg-zinc-800 border border-zinc-700 rounded px-2 py-2 text-xs text-white focus:outline-none focus:border-blue-500 min-h-[80px] leading-relaxed resize-none"})]})]})]}),(t.type===Fe.RECT||t.type===Fe.CIRCLE||t.type===Fe.POLYGON||t.type===Fe.TRIANGLE||t.type===Fe.STAR)&&T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider mb-4 uppercase",children:"Appearance"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[T.jsx(I,{label:"Fill",type:"color",value:t.fill,onChange:U=>N({fill:U})}),T.jsx(I,{label:"Stroke",type:"color",value:t.stroke,onChange:U=>N({stroke:U})})]}),T.jsx(D,{label:"Stroke Width",value:t.strokeWidth,onChange:U=>N({strokeWidth:U}),min:0}),(t.type===Fe.POLYGON||t.type===Fe.STAR)&&T.jsx(D,{label:"Sides / Points",value:t.sides||5,onChange:U=>N({sides:Math.max(3,U)}),min:3}),t.type===Fe.STAR&&T.jsx(D,{label:"Inner Radius",value:t.innerRadius||20,onChange:U=>N({innerRadius:Math.max(1,U)}),min:1}),t.type===Fe.RECT&&T.jsx(D,{label:"Corner Radius",value:t.cornerRadius,onChange:U=>N({cornerRadius:U}),min:0})]})]}),t.type===Fe.IMAGE&&t.mediaType==="image"&&T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[T.jsx(Kh,{size:14,className:"text-blue-400"}),T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider uppercase",children:"Generative AI"})]}),T.jsxs("div",{className:"bg-pro-gradient/5 border border-blue-500/20 rounded-xl p-4",children:[T.jsx("p",{className:"text-[10px] text-zinc-400 leading-relaxed mb-3",children:"Create cinematic motion using this image as a keyframe."}),T.jsxs("button",{onClick:()=>m(t.id),className:"w-full py-2 bg-pro-gradient hover:opacity-90 text-white rounded-lg text-xs font-bold flex items-center justify-center gap-2 transition-all active:scale-95 shadow-lg shadow-blue-500/10",children:[T.jsx(Fy,{size:14}),"AI Motion Gen"]})]})]}),t.type===Fe.IMAGE&&t.mediaType==="video"&&T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsx("h3",{className:"text-[11px] font-bold text-zinc-500 tracking-wider mb-4 uppercase",children:"Video Engine"}),T.jsxs("div",{className:"space-y-5",children:[T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsxs("label",{className:"text-[10px] text-zinc-500 font-semibold flex items-center gap-1.5",children:[T.jsx(I1,{size:12}),"Video Effects"]}),T.jsx("select",{value:t.filter||"none",onChange:U=>N({filter:U.target.value}),className:"bg-zinc-800 border border-zinc-700 rounded px-3 h-9 text-xs text-white focus:outline-none focus:border-blue-500 cursor-pointer",children:vw.map(U=>T.jsx("option",{value:U.id,children:U.name},U.id))})]}),T.jsxs("div",{className:"flex items-center justify-between gap-3",children:[T.jsxs("button",{onClick:()=>N({playing:!t.playing}),className:`flex items-center justify-center gap-2 px-4 h-11 rounded-lg text-xs font-bold transition-all flex-1 shadow-lg active:scale-95 ${t.playing?"bg-zinc-800 text-zinc-400 hover:text-white border border-zinc-700":"bg-blue-600 hover:bg-blue-500 text-white"}`,children:[t.playing?T.jsx(d3,{size:16,fill:"currentColor"}):T.jsx(m3,{size:16,fill:"currentColor"}),t.playing?"Pause":"Preview"]}),T.jsx("button",{onClick:()=>N({loop:!t.loop}),className:`w-11 h-11 flex items-center justify-center rounded-lg border transition-all ${t.loop?"bg-blue-600/10 border-blue-500/50 text-blue-400":"bg-zinc-800 border-zinc-700 text-zinc-500 hover:text-zinc-300"}`,title:"Loop Scene",children:T.jsx(O1,{size:18})})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Audio Mix"}),T.jsxs("span",{className:"text-[10px] text-zinc-400 font-mono tracking-tighter",children:[Math.round((t.volume??1)*100),"%"]})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[t.volume===0?T.jsx(tC,{size:16,className:"text-zinc-500"}):T.jsx($3,{size:16,className:"text-zinc-500"}),T.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",value:t.volume??1,onChange:U=>N({volume:parseFloat(U.target.value)}),className:"flex-1 accent-blue-500 h-1 bg-zinc-800 rounded-lg appearance-none cursor-pointer hover:bg-zinc-700 transition-colors"})]})]})]})]})]}):T.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[T.jsxs("section",{children:[T.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[T.jsx(u3,{size:14,className:"text-blue-500"}),T.jsx("h3",{className:"text-xs font-bold text-zinc-200 tracking-wider",children:"Canvas Specification"})]}),T.jsxs("div",{className:"space-y-5",children:[T.jsxs("div",{className:"flex flex-col gap-1.5",children:[T.jsx("label",{className:"text-[10px] text-zinc-500 font-semibold",children:"Aspect Ratio Preset"}),T.jsx("select",{value:v==null?void 0:v.aspectRatio,onChange:U=>z(U.target.value),className:"bg-zinc-800 border border-zinc-700 rounded px-3 h-10 text-xs text-white focus:outline-none focus:border-blue-500 cursor-pointer hover:bg-zinc-750 transition-colors",children:Object.keys(fm).map(U=>T.jsx("option",{value:U,children:U},U))})]}),T.jsxs("div",{className:"grid grid-cols-2 gap-5",children:[T.jsx(I,{label:"Width (px)",value:v==null?void 0:v.width,onChange:U=>l({width:U})}),T.jsx(I,{label:"Height (px)",value:v==null?void 0:v.height,onChange:U=>l({height:U})})]})]})]}),T.jsxs("section",{className:"pt-6 border-t border-zinc-800/50",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[T.jsx(I1,{size:14,className:"text-purple-500"}),T.jsx("h3",{className:"text-xs font-bold text-zinc-200 tracking-wider",children:"Canvas Environment"})]}),T.jsx("div",{className:"space-y-4",children:T.jsx(I,{label:"Background Mix",type:"color",value:(v==null?void 0:v.backgroundColor)||"#ffffff",onChange:U=>l({backgroundColor:U})})})]}),T.jsxs("div",{className:"pt-24 flex flex-col items-center justify-center text-zinc-600 text-center px-8",children:[T.jsx("div",{className:"mb-5 opacity-10",children:T.jsx(zS,{size:48,strokeWidth:1})}),T.jsx("p",{className:"text-[10px] font-black tracking-[0.1em] leading-relaxed",children:"Select an object or layer to reveal context-aware properties"})]})]})}),T.jsx("div",{className:"mt-auto border-t border-zinc-800/50",children:T.jsx(yw,{layers:(v==null?void 0:v.layers)||[],selectedLayerId:(t==null?void 0:t.id)||null,onSelect:c,onUpdateLayer:i,onDuplicateLayer:s,onReorder:f})}),T.jsxs("div",{className:"p-5 border-t border-zinc-800/80 bg-[#0d0d0f] shadow-[0_-10px_20px_rgba(0,0,0,0.3)]",children:[T.jsx("h3",{className:"text-[9px] font-black text-zinc-600 tracking-wider mb-3",children:"Live Scene State"}),T.jsxs("div",{className:"flex items-center justify-between text-[10px] text-zinc-500 font-mono",children:[T.jsx("span",{className:"truncate pr-4 font-medium",children:(v==null?void 0:v.name)||"Processing..."}),T.jsxs("span",{className:"bg-zinc-800/50 px-2 py-0.5 rounded border border-zinc-700/50",children:[v==null?void 0:v.width,"  ",v==null?void 0:v.height]})]})]})]})},bw=(n,e=!0,t=!0,i=1,s)=>{const[l,c]=ee.useState(null);return ee.useEffect(()=>{const f=document.createElement("video");return f.src=n,f.crossOrigin="anonymous",f.loop=t,f.muted=i===0,f.volume=i,f.playsInline=!0,e&&f.play().catch(h=>console.warn("Autoplay blocked or failed",h)),c(f),()=>{f.pause(),f.src="",f.load()}},[n]),ee.useEffect(()=>{l&&(l.loop=t,l.volume=i,l.muted=i===0,e?l.play().catch(()=>{}):l.pause())},[e,t,i,l]),ee.useEffect(()=>{l&&s!==void 0&&Math.abs(l.currentTime-s)>.01&&(l.currentTime=s)},[s,l]),l},pd=5,xw=({layer:n,isSelected:e,onSelect:t,onChange:i,page:s,onDragMove:l,onEditingChange:c})=>{const f=ee.useRef(null),h=ee.useRef(null),[m,v]=ee.useState(!1),[E,x]=ee.useState(""),R=n.type===Fe.IMAGE&&n.mediaType==="video",N=n.type===Fe.IMAGE&&n.mediaType==="image",z=R?bw(n.src,n.playing,n.loop,n.volume,n.currentTime):null,[D,I]=ee.useState(null);ee.useEffect(()=>{if(N){const B=new window.Image;B.src=n.src,B.onload=()=>I(B)}else I(null)},[N,n.src]),ee.useEffect(()=>{if(z&&f.current){const B=f.current,ue=B.getLayer();if(!ue)return;const xe=new hd.Animation(()=>{if(n.filter&&n.filter!=="none")try{B.cache()}catch{}else B.clearCache()},ue);return xe.start(),()=>{xe.stop(),B.clearCache()}}},[z,n.filter]),ee.useEffect(()=>{var B;e&&h.current&&f.current&&!m&&!n.locked&&(h.current.nodes([f.current]),(B=h.current.getLayer())==null||B.batchDraw())},[e,m,n.locked]);const L=B=>{if(!l)return;const ue=B.target,xe=ue.scaleX(),ae=ue.scaleY(),Me=ue.x()+ue.width()*xe/2,De=ue.y()+ue.height()*ae/2,we=ue.x()+ue.width()*xe,Y=ue.y()+ue.height()*ae,he={};let fe=null,Ne=null;const Le=[0,s.width/2,s.width];s.layers.forEach(W=>{W.id!==n.id&&Le.push(W.x,W.x+W.width/2,W.x+W.width)});for(const W of Le){if(Math.abs(ue.x()-W)<pd){fe=W,he.x=W;break}if(Math.abs(Me-W)<pd){fe=W-ue.width()*xe/2,he.x=W;break}if(Math.abs(we-W)<pd){fe=W-ue.width()*xe,he.x=W;break}}const q=[0,s.height/2,s.height];s.layers.forEach(W=>{W.id!==n.id&&q.push(W.y,W.y+W.height/2,W.y+W.height)});for(const W of q){if(Math.abs(ue.y()-W)<pd){Ne=W,he.y=W;break}if(Math.abs(De-W)<pd){Ne=W-ue.height()*ae/2,he.y=W;break}if(Math.abs(Y-W)<pd){Ne=W-ue.height()*ae,he.y=W;break}}fe!==null&&ue.x(fe),Ne!==null&&ue.y(Ne),l(Object.keys(he).length>0?he:null)},U=B=>{l&&l(null),i({x:B.target.x(),y:B.target.y()})},G=()=>{const B=f.current;if(!B)return;const ue=B.scaleX(),xe=B.scaleY();B.scaleX(1),B.scaleY(1);const ae={x:B.x(),y:B.y(),width:Math.max(5,B.width()*ue),rotation:B.rotation()};n.type!==Fe.TEXT&&(ae.height=Math.max(5,B.height()*xe)),i(ae)},P=()=>{if(n.type===Fe.TEXT&&!n.locked){const B=n.text;x(B),v(!0),c&&c(!0)}},K=B=>{v(!1),c&&c(!1),i({text:B})};ee.useEffect(()=>{if(m&&f.current){const B=f.current,ue=B.getStage(),xe=ue.container(),ae=document.createElement("textarea");xe.appendChild(ae);const Me=B.getAbsolutePosition();xe.getBoundingClientRect(),ae.value=E,ae.style.position="absolute",ae.style.top=`${Me.y}px`,ae.style.left=`${Me.x}px`,ae.style.width=`${B.width()*B.scaleX()}px`,ae.style.height=`${B.height()*B.scaleY()+20}px`,ae.style.fontSize=`${n.fontSize*ue.scaleX()}px`,ae.style.border="none",ae.style.padding="0px",ae.style.margin="0px",ae.style.background="none",ae.style.outline="none",ae.style.color=n.fill,ae.style.fontFamily=n.fontFamily,ae.style.fontWeight=n.fontWeight,ae.style.textAlign=n.align,ae.style.lineHeight=String(n.lineHeight),ae.style.letterSpacing=`${n.letterSpacing}px`,ae.style.transformOrigin="0 0",ae.style.transform=`rotate(${B.rotation()}deg)`,ae.style.overflow="hidden",ae.style.resize="none",ae.style.zIndex="1000",ae.style.whiteSpace="pre-wrap",ae.style.wordBreak="break-word",ae.focus();const De=Y=>{Y.key==="Enter"&&!Y.shiftKey&&(Y.preventDefault(),K(ae.value),ae.remove()),Y.key==="Escape"&&(v(!1),c&&c(!1),ae.remove())},we=()=>{K(ae.value),ae.remove()};return ae.addEventListener("keydown",De),ae.addEventListener("blur",we),()=>{ae.removeEventListener("keydown",De),ae.removeEventListener("blur",we),ae.parentNode&&ae.remove()}}},[m]);const $={ref:f,id:n.id,x:n.x,y:n.y,width:n.width,height:n.height,rotation:n.rotation,opacity:n.opacity,draggable:!m&&!n.locked,visible:n.visible!==!1&&!m,listening:n.visible!==!1,onClick:B=>{B.cancelBubble=!0,n.locked||(e&&n.type===Fe.TEXT?P():t())},onTap:B=>{B.cancelBubble=!0,n.locked||(e&&n.type===Fe.TEXT?P():t())},onDragMove:L,onDragEnd:U,onTransformEnd:G},J=()=>{if(n.visible===!1)return null;switch(n.type){case Fe.TEXT:{const B=n;return T.jsx(ow,{...$,text:B.text,fontSize:B.fontSize,fontFamily:B.fontFamily,fontStyle:B.fontWeight,fill:B.fill,align:B.align,lineHeight:B.lineHeight,letterSpacing:B.letterSpacing,height:void 0})}case Fe.RECT:{const B=n;return T.jsx(Sb,{...$,fill:B.fill,stroke:B.stroke,strokeWidth:B.strokeWidth,cornerRadius:B.cornerRadius})}case Fe.CIRCLE:{const B=n;return T.jsx(sw,{...$,radius:Math.min(n.width,n.height)/2,fill:B.fill,stroke:B.stroke,strokeWidth:B.strokeWidth})}case Fe.STAR:{const B=n;return T.jsx(lw,{...$,numPoints:B.sides||5,innerRadius:B.innerRadius||Math.min(n.width,n.height)/4,outerRadius:Math.min(n.width,n.height)/2,fill:B.fill,stroke:B.stroke,strokeWidth:B.strokeWidth})}case Fe.IMAGE:{const B=n;let ue=[],xe={};if(B.mediaType==="video"&&B.filter&&B.filter!=="none"){const ae=_w(B.filter);ae&&(ae.contrast!==void 0&&ue.push(hd.Filters.Contrast),ae.brightness!==void 0&&ue.push(hd.Filters.Brighten),ae.saturation!==void 0&&ue.push(hd.Filters.HSV),(ae.red!==void 0||ae.green!==void 0||ae.blue!==void 0)&&ue.push(hd.Filters.RGB),(B.filter==="bw"||B.filter==="noir")&&ue.push(hd.Filters.Grayscale),xe={contrast:ae.contrast,brightness:ae.brightness,saturation:ae.saturation,red:ae.red,green:ae.green,blue:ae.blue})}return B.mediaType==="video"&&z?T.jsx(y2,{...$,image:z,filters:ue,...xe}):D?T.jsx(y2,{...$,image:D}):null}default:return null}};return T.jsxs(Dn.Fragment,{children:[J(),e&&!m&&!n.locked&&T.jsx(rw,{ref:h,rotateEnabled:!0,enabledAnchors:n.type===Fe.TEXT?["middle-left","middle-right"]:["top-left","top-right","bottom-left","bottom-right","middle-left","middle-right","top-center","bottom-center"],boundBoxFunc:(B,ue)=>ue.width<5||ue.height<5?B:ue})]})},Ew=({onClose:n,onLoadProject:e})=>{const[t,i]=ee.useState([]),[s,l]=ee.useState(!0),[c,f]=ee.useState("");ee.useEffect(()=>{h()},[]);const h=async()=>{try{const E=await wr.getCurrentUser();if(!E)return;const{data:x,error:R}=await ms.getUserProjects(E.id);if(R)throw R;if(x){const N=x.map(z=>{var D;return{id:z.id,name:z.name,thumbnail:z.thumbnail,updatedAt:new Date(z.updated_at).getTime(),pages:((D=z.editor_state)==null?void 0:D.pages)||[]}});i(N)}}catch(E){console.error(E)}finally{l(!1)}},m=async(E,x)=>{if(E.stopPropagation(),confirm("Are you sure you want to delete this project?")){const{error:R}=await ms.deleteProject(x);R?(console.error("Delete failed:",R),alert("Failed to delete project. You may not have permission or there was a network error.")):h()}},v=t.filter(E=>E.name.toLowerCase().includes(c.toLowerCase()));return T.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/60 backdrop-blur-md animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-[#121214] border border-zinc-800 w-full max-w-5xl h-[80vh] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-300",children:[T.jsxs("div",{className:"px-8 py-6 border-b border-zinc-800 flex items-center justify-between bg-zinc-900/50",children:[T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-600/10 rounded-xl flex items-center justify-center text-blue-400",children:T.jsx(Dg,{size:20})}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:"Project Library"}),T.jsxs("p",{className:"text-xs text-zinc-500 font-medium",children:[t.length," designs stored"]})]})]}),T.jsxs("div",{className:"flex items-center gap-4 flex-1 max-w-md ml-auto relative",children:[T.jsx(E3,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500",size:16}),T.jsx("input",{type:"text",placeholder:"Search projects...",value:c,onChange:E=>f(E.target.value),className:"w-full bg-zinc-800 border-zinc-700 rounded-lg pl-10 pr-4 py-2 text-sm text-white focus:outline-none focus:border-blue-500 transition-colors"})]}),T.jsx("button",{onClick:n,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white transition-colors ml-4",children:T.jsx(Jh,{size:20})})]}),T.jsx("div",{className:"flex-1 overflow-y-auto p-8 no-scrollbar",children:s?T.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 text-zinc-500",children:[T.jsx("div",{className:"w-12 h-12 border-4 border-blue-600/20 border-t-blue-600 rounded-full animate-spin"}),T.jsx("p",{className:"text-sm font-bold uppercase tracking-widest",children:"Loading Library..."})]}):v.length===0?T.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center gap-4",children:[T.jsx("div",{className:"w-20 h-20 bg-zinc-800/50 rounded-full flex items-center justify-center text-zinc-600",children:T.jsx(Dg,{size:40})}),T.jsxs("div",{children:[T.jsx("h3",{className:"text-lg font-bold text-white",children:"No projects found"}),T.jsx("p",{className:"text-sm text-zinc-500 max-w-[240px] mt-1",children:c?`No results for "${c}"`:"You haven't saved any designs yet. Create something beautiful!"})]})]}):T.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:v.map(E=>T.jsxs("div",{onClick:()=>e(E.id),className:"group bg-zinc-900/50 border border-zinc-800 rounded-2xl overflow-hidden cursor-pointer hover:border-blue-500/50 hover:bg-zinc-800/80 transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1",children:[T.jsxs("div",{className:"aspect-video bg-[#0a0a0b] relative overflow-hidden flex items-center justify-center group-hover:bg-black transition-colors",children:[E.thumbnail?T.jsx("img",{src:E.thumbnail,alt:E.name,className:"w-full h-full object-contain p-4 group-hover:scale-105 transition-transform duration-500"}):T.jsx("div",{className:"w-16 h-16 rounded-xl border-2 border-dashed border-zinc-800 flex items-center justify-center text-zinc-800",children:T.jsx(Dg,{size:32})}),T.jsx("div",{className:"absolute inset-0 bg-blue-600/0 group-hover:bg-blue-600/10 transition-colors pointer-events-none"})]}),T.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[T.jsxs("div",{className:"flex items-start justify-between gap-2",children:[T.jsx("h3",{className:"font-bold text-sm text-white truncate group-hover:text-blue-400 transition-colors",children:E.name}),T.jsx("button",{onClick:x=>m(x,E.id),className:"p-1.5 hover:bg-red-500/10 text-zinc-600 hover:text-red-500 rounded-lg transition-all opacity-0 group-hover:opacity-100",children:T.jsx(jy,{size:14})})]}),T.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-500 font-bold uppercase tracking-wider",children:[T.jsx(RS,{size:12}),new Date(E.updatedAt).toLocaleDateString()]})]})]},E.id))})})]})})},b2=[{label:"Original",width:null,premium:!1},{label:"1K",width:1024,premium:!1},{label:"Full HD",width:1920,premium:!1},{label:"2K",width:2560,premium:!0},{label:"4K",width:3840,premium:!0}],Tw=({onClose:n,onConfirm:e,currentWidth:t,currentHeight:i,hasVideo:s,suggestedDuration:l=10,isPro:c,onShowPro:f})=>{const[h,m]=ee.useState(b2[2]),[v,E]=ee.useState(s?"video":"png"),[x,R]=ee.useState(Math.round(l));ee.useEffect(()=>{R(Math.round(l))},[l]);const N=D=>{if(!D)return{w:t,h:i};const I=i/t;return{w:D,h:Math.round(D*I)}},z=()=>{if(h.premium&&!c){f();return}const D=N(h.width);e({format:v,targetWidth:D.w,duration:x*1e3,label:h.label})};return T.jsx("div",{className:"fixed inset-0 z-[110] flex items-center justify-center p-6 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-[#121214] border border-zinc-800 w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[T.jsxs("div",{className:"px-6 py-5 border-b border-zinc-800 flex items-center justify-between bg-zinc-900/50",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 bg-blue-600/10 rounded-lg flex items-center justify-center text-blue-400",children:T.jsx(Iu,{size:18})}),T.jsx("h2",{className:"text-lg font-bold text-white tracking-tight",children:"Export Design"})]}),T.jsx("button",{onClick:n,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white transition-colors",children:T.jsx(Jh,{size:20})})]}),T.jsxs("div",{className:"p-6 space-y-8 max-h-[70vh] overflow-y-auto no-scrollbar",children:[T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Output Format"}),T.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[T.jsxs("button",{onClick:()=>E("png"),className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${v==="png"?"border-blue-500 bg-blue-600/5 text-white":"border-zinc-800 bg-zinc-900 text-zinc-500 hover:border-zinc-700"}`,children:[T.jsx(qy,{size:24}),T.jsx("span",{className:"text-xs font-bold",children:"Image (PNG)"})]}),T.jsxs("button",{onClick:()=>E("video"),disabled:!s,className:`flex flex-col items-center gap-2 p-4 rounded-xl border-2 transition-all ${s?v==="video"?"border-blue-500 bg-blue-600/5 text-white":"border-zinc-800 bg-zinc-900 text-zinc-500 hover:border-zinc-700":"opacity-30 cursor-not-allowed"}`,children:[T.jsx(Cm,{size:24}),T.jsx("span",{className:"text-xs font-bold",children:"Video (MP4)"})]})]})]}),v==="video"&&T.jsxs("div",{className:"space-y-3 animate-in slide-in-from-top-2 duration-300",children:[T.jsxs("div",{className:"flex items-center justify-between",children:[T.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Recording Duration"}),T.jsxs("span",{className:"text-xs font-mono text-blue-400 font-bold",children:[x,"s"]})]}),T.jsxs("div",{className:"flex items-center gap-3 bg-zinc-900 p-3 rounded-xl border border-zinc-800",children:[T.jsx(RS,{size:16,className:"text-zinc-500"}),T.jsx("input",{type:"range",min:"1",max:"120",step:"1",value:x,onChange:D=>R(parseInt(D.target.value)),className:"flex-1 accent-blue-500 h-1.5 bg-zinc-800 rounded-lg appearance-none cursor-pointer"})]})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Quality / Resolution"}),T.jsx("div",{className:"space-y-2",children:b2.map(D=>{const I=N(D.width),L=h.label===D.label,U=D.premium&&!c;return T.jsxs("button",{onClick:()=>m(D),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${L?"bg-zinc-800 border-zinc-600 text-white":"bg-transparent border-transparent text-zinc-500 hover:bg-zinc-900"}`,children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx(s3,{size:16,className:L?"text-blue-400":"text-zinc-600"}),T.jsxs("div",{className:"text-left",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"text-sm font-bold",children:D.label}),D.premium&&T.jsxs("div",{className:"px-1.5 py-0.5 rounded-full bg-pro-gradient text-white text-[8px] font-black uppercase tracking-tighter flex items-center gap-1",children:[T.jsx(qh,{size:8})," Pro"]})]}),T.jsxs("div",{className:"text-[10px] font-mono text-zinc-500",children:[I.w,"  ",I.h]})]})]}),L?T.jsx(AS,{size:16,className:"text-blue-500"}):U?T.jsx(DS,{size:14,className:"text-zinc-700"}):null]},D.label)})})]})]}),T.jsx("div",{className:"p-6 bg-zinc-900/50 border-t border-zinc-800",children:T.jsxs("button",{onClick:z,className:`w-full h-12 rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98] shadow-xl ${h.premium&&!c?"bg-pro-gradient text-white shadow-blue-900/20":"bg-blue-600 hover:bg-blue-500 text-white shadow-blue-900/20"}`,children:[h.premium&&!c?T.jsx(qh,{size:18}):T.jsx(Iu,{size:18}),h.premium&&!c?"Upgrade to Export in "+h.label:"Confirm & Export"]})})]})})},Cw=({onClose:n,onUpgrade:e})=>{const[t,i]=ee.useState(!1),s=()=>{i(!0),setTimeout(()=>{e(),i(!1),n()},1500)},c=[{title:"4K High-Res Export",desc:"Export your designs in stunning Ultra-HD quality.",icon:Kh},{title:"Unlimited Projects",desc:"No limits on your library size or scene count.",icon:qh},{title:"Premium Fonts & Assets",desc:"Unlock our full curated font library.",icon:({size:f,className:h})=>T.jsx("svg",{width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:h,children:T.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})})},{title:"Advanced Video Tools",desc:"Multi-layer video support and longer export times.",icon:k1}];return T.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-6 bg-black/90 backdrop-blur-xl animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-[#0f0f11] border border-white/10 w-full max-w-2xl rounded-[32px] shadow-2xl flex flex-col md:flex-row overflow-hidden animate-in zoom-in-95 duration-300",children:[T.jsxs("div",{className:"w-full md:w-5/12 bg-pro-gradient p-10 flex flex-col justify-between relative overflow-hidden",children:[T.jsx("div",{className:"absolute top-0 right-0 -translate-y-1/2 translate-x-1/2 w-64 h-64 bg-white/10 rounded-full blur-3xl"}),T.jsxs("div",{className:"relative z-10",children:[T.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-md rounded-2xl flex items-center justify-center text-white mb-6",children:T.jsx(qh,{size:24})}),T.jsxs("h2",{className:"text-3xl font-black text-white leading-tight tracking-tighter",children:["VIDEO",T.jsx("br",{}),"DESIGNER",T.jsx("br",{}),"PRO"]})]}),T.jsx("div",{className:"relative z-10 mt-12",children:T.jsxs("div",{className:"bg-amber-500/20 border border-amber-500/30 p-3 rounded-xl flex gap-2 items-start",children:[T.jsx(cT,{size:14,className:"text-amber-500 shrink-0 mt-0.5"}),T.jsxs("div",{className:"text-[10px] text-amber-200/70 font-medium leading-relaxed",children:[T.jsx("span",{className:"text-amber-400 font-bold block mb-0.5",children:"PREVIEW MODE"}),"Update ",T.jsx("code",{className:"bg-black/30 px-1",children:"stripeConfig.ts"})," with a Stripe Payment Link to go live."]})]})})]}),T.jsxs("div",{className:"w-full md:w-7/12 p-10 flex flex-col",children:[T.jsxs("div",{className:"flex justify-between items-start mb-8",children:[T.jsx("h3",{className:"text-xl font-bold text-white",children:"Unlock the power"}),T.jsx("button",{onClick:n,className:"p-2 hover:bg-white/5 rounded-full text-zinc-500 hover:text-white transition-colors",children:T.jsx(Jh,{size:20})})]}),T.jsx("div",{className:"space-y-6 mb-10",children:c.map((f,h)=>T.jsxs("div",{className:"flex gap-4",children:[T.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-lg bg-zinc-900 border border-white/5 flex items-center justify-center text-pro-gradient",children:T.jsx(f.icon,{size:16})}),T.jsxs("div",{children:[T.jsx("h4",{className:"text-sm font-bold text-white",children:f.title}),T.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:f.desc})]})]},h))}),T.jsxs("div",{className:"mt-auto pt-6 border-t border-white/5",children:[T.jsx("div",{className:"flex items-center justify-between mb-6",children:T.jsxs("div",{children:[T.jsx("span",{className:"text-3xl font-black text-white",children:"$19"}),T.jsx("span",{className:"text-zinc-500 text-sm font-medium ml-1",children:"/ month"})]})}),T.jsxs("button",{onClick:s,disabled:t,className:"w-full h-14 bg-pro-gradient hover:opacity-90 disabled:opacity-50 text-white rounded-2xl font-black text-sm uppercase tracking-widest flex items-center justify-center gap-3 transition-all active:scale-[0.98] shadow-[0_10px_30px_rgba(59,130,246,0.3)]",children:[t?T.jsx(ly,{size:20,className:"animate-spin"}):T.jsx(k1,{size:20}),t?"Processing...":"Test Pro (Simulation)"]}),T.jsx("p",{className:"text-[10px] text-zinc-600 text-center mt-4 px-4 leading-relaxed",children:"No server required. Payments are handled securely on Stripe's own website."})]})]})]})})},Aw=({onClose:n,onGenerate:e})=>{const[t,i]=ee.useState(""),s=["Make the clouds drift slowly across the sky.","A subtle cinematic zoom into the subject.","Gentle water ripples and reflections.","Soft light flickering and wind blowing through leaves."];return T.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-6 bg-black/80 backdrop-blur-xl animate-in fade-in duration-300",children:T.jsxs("div",{className:"bg-[#0f0f11] border border-white/10 w-full max-w-lg rounded-[24px] shadow-2xl overflow-hidden animate-in zoom-in-95 duration-300",children:[T.jsxs("div",{className:"p-6 border-b border-white/5 flex items-center justify-between bg-zinc-900/50",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("div",{className:"w-8 h-8 bg-pro-gradient rounded-lg flex items-center justify-center text-white",children:T.jsx(Kh,{size:18})}),T.jsx("h2",{className:"text-lg font-bold text-white tracking-tight",children:"AI Motion Designer"})]}),T.jsx("button",{onClick:n,className:"p-2 hover:bg-white/5 rounded-full text-zinc-500 hover:text-white transition-colors",children:T.jsx(Jh,{size:20})})]}),T.jsxs("div",{className:"p-6 space-y-6",children:[T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Describe the motion"}),T.jsx("textarea",{autoFocus:!0,value:t,onChange:l=>i(l.target.value),placeholder:"e.g. Cinematic slow motion with dust particles drifting in the light...",className:"w-full h-32 bg-zinc-800 border border-zinc-700 rounded-xl p-4 text-sm text-white focus:outline-none focus:border-blue-500 resize-none transition-colors"})]}),T.jsxs("div",{className:"space-y-3",children:[T.jsx("label",{className:"text-[10px] font-black text-zinc-500 uppercase tracking-[0.2em]",children:"Suggestions"}),T.jsx("div",{className:"flex flex-wrap gap-2",children:s.map((l,c)=>T.jsx("button",{onClick:()=>i(l),className:"px-3 py-1.5 bg-zinc-900 hover:bg-zinc-800 border border-white/5 rounded-lg text-[11px] text-zinc-400 hover:text-zinc-200 transition-colors",children:l},c))})]}),T.jsxs("div",{className:"p-4 bg-blue-600/5 border border-blue-500/20 rounded-xl flex gap-3 items-start",children:[T.jsx(HT,{size:16,className:"text-blue-400 shrink-0 mt-0.5"}),T.jsx("p",{className:"text-[11px] text-blue-200/60 leading-relaxed",children:"Real AI generation requires an API key for billing and safety. For quick testing, you can use **Neural Simulation Mode**."})]})]}),T.jsxs("div",{className:"p-6 bg-zinc-900/50 border-t border-white/5 flex gap-3",children:[T.jsxs("button",{onClick:()=>e(t,!0),className:"flex-1 h-12 bg-zinc-800 hover:bg-zinc-700 text-zinc-300 rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98] border border-zinc-700",children:[T.jsx(MS,{size:18}),"Demo Mode"]}),T.jsxs("button",{onClick:()=>e(t,!1),className:"flex-[2] h-12 bg-pro-gradient hover:opacity-90 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all active:scale-[0.98] shadow-lg",children:[T.jsx(Fy,{size:18}),"Generate (Real AI)"]})]})]})})};var ww={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Rw,Nw;function Mw(){return{geminiUrl:Rw,vertexUrl:Nw}}function Dw(n,e,t,i){var s,l;if(!(n!=null&&n.baseUrl)){const c=Mw();return e?(s=c.vertexUrl)!==null&&s!==void 0?s:t:(l=c.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Al{}function Ie(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const l=e[s];return l!=null?String(l):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function _(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const f=c.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[f])){const h=n[f];if(Array.isArray(t))for(let m=0;m<h.length;m++){const v=h[m];_(v,e.slice(l+1),t[m])}else for(const m of h)_(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const f=c.slice(0,-3);f in n||(n[f]=[{}]);const h=n[f];_(h[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function y(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const s=e[i];if(s.endsWith("[]")){const l=s.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(f=>y(f,e.slice(i+1),t)):t}else return t}else n=n[s]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function zw(n,e){for(const[t,i]of Object.entries(e)){const s=t.split("."),l=i.split("."),c=new Set;let f=-1;for(let h=0;h<s.length;h++)if(s[h]==="*"){f=h;break}if(f!==-1&&l.length>f)for(let h=f;h<l.length;h++){const m=l[h];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}by(n,s,l,0,c)}}function by(n,e,t,i,s){if(i>=e.length||typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const c=l.slice(0,-2),f=n;if(c in f&&Array.isArray(f[c]))for(const h of f[c])by(h,e,t,i+1,s)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,f=Object.keys(c).filter(m=>!m.startsWith("_")&&!s.has(m)),h={};for(const m of f)h[m]=c[m];for(const[m,v]of Object.entries(h)){const E=[];for(const x of t.slice(i))x==="*"?E.push(m):E.push(x);_(c,E,v)}for(const m of f)delete c[m]}}else{const c=n;l in c&&by(c[l],e,t,i+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ev(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Uw(n){const e={},t=y(n,["operationName"]);t!=null&&_(e,["operationName"],t);const i=y(n,["resourceName"]);return i!=null&&_(e,["_url","resourceName"],i),e}function Iw(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["response","generateVideoResponse"]);return c!=null&&_(e,["response"],kw(c)),e}function Ow(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["response"]);return c!=null&&_(e,["response"],Lw(c)),e}function kw(n){const e={},t=y(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Gw(c))),_(e,["generatedVideos"],l)}const i=y(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const s=y(n,["raiMediaFilteredReasons"]);return s!=null&&_(e,["raiMediaFilteredReasons"],s),e}function Lw(n){const e={},t=y(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>Hw(c))),_(e,["generatedVideos"],l)}const i=y(n,["raiMediaFilteredCount"]);i!=null&&_(e,["raiMediaFilteredCount"],i);const s=y(n,["raiMediaFilteredReasons"]);return s!=null&&_(e,["raiMediaFilteredReasons"],s),e}function Gw(n){const e={},t=y(n,["video"]);return t!=null&&_(e,["video"],Yw(t)),e}function Hw(n){const e={},t=y(n,["_self"]);return t!=null&&_(e,["video"],Fw(t)),e}function Bw(n){const e={},t=y(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function Pw(n){const e={},t=y(n,["operationName"]);return t!=null&&_(e,["_url","operationName"],t),e}function qw(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["response"]);return c!=null&&_(e,["response"],Vw(c)),e}function Vw(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["parent"]);i!=null&&_(e,["parent"],i);const s=y(n,["documentName"]);return s!=null&&_(e,["documentName"],s),e}function bb(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["response"]);return c!=null&&_(e,["response"],jw(c)),e}function jw(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["parent"]);i!=null&&_(e,["parent"],i);const s=y(n,["documentName"]);return s!=null&&_(e,["documentName"],s),e}function Yw(n){const e={},t=y(n,["uri"]);t!=null&&_(e,["uri"],t);const i=y(n,["encodedVideo"]);i!=null&&_(e,["videoBytes"],ev(i));const s=y(n,["encoding"]);return s!=null&&_(e,["mimeType"],s),e}function Fw(n){const e={},t=y(n,["gcsUri"]);t!=null&&_(e,["uri"],t);const i=y(n,["bytesBase64Encoded"]);i!=null&&_(e,["videoBytes"],ev(i));const s=y(n,["mimeType"]);return s!=null&&_(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var x2;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(x2||(x2={}));var E2;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(E2||(E2={}));var T2;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(T2||(T2={}));var Ar;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ar||(Ar={}));var C2;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(C2||(C2={}));var A2;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(A2||(A2={}));var w2;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(w2||(w2={}));var R2;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(R2||(R2={}));var N2;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(N2||(N2={}));var M2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(M2||(M2={}));var D2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(D2||(D2={}));var z2;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(z2||(z2={}));var U2;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(U2||(U2={}));var I2;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(I2||(I2={}));var O2;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(O2||(O2={}));var k2;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(k2||(k2={}));var L2;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(L2||(L2={}));var G2;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(G2||(G2={}));var H2;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(H2||(H2={}));var B2;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(B2||(B2={}));var P2;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(P2||(P2={}));var hm;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(hm||(hm={}));var q2;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(q2||(q2={}));var V2;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(V2||(V2={}));var j2;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(j2||(j2={}));var xy;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(xy||(xy={}));var Y2;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Y2||(Y2={}));var F2;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(F2||(F2={}));var Ey;(function(n){n.COLLECTION="COLLECTION"})(Ey||(Ey={}));var K2;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(K2||(K2={}));var J2;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(J2||(J2={}));var X2;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(X2||(X2={}));var Q2;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Q2||(Q2={}));var Z2;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Z2||(Z2={}));var W2;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(W2||(W2={}));var $2;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})($2||($2={}));var e_;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(e_||(e_={}));var t_;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(t_||(t_={}));var n_;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(n_||(n_={}));var i_;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(i_||(i_={}));var a_;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(a_||(a_={}));var s_;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(s_||(s_={}));var o_;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(o_||(o_={}));var l_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(l_||(l_={}));var r_;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(r_||(r_={}));var u_;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(u_||(u_={}));var c_;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(c_||(c_={}));var d_;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(d_||(d_={}));var f_;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(f_||(f_={}));var h_;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(h_||(h_={}));var p_;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(p_||(p_={}));var m_;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(m_||(m_={}));var g_;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(g_||(g_={}));var y_;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(y_||(y_={}));var v_;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(v_||(v_={}));var __;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(__||(__={}));var xd;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(xd||(xd={}));class Ty{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Sh{get text(){var e,t,i,s,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const E=[];for(const x of(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[R,N]of Object.entries(x))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(N!==null||N!==void 0)&&E.push(R);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;v=!0,m+=x.text}}return E.length>0&&console.warn(`there are non-text parts ${E} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,i,s,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const E of(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)!==null&&h!==void 0?h:[]){for(const[x,R]of Object.entries(E))x!=="inlineData"&&(R!==null||R!==void 0)&&v.push(x);E.inlineData&&typeof E.inlineData.data=="string"&&(m+=atob(E.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,i,s,l,c,f,h;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,i,s,l,c,f,h,m;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.executableCode).map(E=>E.executableCode).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,i,s,l,c,f,h,m;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(h=(f=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||f===void 0?void 0:f.parts)===null||h===void 0?void 0:h.filter(E=>E.codeExecutionResult).map(E=>E.codeExecutionResult).filter(E=>E!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class S_{}class b_{}class Kw{}class Jw{}class Xw{}class Qw{}class x_{}class E_{}class T_{}class Zw{}class pm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new pm;let s;const l=e;return t?s=Ow(l):s=Iw(l),Object.assign(i,s),i}}class C_{}class A_{}class w_{}class R_{}class Ww{}class $w{}class e9{}class tv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new tv,l=qw(e);return Object.assign(i,l),i}}class t9{}class n9{}class i9{}class a9{}class N_{}class s9{get text(){var e,t,i;let s="",l=!1;const c=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,m]of Object.entries(f))h!=="text"&&h!=="thought"&&m!==null&&c.push(h);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,s+=f.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?s:void 0}get data(){var e,t,i;let s="";const l=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(c))f!=="inlineData"&&h!==null&&l.push(f);c.inlineData&&typeof c.inlineData.data=="string"&&(s+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class o9{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class nv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new nv,l=bb(e);return Object.assign(i,l),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Dt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function xb(n,e){const t=Dt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Eb(n){return Array.isArray(n)?n.map(e=>mm(e)):[mm(n)]}function mm(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Tb(n){const e=mm(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Cb(n){const e=mm(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function M_(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Ab(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>M_(e)):[M_(n)]}function Cy(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function D_(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function z_(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Hi(n){if(n==null)throw new Error("ContentUnion is required");return Cy(n)?n:{role:"user",parts:Ab(n)}}function iv(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Hi(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Hi(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Hi(t)):[Hi(e)]}function ys(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(D_(n)||z_(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Hi(n)]}const e=[],t=[],i=Cy(n[0]);for(const s of n){const l=Cy(s);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(s);else{if(D_(s)||z_(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return i||e.push({role:"user",parts:Ab(t)}),e}function l9(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Ar).includes(t[0].toUpperCase())?t[0].toUpperCase():Ar.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Ar).includes(i.toUpperCase())?i.toUpperCase():Ar.TYPE_UNSPECIFIED})}}function Cd(n){const e={},t=["items"],i=["anyOf"],s=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&l9(n.type,e);for(const[c,f]of Object.entries(n))if(f!=null)if(c=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ar).includes(f.toUpperCase())?f.toUpperCase():Ar.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Cd(f);else if(i.includes(c)){const h=[];for(const m of f){if(m.type=="null"){e.nullable=!0;continue}h.push(Cd(m))}e[c]=h}else if(s.includes(c)){const h={};for(const[m,v]of Object.entries(f))h[m]=Cd(v);e[c]=h}else{if(c==="additionalProperties")continue;e[c]=f}return e}function av(n){return Cd(n)}function sv(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function ov(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Dd(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Cd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Cd(e.response));return n}function zd(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function r9(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function wl(n,e){if(typeof e!="string")throw new Error("name must be a string");return r9(n,e,"cachedContents")}function wb(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function Ur(n){return ev(n)}function u9(n){return n!=null&&typeof n=="object"&&"name"in n}function c9(n){return n!=null&&typeof n=="object"&&"video"in n}function d9(n){return n!=null&&typeof n=="object"&&"uri"in n}function Rb(n){var e;let t;if(u9(n)&&(t=n.name),!(d9(n)&&(t=n.uri,t===void 0))&&!(c9(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function Nb(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function Mb(n){for(const e of["models","tunedModels","publisherModels"])if(f9(n,e))return n[e];return[]}function f9(n,e){return n!==null&&typeof n=="object"&&e in n}function h9(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function p9(n,e={}){const t=[],i=new Set;for(const s of n){const l=s.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const c=h9(s,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function Db(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(s>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function m9(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function zb(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return n;let l=!1;for(const c of s){if(typeof c!="object"||c===null)continue;const h=c.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ud(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function Ub(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g9(n){const e={},t=y(n,["responsesFile"]);t!=null&&_(e,["fileName"],t);const i=y(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Q9(c))),_(e,["inlinedResponses"],l)}const s=y(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["inlinedEmbedContentResponses"],l)}return e}function y9(n){const e={},t=y(n,["predictionsFormat"]);t!=null&&_(e,["format"],t);const i=y(n,["gcsDestination","outputUriPrefix"]);i!=null&&_(e,["gcsUri"],i);const s=y(n,["bigqueryDestination","outputUri"]);return s!=null&&_(e,["bigqueryUri"],s),e}function v9(n){const e={},t=y(n,["format"]);t!=null&&_(e,["predictionsFormat"],t);const i=y(n,["gcsUri"]);i!=null&&_(e,["gcsDestination","outputUriPrefix"],i);const s=y(n,["bigqueryUri"]);if(s!=null&&_(e,["bigqueryDestination","outputUri"],s),y(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(y(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function sm(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata","displayName"]);i!=null&&_(e,["displayName"],i);const s=y(n,["metadata","state"]);s!=null&&_(e,["state"],Ub(s));const l=y(n,["metadata","createTime"]);l!=null&&_(e,["createTime"],l);const c=y(n,["metadata","endTime"]);c!=null&&_(e,["endTime"],c);const f=y(n,["metadata","updateTime"]);f!=null&&_(e,["updateTime"],f);const h=y(n,["metadata","model"]);h!=null&&_(e,["model"],h);const m=y(n,["metadata","output"]);return m!=null&&_(e,["dest"],g9(zb(m))),e}function Ay(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["displayName"]);i!=null&&_(e,["displayName"],i);const s=y(n,["state"]);s!=null&&_(e,["state"],Ub(s));const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["createTime"]);c!=null&&_(e,["createTime"],c);const f=y(n,["startTime"]);f!=null&&_(e,["startTime"],f);const h=y(n,["endTime"]);h!=null&&_(e,["endTime"],h);const m=y(n,["updateTime"]);m!=null&&_(e,["updateTime"],m);const v=y(n,["model"]);v!=null&&_(e,["model"],v);const E=y(n,["inputConfig"]);E!=null&&_(e,["src"],_9(E));const x=y(n,["outputConfig"]);x!=null&&_(e,["dest"],y9(zb(x)));const R=y(n,["completionStats"]);return R!=null&&_(e,["completionStats"],R),e}function _9(n){const e={},t=y(n,["instancesFormat"]);t!=null&&_(e,["format"],t);const i=y(n,["gcsSource","uris"]);i!=null&&_(e,["gcsUri"],i);const s=y(n,["bigquerySource","inputUri"]);return s!=null&&_(e,["bigqueryUri"],s),e}function S9(n,e){const t={};if(y(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(y(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=y(e,["fileName"]);i!=null&&_(t,["fileName"],i);const s=y(e,["inlinedRequests"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>X9(n,c))),_(t,["requests","requests"],l)}return t}function b9(n){const e={},t=y(n,["format"]);t!=null&&_(e,["instancesFormat"],t);const i=y(n,["gcsUri"]);i!=null&&_(e,["gcsSource","uris"],i);const s=y(n,["bigqueryUri"]);if(s!=null&&_(e,["bigquerySource","inputUri"],s),y(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(y(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function x9(n){const e={},t=y(n,["data"]);if(t!=null&&_(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function E9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function T9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function C9(n){const e={},t=y(n,["content"]);t!=null&&_(e,["content"],t);const i=y(n,["citationMetadata"]);i!=null&&_(e,["citationMetadata"],A9(i));const s=y(n,["tokenCount"]);s!=null&&_(e,["tokenCount"],s);const l=y(n,["finishReason"]);l!=null&&_(e,["finishReason"],l);const c=y(n,["avgLogprobs"]);c!=null&&_(e,["avgLogprobs"],c);const f=y(n,["groundingMetadata"]);f!=null&&_(e,["groundingMetadata"],f);const h=y(n,["index"]);h!=null&&_(e,["index"],h);const m=y(n,["logprobsResult"]);m!=null&&_(e,["logprobsResult"],m);const v=y(n,["safetyRatings"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(R=>R)),_(e,["safetyRatings"],x)}const E=y(n,["urlContextMetadata"]);return E!=null&&_(e,["urlContextMetadata"],E),e}function A9(n){const e={},t=y(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),_(e,["citations"],i)}return e}function Ib(n){const e={},t=y(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>i7(l))),_(e,["parts"],s)}const i=y(n,["role"]);return i!=null&&_(e,["role"],i),e}function w9(n,e){const t={},i=y(n,["displayName"]);if(e!==void 0&&i!=null&&_(e,["batch","displayName"],i),y(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function R9(n,e){const t={},i=y(n,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=y(n,["dest"]);return e!==void 0&&s!=null&&_(e,["outputConfig"],v9(m9(s))),t}function U_(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["_url","model"],Dt(n,i));const s=y(e,["src"]);s!=null&&_(t,["batch","inputConfig"],S9(n,Db(n,s)));const l=y(e,["config"]);return l!=null&&w9(l,t),t}function N9(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["model"],Dt(n,i));const s=y(e,["src"]);s!=null&&_(t,["inputConfig"],b9(Db(n,s)));const l=y(e,["config"]);return l!=null&&R9(l,t),t}function M9(n,e){const t={},i=y(n,["displayName"]);return e!==void 0&&i!=null&&_(e,["batch","displayName"],i),t}function D9(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["_url","model"],Dt(n,i));const s=y(e,["src"]);s!=null&&_(t,["batch","inputConfig"],G9(n,s));const l=y(e,["config"]);return l!=null&&M9(l,t),t}function z9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function U9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function I9(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["name"]);i!=null&&_(e,["name"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);return l!=null&&_(e,["error"],l),e}function O9(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["name"]);i!=null&&_(e,["name"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);return l!=null&&_(e,["error"],l),e}function k9(n,e){const t={},i=y(e,["contents"]);if(i!=null){let l=iv(n,i);Array.isArray(l)&&(l=l.map(c=>c)),_(t,["requests[]","request","content"],l)}const s=y(e,["config"]);return s!=null&&(_(t,["_self"],L9(s,t)),zw(t,{"requests[].*":"requests[].request.*"})),t}function L9(n,e){const t={},i=y(n,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const s=y(n,["title"]);e!==void 0&&s!=null&&_(e,["requests[]","title"],s);const l=y(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&_(e,["requests[]","outputDimensionality"],l),y(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function G9(n,e){const t={},i=y(e,["fileName"]);i!=null&&_(t,["file_name"],i);const s=y(e,["inlinedRequests"]);return s!=null&&_(t,["requests"],k9(n,s)),t}function H9(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function B9(n){const e={},t=y(n,["id"]);t!=null&&_(e,["id"],t);const i=y(n,["args"]);i!=null&&_(e,["args"],i);const s=y(n,["name"]);if(s!=null&&_(e,["name"],s),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function P9(n){const e={},t=y(n,["allowedFunctionNames"]);t!=null&&_(e,["allowedFunctionNames"],t);const i=y(n,["mode"]);if(i!=null&&_(e,["mode"],i),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function q9(n,e,t){const i={},s=y(e,["systemInstruction"]);t!==void 0&&s!=null&&_(t,["systemInstruction"],Ib(Hi(s)));const l=y(e,["temperature"]);l!=null&&_(i,["temperature"],l);const c=y(e,["topP"]);c!=null&&_(i,["topP"],c);const f=y(e,["topK"]);f!=null&&_(i,["topK"],f);const h=y(e,["candidateCount"]);h!=null&&_(i,["candidateCount"],h);const m=y(e,["maxOutputTokens"]);m!=null&&_(i,["maxOutputTokens"],m);const v=y(e,["stopSequences"]);v!=null&&_(i,["stopSequences"],v);const E=y(e,["responseLogprobs"]);E!=null&&_(i,["responseLogprobs"],E);const x=y(e,["logprobs"]);x!=null&&_(i,["logprobs"],x);const R=y(e,["presencePenalty"]);R!=null&&_(i,["presencePenalty"],R);const N=y(e,["frequencyPenalty"]);N!=null&&_(i,["frequencyPenalty"],N);const z=y(e,["seed"]);z!=null&&_(i,["seed"],z);const D=y(e,["responseMimeType"]);D!=null&&_(i,["responseMimeType"],D);const I=y(e,["responseSchema"]);I!=null&&_(i,["responseSchema"],av(I));const L=y(e,["responseJsonSchema"]);if(L!=null&&_(i,["responseJsonSchema"],L),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const U=y(e,["safetySettings"]);if(t!==void 0&&U!=null){let Me=U;Array.isArray(Me)&&(Me=Me.map(De=>a7(De))),_(t,["safetySettings"],Me)}const G=y(e,["tools"]);if(t!==void 0&&G!=null){let Me=zd(G);Array.isArray(Me)&&(Me=Me.map(De=>o7(Dd(De)))),_(t,["tools"],Me)}const P=y(e,["toolConfig"]);if(t!==void 0&&P!=null&&_(t,["toolConfig"],s7(P)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const K=y(e,["cachedContent"]);t!==void 0&&K!=null&&_(t,["cachedContent"],wl(n,K));const $=y(e,["responseModalities"]);$!=null&&_(i,["responseModalities"],$);const J=y(e,["mediaResolution"]);J!=null&&_(i,["mediaResolution"],J);const B=y(e,["speechConfig"]);if(B!=null&&_(i,["speechConfig"],sv(B)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const ue=y(e,["thinkingConfig"]);ue!=null&&_(i,["thinkingConfig"],ue);const xe=y(e,["imageConfig"]);xe!=null&&_(i,["imageConfig"],J9(xe));const ae=y(e,["enableEnhancedCivicAnswers"]);if(ae!=null&&_(i,["enableEnhancedCivicAnswers"],ae),y(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function V9(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>C9(m))),_(e,["candidates"],h)}const s=y(n,["modelVersion"]);s!=null&&_(e,["modelVersion"],s);const l=y(n,["promptFeedback"]);l!=null&&_(e,["promptFeedback"],l);const c=y(n,["responseId"]);c!=null&&_(e,["responseId"],c);const f=y(n,["usageMetadata"]);return f!=null&&_(e,["usageMetadata"],f),e}function j9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function Y9(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],Ud(n,i)),t}function F9(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function K9(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&_(e,["timeRangeFilter"],t),e}function J9(n){const e={},t=y(n,["aspectRatio"]);t!=null&&_(e,["aspectRatio"],t);const i=y(n,["imageSize"]);if(i!=null&&_(e,["imageSize"],i),y(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(y(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function X9(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["request","model"],Dt(n,i));const s=y(e,["contents"]);if(s!=null){let f=ys(s);Array.isArray(f)&&(f=f.map(h=>Ib(h))),_(t,["request","contents"],f)}const l=y(e,["metadata"]);l!=null&&_(t,["metadata"],l);const c=y(e,["config"]);return c!=null&&_(t,["request","generationConfig"],q9(n,c,y(t,["request"],{}))),t}function Q9(n){const e={},t=y(n,["response"]);t!=null&&_(e,["response"],V9(t));const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["error"]);return s!=null&&_(e,["error"],s),e}function Z9(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);if(e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),y(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function W9(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const l=y(n,["filter"]);return e!==void 0&&l!=null&&_(e,["_query","filter"],l),t}function $9(n){const e={},t=y(n,["config"]);return t!=null&&Z9(t,e),e}function e7(n){const e={},t=y(n,["config"]);return t!=null&&W9(t,e),e}function t7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["operations"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>sm(c))),_(e,["batchJobs"],l)}return e}function n7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["batchPredictionJobs"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>Ay(c))),_(e,["batchJobs"],l)}return e}function i7(n){const e={},t=y(n,["mediaResolution"]);t!=null&&_(e,["mediaResolution"],t);const i=y(n,["codeExecutionResult"]);i!=null&&_(e,["codeExecutionResult"],i);const s=y(n,["executableCode"]);s!=null&&_(e,["executableCode"],s);const l=y(n,["fileData"]);l!=null&&_(e,["fileData"],H9(l));const c=y(n,["functionCall"]);c!=null&&_(e,["functionCall"],B9(c));const f=y(n,["functionResponse"]);f!=null&&_(e,["functionResponse"],f);const h=y(n,["inlineData"]);h!=null&&_(e,["inlineData"],x9(h));const m=y(n,["text"]);m!=null&&_(e,["text"],m);const v=y(n,["thought"]);v!=null&&_(e,["thought"],v);const E=y(n,["thoughtSignature"]);E!=null&&_(e,["thoughtSignature"],E);const x=y(n,["videoMetadata"]);return x!=null&&_(e,["videoMetadata"],x),e}function a7(n){const e={},t=y(n,["category"]);if(t!=null&&_(e,["category"],t),y(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=y(n,["threshold"]);return i!=null&&_(e,["threshold"],i),e}function s7(n){const e={},t=y(n,["retrievalConfig"]);t!=null&&_(e,["retrievalConfig"],t);const i=y(n,["functionCallingConfig"]);return i!=null&&_(e,["functionCallingConfig"],P9(i)),e}function o7(n){const e={};if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(n,["computerUse"]);t!=null&&_(e,["computerUse"],t);const i=y(n,["fileSearch"]);i!=null&&_(e,["fileSearch"],i);const s=y(n,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),_(e,["functionDeclarations"],v)}const c=y(n,["googleMaps"]);c!=null&&_(e,["googleMaps"],F9(c));const f=y(n,["googleSearch"]);f!=null&&_(e,["googleSearch"],K9(f));const h=y(n,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const m=y(n,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var bl;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(bl||(bl={}));class qu{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!i||Object.keys(i).length===0?c={config:{}}:typeof i=="object"?c=Object.assign({},i):c=i,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(s=c.config)===null||s===void 0?void 0:s.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class l7 extends Al{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qu(bl.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=U_(this.apiClient,e),i=t._url,s=Ie("{model}:batchGenerateContent",i),f=t.batch.inputConfig.requests,h=f.requests,m=[];for(const v of h){const E=Object.assign({},v);if(E.systemInstruction){const x=E.systemInstruction;delete E.systemInstruction;const R=E.request;R.systemInstruction=x,E.request=R}m.push(E)}return f.requests=m,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},s=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${s}`),i.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?i.dest=`${l.slice(0,-6)}/dest`:i.dest=`${l}_dest_${s}`;else if(c)i.dest=`${c}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=N9(this.apiClient,e);return f=Ie("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Ay(v))}else{const m=U_(this.apiClient,e);return f=Ie("{model}:batchGenerateContent",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>sm(v))}}async createEmbeddingsInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=D9(this.apiClient,e);return l=Ie("{model}:asyncBatchEmbedContent",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>sm(h))}}async get(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=Y9(this.apiClient,e);return f=Ie("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Ay(v))}else{const m=j9(this.apiClient,e);return f=Ie("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>sm(v))}}async cancel(e){var t,i,s,l;let c="",f={};if(this.apiClient.isVertexAI()){const h=T9(this.apiClient,e);c=Ie("batchPredictionJobs/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=E9(this.apiClient,e);c=Ie("batches/{name}:cancel",h._url),f=h._query,delete h._url,delete h._query,await this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=e7(e);return f=Ie("batchPredictionJobs",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=n7(v),x=new N_;return Object.assign(x,E),x})}else{const m=$9(e);return f=Ie("batches",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=t7(v),x=new N_;return Object.assign(x,E),x})}}async delete(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=U9(this.apiClient,e);return f=Ie("batchPredictionJobs/{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>O9(v))}else{const m=z9(this.apiClient,e);return f=Ie("batches/{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>I9(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r7(n){const e={},t=y(n,["data"]);if(t!=null&&_(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function I_(n){const e={},t=y(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>D7(l))),_(e,["parts"],s)}const i=y(n,["role"]);return i!=null&&_(e,["role"],i),e}function u7(n,e){const t={},i=y(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const s=y(n,["expireTime"]);e!==void 0&&s!=null&&_(e,["expireTime"],s);const l=y(n,["displayName"]);e!==void 0&&l!=null&&_(e,["displayName"],l);const c=y(n,["contents"]);if(e!==void 0&&c!=null){let v=ys(c);Array.isArray(v)&&(v=v.map(E=>I_(E))),_(e,["contents"],v)}const f=y(n,["systemInstruction"]);e!==void 0&&f!=null&&_(e,["systemInstruction"],I_(Hi(f)));const h=y(n,["tools"]);if(e!==void 0&&h!=null){let v=h;Array.isArray(v)&&(v=v.map(E=>U7(E))),_(e,["tools"],v)}const m=y(n,["toolConfig"]);if(e!==void 0&&m!=null&&_(e,["toolConfig"],z7(m)),y(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function c7(n,e){const t={},i=y(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const s=y(n,["expireTime"]);e!==void 0&&s!=null&&_(e,["expireTime"],s);const l=y(n,["displayName"]);e!==void 0&&l!=null&&_(e,["displayName"],l);const c=y(n,["contents"]);if(e!==void 0&&c!=null){let E=ys(c);Array.isArray(E)&&(E=E.map(x=>x)),_(e,["contents"],E)}const f=y(n,["systemInstruction"]);e!==void 0&&f!=null&&_(e,["systemInstruction"],Hi(f));const h=y(n,["tools"]);if(e!==void 0&&h!=null){let E=h;Array.isArray(E)&&(E=E.map(x=>I7(x))),_(e,["tools"],E)}const m=y(n,["toolConfig"]);e!==void 0&&m!=null&&_(e,["toolConfig"],m);const v=y(n,["kmsKeyName"]);return e!==void 0&&v!=null&&_(e,["encryption_spec","kmsKeyName"],v),t}function d7(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["model"],xb(n,i));const s=y(e,["config"]);return s!=null&&u7(s,t),t}function f7(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["model"],xb(n,i));const s=y(e,["config"]);return s!=null&&c7(s,t),t}function h7(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],wl(n,i)),t}function p7(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],wl(n,i)),t}function m7(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function g7(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function y7(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function v7(n){const e={},t=y(n,["id"]);t!=null&&_(e,["id"],t);const i=y(n,["args"]);i!=null&&_(e,["args"],i);const s=y(n,["name"]);if(s!=null&&_(e,["name"],s),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _7(n){const e={},t=y(n,["allowedFunctionNames"]);t!=null&&_(e,["allowedFunctionNames"],t);const i=y(n,["mode"]);if(i!=null&&_(e,["mode"],i),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function S7(n){const e={},t=y(n,["description"]);t!=null&&_(e,["description"],t);const i=y(n,["name"]);i!=null&&_(e,["name"],i);const s=y(n,["parameters"]);s!=null&&_(e,["parameters"],s);const l=y(n,["parametersJsonSchema"]);l!=null&&_(e,["parametersJsonSchema"],l);const c=y(n,["response"]);c!=null&&_(e,["response"],c);const f=y(n,["responseJsonSchema"]);if(f!=null&&_(e,["responseJsonSchema"],f),y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function b7(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],wl(n,i)),t}function x7(n,e){const t={},i=y(e,["name"]);return i!=null&&_(t,["_url","name"],wl(n,i)),t}function E7(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function T7(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&_(e,["timeRangeFilter"],t),e}function C7(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),t}function A7(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),t}function w7(n){const e={},t=y(n,["config"]);return t!=null&&C7(t,e),e}function R7(n){const e={},t=y(n,["config"]);return t!=null&&A7(t,e),e}function N7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["cachedContents"],l)}return e}function M7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["cachedContents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["cachedContents"],l)}return e}function D7(n){const e={},t=y(n,["mediaResolution"]);t!=null&&_(e,["mediaResolution"],t);const i=y(n,["codeExecutionResult"]);i!=null&&_(e,["codeExecutionResult"],i);const s=y(n,["executableCode"]);s!=null&&_(e,["executableCode"],s);const l=y(n,["fileData"]);l!=null&&_(e,["fileData"],y7(l));const c=y(n,["functionCall"]);c!=null&&_(e,["functionCall"],v7(c));const f=y(n,["functionResponse"]);f!=null&&_(e,["functionResponse"],f);const h=y(n,["inlineData"]);h!=null&&_(e,["inlineData"],r7(h));const m=y(n,["text"]);m!=null&&_(e,["text"],m);const v=y(n,["thought"]);v!=null&&_(e,["thought"],v);const E=y(n,["thoughtSignature"]);E!=null&&_(e,["thoughtSignature"],E);const x=y(n,["videoMetadata"]);return x!=null&&_(e,["videoMetadata"],x),e}function z7(n){const e={},t=y(n,["retrievalConfig"]);t!=null&&_(e,["retrievalConfig"],t);const i=y(n,["functionCallingConfig"]);return i!=null&&_(e,["functionCallingConfig"],_7(i)),e}function U7(n){const e={};if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(n,["computerUse"]);t!=null&&_(e,["computerUse"],t);const i=y(n,["fileSearch"]);i!=null&&_(e,["fileSearch"],i);const s=y(n,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),_(e,["functionDeclarations"],v)}const c=y(n,["googleMaps"]);c!=null&&_(e,["googleMaps"],E7(c));const f=y(n,["googleSearch"]);f!=null&&_(e,["googleSearch"],T7(f));const h=y(n,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const m=y(n,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}function I7(n){const e={},t=y(n,["retrieval"]);t!=null&&_(e,["retrieval"],t);const i=y(n,["computerUse"]);if(i!=null&&_(e,["computerUse"],i),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=y(n,["codeExecution"]);s!=null&&_(e,["codeExecution"],s);const l=y(n,["enterpriseWebSearch"]);l!=null&&_(e,["enterpriseWebSearch"],l);const c=y(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(x=>S7(x))),_(e,["functionDeclarations"],E)}const f=y(n,["googleMaps"]);f!=null&&_(e,["googleMaps"],f);const h=y(n,["googleSearch"]);h!=null&&_(e,["googleSearch"],h);const m=y(n,["googleSearchRetrieval"]);m!=null&&_(e,["googleSearchRetrieval"],m);const v=y(n,["urlContext"]);return v!=null&&_(e,["urlContext"],v),e}function O7(n,e){const t={},i=y(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const s=y(n,["expireTime"]);return e!==void 0&&s!=null&&_(e,["expireTime"],s),t}function k7(n,e){const t={},i=y(n,["ttl"]);e!==void 0&&i!=null&&_(e,["ttl"],i);const s=y(n,["expireTime"]);return e!==void 0&&s!=null&&_(e,["expireTime"],s),t}function L7(n,e){const t={},i=y(e,["name"]);i!=null&&_(t,["_url","name"],wl(n,i));const s=y(e,["config"]);return s!=null&&O7(s,t),t}function G7(n,e){const t={},i=y(e,["name"]);i!=null&&_(t,["_url","name"],wl(n,i));const s=y(e,["config"]);return s!=null&&k7(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class H7 extends Al{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qu(bl.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=f7(this.apiClient,e);return f=Ie("cachedContents",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=d7(this.apiClient,e);return f=Ie("cachedContents",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=x7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=b7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=p7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=g7(v),x=new w_;return Object.assign(x,E),x})}else{const m=h7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=m7(v),x=new w_;return Object.assign(x,E),x})}}async update(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=G7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=L7(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=R7(e);return f=Ie("cachedContents",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=M7(v),x=new R_;return Object.assign(x,E),x})}else{const m=w7(e);return f=Ie("cachedContents",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=N7(v),x=new R_;return Object.assign(x,E),x})}}}function gm(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(n);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(n,i[s])&&(t[i[s]]=n[i[s]]);return t}function O_(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function nt(n){return this instanceof nt?(this.v=n,this):new nt(n)}function Ks(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,l=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),s[Symbol.asyncIterator]=function(){return this},s;function c(R){return function(N){return Promise.resolve(N).then(R,E)}}function f(R,N){i[R]&&(s[R]=function(z){return new Promise(function(D,I){l.push([R,z,D,I])>1||h(R,z)})},N&&(s[R]=N(s[R])))}function h(R,N){try{m(i[R](N))}catch(z){x(l[0][3],z)}}function m(R){R.value instanceof nt?Promise.resolve(R.value.v).then(v,E):x(l[0][2],R)}function v(R){h("next",R)}function E(R){h("throw",R)}function x(R,N){R(N),l.shift(),l.length&&h(l[0][0],l[0][1])}}function Js(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof O_=="function"?O_(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(c){return new Promise(function(f,h){c=n[l](c),s(f,h,c.done,c.value)})}}function s(l,c,f,h){Promise.resolve(h).then(function(m){l({value:m,done:f})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B7(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Ob(t)}function Ob(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function P7(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function k_(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const s=[];let l=!0;for(;i<t&&n[i].role==="model";)s.push(n[i]),l&&!Ob(n[i])&&(l=!1),i++;l?e.push(...s):e.pop()}return e}class q7{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new V7(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class V7{constructor(e,t,i,s={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=l,this.sendPromise=Promise.resolve(),P7(l)}async sendMessage(e){var t;await this.sendPromise;const i=Hi(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,f;const h=await s,m=(c=(l=h.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=h.automaticFunctionCallingHistory,E=this.getHistory(!0).length;let x=[];v!=null&&(x=(f=v.slice(E))!==null&&f!==void 0?f:[]);const R=m?[m]:[];this.recordHistory(i,R,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const i=Hi(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const l=await s;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?k_(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Ks(this,arguments,function*(){var s,l,c,f,h,m;const v=[];try{for(var E=!0,x=Js(e),R;R=yield nt(x.next()),s=R.done,!s;E=!0){f=R.value,E=!1;const N=f;if(B7(N)){const z=(m=(h=N.candidates)===null||h===void 0?void 0:h[0])===null||m===void 0?void 0:m.content;z!==void 0&&v.push(z)}yield yield nt(N)}}catch(N){l={error:N}}finally{try{!E&&!s&&(c=x.return)&&(yield nt(c.call(x)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,i){let s=[];t.length>0&&t.every(l=>l.role!==void 0)?s=t:s.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...k_(i)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jh extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,jh.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j7(n){const e={},t=y(n,["file"]);return t!=null&&_(e,["file"],t),e}function Y7(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function F7(n){const e={},t=y(n,["name"]);return t!=null&&_(e,["_url","file"],Rb(t)),e}function K7(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}function J7(n){const e={},t=y(n,["name"]);return t!=null&&_(e,["_url","file"],Rb(t)),e}function X7(n){const e={},t=y(n,["uris"]);return t!=null&&_(e,["uris"],t),e}function Q7(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),t}function Z7(n){const e={},t=y(n,["config"]);return t!=null&&Q7(t,e),e}function W7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["files"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["files"],l)}return e}function $7(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),_(e,["files"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eR extends Al{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qu(bl.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Z7(e);return l=Ie("files",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=W7(h),v=new t9;return Object.assign(v,m),v})}}async createInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=j7(e);return l=Ie("upload/v1beta/files",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=Y7(h),v=new n9;return Object.assign(v,m),v})}}async get(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=J7(e);return l=Ie("files/{file}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=F7(e);return l=Ie("files/{file}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=K7(h),v=new i9;return Object.assign(v,m),v})}}async registerFilesInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=X7(e);return l=Ie("files:register",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=$7(h),v=new a9;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function om(n){const e={},t=y(n,["data"]);if(t!=null&&_(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function tR(n){const e={},t=y(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>yR(l))),_(e,["parts"],s)}const i=y(n,["role"]);return i!=null&&_(e,["role"],i),e}function nR(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function iR(n){const e={},t=y(n,["id"]);t!=null&&_(e,["id"],t);const i=y(n,["args"]);i!=null&&_(e,["args"],i);const s=y(n,["name"]);if(s!=null&&_(e,["name"],s),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function aR(n){const e={},t=y(n,["description"]);t!=null&&_(e,["description"],t);const i=y(n,["name"]);i!=null&&_(e,["name"],i);const s=y(n,["parameters"]);s!=null&&_(e,["parameters"],s);const l=y(n,["parametersJsonSchema"]);l!=null&&_(e,["parametersJsonSchema"],l);const c=y(n,["response"]);c!=null&&_(e,["response"],c);const f=y(n,["responseJsonSchema"]);if(f!=null&&_(e,["responseJsonSchema"],f),y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function sR(n){const e={},t=y(n,["modelSelectionConfig"]);t!=null&&_(e,["modelConfig"],t);const i=y(n,["responseJsonSchema"]);i!=null&&_(e,["responseJsonSchema"],i);const s=y(n,["audioTimestamp"]);s!=null&&_(e,["audioTimestamp"],s);const l=y(n,["candidateCount"]);l!=null&&_(e,["candidateCount"],l);const c=y(n,["enableAffectiveDialog"]);c!=null&&_(e,["enableAffectiveDialog"],c);const f=y(n,["frequencyPenalty"]);f!=null&&_(e,["frequencyPenalty"],f);const h=y(n,["logprobs"]);h!=null&&_(e,["logprobs"],h);const m=y(n,["maxOutputTokens"]);m!=null&&_(e,["maxOutputTokens"],m);const v=y(n,["mediaResolution"]);v!=null&&_(e,["mediaResolution"],v);const E=y(n,["presencePenalty"]);E!=null&&_(e,["presencePenalty"],E);const x=y(n,["responseLogprobs"]);x!=null&&_(e,["responseLogprobs"],x);const R=y(n,["responseMimeType"]);R!=null&&_(e,["responseMimeType"],R);const N=y(n,["responseModalities"]);N!=null&&_(e,["responseModalities"],N);const z=y(n,["responseSchema"]);z!=null&&_(e,["responseSchema"],z);const D=y(n,["routingConfig"]);D!=null&&_(e,["routingConfig"],D);const I=y(n,["seed"]);I!=null&&_(e,["seed"],I);const L=y(n,["speechConfig"]);L!=null&&_(e,["speechConfig"],L);const U=y(n,["stopSequences"]);U!=null&&_(e,["stopSequences"],U);const G=y(n,["temperature"]);G!=null&&_(e,["temperature"],G);const P=y(n,["thinkingConfig"]);P!=null&&_(e,["thinkingConfig"],P);const K=y(n,["topK"]);K!=null&&_(e,["topK"],K);const $=y(n,["topP"]);if($!=null&&_(e,["topP"],$),y(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function oR(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function lR(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&_(e,["timeRangeFilter"],t),e}function rR(n,e){const t={},i=y(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const s=y(n,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const l=y(n,["temperature"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","temperature"],l);const c=y(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const f=y(n,["topK"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","topK"],f);const h=y(n,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const m=y(n,["mediaResolution"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","mediaResolution"],m);const v=y(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=y(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],ov(E));const x=y(n,["thinkingConfig"]);e!==void 0&&x!=null&&_(e,["setup","generationConfig","thinkingConfig"],x);const R=y(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const N=y(n,["systemInstruction"]);e!==void 0&&N!=null&&_(e,["setup","systemInstruction"],tR(Hi(N)));const z=y(n,["tools"]);if(e!==void 0&&z!=null){let K=zd(z);Array.isArray(K)&&(K=K.map($=>_R(Dd($)))),_(e,["setup","tools"],K)}const D=y(n,["sessionResumption"]);e!==void 0&&D!=null&&_(e,["setup","sessionResumption"],vR(D));const I=y(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&_(e,["setup","inputAudioTranscription"],I);const L=y(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&_(e,["setup","outputAudioTranscription"],L);const U=y(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&_(e,["setup","realtimeInputConfig"],U);const G=y(n,["contextWindowCompression"]);e!==void 0&&G!=null&&_(e,["setup","contextWindowCompression"],G);const P=y(n,["proactivity"]);if(e!==void 0&&P!=null&&_(e,["setup","proactivity"],P),y(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function uR(n,e){const t={},i=y(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],sR(i));const s=y(n,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const l=y(n,["temperature"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","temperature"],l);const c=y(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const f=y(n,["topK"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","topK"],f);const h=y(n,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const m=y(n,["mediaResolution"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","mediaResolution"],m);const v=y(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=y(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],ov(E));const x=y(n,["thinkingConfig"]);e!==void 0&&x!=null&&_(e,["setup","generationConfig","thinkingConfig"],x);const R=y(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const N=y(n,["systemInstruction"]);e!==void 0&&N!=null&&_(e,["setup","systemInstruction"],Hi(N));const z=y(n,["tools"]);if(e!==void 0&&z!=null){let $=zd(z);Array.isArray($)&&($=$.map(J=>SR(Dd(J)))),_(e,["setup","tools"],$)}const D=y(n,["sessionResumption"]);e!==void 0&&D!=null&&_(e,["setup","sessionResumption"],D);const I=y(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&_(e,["setup","inputAudioTranscription"],I);const L=y(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&_(e,["setup","outputAudioTranscription"],L);const U=y(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&_(e,["setup","realtimeInputConfig"],U);const G=y(n,["contextWindowCompression"]);e!==void 0&&G!=null&&_(e,["setup","contextWindowCompression"],G);const P=y(n,["proactivity"]);e!==void 0&&P!=null&&_(e,["setup","proactivity"],P);const K=y(n,["explicitVadSignal"]);return e!==void 0&&K!=null&&_(e,["setup","explicitVadSignal"],K),t}function cR(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["setup","model"],Dt(n,i));const s=y(e,["config"]);return s!=null&&_(t,["config"],rR(s,t)),t}function dR(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["setup","model"],Dt(n,i));const s=y(e,["config"]);return s!=null&&_(t,["config"],uR(s,t)),t}function fR(n){const e={},t=y(n,["musicGenerationConfig"]);return t!=null&&_(e,["musicGenerationConfig"],t),e}function hR(n){const e={},t=y(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(s=>s)),_(e,["weightedPrompts"],i)}return e}function pR(n){const e={},t=y(n,["media"]);if(t!=null){let m=Eb(t);Array.isArray(m)&&(m=m.map(v=>om(v))),_(e,["mediaChunks"],m)}const i=y(n,["audio"]);i!=null&&_(e,["audio"],om(Cb(i)));const s=y(n,["audioStreamEnd"]);s!=null&&_(e,["audioStreamEnd"],s);const l=y(n,["video"]);l!=null&&_(e,["video"],om(Tb(l)));const c=y(n,["text"]);c!=null&&_(e,["text"],c);const f=y(n,["activityStart"]);f!=null&&_(e,["activityStart"],f);const h=y(n,["activityEnd"]);return h!=null&&_(e,["activityEnd"],h),e}function mR(n){const e={},t=y(n,["media"]);if(t!=null){let m=Eb(t);Array.isArray(m)&&(m=m.map(v=>v)),_(e,["mediaChunks"],m)}const i=y(n,["audio"]);i!=null&&_(e,["audio"],Cb(i));const s=y(n,["audioStreamEnd"]);s!=null&&_(e,["audioStreamEnd"],s);const l=y(n,["video"]);l!=null&&_(e,["video"],Tb(l));const c=y(n,["text"]);c!=null&&_(e,["text"],c);const f=y(n,["activityStart"]);f!=null&&_(e,["activityStart"],f);const h=y(n,["activityEnd"]);return h!=null&&_(e,["activityEnd"],h),e}function gR(n){const e={},t=y(n,["setupComplete"]);t!=null&&_(e,["setupComplete"],t);const i=y(n,["serverContent"]);i!=null&&_(e,["serverContent"],i);const s=y(n,["toolCall"]);s!=null&&_(e,["toolCall"],s);const l=y(n,["toolCallCancellation"]);l!=null&&_(e,["toolCallCancellation"],l);const c=y(n,["usageMetadata"]);c!=null&&_(e,["usageMetadata"],bR(c));const f=y(n,["goAway"]);f!=null&&_(e,["goAway"],f);const h=y(n,["sessionResumptionUpdate"]);h!=null&&_(e,["sessionResumptionUpdate"],h);const m=y(n,["voiceActivityDetectionSignal"]);m!=null&&_(e,["voiceActivityDetectionSignal"],m);const v=y(n,["voiceActivity"]);return v!=null&&_(e,["voiceActivity"],xR(v)),e}function yR(n){const e={},t=y(n,["mediaResolution"]);t!=null&&_(e,["mediaResolution"],t);const i=y(n,["codeExecutionResult"]);i!=null&&_(e,["codeExecutionResult"],i);const s=y(n,["executableCode"]);s!=null&&_(e,["executableCode"],s);const l=y(n,["fileData"]);l!=null&&_(e,["fileData"],nR(l));const c=y(n,["functionCall"]);c!=null&&_(e,["functionCall"],iR(c));const f=y(n,["functionResponse"]);f!=null&&_(e,["functionResponse"],f);const h=y(n,["inlineData"]);h!=null&&_(e,["inlineData"],om(h));const m=y(n,["text"]);m!=null&&_(e,["text"],m);const v=y(n,["thought"]);v!=null&&_(e,["thought"],v);const E=y(n,["thoughtSignature"]);E!=null&&_(e,["thoughtSignature"],E);const x=y(n,["videoMetadata"]);return x!=null&&_(e,["videoMetadata"],x),e}function vR(n){const e={},t=y(n,["handle"]);if(t!=null&&_(e,["handle"],t),y(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _R(n){const e={};if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(n,["computerUse"]);t!=null&&_(e,["computerUse"],t);const i=y(n,["fileSearch"]);i!=null&&_(e,["fileSearch"],i);const s=y(n,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),_(e,["functionDeclarations"],v)}const c=y(n,["googleMaps"]);c!=null&&_(e,["googleMaps"],oR(c));const f=y(n,["googleSearch"]);f!=null&&_(e,["googleSearch"],lR(f));const h=y(n,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const m=y(n,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}function SR(n){const e={},t=y(n,["retrieval"]);t!=null&&_(e,["retrieval"],t);const i=y(n,["computerUse"]);if(i!=null&&_(e,["computerUse"],i),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=y(n,["codeExecution"]);s!=null&&_(e,["codeExecution"],s);const l=y(n,["enterpriseWebSearch"]);l!=null&&_(e,["enterpriseWebSearch"],l);const c=y(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(x=>aR(x))),_(e,["functionDeclarations"],E)}const f=y(n,["googleMaps"]);f!=null&&_(e,["googleMaps"],f);const h=y(n,["googleSearch"]);h!=null&&_(e,["googleSearch"],h);const m=y(n,["googleSearchRetrieval"]);m!=null&&_(e,["googleSearchRetrieval"],m);const v=y(n,["urlContext"]);return v!=null&&_(e,["urlContext"],v),e}function bR(n){const e={},t=y(n,["promptTokenCount"]);t!=null&&_(e,["promptTokenCount"],t);const i=y(n,["cachedContentTokenCount"]);i!=null&&_(e,["cachedContentTokenCount"],i);const s=y(n,["candidatesTokenCount"]);s!=null&&_(e,["responseTokenCount"],s);const l=y(n,["toolUsePromptTokenCount"]);l!=null&&_(e,["toolUsePromptTokenCount"],l);const c=y(n,["thoughtsTokenCount"]);c!=null&&_(e,["thoughtsTokenCount"],c);const f=y(n,["totalTokenCount"]);f!=null&&_(e,["totalTokenCount"],f);const h=y(n,["promptTokensDetails"]);if(h!=null){let R=h;Array.isArray(R)&&(R=R.map(N=>N)),_(e,["promptTokensDetails"],R)}const m=y(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(N=>N)),_(e,["cacheTokensDetails"],R)}const v=y(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(N=>N)),_(e,["responseTokensDetails"],R)}const E=y(n,["toolUsePromptTokensDetails"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(N=>N)),_(e,["toolUsePromptTokensDetails"],R)}const x=y(n,["trafficType"]);return x!=null&&_(e,["trafficType"],x),e}function xR(n){const e={},t=y(n,["type"]);return t!=null&&_(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ER(n,e){const t={},i=y(n,["data"]);if(i!=null&&_(t,["data"],i),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=y(n,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function TR(n,e){const t={},i=y(n,["content"]);i!=null&&_(t,["content"],i);const s=y(n,["citationMetadata"]);s!=null&&_(t,["citationMetadata"],CR(s));const l=y(n,["tokenCount"]);l!=null&&_(t,["tokenCount"],l);const c=y(n,["finishReason"]);c!=null&&_(t,["finishReason"],c);const f=y(n,["avgLogprobs"]);f!=null&&_(t,["avgLogprobs"],f);const h=y(n,["groundingMetadata"]);h!=null&&_(t,["groundingMetadata"],h);const m=y(n,["index"]);m!=null&&_(t,["index"],m);const v=y(n,["logprobsResult"]);v!=null&&_(t,["logprobsResult"],v);const E=y(n,["safetyRatings"]);if(E!=null){let R=E;Array.isArray(R)&&(R=R.map(N=>N)),_(t,["safetyRatings"],R)}const x=y(n,["urlContextMetadata"]);return x!=null&&_(t,["urlContextMetadata"],x),t}function CR(n,e){const t={},i=y(n,["citationSources"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),_(t,["citations"],s)}return t}function AR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let c=ys(l);Array.isArray(c)&&(c=c.map(f=>f)),_(i,["contents"],c)}return i}function wR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["tokensInfo"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(t,["tokensInfo"],l)}return t}function RR(n,e){const t={},i=y(n,["values"]);i!=null&&_(t,["values"],i);const s=y(n,["statistics"]);return s!=null&&_(t,["statistics"],NR(s)),t}function NR(n,e){const t={},i=y(n,["truncated"]);i!=null&&_(t,["truncated"],i);const s=y(n,["token_count"]);return s!=null&&_(t,["tokenCount"],s),t}function Dm(n,e){const t={},i=y(n,["parts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>GN(c))),_(t,["parts"],l)}const s=y(n,["role"]);return s!=null&&_(t,["role"],s),t}function MR(n,e){const t={},i=y(n,["controlType"]);i!=null&&_(t,["controlType"],i);const s=y(n,["enableControlImageComputation"]);return s!=null&&_(t,["computeControl"],s),t}function DR(n,e){const t={};if(y(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(y(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(y(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function zR(n,e,t){const i={},s=y(n,["systemInstruction"]);e!==void 0&&s!=null&&_(e,["systemInstruction"],Hi(s));const l=y(n,["tools"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>Hb(h))),_(e,["tools"],f)}const c=y(n,["generationConfig"]);return e!==void 0&&c!=null&&_(e,["generationConfig"],EN(c)),i}function UR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let f=ys(l);Array.isArray(f)&&(f=f.map(h=>Dm(h))),_(i,["contents"],f)}const c=y(e,["config"]);return c!=null&&DR(c),i}function IR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let f=ys(l);Array.isArray(f)&&(f=f.map(h=>h)),_(i,["contents"],f)}const c=y(e,["config"]);return c!=null&&zR(c,i),i}function OR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["totalTokens"]);s!=null&&_(t,["totalTokens"],s);const l=y(n,["cachedContentTokenCount"]);return l!=null&&_(t,["cachedContentTokenCount"],l),t}function kR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["totalTokens"]);return s!=null&&_(t,["totalTokens"],s),t}function LR(n,e,t){const i={},s=y(e,["model"]);return s!=null&&_(i,["_url","name"],Dt(n,s)),i}function GR(n,e,t){const i={},s=y(e,["model"]);return s!=null&&_(i,["_url","name"],Dt(n,s)),i}function HR(n,e){const t={},i=y(n,["sdkHttpResponse"]);return i!=null&&_(t,["sdkHttpResponse"],i),t}function BR(n,e){const t={},i=y(n,["sdkHttpResponse"]);return i!=null&&_(t,["sdkHttpResponse"],i),t}function PR(n,e,t){const i={},s=y(n,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const l=y(n,["negativePrompt"]);e!==void 0&&l!=null&&_(e,["parameters","negativePrompt"],l);const c=y(n,["numberOfImages"]);e!==void 0&&c!=null&&_(e,["parameters","sampleCount"],c);const f=y(n,["aspectRatio"]);e!==void 0&&f!=null&&_(e,["parameters","aspectRatio"],f);const h=y(n,["guidanceScale"]);e!==void 0&&h!=null&&_(e,["parameters","guidanceScale"],h);const m=y(n,["seed"]);e!==void 0&&m!=null&&_(e,["parameters","seed"],m);const v=y(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&_(e,["parameters","safetySetting"],v);const E=y(n,["personGeneration"]);e!==void 0&&E!=null&&_(e,["parameters","personGeneration"],E);const x=y(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&_(e,["parameters","includeSafetyAttributes"],x);const R=y(n,["includeRaiReason"]);e!==void 0&&R!=null&&_(e,["parameters","includeRaiReason"],R);const N=y(n,["language"]);e!==void 0&&N!=null&&_(e,["parameters","language"],N);const z=y(n,["outputMimeType"]);e!==void 0&&z!=null&&_(e,["parameters","outputOptions","mimeType"],z);const D=y(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&_(e,["parameters","outputOptions","compressionQuality"],D);const I=y(n,["addWatermark"]);e!==void 0&&I!=null&&_(e,["parameters","addWatermark"],I);const L=y(n,["labels"]);e!==void 0&&L!=null&&_(e,["labels"],L);const U=y(n,["editMode"]);e!==void 0&&U!=null&&_(e,["parameters","editMode"],U);const G=y(n,["baseSteps"]);return e!==void 0&&G!=null&&_(e,["parameters","editConfig","baseSteps"],G),i}function qR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["prompt"]);l!=null&&_(i,["instances[0]","prompt"],l);const c=y(e,["referenceImages"]);if(c!=null){let h=c;Array.isArray(h)&&(h=h.map(m=>jN(m))),_(i,["instances[0]","referenceImages"],h)}const f=y(e,["config"]);return f!=null&&PR(f,i),i}function VR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zm(c))),_(t,["generatedImages"],l)}return t}function jR(n,e,t){const i={},s=y(n,["taskType"]);e!==void 0&&s!=null&&_(e,["requests[]","taskType"],s);const l=y(n,["title"]);e!==void 0&&l!=null&&_(e,["requests[]","title"],l);const c=y(n,["outputDimensionality"]);if(e!==void 0&&c!=null&&_(e,["requests[]","outputDimensionality"],c),y(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(y(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function YR(n,e,t){const i={},s=y(n,["taskType"]);e!==void 0&&s!=null&&_(e,["instances[]","task_type"],s);const l=y(n,["title"]);e!==void 0&&l!=null&&_(e,["instances[]","title"],l);const c=y(n,["outputDimensionality"]);e!==void 0&&c!=null&&_(e,["parameters","outputDimensionality"],c);const f=y(n,["mimeType"]);e!==void 0&&f!=null&&_(e,["instances[]","mimeType"],f);const h=y(n,["autoTruncate"]);return e!==void 0&&h!=null&&_(e,["parameters","autoTruncate"],h),i}function FR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let h=iv(n,l);Array.isArray(h)&&(h=h.map(m=>m)),_(i,["requests[]","content"],h)}const c=y(e,["config"]);c!=null&&jR(c,i);const f=y(e,["model"]);return f!==void 0&&_(i,["requests[]","model"],Dt(n,f)),i}function KR(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let f=iv(n,l);Array.isArray(f)&&(f=f.map(h=>h)),_(i,["instances[]","content"],f)}const c=y(e,["config"]);return c!=null&&YR(c,i),i}function JR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),_(t,["embeddings"],c)}const l=y(n,["metadata"]);return l!=null&&_(t,["metadata"],l),t}function XR(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["predictions[]","embeddings"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>RR(f))),_(t,["embeddings"],c)}const l=y(n,["metadata"]);return l!=null&&_(t,["metadata"],l),t}function QR(n,e){const t={},i=y(n,["endpoint"]);i!=null&&_(t,["name"],i);const s=y(n,["deployedModelId"]);return s!=null&&_(t,["deployedModelId"],s),t}function ZR(n,e){const t={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=y(n,["fileUri"]);i!=null&&_(t,["fileUri"],i);const s=y(n,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function WR(n,e){const t={},i=y(n,["id"]);i!=null&&_(t,["id"],i);const s=y(n,["args"]);s!=null&&_(t,["args"],s);const l=y(n,["name"]);if(l!=null&&_(t,["name"],l),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function $R(n,e){const t={},i=y(n,["allowedFunctionNames"]);i!=null&&_(t,["allowedFunctionNames"],i);const s=y(n,["mode"]);if(s!=null&&_(t,["mode"],s),y(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function eN(n,e){const t={},i=y(n,["description"]);i!=null&&_(t,["description"],i);const s=y(n,["name"]);s!=null&&_(t,["name"],s);const l=y(n,["parameters"]);l!=null&&_(t,["parameters"],l);const c=y(n,["parametersJsonSchema"]);c!=null&&_(t,["parametersJsonSchema"],c);const f=y(n,["response"]);f!=null&&_(t,["response"],f);const h=y(n,["responseJsonSchema"]);if(h!=null&&_(t,["responseJsonSchema"],h),y(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function tN(n,e,t,i){const s={},l=y(e,["systemInstruction"]);t!==void 0&&l!=null&&_(t,["systemInstruction"],Dm(Hi(l)));const c=y(e,["temperature"]);c!=null&&_(s,["temperature"],c);const f=y(e,["topP"]);f!=null&&_(s,["topP"],f);const h=y(e,["topK"]);h!=null&&_(s,["topK"],h);const m=y(e,["candidateCount"]);m!=null&&_(s,["candidateCount"],m);const v=y(e,["maxOutputTokens"]);v!=null&&_(s,["maxOutputTokens"],v);const E=y(e,["stopSequences"]);E!=null&&_(s,["stopSequences"],E);const x=y(e,["responseLogprobs"]);x!=null&&_(s,["responseLogprobs"],x);const R=y(e,["logprobs"]);R!=null&&_(s,["logprobs"],R);const N=y(e,["presencePenalty"]);N!=null&&_(s,["presencePenalty"],N);const z=y(e,["frequencyPenalty"]);z!=null&&_(s,["frequencyPenalty"],z);const D=y(e,["seed"]);D!=null&&_(s,["seed"],D);const I=y(e,["responseMimeType"]);I!=null&&_(s,["responseMimeType"],I);const L=y(e,["responseSchema"]);L!=null&&_(s,["responseSchema"],av(L));const U=y(e,["responseJsonSchema"]);if(U!=null&&_(s,["responseJsonSchema"],U),y(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(y(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const G=y(e,["safetySettings"]);if(t!==void 0&&G!=null){let De=G;Array.isArray(De)&&(De=De.map(we=>YN(we))),_(t,["safetySettings"],De)}const P=y(e,["tools"]);if(t!==void 0&&P!=null){let De=zd(P);Array.isArray(De)&&(De=De.map(we=>WN(Dd(we)))),_(t,["tools"],De)}const K=y(e,["toolConfig"]);if(t!==void 0&&K!=null&&_(t,["toolConfig"],ZN(K)),y(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const $=y(e,["cachedContent"]);t!==void 0&&$!=null&&_(t,["cachedContent"],wl(n,$));const J=y(e,["responseModalities"]);J!=null&&_(s,["responseModalities"],J);const B=y(e,["mediaResolution"]);B!=null&&_(s,["mediaResolution"],B);const ue=y(e,["speechConfig"]);if(ue!=null&&_(s,["speechConfig"],sv(ue)),y(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const xe=y(e,["thinkingConfig"]);xe!=null&&_(s,["thinkingConfig"],xe);const ae=y(e,["imageConfig"]);ae!=null&&_(s,["imageConfig"],RN(ae));const Me=y(e,["enableEnhancedCivicAnswers"]);if(Me!=null&&_(s,["enableEnhancedCivicAnswers"],Me),y(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return s}function nN(n,e,t,i){const s={},l=y(e,["systemInstruction"]);t!==void 0&&l!=null&&_(t,["systemInstruction"],Hi(l));const c=y(e,["temperature"]);c!=null&&_(s,["temperature"],c);const f=y(e,["topP"]);f!=null&&_(s,["topP"],f);const h=y(e,["topK"]);h!=null&&_(s,["topK"],h);const m=y(e,["candidateCount"]);m!=null&&_(s,["candidateCount"],m);const v=y(e,["maxOutputTokens"]);v!=null&&_(s,["maxOutputTokens"],v);const E=y(e,["stopSequences"]);E!=null&&_(s,["stopSequences"],E);const x=y(e,["responseLogprobs"]);x!=null&&_(s,["responseLogprobs"],x);const R=y(e,["logprobs"]);R!=null&&_(s,["logprobs"],R);const N=y(e,["presencePenalty"]);N!=null&&_(s,["presencePenalty"],N);const z=y(e,["frequencyPenalty"]);z!=null&&_(s,["frequencyPenalty"],z);const D=y(e,["seed"]);D!=null&&_(s,["seed"],D);const I=y(e,["responseMimeType"]);I!=null&&_(s,["responseMimeType"],I);const L=y(e,["responseSchema"]);L!=null&&_(s,["responseSchema"],av(L));const U=y(e,["responseJsonSchema"]);U!=null&&_(s,["responseJsonSchema"],U);const G=y(e,["routingConfig"]);G!=null&&_(s,["routingConfig"],G);const P=y(e,["modelSelectionConfig"]);P!=null&&_(s,["modelConfig"],P);const K=y(e,["safetySettings"]);if(t!==void 0&&K!=null){let fe=K;Array.isArray(fe)&&(fe=fe.map(Ne=>Ne)),_(t,["safetySettings"],fe)}const $=y(e,["tools"]);if(t!==void 0&&$!=null){let fe=zd($);Array.isArray(fe)&&(fe=fe.map(Ne=>Hb(Dd(Ne)))),_(t,["tools"],fe)}const J=y(e,["toolConfig"]);t!==void 0&&J!=null&&_(t,["toolConfig"],J);const B=y(e,["labels"]);t!==void 0&&B!=null&&_(t,["labels"],B);const ue=y(e,["cachedContent"]);t!==void 0&&ue!=null&&_(t,["cachedContent"],wl(n,ue));const xe=y(e,["responseModalities"]);xe!=null&&_(s,["responseModalities"],xe);const ae=y(e,["mediaResolution"]);ae!=null&&_(s,["mediaResolution"],ae);const Me=y(e,["speechConfig"]);Me!=null&&_(s,["speechConfig"],sv(Me));const De=y(e,["audioTimestamp"]);De!=null&&_(s,["audioTimestamp"],De);const we=y(e,["thinkingConfig"]);we!=null&&_(s,["thinkingConfig"],we);const Y=y(e,["imageConfig"]);if(Y!=null&&_(s,["imageConfig"],NN(Y)),y(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const he=y(e,["modelArmorConfig"]);return t!==void 0&&he!=null&&_(t,["modelArmorConfig"],he),s}function L_(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let f=ys(l);Array.isArray(f)&&(f=f.map(h=>Dm(h))),_(i,["contents"],f)}const c=y(e,["config"]);return c!=null&&_(i,["generationConfig"],tN(n,c,i)),i}function G_(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["contents"]);if(l!=null){let f=ys(l);Array.isArray(f)&&(f=f.map(h=>h)),_(i,["contents"],f)}const c=y(e,["config"]);return c!=null&&_(i,["generationConfig"],nN(n,c,i)),i}function H_(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["candidates"]);if(s!=null){let m=s;Array.isArray(m)&&(m=m.map(v=>TR(v))),_(t,["candidates"],m)}const l=y(n,["modelVersion"]);l!=null&&_(t,["modelVersion"],l);const c=y(n,["promptFeedback"]);c!=null&&_(t,["promptFeedback"],c);const f=y(n,["responseId"]);f!=null&&_(t,["responseId"],f);const h=y(n,["usageMetadata"]);return h!=null&&_(t,["usageMetadata"],h),t}function B_(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["candidates"]);if(s!=null){let v=s;Array.isArray(v)&&(v=v.map(E=>E)),_(t,["candidates"],v)}const l=y(n,["createTime"]);l!=null&&_(t,["createTime"],l);const c=y(n,["modelVersion"]);c!=null&&_(t,["modelVersion"],c);const f=y(n,["promptFeedback"]);f!=null&&_(t,["promptFeedback"],f);const h=y(n,["responseId"]);h!=null&&_(t,["responseId"],h);const m=y(n,["usageMetadata"]);return m!=null&&_(t,["usageMetadata"],m),t}function iN(n,e,t){const i={};if(y(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=y(n,["numberOfImages"]);e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s);const l=y(n,["aspectRatio"]);e!==void 0&&l!=null&&_(e,["parameters","aspectRatio"],l);const c=y(n,["guidanceScale"]);if(e!==void 0&&c!=null&&_(e,["parameters","guidanceScale"],c),y(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=y(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&_(e,["parameters","safetySetting"],f);const h=y(n,["personGeneration"]);e!==void 0&&h!=null&&_(e,["parameters","personGeneration"],h);const m=y(n,["includeSafetyAttributes"]);e!==void 0&&m!=null&&_(e,["parameters","includeSafetyAttributes"],m);const v=y(n,["includeRaiReason"]);e!==void 0&&v!=null&&_(e,["parameters","includeRaiReason"],v);const E=y(n,["language"]);e!==void 0&&E!=null&&_(e,["parameters","language"],E);const x=y(n,["outputMimeType"]);e!==void 0&&x!=null&&_(e,["parameters","outputOptions","mimeType"],x);const R=y(n,["outputCompressionQuality"]);if(e!==void 0&&R!=null&&_(e,["parameters","outputOptions","compressionQuality"],R),y(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(y(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const N=y(n,["imageSize"]);if(e!==void 0&&N!=null&&_(e,["parameters","sampleImageSize"],N),y(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function aN(n,e,t){const i={},s=y(n,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const l=y(n,["negativePrompt"]);e!==void 0&&l!=null&&_(e,["parameters","negativePrompt"],l);const c=y(n,["numberOfImages"]);e!==void 0&&c!=null&&_(e,["parameters","sampleCount"],c);const f=y(n,["aspectRatio"]);e!==void 0&&f!=null&&_(e,["parameters","aspectRatio"],f);const h=y(n,["guidanceScale"]);e!==void 0&&h!=null&&_(e,["parameters","guidanceScale"],h);const m=y(n,["seed"]);e!==void 0&&m!=null&&_(e,["parameters","seed"],m);const v=y(n,["safetyFilterLevel"]);e!==void 0&&v!=null&&_(e,["parameters","safetySetting"],v);const E=y(n,["personGeneration"]);e!==void 0&&E!=null&&_(e,["parameters","personGeneration"],E);const x=y(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&_(e,["parameters","includeSafetyAttributes"],x);const R=y(n,["includeRaiReason"]);e!==void 0&&R!=null&&_(e,["parameters","includeRaiReason"],R);const N=y(n,["language"]);e!==void 0&&N!=null&&_(e,["parameters","language"],N);const z=y(n,["outputMimeType"]);e!==void 0&&z!=null&&_(e,["parameters","outputOptions","mimeType"],z);const D=y(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&_(e,["parameters","outputOptions","compressionQuality"],D);const I=y(n,["addWatermark"]);e!==void 0&&I!=null&&_(e,["parameters","addWatermark"],I);const L=y(n,["labels"]);e!==void 0&&L!=null&&_(e,["labels"],L);const U=y(n,["imageSize"]);e!==void 0&&U!=null&&_(e,["parameters","sampleImageSize"],U);const G=y(n,["enhancePrompt"]);return e!==void 0&&G!=null&&_(e,["parameters","enhancePrompt"],G),i}function sN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["prompt"]);l!=null&&_(i,["instances[0]","prompt"],l);const c=y(e,["config"]);return c!=null&&iN(c,i),i}function oN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["prompt"]);l!=null&&_(i,["instances[0]","prompt"],l);const c=y(e,["config"]);return c!=null&&aN(c,i),i}function lN(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>_N(f))),_(t,["generatedImages"],c)}const l=y(n,["positivePromptSafetyAttributes"]);return l!=null&&_(t,["positivePromptSafetyAttributes"],Lb(l)),t}function rN(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["predictions"]);if(s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>zm(f))),_(t,["generatedImages"],c)}const l=y(n,["positivePromptSafetyAttributes"]);return l!=null&&_(t,["positivePromptSafetyAttributes"],Gb(l)),t}function uN(n,e,t){const i={},s=y(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s),y(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(y(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const l=y(n,["durationSeconds"]);if(e!==void 0&&l!=null&&_(e,["parameters","durationSeconds"],l),y(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=y(n,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const f=y(n,["resolution"]);e!==void 0&&f!=null&&_(e,["parameters","resolution"],f);const h=y(n,["personGeneration"]);if(e!==void 0&&h!=null&&_(e,["parameters","personGeneration"],h),y(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const m=y(n,["negativePrompt"]);e!==void 0&&m!=null&&_(e,["parameters","negativePrompt"],m);const v=y(n,["enhancePrompt"]);if(e!==void 0&&v!=null&&_(e,["parameters","enhancePrompt"],v),y(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const E=y(n,["lastFrame"]);e!==void 0&&E!=null&&_(e,["instances[0]","lastFrame"],Um(E));const x=y(n,["referenceImages"]);if(e!==void 0&&x!=null){let R=x;Array.isArray(R)&&(R=R.map(N=>dM(N))),_(e,["instances[0]","referenceImages"],R)}if(y(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(y(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function cN(n,e,t){const i={},s=y(n,["numberOfVideos"]);e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s);const l=y(n,["outputGcsUri"]);e!==void 0&&l!=null&&_(e,["parameters","storageUri"],l);const c=y(n,["fps"]);e!==void 0&&c!=null&&_(e,["parameters","fps"],c);const f=y(n,["durationSeconds"]);e!==void 0&&f!=null&&_(e,["parameters","durationSeconds"],f);const h=y(n,["seed"]);e!==void 0&&h!=null&&_(e,["parameters","seed"],h);const m=y(n,["aspectRatio"]);e!==void 0&&m!=null&&_(e,["parameters","aspectRatio"],m);const v=y(n,["resolution"]);e!==void 0&&v!=null&&_(e,["parameters","resolution"],v);const E=y(n,["personGeneration"]);e!==void 0&&E!=null&&_(e,["parameters","personGeneration"],E);const x=y(n,["pubsubTopic"]);e!==void 0&&x!=null&&_(e,["parameters","pubsubTopic"],x);const R=y(n,["negativePrompt"]);e!==void 0&&R!=null&&_(e,["parameters","negativePrompt"],R);const N=y(n,["enhancePrompt"]);e!==void 0&&N!=null&&_(e,["parameters","enhancePrompt"],N);const z=y(n,["generateAudio"]);e!==void 0&&z!=null&&_(e,["parameters","generateAudio"],z);const D=y(n,["lastFrame"]);e!==void 0&&D!=null&&_(e,["instances[0]","lastFrame"],Zs(D));const I=y(n,["referenceImages"]);if(e!==void 0&&I!=null){let G=I;Array.isArray(G)&&(G=G.map(P=>fM(P))),_(e,["instances[0]","referenceImages"],G)}const L=y(n,["mask"]);e!==void 0&&L!=null&&_(e,["instances[0]","mask"],cM(L));const U=y(n,["compressionQuality"]);return e!==void 0&&U!=null&&_(e,["parameters","compressionQuality"],U),i}function dN(n,e){const t={},i=y(n,["name"]);i!=null&&_(t,["name"],i);const s=y(n,["metadata"]);s!=null&&_(t,["metadata"],s);const l=y(n,["done"]);l!=null&&_(t,["done"],l);const c=y(n,["error"]);c!=null&&_(t,["error"],c);const f=y(n,["response","generateVideoResponse"]);return f!=null&&_(t,["response"],mN(f)),t}function fN(n,e){const t={},i=y(n,["name"]);i!=null&&_(t,["name"],i);const s=y(n,["metadata"]);s!=null&&_(t,["metadata"],s);const l=y(n,["done"]);l!=null&&_(t,["done"],l);const c=y(n,["error"]);c!=null&&_(t,["error"],c);const f=y(n,["response"]);return f!=null&&_(t,["response"],gN(f)),t}function hN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["prompt"]);l!=null&&_(i,["instances[0]","prompt"],l);const c=y(e,["image"]);c!=null&&_(i,["instances[0]","image"],Um(c));const f=y(e,["video"]);f!=null&&_(i,["instances[0]","video"],Bb(f));const h=y(e,["source"]);h!=null&&yN(h,i);const m=y(e,["config"]);return m!=null&&uN(m,i),i}function pN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["prompt"]);l!=null&&_(i,["instances[0]","prompt"],l);const c=y(e,["image"]);c!=null&&_(i,["instances[0]","image"],Zs(c));const f=y(e,["video"]);f!=null&&_(i,["instances[0]","video"],Pb(f));const h=y(e,["source"]);h!=null&&vN(h,i);const m=y(e,["config"]);return m!=null&&cN(m,i),i}function mN(n,e){const t={},i=y(n,["generatedSamples"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>bN(f))),_(t,["generatedVideos"],c)}const s=y(n,["raiMediaFilteredCount"]);s!=null&&_(t,["raiMediaFilteredCount"],s);const l=y(n,["raiMediaFilteredReasons"]);return l!=null&&_(t,["raiMediaFilteredReasons"],l),t}function gN(n,e){const t={},i=y(n,["videos"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>xN(f))),_(t,["generatedVideos"],c)}const s=y(n,["raiMediaFilteredCount"]);s!=null&&_(t,["raiMediaFilteredCount"],s);const l=y(n,["raiMediaFilteredReasons"]);return l!=null&&_(t,["raiMediaFilteredReasons"],l),t}function yN(n,e,t){const i={},s=y(n,["prompt"]);e!==void 0&&s!=null&&_(e,["instances[0]","prompt"],s);const l=y(n,["image"]);e!==void 0&&l!=null&&_(e,["instances[0]","image"],Um(l));const c=y(n,["video"]);return e!==void 0&&c!=null&&_(e,["instances[0]","video"],Bb(c)),i}function vN(n,e,t){const i={},s=y(n,["prompt"]);e!==void 0&&s!=null&&_(e,["instances[0]","prompt"],s);const l=y(n,["image"]);e!==void 0&&l!=null&&_(e,["instances[0]","image"],Zs(l));const c=y(n,["video"]);return e!==void 0&&c!=null&&_(e,["instances[0]","video"],Pb(c)),i}function _N(n,e){const t={},i=y(n,["_self"]);i!=null&&_(t,["image"],MN(i));const s=y(n,["raiFilteredReason"]);s!=null&&_(t,["raiFilteredReason"],s);const l=y(n,["_self"]);return l!=null&&_(t,["safetyAttributes"],Lb(l)),t}function zm(n,e){const t={},i=y(n,["_self"]);i!=null&&_(t,["image"],kb(i));const s=y(n,["raiFilteredReason"]);s!=null&&_(t,["raiFilteredReason"],s);const l=y(n,["_self"]);l!=null&&_(t,["safetyAttributes"],Gb(l));const c=y(n,["prompt"]);return c!=null&&_(t,["enhancedPrompt"],c),t}function SN(n,e){const t={},i=y(n,["_self"]);i!=null&&_(t,["mask"],kb(i));const s=y(n,["labels"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(t,["labels"],l)}return t}function bN(n,e){const t={},i=y(n,["video"]);return i!=null&&_(t,["video"],rM(i)),t}function xN(n,e){const t={},i=y(n,["_self"]);return i!=null&&_(t,["video"],uM(i)),t}function EN(n,e){const t={},i=y(n,["modelSelectionConfig"]);i!=null&&_(t,["modelConfig"],i);const s=y(n,["responseJsonSchema"]);s!=null&&_(t,["responseJsonSchema"],s);const l=y(n,["audioTimestamp"]);l!=null&&_(t,["audioTimestamp"],l);const c=y(n,["candidateCount"]);c!=null&&_(t,["candidateCount"],c);const f=y(n,["enableAffectiveDialog"]);f!=null&&_(t,["enableAffectiveDialog"],f);const h=y(n,["frequencyPenalty"]);h!=null&&_(t,["frequencyPenalty"],h);const m=y(n,["logprobs"]);m!=null&&_(t,["logprobs"],m);const v=y(n,["maxOutputTokens"]);v!=null&&_(t,["maxOutputTokens"],v);const E=y(n,["mediaResolution"]);E!=null&&_(t,["mediaResolution"],E);const x=y(n,["presencePenalty"]);x!=null&&_(t,["presencePenalty"],x);const R=y(n,["responseLogprobs"]);R!=null&&_(t,["responseLogprobs"],R);const N=y(n,["responseMimeType"]);N!=null&&_(t,["responseMimeType"],N);const z=y(n,["responseModalities"]);z!=null&&_(t,["responseModalities"],z);const D=y(n,["responseSchema"]);D!=null&&_(t,["responseSchema"],D);const I=y(n,["routingConfig"]);I!=null&&_(t,["routingConfig"],I);const L=y(n,["seed"]);L!=null&&_(t,["seed"],L);const U=y(n,["speechConfig"]);U!=null&&_(t,["speechConfig"],U);const G=y(n,["stopSequences"]);G!=null&&_(t,["stopSequences"],G);const P=y(n,["temperature"]);P!=null&&_(t,["temperature"],P);const K=y(n,["thinkingConfig"]);K!=null&&_(t,["thinkingConfig"],K);const $=y(n,["topK"]);$!=null&&_(t,["topK"],$);const J=y(n,["topP"]);if(J!=null&&_(t,["topP"],J),y(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function TN(n,e,t){const i={},s=y(e,["model"]);return s!=null&&_(i,["_url","name"],Dt(n,s)),i}function CN(n,e,t){const i={},s=y(e,["model"]);return s!=null&&_(i,["_url","name"],Dt(n,s)),i}function AN(n,e){const t={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=y(n,["enableWidget"]);return i!=null&&_(t,["enableWidget"],i),t}function wN(n,e){const t={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=y(n,["timeRangeFilter"]);return i!=null&&_(t,["timeRangeFilter"],i),t}function RN(n,e){const t={},i=y(n,["aspectRatio"]);i!=null&&_(t,["aspectRatio"],i);const s=y(n,["imageSize"]);if(s!=null&&_(t,["imageSize"],s),y(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(y(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(y(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function NN(n,e){const t={},i=y(n,["aspectRatio"]);i!=null&&_(t,["aspectRatio"],i);const s=y(n,["imageSize"]);s!=null&&_(t,["imageSize"],s);const l=y(n,["personGeneration"]);l!=null&&_(t,["personGeneration"],l);const c=y(n,["outputMimeType"]);c!=null&&_(t,["imageOutputOptions","mimeType"],c);const f=y(n,["outputCompressionQuality"]);return f!=null&&_(t,["imageOutputOptions","compressionQuality"],f),t}function MN(n,e){const t={},i=y(n,["bytesBase64Encoded"]);i!=null&&_(t,["imageBytes"],Ur(i));const s=y(n,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function kb(n,e){const t={},i=y(n,["gcsUri"]);i!=null&&_(t,["gcsUri"],i);const s=y(n,["bytesBase64Encoded"]);s!=null&&_(t,["imageBytes"],Ur(s));const l=y(n,["mimeType"]);return l!=null&&_(t,["mimeType"],l),t}function Um(n,e){const t={};if(y(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=y(n,["imageBytes"]);i!=null&&_(t,["bytesBase64Encoded"],Ur(i));const s=y(n,["mimeType"]);return s!=null&&_(t,["mimeType"],s),t}function Zs(n,e){const t={},i=y(n,["gcsUri"]);i!=null&&_(t,["gcsUri"],i);const s=y(n,["imageBytes"]);s!=null&&_(t,["bytesBase64Encoded"],Ur(s));const l=y(n,["mimeType"]);return l!=null&&_(t,["mimeType"],l),t}function DN(n,e,t,i){const s={},l=y(e,["pageSize"]);t!==void 0&&l!=null&&_(t,["_query","pageSize"],l);const c=y(e,["pageToken"]);t!==void 0&&c!=null&&_(t,["_query","pageToken"],c);const f=y(e,["filter"]);t!==void 0&&f!=null&&_(t,["_query","filter"],f);const h=y(e,["queryBase"]);return t!==void 0&&h!=null&&_(t,["_url","models_url"],Nb(n,h)),s}function zN(n,e,t,i){const s={},l=y(e,["pageSize"]);t!==void 0&&l!=null&&_(t,["_query","pageSize"],l);const c=y(e,["pageToken"]);t!==void 0&&c!=null&&_(t,["_query","pageToken"],c);const f=y(e,["filter"]);t!==void 0&&f!=null&&_(t,["_query","filter"],f);const h=y(e,["queryBase"]);return t!==void 0&&h!=null&&_(t,["_url","models_url"],Nb(n,h)),s}function UN(n,e,t){const i={},s=y(e,["config"]);return s!=null&&DN(n,s,i),i}function IN(n,e,t){const i={},s=y(e,["config"]);return s!=null&&zN(n,s,i),i}function ON(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["nextPageToken"]);s!=null&&_(t,["nextPageToken"],s);const l=y(n,["_self"]);if(l!=null){let c=Mb(l);Array.isArray(c)&&(c=c.map(f=>wy(f))),_(t,["models"],c)}return t}function kN(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["nextPageToken"]);s!=null&&_(t,["nextPageToken"],s);const l=y(n,["_self"]);if(l!=null){let c=Mb(l);Array.isArray(c)&&(c=c.map(f=>Ry(f))),_(t,["models"],c)}return t}function LN(n,e){const t={},i=y(n,["maskMode"]);i!=null&&_(t,["maskMode"],i);const s=y(n,["segmentationClasses"]);s!=null&&_(t,["maskClasses"],s);const l=y(n,["maskDilation"]);return l!=null&&_(t,["dilation"],l),t}function wy(n,e){const t={},i=y(n,["name"]);i!=null&&_(t,["name"],i);const s=y(n,["displayName"]);s!=null&&_(t,["displayName"],s);const l=y(n,["description"]);l!=null&&_(t,["description"],l);const c=y(n,["version"]);c!=null&&_(t,["version"],c);const f=y(n,["_self"]);f!=null&&_(t,["tunedModelInfo"],$N(f));const h=y(n,["inputTokenLimit"]);h!=null&&_(t,["inputTokenLimit"],h);const m=y(n,["outputTokenLimit"]);m!=null&&_(t,["outputTokenLimit"],m);const v=y(n,["supportedGenerationMethods"]);v!=null&&_(t,["supportedActions"],v);const E=y(n,["temperature"]);E!=null&&_(t,["temperature"],E);const x=y(n,["maxTemperature"]);x!=null&&_(t,["maxTemperature"],x);const R=y(n,["topP"]);R!=null&&_(t,["topP"],R);const N=y(n,["topK"]);N!=null&&_(t,["topK"],N);const z=y(n,["thinking"]);return z!=null&&_(t,["thinking"],z),t}function Ry(n,e){const t={},i=y(n,["name"]);i!=null&&_(t,["name"],i);const s=y(n,["displayName"]);s!=null&&_(t,["displayName"],s);const l=y(n,["description"]);l!=null&&_(t,["description"],l);const c=y(n,["versionId"]);c!=null&&_(t,["version"],c);const f=y(n,["deployedModels"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(R=>QR(R))),_(t,["endpoints"],x)}const h=y(n,["labels"]);h!=null&&_(t,["labels"],h);const m=y(n,["_self"]);m!=null&&_(t,["tunedModelInfo"],eM(m));const v=y(n,["defaultCheckpointId"]);v!=null&&_(t,["defaultCheckpointId"],v);const E=y(n,["checkpoints"]);if(E!=null){let x=E;Array.isArray(x)&&(x=x.map(R=>R)),_(t,["checkpoints"],x)}return t}function GN(n,e){const t={},i=y(n,["mediaResolution"]);i!=null&&_(t,["mediaResolution"],i);const s=y(n,["codeExecutionResult"]);s!=null&&_(t,["codeExecutionResult"],s);const l=y(n,["executableCode"]);l!=null&&_(t,["executableCode"],l);const c=y(n,["fileData"]);c!=null&&_(t,["fileData"],ZR(c));const f=y(n,["functionCall"]);f!=null&&_(t,["functionCall"],WR(f));const h=y(n,["functionResponse"]);h!=null&&_(t,["functionResponse"],h);const m=y(n,["inlineData"]);m!=null&&_(t,["inlineData"],ER(m));const v=y(n,["text"]);v!=null&&_(t,["text"],v);const E=y(n,["thought"]);E!=null&&_(t,["thought"],E);const x=y(n,["thoughtSignature"]);x!=null&&_(t,["thoughtSignature"],x);const R=y(n,["videoMetadata"]);return R!=null&&_(t,["videoMetadata"],R),t}function HN(n,e){const t={},i=y(n,["productImage"]);return i!=null&&_(t,["image"],Zs(i)),t}function BN(n,e,t){const i={},s=y(n,["numberOfImages"]);e!==void 0&&s!=null&&_(e,["parameters","sampleCount"],s);const l=y(n,["baseSteps"]);e!==void 0&&l!=null&&_(e,["parameters","baseSteps"],l);const c=y(n,["outputGcsUri"]);e!==void 0&&c!=null&&_(e,["parameters","storageUri"],c);const f=y(n,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const h=y(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const m=y(n,["personGeneration"]);e!==void 0&&m!=null&&_(e,["parameters","personGeneration"],m);const v=y(n,["addWatermark"]);e!==void 0&&v!=null&&_(e,["parameters","addWatermark"],v);const E=y(n,["outputMimeType"]);e!==void 0&&E!=null&&_(e,["parameters","outputOptions","mimeType"],E);const x=y(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&_(e,["parameters","outputOptions","compressionQuality"],x);const R=y(n,["enhancePrompt"]);e!==void 0&&R!=null&&_(e,["parameters","enhancePrompt"],R);const N=y(n,["labels"]);return e!==void 0&&N!=null&&_(e,["labels"],N),i}function PN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["source"]);l!=null&&VN(l,i);const c=y(e,["config"]);return c!=null&&BN(c,i),i}function qN(n,e){const t={},i=y(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>zm(l))),_(t,["generatedImages"],s)}return t}function VN(n,e,t){const i={},s=y(n,["prompt"]);e!==void 0&&s!=null&&_(e,["instances[0]","prompt"],s);const l=y(n,["personImage"]);e!==void 0&&l!=null&&_(e,["instances[0]","personImage","image"],Zs(l));const c=y(n,["productImages"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(h=>HN(h))),_(e,["instances[0]","productImages"],f)}return i}function jN(n,e){const t={},i=y(n,["referenceImage"]);i!=null&&_(t,["referenceImage"],Zs(i));const s=y(n,["referenceId"]);s!=null&&_(t,["referenceId"],s);const l=y(n,["referenceType"]);l!=null&&_(t,["referenceType"],l);const c=y(n,["maskImageConfig"]);c!=null&&_(t,["maskImageConfig"],LN(c));const f=y(n,["controlImageConfig"]);f!=null&&_(t,["controlImageConfig"],MR(f));const h=y(n,["styleImageConfig"]);h!=null&&_(t,["styleImageConfig"],h);const m=y(n,["subjectImageConfig"]);return m!=null&&_(t,["subjectImageConfig"],m),t}function Lb(n,e){const t={},i=y(n,["safetyAttributes","categories"]);i!=null&&_(t,["categories"],i);const s=y(n,["safetyAttributes","scores"]);s!=null&&_(t,["scores"],s);const l=y(n,["contentType"]);return l!=null&&_(t,["contentType"],l),t}function Gb(n,e){const t={},i=y(n,["safetyAttributes","categories"]);i!=null&&_(t,["categories"],i);const s=y(n,["safetyAttributes","scores"]);s!=null&&_(t,["scores"],s);const l=y(n,["contentType"]);return l!=null&&_(t,["contentType"],l),t}function YN(n,e){const t={},i=y(n,["category"]);if(i!=null&&_(t,["category"],i),y(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=y(n,["threshold"]);return s!=null&&_(t,["threshold"],s),t}function FN(n,e){const t={},i=y(n,["image"]);return i!=null&&_(t,["image"],Zs(i)),t}function KN(n,e,t){const i={},s=y(n,["mode"]);e!==void 0&&s!=null&&_(e,["parameters","mode"],s);const l=y(n,["maxPredictions"]);e!==void 0&&l!=null&&_(e,["parameters","maxPredictions"],l);const c=y(n,["confidenceThreshold"]);e!==void 0&&c!=null&&_(e,["parameters","confidenceThreshold"],c);const f=y(n,["maskDilation"]);e!==void 0&&f!=null&&_(e,["parameters","maskDilation"],f);const h=y(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&_(e,["parameters","binaryColorThreshold"],h);const m=y(n,["labels"]);return e!==void 0&&m!=null&&_(e,["labels"],m),i}function JN(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["source"]);l!=null&&QN(l,i);const c=y(e,["config"]);return c!=null&&KN(c,i),i}function XN(n,e){const t={},i=y(n,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>SN(l))),_(t,["generatedMasks"],s)}return t}function QN(n,e,t){const i={},s=y(n,["prompt"]);e!==void 0&&s!=null&&_(e,["instances[0]","prompt"],s);const l=y(n,["image"]);e!==void 0&&l!=null&&_(e,["instances[0]","image"],Zs(l));const c=y(n,["scribbleImage"]);return e!==void 0&&c!=null&&_(e,["instances[0]","scribble"],FN(c)),i}function ZN(n,e){const t={},i=y(n,["retrievalConfig"]);i!=null&&_(t,["retrievalConfig"],i);const s=y(n,["functionCallingConfig"]);return s!=null&&_(t,["functionCallingConfig"],$R(s)),t}function WN(n,e){const t={};if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=y(n,["computerUse"]);i!=null&&_(t,["computerUse"],i);const s=y(n,["fileSearch"]);s!=null&&_(t,["fileSearch"],s);const l=y(n,["codeExecution"]);if(l!=null&&_(t,["codeExecution"],l),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=y(n,["functionDeclarations"]);if(c!=null){let E=c;Array.isArray(E)&&(E=E.map(x=>x)),_(t,["functionDeclarations"],E)}const f=y(n,["googleMaps"]);f!=null&&_(t,["googleMaps"],AN(f));const h=y(n,["googleSearch"]);h!=null&&_(t,["googleSearch"],wN(h));const m=y(n,["googleSearchRetrieval"]);m!=null&&_(t,["googleSearchRetrieval"],m);const v=y(n,["urlContext"]);return v!=null&&_(t,["urlContext"],v),t}function Hb(n,e){const t={},i=y(n,["retrieval"]);i!=null&&_(t,["retrieval"],i);const s=y(n,["computerUse"]);if(s!=null&&_(t,["computerUse"],s),y(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=y(n,["codeExecution"]);l!=null&&_(t,["codeExecution"],l);const c=y(n,["enterpriseWebSearch"]);c!=null&&_(t,["enterpriseWebSearch"],c);const f=y(n,["functionDeclarations"]);if(f!=null){let x=f;Array.isArray(x)&&(x=x.map(R=>eN(R))),_(t,["functionDeclarations"],x)}const h=y(n,["googleMaps"]);h!=null&&_(t,["googleMaps"],h);const m=y(n,["googleSearch"]);m!=null&&_(t,["googleSearch"],m);const v=y(n,["googleSearchRetrieval"]);v!=null&&_(t,["googleSearchRetrieval"],v);const E=y(n,["urlContext"]);return E!=null&&_(t,["urlContext"],E),t}function $N(n,e){const t={},i=y(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const s=y(n,["createTime"]);s!=null&&_(t,["createTime"],s);const l=y(n,["updateTime"]);return l!=null&&_(t,["updateTime"],l),t}function eM(n,e){const t={},i=y(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&_(t,["baseModel"],i);const s=y(n,["createTime"]);s!=null&&_(t,["createTime"],s);const l=y(n,["updateTime"]);return l!=null&&_(t,["updateTime"],l),t}function tM(n,e,t){const i={},s=y(n,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const l=y(n,["description"]);e!==void 0&&l!=null&&_(e,["description"],l);const c=y(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&_(e,["defaultCheckpointId"],c),i}function nM(n,e,t){const i={},s=y(n,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const l=y(n,["description"]);e!==void 0&&l!=null&&_(e,["description"],l);const c=y(n,["defaultCheckpointId"]);return e!==void 0&&c!=null&&_(e,["defaultCheckpointId"],c),i}function iM(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","name"],Dt(n,s));const l=y(e,["config"]);return l!=null&&tM(l,i),i}function aM(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["config"]);return l!=null&&nM(l,i),i}function sM(n,e,t){const i={},s=y(n,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const l=y(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&_(e,["parameters","safetySetting"],l);const c=y(n,["personGeneration"]);e!==void 0&&c!=null&&_(e,["parameters","personGeneration"],c);const f=y(n,["includeRaiReason"]);e!==void 0&&f!=null&&_(e,["parameters","includeRaiReason"],f);const h=y(n,["outputMimeType"]);e!==void 0&&h!=null&&_(e,["parameters","outputOptions","mimeType"],h);const m=y(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&_(e,["parameters","outputOptions","compressionQuality"],m);const v=y(n,["enhanceInputImage"]);e!==void 0&&v!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],v);const E=y(n,["imagePreservationFactor"]);e!==void 0&&E!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],E);const x=y(n,["labels"]);e!==void 0&&x!=null&&_(e,["labels"],x);const R=y(n,["numberOfImages"]);e!==void 0&&R!=null&&_(e,["parameters","sampleCount"],R);const N=y(n,["mode"]);return e!==void 0&&N!=null&&_(e,["parameters","mode"],N),i}function oM(n,e,t){const i={},s=y(e,["model"]);s!=null&&_(i,["_url","model"],Dt(n,s));const l=y(e,["image"]);l!=null&&_(i,["instances[0]","image"],Zs(l));const c=y(e,["upscaleFactor"]);c!=null&&_(i,["parameters","upscaleConfig","upscaleFactor"],c);const f=y(e,["config"]);return f!=null&&sM(f,i),i}function lM(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>zm(c))),_(t,["generatedImages"],l)}return t}function rM(n,e){const t={},i=y(n,["uri"]);i!=null&&_(t,["uri"],i);const s=y(n,["encodedVideo"]);s!=null&&_(t,["videoBytes"],Ur(s));const l=y(n,["encoding"]);return l!=null&&_(t,["mimeType"],l),t}function uM(n,e){const t={},i=y(n,["gcsUri"]);i!=null&&_(t,["uri"],i);const s=y(n,["bytesBase64Encoded"]);s!=null&&_(t,["videoBytes"],Ur(s));const l=y(n,["mimeType"]);return l!=null&&_(t,["mimeType"],l),t}function cM(n,e){const t={},i=y(n,["image"]);i!=null&&_(t,["_self"],Zs(i));const s=y(n,["maskMode"]);return s!=null&&_(t,["maskMode"],s),t}function dM(n,e){const t={},i=y(n,["image"]);i!=null&&_(t,["image"],Um(i));const s=y(n,["referenceType"]);return s!=null&&_(t,["referenceType"],s),t}function fM(n,e){const t={},i=y(n,["image"]);i!=null&&_(t,["image"],Zs(i));const s=y(n,["referenceType"]);return s!=null&&_(t,["referenceType"],s),t}function Bb(n,e){const t={},i=y(n,["uri"]);i!=null&&_(t,["uri"],i);const s=y(n,["videoBytes"]);s!=null&&_(t,["encodedVideo"],Ur(s));const l=y(n,["mimeType"]);return l!=null&&_(t,["encoding"],l),t}function Pb(n,e){const t={},i=y(n,["uri"]);i!=null&&_(t,["gcsUri"],i);const s=y(n,["videoBytes"]);s!=null&&_(t,["bytesBase64Encoded"],Ur(s));const l=y(n,["mimeType"]);return l!=null&&_(t,["mimeType"],l),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hM(n,e){const t={},i=y(n,["displayName"]);return e!==void 0&&i!=null&&_(e,["displayName"],i),t}function pM(n){const e={},t=y(n,["config"]);return t!=null&&hM(t,e),e}function mM(n,e){const t={},i=y(n,["force"]);return e!==void 0&&i!=null&&_(e,["_query","force"],i),t}function gM(n){const e={},t=y(n,["name"]);t!=null&&_(e,["_url","name"],t);const i=y(n,["config"]);return i!=null&&mM(i,e),e}function yM(n){const e={},t=y(n,["name"]);return t!=null&&_(e,["_url","name"],t),e}function vM(n,e){const t={},i=y(n,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["customMetadata"],l)}const s=y(n,["chunkingConfig"]);return e!==void 0&&s!=null&&_(e,["chunkingConfig"],s),t}function _M(n){const e={},t=y(n,["name"]);t!=null&&_(e,["name"],t);const i=y(n,["metadata"]);i!=null&&_(e,["metadata"],i);const s=y(n,["done"]);s!=null&&_(e,["done"],s);const l=y(n,["error"]);l!=null&&_(e,["error"],l);const c=y(n,["response"]);return c!=null&&_(e,["response"],bM(c)),e}function SM(n){const e={},t=y(n,["fileSearchStoreName"]);t!=null&&_(e,["_url","file_search_store_name"],t);const i=y(n,["fileName"]);i!=null&&_(e,["fileName"],i);const s=y(n,["config"]);return s!=null&&vM(s,e),e}function bM(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["parent"]);i!=null&&_(e,["parent"],i);const s=y(n,["documentName"]);return s!=null&&_(e,["documentName"],s),e}function xM(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),t}function EM(n){const e={},t=y(n,["config"]);return t!=null&&xM(t,e),e}function TM(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["fileSearchStores"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["fileSearchStores"],l)}return e}function qb(n,e){const t={},i=y(n,["mimeType"]);e!==void 0&&i!=null&&_(e,["mimeType"],i);const s=y(n,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const l=y(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(h=>h)),_(e,["customMetadata"],f)}const c=y(n,["chunkingConfig"]);return e!==void 0&&c!=null&&_(e,["chunkingConfig"],c),t}function CM(n){const e={},t=y(n,["fileSearchStoreName"]);t!=null&&_(e,["_url","file_search_store_name"],t);const i=y(n,["config"]);return i!=null&&qb(i,e),e}function AM(n){const e={},t=y(n,["sdkHttpResponse"]);return t!=null&&_(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wM="Content-Type",RM="X-Server-Timeout",NM="User-Agent",Ny="x-goog-api-client",MM="1.40.0",DM=`google-genai-sdk/${MM}`,zM="v1beta1",UM="v1beta";class IM{constructor(e){var t,i,s;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const l={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const f=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!f?(l.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?l.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(l.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),l.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:zM}else{if(!this.clientOptions.apiKey)throw new jh({message:"API key must be set when using the Gemini API.",status:403});l.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:UM,l.baseUrl="https://generativelanguage.googleapis.com/"}l.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=l,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(l,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===Ey.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[c,f]of Object.entries(e.queryParams))s.searchParams.append(c,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.unaryApiCall(s,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,l]of Object.entries(t))typeof l=="object"?i[s]=Object.assign(Object.assign({},i[s]),l):l!==void 0&&(i[s]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,s.toString(),e.abortSignal),this.streamApiCall(s,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,s){if(t&&t.timeout||s){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}s&&s.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&OM(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await P_(s),new Ty(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await P_(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){return Ks(this,arguments,function*(){var i;const s=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),l=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let c="";const f="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield nt(s.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const E=l.decode(v,{stream:!0});try{const N=JSON.parse(E);if("error"in N){const z=JSON.parse(JSON.stringify(N.error)),D=z.status,I=z.code,L=`got status: ${D}. ${JSON.stringify(N)}`;if(I>=400&&I<600)throw new jh({message:L,status:I})}}catch(N){if(N.name==="ApiError")throw N}c+=E;let x=-1,R=0;for(;;){x=-1,R=0;for(const D of h){const I=c.indexOf(D);I!==-1&&(x===-1||I<x)&&(x=I,R=D.length)}if(x===-1)break;const N=c.substring(0,x);c=c.substring(x+R);const z=N.trim();if(z.startsWith(f)){const D=z.substring(f.length).trim();try{const I=new Response(D,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield nt(new Ty(I))}catch(I){throw new Error(`exception parsing stream chunk ${D}. ${I}`)}}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=DM+" "+this.clientOptions.userAgentExtra;return e[NM]=t,e[Ny]=t,e[wM]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[s,l]of Object.entries(e.headers))i.append(s,l);e.timeout&&e.timeout>0&&i.append(RM,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);s.sizeBytes=String(c.size);const f=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:c.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=f;const h={file:s},m=this.getFileName(e),v=Ie("upload/v1beta/files",h._url),E=await this.fetchUploadUrl(v,s.sizeBytes,s.mimeType,m,h,t==null?void 0:t.httpOptions);return l.upload(e,E,this)}async uploadFileToFileSearchStore(e,t,i){var s;const l=this.clientOptions.uploader,c=await l.stat(t),f=String(c.size),h=(s=i==null?void 0:i.mimeType)!==null&&s!==void 0?s:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),E={};i!=null&&qb(i,E);const x=await this.fetchUploadUrl(m,f,h,v,E,i==null?void 0:i.httpOptions);return l.uploadToFileSearchStore(t,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,s,l,c){var f;let h={};c?h=c:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},s?{"X-Goog-Upload-File-Name":s}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:h});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(f=m==null?void 0:m.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function P_(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const s=JSON.stringify(i);throw t>=400&&t<600?new jh({message:s,status:t}):new Error(s)}}function OM(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,c){const f=Object.assign({},l);for(const h in c)if(Object.prototype.hasOwnProperty.call(c,h)){const m=c[h],v=f[h];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?f[h]=i(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),f[h]=m)}return f}const s=i(t,e);n.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kM="mcp_used/unknown";let LM=!1;function Vb(n){for(const e of n)if(GM(e)||typeof e=="object"&&"inputSchema"in e)return!0;return LM}function jb(n){var e;const t=(e=n[Ny])!==null&&e!==void 0?e:"";n[Ny]=(t+` ${kM}`).trimStart()}function GM(n){return n!==null&&typeof n=="object"&&n instanceof lv}function HM(n){return Ks(this,arguments,function*(t,i=100){let s,l=0;for(;l<i;){const c=yield nt(t.listTools({cursor:s}));for(const f of c.tools)yield yield nt(f),l++;if(!c.nextCursor)break;s=c.nextCursor}})}class lv{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new lv(e,t)}async initialize(){var e,t,i,s;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var f=!0,h=(t=void 0,Js(HM(v))),m;m=await h.next(),e=m.done,!e;f=!0){s=m.value,f=!1;const E=s;c.push(E);const x=E.name;if(l[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);l[x]=v}}catch(E){t={error:E}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),p9(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await s.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function BM(n,e,t){const i=new o9;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(i,s),e(i)}class PM{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=jM(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),h=`${s}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let m=()=>{};const v=new Promise(U=>{m=U}),E=e.callbacks,x=function(){m({})},R=this.apiClient,N={onopen:x,onmessage:U=>{BM(R,E.onmessage,U)},onerror:(t=E==null?void 0:E.onerror)!==null&&t!==void 0?t:function(U){},onclose:(i=E==null?void 0:E.onclose)!==null&&i!==void 0?i:function(U){}},z=this.webSocketFactory.create(h,VM(c),N);z.connect(),await v;const L={setup:{model:Dt(this.apiClient,e.model)}};return z.send(JSON.stringify(L)),new qM(z,this.apiClient)}}class qM{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=hR(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=fR(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(xd.PLAY)}pause(){this.sendPlaybackControl(xd.PAUSE)}stop(){this.sendPlaybackControl(xd.STOP)}resetContext(){this.sendPlaybackControl(xd.RESET_CONTEXT)}close(){this.conn.close()}}function VM(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function jM(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function FM(n,e,t){const i=new s9;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const l=JSON.parse(s);if(n.isVertexAI()){const c=gR(l);Object.assign(i,c)}else Object.assign(i,l);e(i)}class KM{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new PM(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,s,l,c,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const E=this.apiClient.getHeaders();e.config&&e.config.tools&&Vb(e.config.tools)&&jb(E);const x=ZM(E);if(this.apiClient.isVertexAI()){const B=this.apiClient.getProject(),ue=this.apiClient.getLocation(),xe=this.apiClient.getApiKey(),ae=!!B&&!!ue||!!xe;this.apiClient.getCustomBaseUrl()&&!ae?v=h:(v=`${h}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,v))}else{const B=this.apiClient.getApiKey();let ue="BidiGenerateContent",xe="key";B!=null&&B.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),ue="BidiGenerateContentConstrained",xe="access_token"),v=`${h}/ws/google.ai.generativelanguage.${m}.GenerativeService.${ue}?${xe}=${B}`}let R=()=>{};const N=new Promise(B=>{R=B}),z=e.callbacks,D=function(){var B;(B=z==null?void 0:z.onopen)===null||B===void 0||B.call(z),R({})},I=this.apiClient,L={onopen:D,onmessage:B=>{FM(I,z.onmessage,B)},onerror:(t=z==null?void 0:z.onerror)!==null&&t!==void 0?t:function(B){},onclose:(i=z==null?void 0:z.onclose)!==null&&i!==void 0?i:function(B){}},U=this.webSocketFactory.create(v,QM(x),L);U.connect(),await N;let G=Dt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){const B=this.apiClient.getProject(),ue=this.apiClient.getLocation();B&&ue&&(G=`projects/${B}/locations/${ue}/`+G)}let P={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[hm.AUDIO]}:e.config.responseModalities=[hm.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const K=(f=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[],$=[];for(const B of K)if(this.isCallableTool(B)){const ue=B;$.push(await ue.tool())}else $.push(B);$.length>0&&(e.config.tools=$);const J={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?P=dR(this.apiClient,J):P=cR(this.apiClient,J),delete P.config,U.send(JSON.stringify(P)),new XM(U,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JM={turnComplete:!0};class XM{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ys(t.turns),e.isVertexAI()||(i=i.map(s=>Dm(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(YM)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},JM),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mR(e)}:t={realtimeInput:pR(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function QM(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function ZM(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const q_=10;function V_(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Ad(c)){s=!0;break}if(!s)return!0;const l=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Ad(n){return"callTool"in n&&typeof n.callTool=="function"}function WM(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>Ad(s)))!==null&&i!==void 0?i:!1}function j_(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,s)=>{if(Ad(i))return;const l=i;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(s)}),t}function Y_(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $M extends Al{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,s,l,c,f;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!WM(t)||V_(t.config))return await this.generateContentInternal(h);const m=j_(t);if(m.length>0){const z=m.map(D=>`tools[${D}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${z}.`)}let v,E;const x=ys(h.contents),R=(l=(s=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&l!==void 0?l:q_;let N=0;for(;N<R&&(v=await this.generateContentInternal(h),!(!v.functionCalls||v.functionCalls.length===0));){const z=v.candidates[0].content,D=[];for(const I of(f=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&f!==void 0?f:[])if(Ad(I)){const U=await I.callTool(v.functionCalls);D.push(...U)}N++,E={role:"user",parts:D},h.contents=ys(h.contents),h.contents.push(z),h.contents.push(E),Y_(h.config)&&(x.push(z),x.push(E))}return Y_(h.config)&&(v.automaticFunctionCallingHistory=x),v},this.generateContentStream=async t=>{var i,s,l,c,f;if(this.maybeMoveToResponseJsonSchem(t),V_(t.config)){const E=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(E)}const h=j_(t);if(h.length>0){const E=h.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${E}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(s=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(f=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let l;const c=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((s=h==null?void 0:h.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?l=h==null?void 0:h.safetyAttributes:c.push(h);let f;return l?f={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:c,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((i=c.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new qu(bl.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(c),c)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var i,s,l,c,f,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((h=(f=t.source)===null||f===void 0?void 0:f.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,s;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async h=>Ad(h)?await h.tool():h)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(f.config.tools=c,e.config&&e.config.tools&&Vb(e.config.tools)){const h=(s=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&s!==void 0?s:{};let m=Object.assign({},h);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),jb(m),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return f}async initAfcToolsMap(e){var t,i,s;const l=new Map;for(const c of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Ad(c)){const f=c,h=await f.tool();for(const m of(s=h.functionDeclarations)!==null&&s!==void 0?s:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,f)}}return l}async processAfcStream(e){var t,i,s;const l=(s=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:q_;let c=!1,f=0;const h=await this.initAfcToolsMap(e);return(function(m,v,E){return Ks(this,arguments,function*(){for(var x,R,N,z,D,I;f<l;){c&&(f++,c=!1);const P=yield nt(m.processParamsMaybeAddMcpUsage(E)),K=yield nt(m.generateContentStreamInternal(P)),$=[],J=[];try{for(var L=!0,U=(R=void 0,Js(K)),G;G=yield nt(U.next()),x=G.done,!x;L=!0){z=G.value,L=!1;const B=z;if(yield yield nt(B),B.candidates&&(!((D=B.candidates[0])===null||D===void 0)&&D.content)){J.push(B.candidates[0].content);for(const ue of(I=B.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(f<l&&ue.functionCall){if(!ue.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(ue.functionCall.name)){const xe=yield nt(v.get(ue.functionCall.name).callTool([ue.functionCall]));$.push(...xe)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${ue.functionCall.name}`)}}}}catch(B){R={error:B}}finally{try{!L&&!x&&(N=U.return)&&(yield nt(N.call(U)))}finally{if(R)throw R.error}}if($.length>0){c=!0;const B=new Sh;B.candidates=[{content:{role:"user",parts:$}}],yield yield nt(B);const ue=[];ue.push(...J),ue.push({role:"user",parts:$});const xe=ys(E.contents).concat(ue);E.contents=xe}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=G_(this.apiClient,e);return f=Ie("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=B_(v),x=new Sh;return Object.assign(x,E),x})}else{const m=L_(this.apiClient,e);return f=Ie("{model}:generateContent",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=H_(v),x=new Sh;return Object.assign(x,E),x})}}async generateContentStreamInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=G_(this.apiClient,e);return f=Ie("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),c.then(function(E){return Ks(this,arguments,function*(){var x,R,N,z;try{for(var D=!0,I=Js(E),L;L=yield nt(I.next()),x=L.done,!x;D=!0){z=L.value,D=!1;const U=z,G=B_(yield nt(U.json()),e);G.sdkHttpResponse={headers:U.headers};const P=new Sh;Object.assign(P,G),yield yield nt(P)}}catch(U){R={error:U}}finally{try{!D&&!x&&(N=I.return)&&(yield nt(N.call(I)))}finally{if(R)throw R.error}}})})}else{const m=L_(this.apiClient,e);return f=Ie("{model}:streamGenerateContent?alt=sse",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(E){return Ks(this,arguments,function*(){var x,R,N,z;try{for(var D=!0,I=Js(E),L;L=yield nt(I.next()),x=L.done,!x;D=!0){z=L.value,D=!1;const U=z,G=H_(yield nt(U.json()),e);G.sdkHttpResponse={headers:U.headers};const P=new Sh;Object.assign(P,G),yield yield nt(P)}}catch(U){R={error:U}}finally{try{!D&&!x&&(N=I.return)&&(yield nt(N.call(I)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=KR(this.apiClient,e);return f=Ie("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=XR(v),x=new S_;return Object.assign(x,E),x})}else{const m=FR(this.apiClient,e);return f=Ie("{model}:batchEmbedContents",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=JR(v),x=new S_;return Object.assign(x,E),x})}}async generateImagesInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=oN(this.apiClient,e);return f=Ie("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=rN(v),x=new b_;return Object.assign(x,E),x})}else{const m=sN(this.apiClient,e);return f=Ie("{model}:predict",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=lN(v),x=new b_;return Object.assign(x,E),x})}}async editImageInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=qR(this.apiClient,e);return l=Ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=VR(h),v=new Kw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=oM(this.apiClient,e);return l=Ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=lM(h),v=new Jw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=PN(this.apiClient,e);return l=Ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=qN(h),v=new Xw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=JN(this.apiClient,e);return l=Ie("{model}:predict",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=XN(h),v=new Qw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=CN(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Ry(v))}else{const m=TN(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>wy(v))}}async listInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=IN(this.apiClient,e);return f=Ie("{models_url}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=kN(v),x=new x_;return Object.assign(x,E),x})}else{const m=UN(this.apiClient,e);return f=Ie("{models_url}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=ON(v),x=new x_;return Object.assign(x,E),x})}}async update(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=aM(this.apiClient,e);return f=Ie("{model}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>Ry(v))}else{const m=iM(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>wy(v))}}async delete(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=GR(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=BR(v),x=new E_;return Object.assign(x,E),x})}else{const m=LR(this.apiClient,e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=HR(v),x=new E_;return Object.assign(x,E),x})}}async countTokens(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=IR(this.apiClient,e);return f=Ie("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=kR(v),x=new T_;return Object.assign(x,E),x})}else{const m=UR(this.apiClient,e);return f=Ie("{model}:countTokens",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=OR(v),x=new T_;return Object.assign(x,E),x})}}async computeTokens(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=AR(this.apiClient,e);return l=Ie("{model}:computeTokens",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>{const m=wR(h),v=new Zw;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=pN(this.apiClient,e);return f=Ie("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c.then(v=>{const E=fN(v),x=new pm;return Object.assign(x,E),x})}else{const m=hN(this.apiClient,e);return f=Ie("{model}:predictLongRunning",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const E=dN(v),x=new pm;return Object.assign(x,E),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eD extends Al{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=Pw(e);return f=Ie("{operationName}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json()),c}else{const m=Bw(e);return f=Ie("{operationName}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=Uw(e);return l=Ie("{resourceName}:fetchPredictOperation",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tD(n){const e={},t=y(n,["data"]);if(t!=null&&_(e,["data"],t),y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function nD(n){const e={},t=y(n,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(l=>dD(l))),_(e,["parts"],s)}const i=y(n,["role"]);return i!=null&&_(e,["role"],i),e}function iD(n,e,t){const i={},s=y(e,["expireTime"]);t!==void 0&&s!=null&&_(t,["expireTime"],s);const l=y(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&_(t,["newSessionExpireTime"],l);const c=y(e,["uses"]);t!==void 0&&c!=null&&_(t,["uses"],c);const f=y(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&_(t,["bidiGenerateContentSetup"],cD(n,f));const h=y(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&_(t,["fieldMask"],h),i}function aD(n,e){const t={},i=y(e,["config"]);return i!=null&&_(t,["config"],iD(n,i,t)),t}function sD(n){const e={};if(y(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=y(n,["fileUri"]);t!=null&&_(e,["fileUri"],t);const i=y(n,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}function oD(n){const e={},t=y(n,["id"]);t!=null&&_(e,["id"],t);const i=y(n,["args"]);i!=null&&_(e,["args"],i);const s=y(n,["name"]);if(s!=null&&_(e,["name"],s),y(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(y(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lD(n){const e={};if(y(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=y(n,["enableWidget"]);return t!=null&&_(e,["enableWidget"],t),e}function rD(n){const e={};if(y(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(y(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=y(n,["timeRangeFilter"]);return t!=null&&_(e,["timeRangeFilter"],t),e}function uD(n,e){const t={},i=y(n,["generationConfig"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig"],i);const s=y(n,["responseModalities"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","responseModalities"],s);const l=y(n,["temperature"]);e!==void 0&&l!=null&&_(e,["setup","generationConfig","temperature"],l);const c=y(n,["topP"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topP"],c);const f=y(n,["topK"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","topK"],f);const h=y(n,["maxOutputTokens"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","maxOutputTokens"],h);const m=y(n,["mediaResolution"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","mediaResolution"],m);const v=y(n,["seed"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","seed"],v);const E=y(n,["speechConfig"]);e!==void 0&&E!=null&&_(e,["setup","generationConfig","speechConfig"],ov(E));const x=y(n,["thinkingConfig"]);e!==void 0&&x!=null&&_(e,["setup","generationConfig","thinkingConfig"],x);const R=y(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],R);const N=y(n,["systemInstruction"]);e!==void 0&&N!=null&&_(e,["setup","systemInstruction"],nD(Hi(N)));const z=y(n,["tools"]);if(e!==void 0&&z!=null){let K=zd(z);Array.isArray(K)&&(K=K.map($=>hD(Dd($)))),_(e,["setup","tools"],K)}const D=y(n,["sessionResumption"]);e!==void 0&&D!=null&&_(e,["setup","sessionResumption"],fD(D));const I=y(n,["inputAudioTranscription"]);e!==void 0&&I!=null&&_(e,["setup","inputAudioTranscription"],I);const L=y(n,["outputAudioTranscription"]);e!==void 0&&L!=null&&_(e,["setup","outputAudioTranscription"],L);const U=y(n,["realtimeInputConfig"]);e!==void 0&&U!=null&&_(e,["setup","realtimeInputConfig"],U);const G=y(n,["contextWindowCompression"]);e!==void 0&&G!=null&&_(e,["setup","contextWindowCompression"],G);const P=y(n,["proactivity"]);if(e!==void 0&&P!=null&&_(e,["setup","proactivity"],P),y(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function cD(n,e){const t={},i=y(e,["model"]);i!=null&&_(t,["setup","model"],Dt(n,i));const s=y(e,["config"]);return s!=null&&_(t,["config"],uD(s,t)),t}function dD(n){const e={},t=y(n,["mediaResolution"]);t!=null&&_(e,["mediaResolution"],t);const i=y(n,["codeExecutionResult"]);i!=null&&_(e,["codeExecutionResult"],i);const s=y(n,["executableCode"]);s!=null&&_(e,["executableCode"],s);const l=y(n,["fileData"]);l!=null&&_(e,["fileData"],sD(l));const c=y(n,["functionCall"]);c!=null&&_(e,["functionCall"],oD(c));const f=y(n,["functionResponse"]);f!=null&&_(e,["functionResponse"],f);const h=y(n,["inlineData"]);h!=null&&_(e,["inlineData"],tD(h));const m=y(n,["text"]);m!=null&&_(e,["text"],m);const v=y(n,["thought"]);v!=null&&_(e,["thought"],v);const E=y(n,["thoughtSignature"]);E!=null&&_(e,["thoughtSignature"],E);const x=y(n,["videoMetadata"]);return x!=null&&_(e,["videoMetadata"],x),e}function fD(n){const e={},t=y(n,["handle"]);if(t!=null&&_(e,["handle"],t),y(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hD(n){const e={};if(y(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=y(n,["computerUse"]);t!=null&&_(e,["computerUse"],t);const i=y(n,["fileSearch"]);i!=null&&_(e,["fileSearch"],i);const s=y(n,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),y(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=y(n,["functionDeclarations"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(E=>E)),_(e,["functionDeclarations"],v)}const c=y(n,["googleMaps"]);c!=null&&_(e,["googleMaps"],lD(c));const f=y(n,["googleSearch"]);f!=null&&_(e,["googleSearch"],rD(f));const h=y(n,["googleSearchRetrieval"]);h!=null&&_(e,["googleSearchRetrieval"],h);const m=y(n,["urlContext"]);return m!=null&&_(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pD(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const s=Object.keys(i).map(l=>`${t}.${l}`);e.push(...s)}else e.push(t)}return e.join(",")}function mD(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const s=n.fieldMask;if(t){const l=pD(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];s.length>0&&(f=s.map(m=>c.includes(m)?`generationConfig.${m}`:m));const h=[];l&&h.push(l),f.length>0&&h.push(...f),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?n.fieldMask=s.join(","):delete n.fieldMask;return n}class gD extends Al{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=aD(this.apiClient,e);l=Ie("auth_tokens",f._url),c=f._query,delete f.config,delete f._url,delete f._query;const h=mD(f,e.config);return s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(m=>m.json()),s.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(n,e){const t={},i=y(n,["force"]);return e!==void 0&&i!=null&&_(e,["_query","force"],i),t}function vD(n){const e={},t=y(n,["name"]);t!=null&&_(e,["_url","name"],t);const i=y(n,["config"]);return i!=null&&yD(i,e),e}function _D(n){const e={},t=y(n,["name"]);return t!=null&&_(e,["_url","name"],t),e}function SD(n,e){const t={},i=y(n,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=y(n,["pageToken"]);return e!==void 0&&s!=null&&_(e,["_query","pageToken"],s),t}function bD(n){const e={},t=y(n,["parent"]);t!=null&&_(e,["_url","parent"],t);const i=y(n,["config"]);return i!=null&&SD(i,e),e}function xD(n){const e={},t=y(n,["sdkHttpResponse"]);t!=null&&_(e,["sdkHttpResponse"],t);const i=y(n,["nextPageToken"]);i!=null&&_(e,["nextPageToken"],i);const s=y(n,["documents"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>c)),_(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ED extends Al{constructor(e){super(),this.apiClient=e,this.list=async t=>new qu(bl.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_D(e);return l=Ie("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vD(e);s=Ie("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=bD(e);return l=Ie("{parent}/documents",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=xD(h),v=new Ww;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class TD extends Al{constructor(e,t=new ED(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new qu(bl.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=pM(e);return l=Ie("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=yM(e);return l=Ie("{name}",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var t,i;let s="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=gM(e);s=Ie("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=EM(e);return l=Ie("fileSearchStores",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=TM(h),v=new $w;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=CM(e);return l=Ie("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=AM(h),v=new e9;return Object.assign(v,m),v})}}async importFile(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=SM(e);return l=Ie("{file_search_store_name}:importFile",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),s.then(h=>{const m=_M(h),v=new tv;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Yb=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return Yb=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const CD=()=>Yb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function My(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Dy=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vs extends Error{}class ta extends vs{constructor(e,t,i,s){super(`${ta.makeMessage(e,t,i)}`),this.status=e,this.headers=s,this.error=t}static makeMessage(e,t,i){const s=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&s?`${e} ${s}`:e?`${e} status code (no body)`:s||"(no status code or body)"}static generate(e,t,i,s){if(!e||!s)return new Im({message:i,cause:Dy(t)});const l=t;return e===400?new Kb(e,l,i,s):e===401?new Jb(e,l,i,s):e===403?new Xb(e,l,i,s):e===404?new Qb(e,l,i,s):e===409?new Zb(e,l,i,s):e===422?new Wb(e,l,i,s):e===429?new $b(e,l,i,s):e>=500?new ex(e,l,i,s):new ta(e,l,i,s)}}class zy extends ta{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Im extends ta{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class Fb extends Im{constructor({message:e}={}){super({message:e??"Request timed out."})}}class Kb extends ta{}class Jb extends ta{}class Xb extends ta{}class Qb extends ta{}class Zb extends ta{}class Wb extends ta{}class $b extends ta{}class ex extends ta{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AD=/^[a-z][a-z0-9+.-]*:/i,wD=n=>AD.test(n);let Uy=n=>(Uy=Array.isArray,Uy(n));const RD=Uy;let ND=RD;const F_=ND;function MD(n){if(!n)return!0;for(const e in n)return!1;return!0}function DD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const zD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new vs(`${n} must be an integer`);if(e<0)throw new vs(`${n} must be a positive integer`);return e},UD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ID=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _d="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const kD=()=>{var n,e,t,i,s;const l=OD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_d,"X-Stainless-OS":J_(Deno.build.os),"X-Stainless-Arch":K_(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_d,"X-Stainless-OS":J_((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":K_((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(s=globalThis.process.version)!==null&&s!==void 0?s:"unknown"};const c=LD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":_d,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function LD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const s=i[1]||0,l=i[2]||0,c=i[3]||0;return{browser:e,version:`${s}.${l}.${c}`}}}return null}const K_=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",J_=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Wp;const GD=()=>Wp??(Wp=kD());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function tx(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function BD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return tx({start(){},async pull(t){const{done:i,value:s}=await e.next();i?t.close():t.enqueue(s)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function nx(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function PD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),s=i.cancel();i.releaseLock(),await s}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ix=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Fg(n,e,t){return ix(),new File(n,e??"unknown_file",t)}function VD(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const jD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ax=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",YD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&ax(n),FD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function KD(n,e,t){if(ix(),n=await n,YD(n))return n instanceof File?n:Fg([await n.arrayBuffer()],n.name);if(FD(n)){const s=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Fg(await Iy(s),e,t)}const i=await Iy(n);if(e||(e=VD(n)),!(t!=null&&t.type)){const s=i.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof s=="string"&&(t=Object.assign(Object.assign({},t),{type:s}))}return Fg(i,e,t)}async function Iy(n){var e,t,i,s,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(ax(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(jD(n))try{for(var f=!0,h=Js(n),m;m=await h.next(),e=m.done,!e;f=!0){s=m.value,f=!1;const v=s;c.push(...await Iy(v))}}catch(v){t={error:v}}finally{try{!f&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${JD(n)}`)}return c}function JD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sx{constructor(e){this._client=e}}sx._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ox(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const X_=Object.freeze(Object.create(null)),XD=(n=ox)=>(function(t,...i){if(t.length===1)return t[0];let s=!1;const l=[],c=t.reduce((v,E,x)=>{var R,N,z;/[?#]/.test(E)&&(s=!0);const D=i[x];let I=(s?encodeURIComponent:n)(""+D);return x!==i.length&&(D==null||typeof D=="object"&&D.toString===((z=Object.getPrototypeOf((N=Object.getPrototypeOf((R=D.hasOwnProperty)!==null&&R!==void 0?R:X_))!==null&&N!==void 0?N:X_))===null||z===void 0?void 0:z.toString))&&(I=D+"",l.push({start:v.length+E.length,length:I.length,error:`Value of type ${Object.prototype.toString.call(D).slice(8,-1)} is not a valid path parameter`})),v+E+(x===i.length?"":I)},""),f=c.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=h.exec(f))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,E)=>v.start-E.start),l.length>0){let v=0;const E=l.reduce((x,R)=>{const N=" ".repeat(R.start-v),z="^".repeat(R.length);return v=R.start+R.length,x+N+z},"");throw new vs(`Path parameters result in path with invalid segments:
${l.map(x=>x.error).join(`
`)}
${c}
${E}`)}return c}),$p=XD(ox);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lx extends sx{create(e,t){var i;const{api_version:s=this._client.apiVersion}=e,l=gm(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new vs("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new vs("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post($p`/${s}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.delete($p`/${s}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:s=this._client.apiVersion}=t??{};return this._client.post($p`/${s}/interactions/${e}/cancel`,i)}get(e,t={},i){var s;const l=t??{},{api_version:c=this._client.apiVersion}=l,f=gm(l,["api_version"]);return this._client.get($p`/${c}/interactions/${e}`,Object.assign(Object.assign({query:f},i),{stream:(s=t==null?void 0:t.stream)!==null&&s!==void 0?s:!1}))}}lx._key=Object.freeze(["interactions"]);class rx extends lx{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function QD(n){let e=0;for(const s of n)e+=s.length;const t=new Uint8Array(e);let i=0;for(const s of n)t.set(s,i),i+=s.length;return t}let em;function rv(n){let e;return(em??(e=new globalThis.TextEncoder,em=e.encode.bind(e)))(n)}let tm;function Q_(n){let e;return(tm??(e=new globalThis.TextDecoder,tm=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Om{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?rv(e):e;this.buffer=QD([this.buffer,t]);const i=[];let s;for(;(s=ZD(this.buffer,this.carriageReturnIndex))!=null;){if(s.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=s.index;continue}if(this.carriageReturnIndex!=null&&(s.index!==this.carriageReturnIndex+1||s.carriage)){i.push(Q_(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?s.preceding-1:s.preceding,c=Q_(this.buffer.subarray(0,l));i.push(c),this.buffer=this.buffer.subarray(s.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Om.NEWLINE_CHARS=new Set([`
`,"\r"]);Om.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function ZD(n,e){for(let s=e??0;s<n.length;s++){if(n[s]===10)return{preceding:s,index:s+1,carriage:!1};if(n[s]===13)return{preceding:s,index:s+1,carriage:!0}}return null}function WD(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ym={off:0,error:200,warn:300,info:400,debug:500},Z_=(n,e,t)=>{if(n){if(DD(ym,n))return n;ea(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ym))}`)}};function Rh(){}function nm(n,e,t){return!e||ym[n]>ym[t]?Rh:e[n].bind(e)}const $D={error:Rh,warn:Rh,info:Rh,debug:Rh};let W_=new WeakMap;function ea(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return $D;const s=W_.get(t);if(s&&s[0]===i)return s[1];const l={error:nm("error",t,i),warn:nm("warn",t,i),info:nm("info",t,i),debug:nm("debug",t,i)};return W_.set(t,[i,l]),l}const Mu=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ed{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let s=!1;const l=i?ea(i):console;function c(){return Ks(this,arguments,function*(){var h,m,v,E;if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let x=!1;try{try{for(var R=!0,N=Js(ez(e,t)),z;z=yield nt(N.next()),h=z.done,!h;R=!0){E=z.value,R=!1;const D=E;if(!x)if(D.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield nt(JSON.parse(D.data))}catch(I){throw l.error("Could not parse message into JSON:",D.data),l.error("From chunk:",D.raw),I}}}catch(D){m={error:D}}finally{try{!R&&!h&&(v=N.return)&&(yield nt(v.call(N)))}finally{if(m)throw m.error}}x=!0}catch(D){if(My(D))return yield nt(void 0);throw D}finally{x||t.abort()}})}return new Ed(c,t,i)}static fromReadableStream(e,t,i){let s=!1;function l(){return Ks(this,arguments,function*(){var h,m,v,E;const x=new Om,R=nx(e);try{for(var N=!0,z=Js(R),D;D=yield nt(z.next()),h=D.done,!h;N=!0){E=D.value,N=!1;const I=E;for(const L of x.decode(I))yield yield nt(L)}}catch(I){m={error:I}}finally{try{!N&&!h&&(v=z.return)&&(yield nt(v.call(z)))}finally{if(m)throw m.error}}for(const I of x.flush())yield yield nt(I)})}function c(){return Ks(this,arguments,function*(){var h,m,v,E;if(s)throw new vs("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");s=!0;let x=!1;try{try{for(var R=!0,N=Js(l()),z;z=yield nt(N.next()),h=z.done,!h;R=!0){E=z.value,R=!1;const D=E;x||D&&(yield yield nt(JSON.parse(D)))}}catch(D){m={error:D}}finally{try{!R&&!h&&(v=N.return)&&(yield nt(v.call(N)))}finally{if(m)throw m.error}}x=!0}catch(D){if(My(D))return yield nt(void 0);throw D}finally{x||t.abort()}})}return new Ed(c,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),s=l=>({next:()=>{if(l.length===0){const c=i.next();e.push(c),t.push(c)}return l.shift()}});return[new Ed(()=>s(e),this.controller,this.client),new Ed(()=>s(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return tx({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:s,done:l}=await t.next();if(l)return i.close();const c=rv(JSON.stringify(s)+`
`);i.enqueue(c)}catch(s){i.error(s)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function ez(n,e){return Ks(this,arguments,function*(){var i,s,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new vs("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new vs("Attempted to iterate over a response with no body");const f=new nz,h=new Om,m=nx(n.body);try{for(var v=!0,E=Js(tz(m)),x;x=yield nt(E.next()),i=x.done,!i;v=!0){c=x.value,v=!1;const R=c;for(const N of h.decode(R)){const z=f.decode(N);z&&(yield yield nt(z))}}}catch(R){s={error:R}}finally{try{!v&&!i&&(l=E.return)&&(yield nt(l.call(E)))}finally{if(s)throw s.error}}for(const R of h.flush()){const N=f.decode(R);N&&(yield yield nt(N))}})}function tz(n){return Ks(this,arguments,function*(){var t,i,s,l;let c=new Uint8Array;try{for(var f=!0,h=Js(n),m;m=yield nt(h.next()),t=m.done,!t;f=!0){l=m.value,f=!1;const v=l;if(v==null)continue;const E=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?rv(v):v;let x=new Uint8Array(c.length+E.length);x.set(c),x.set(E,c.length),c=x;let R;for(;(R=WD(c))!==-1;)yield yield nt(c.slice(0,R)),c=c.slice(R)}}catch(v){i={error:v}}finally{try{!f&&!t&&(s=h.return)&&(yield nt(s.call(h)))}finally{if(i)throw i.error}}c.length>0&&(yield yield nt(c))})}class nz{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,s]=iz(e,":");return s.startsWith(" ")&&(s=s.substring(1)),t==="event"?this.event=s:t==="data"&&this.data.push(s),null}}function iz(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function az(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:s,startTime:l}=e,c=await(async()=>{var f;if(e.options.stream)return ea(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Ed.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),m=(f=h==null?void 0:h.split(";")[0])===null||f===void 0?void 0:f.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return ea(n).debug(`[${i}] response parsed`,Mu({retryOfRequestLogID:s,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uv extends Promise{constructor(e,t,i=az){super(s=>{s(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new uv(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ux=Symbol("brand.privateNullableHeaders");function*sz(n){if(!n)return;if(ux in n){const{values:i,nulls:s}=n;yield*i.entries();for(const l of s)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():F_(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const s=i[0];if(typeof s!="string")throw new TypeError("expected header name to be a string");const l=F_(i[1])?i[1]:[i[1]];let c=!1;for(const f of l)f!==void 0&&(e&&!c&&(c=!0,yield[s,null]),yield[s,f])}}const bh=n=>{const e=new Headers,t=new Set;for(const i of n){const s=new Set;for(const[l,c]of sz(i)){const f=l.toLowerCase();s.has(f)||(e.delete(l),s.add(f)),c===null?(e.delete(l),t.add(f)):(e.append(l,c),t.delete(f))}}return{[ux]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kg=n=>{var e,t,i,s,l,c;if(typeof globalThis.process<"u")return(i=(t=(e=ww)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(s=globalThis.Deno.env)===null||s===void 0?void 0:s.get)===null||l===void 0?void 0:l.call(s,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cx;class km{constructor(e){var t,i,s,l,c,f,h,{baseURL:m=Kg("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=Kg("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:E="v1beta"}=e,x=gm(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:E},x),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(i=R.timeout)!==null&&i!==void 0?i:km.DEFAULT_TIMEOUT,this.logger=(s=R.logger)!==null&&s!==void 0?s:console;const N="warn";this.logLevel=N,this.logLevel=(c=(l=Z_(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:Z_(Kg("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:N,this.fetchOptions=R.fetchOptions,this.maxRetries=(f=R.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(h=R.fetch)!==null&&h!==void 0?h:HD(),this.encoder=qD,this._options=R,this.apiKey=v,this.apiVersion=E,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=bh([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return bh([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return bh([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new vs(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${_d}`}defaultIdempotencyKey(){return`stainless-node-retry-${CD()}`}makeStatusError(e,t,i,s){return ta.generate(e,t,i,s)}buildURL(e,t,i){const s=!this.baseURLOverridden()&&i||this.baseURL,l=wD(e)?new URL(e):new URL(s+(s.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return MD(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(s=>Object.assign({method:e,path:t},s)))}request(e,t=null){return new uv(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var s,l,c;const f=await e,h=(s=f.maxRetries)!==null&&s!==void 0?s:this.maxRetries;t==null&&(t=h),await this.prepareOptions(f);const{req:m,url:v,timeout:E}=await this.buildRequest(f,{retryCount:h-t});await this.prepareRequest(m,{url:v,options:f});const x="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=i===void 0?"":`, retryOf: ${i}`,N=Date.now();if(ea(this).debug(`[${x}] sending request`,Mu({retryOfRequestLogID:i,method:f.method,url:v,options:f,headers:m.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new zy;const z=new AbortController,D=await this.fetchWithTimeout(v,m,E,z).catch(Dy),I=Date.now();if(D instanceof globalThis.Error){const U=`retrying, ${t} attempts remaining`;if(!((c=f.signal)===null||c===void 0)&&c.aborted)throw new zy;const G=My(D)||/timed? ?out/i.test(String(D)+("cause"in D?String(D.cause):""));if(t)return ea(this).info(`[${x}] connection ${G?"timed out":"failed"} - ${U}`),ea(this).debug(`[${x}] connection ${G?"timed out":"failed"} (${U})`,Mu({retryOfRequestLogID:i,url:v,durationMs:I-N,message:D.message})),this.retryRequest(f,t,i??x);throw ea(this).info(`[${x}] connection ${G?"timed out":"failed"} - error; no more retries left`),ea(this).debug(`[${x}] connection ${G?"timed out":"failed"} (error; no more retries left)`,Mu({retryOfRequestLogID:i,url:v,durationMs:I-N,message:D.message})),G?new Fb:new Im({cause:D})}const L=`[${x}${R}] ${m.method} ${v} ${D.ok?"succeeded":"failed"} with status ${D.status} in ${I-N}ms`;if(!D.ok){const U=await this.shouldRetry(D);if(t&&U){const B=`retrying, ${t} attempts remaining`;return await PD(D.body),ea(this).info(`${L} - ${B}`),ea(this).debug(`[${x}] response error (${B})`,Mu({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:I-N})),this.retryRequest(f,t,i??x,D.headers)}const G=U?"error; no more retries left":"error; not retryable";ea(this).info(`${L} - ${G}`);const P=await D.text().catch(B=>Dy(B).message),K=UD(P),$=K?void 0:P;throw ea(this).debug(`[${x}] response error (${G})`,Mu({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,message:$,durationMs:Date.now()-N})),this.makeStatusError(D.status,K,$,D.headers)}return ea(this).info(L),ea(this).debug(`[${x}] response start`,Mu({retryOfRequestLogID:i,url:D.url,status:D.status,headers:D.headers,durationMs:I-N})),{response:D,options:f,controller:z,requestLogID:x,retryOfRequestLogID:i,startTime:N}}async fetchWithTimeout(e,t,i,s){const l=t||{},{signal:c,method:f}=l,h=gm(l,["signal","method"]),m=s.abort.bind(s);c&&c.addEventListener("abort",m,{once:!0});const v=setTimeout(m,i),E=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,x=Object.assign(Object.assign(Object.assign({signal:s.signal},E?{duplex:"half"}:{}),{method:"GET"}),h);f&&(x.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(v)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,s){var l;let c;const f=s==null?void 0:s.get("retry-after-ms");if(f){const m=parseFloat(f);Number.isNaN(m)||(c=m)}const h=s==null?void 0:s.get("retry-after");if(h&&!c){const m=parseFloat(h);Number.isNaN(m)?c=Date.parse(h)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await ID(c),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return c*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,s,l;const c=Object.assign({},e),{method:f,path:h,query:m,defaultBaseURL:v}=c,E=this.buildURL(h,m,v);"timeout"in c&&zD("timeout",c.timeout),c.timeout=(i=c.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:x,body:R}=this.buildBody({options:c}),N=await this.buildHeaders({options:e,method:f,bodyHeaders:x,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:N},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(s=this.fetchOptions)!==null&&s!==void 0?s:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:E,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:s}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let f=bh([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(s)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),GD()),this._options.defaultHeaders,i,e.headers,c]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=bh([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:BD(e)}:this.encoder({body:e,headers:i})}}km.DEFAULT_TIMEOUT=6e4;class fi extends km{constructor(){super(...arguments),this.interactions=new rx(this)}}cx=fi;fi.GeminiNextGenAPIClient=cx;fi.GeminiNextGenAPIClientError=vs;fi.APIError=ta;fi.APIConnectionError=Im;fi.APIConnectionTimeoutError=Fb;fi.APIUserAbortError=zy;fi.NotFoundError=Qb;fi.ConflictError=Zb;fi.RateLimitError=$b;fi.BadRequestError=Kb;fi.AuthenticationError=Jb;fi.InternalServerError=ex;fi.PermissionDeniedError=Xb;fi.UnprocessableEntityError=Wb;fi.toFile=KD;fi.Interactions=rx;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oz(n,e){const t={},i=y(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function lz(n,e){const t={},i=y(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function rz(n,e){const t={},i=y(n,["sdkHttpResponse"]);return i!=null&&_(t,["sdkHttpResponse"],i),t}function uz(n,e){const t={},i=y(n,["sdkHttpResponse"]);return i!=null&&_(t,["sdkHttpResponse"],i),t}function cz(n,e,t){const i={};if(y(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=y(n,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&_(e,["displayName"],s),y(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=y(n,["epochCount"]);e!==void 0&&l!=null&&_(e,["tuningTask","hyperparameters","epochCount"],l);const c=y(n,["learningRateMultiplier"]);if(c!=null&&_(i,["tuningTask","hyperparameters","learningRateMultiplier"],c),y(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(y(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(y(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(y(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(y(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const f=y(n,["batchSize"]);e!==void 0&&f!=null&&_(e,["tuningTask","hyperparameters","batchSize"],f);const h=y(n,["learningRate"]);if(e!==void 0&&h!=null&&_(e,["tuningTask","hyperparameters","learningRate"],h),y(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(y(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(y(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(y(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(y(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(y(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return i}function dz(n,e,t){const i={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const P=y(n,["validationDataset"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec"],Jg(P))}else if(s==="PREFERENCE_TUNING"){const P=y(n,["validationDataset"]);e!==void 0&&P!=null&&_(e,["preferenceOptimizationSpec"],Jg(P))}else if(s==="DISTILLATION"){const P=y(n,["validationDataset"]);e!==void 0&&P!=null&&_(e,["distillationSpec"],Jg(P))}const l=y(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&_(e,["tunedModelDisplayName"],l);const c=y(n,["description"]);e!==void 0&&c!=null&&_(e,["description"],c);let f=y(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const P=y(n,["epochCount"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],P)}else if(f==="PREFERENCE_TUNING"){const P=y(n,["epochCount"]);e!==void 0&&P!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],P)}else if(f==="DISTILLATION"){const P=y(n,["epochCount"]);e!==void 0&&P!=null&&_(e,["distillationSpec","hyperParameters","epochCount"],P)}let h=y(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const P=y(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],P)}else if(h==="PREFERENCE_TUNING"){const P=y(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],P)}else if(h==="DISTILLATION"){const P=y(n,["learningRateMultiplier"]);e!==void 0&&P!=null&&_(e,["distillationSpec","hyperParameters","learningRateMultiplier"],P)}let m=y(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const P=y(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],P)}else if(m==="PREFERENCE_TUNING"){const P=y(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&_(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],P)}else if(m==="DISTILLATION"){const P=y(n,["exportLastCheckpointOnly"]);e!==void 0&&P!=null&&_(e,["distillationSpec","exportLastCheckpointOnly"],P)}let v=y(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const P=y(n,["adapterSize"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],P)}else if(v==="PREFERENCE_TUNING"){const P=y(n,["adapterSize"]);e!==void 0&&P!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],P)}else if(v==="DISTILLATION"){const P=y(n,["adapterSize"]);e!==void 0&&P!=null&&_(e,["distillationSpec","hyperParameters","adapterSize"],P)}let E=y(t,["config","method"]);if(E===void 0&&(E="SUPERVISED_FINE_TUNING"),E==="SUPERVISED_FINE_TUNING"){const P=y(n,["tuningMode"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","tuningMode"],P)}const x=y(n,["customBaseModel"]);e!==void 0&&x!=null&&_(e,["customBaseModel"],x);let R=y(t,["config","method"]);if(R===void 0&&(R="SUPERVISED_FINE_TUNING"),R==="SUPERVISED_FINE_TUNING"){const P=y(n,["batchSize"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","hyperParameters","batchSize"],P)}let N=y(t,["config","method"]);if(N===void 0&&(N="SUPERVISED_FINE_TUNING"),N==="SUPERVISED_FINE_TUNING"){const P=y(n,["learningRate"]);e!==void 0&&P!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRate"],P)}const z=y(n,["labels"]);e!==void 0&&z!=null&&_(e,["labels"],z);const D=y(n,["beta"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","beta"],D);const I=y(n,["baseTeacherModel"]);e!==void 0&&I!=null&&_(e,["distillationSpec","baseTeacherModel"],I);const L=y(n,["tunedTeacherModelSource"]);e!==void 0&&L!=null&&_(e,["distillationSpec","tunedTeacherModelSource"],L);const U=y(n,["sftLossWeightMultiplier"]);e!==void 0&&U!=null&&_(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],U);const G=y(n,["outputUri"]);return e!==void 0&&G!=null&&_(e,["outputUri"],G),i}function fz(n,e){const t={},i=y(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const s=y(n,["preTunedModel"]);s!=null&&_(t,["preTunedModel"],s);const l=y(n,["trainingDataset"]);l!=null&&Ez(l);const c=y(n,["config"]);return c!=null&&cz(c,t),t}function hz(n,e){const t={},i=y(n,["baseModel"]);i!=null&&_(t,["baseModel"],i);const s=y(n,["preTunedModel"]);s!=null&&_(t,["preTunedModel"],s);const l=y(n,["trainingDataset"]);l!=null&&Tz(l,t,e);const c=y(n,["config"]);return c!=null&&dz(c,t,e),t}function pz(n,e){const t={},i=y(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function mz(n,e){const t={},i=y(n,["name"]);return i!=null&&_(t,["_url","name"],i),t}function gz(n,e,t){const i={},s=y(n,["pageSize"]);e!==void 0&&s!=null&&_(e,["_query","pageSize"],s);const l=y(n,["pageToken"]);e!==void 0&&l!=null&&_(e,["_query","pageToken"],l);const c=y(n,["filter"]);return e!==void 0&&c!=null&&_(e,["_query","filter"],c),i}function yz(n,e,t){const i={},s=y(n,["pageSize"]);e!==void 0&&s!=null&&_(e,["_query","pageSize"],s);const l=y(n,["pageToken"]);e!==void 0&&l!=null&&_(e,["_query","pageToken"],l);const c=y(n,["filter"]);return e!==void 0&&c!=null&&_(e,["_query","filter"],c),i}function vz(n,e){const t={},i=y(n,["config"]);return i!=null&&gz(i,t),t}function _z(n,e){const t={},i=y(n,["config"]);return i!=null&&yz(i,t),t}function Sz(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["nextPageToken"]);s!=null&&_(t,["nextPageToken"],s);const l=y(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>dx(f))),_(t,["tuningJobs"],c)}return t}function bz(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["nextPageToken"]);s!=null&&_(t,["nextPageToken"],s);const l=y(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>Oy(f))),_(t,["tuningJobs"],c)}return t}function xz(n,e){const t={},i=y(n,["name"]);i!=null&&_(t,["model"],i);const s=y(n,["name"]);return s!=null&&_(t,["endpoint"],s),t}function Ez(n,e){const t={};if(y(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(y(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=y(n,["examples"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>l)),_(t,["examples","examples"],s)}return t}function Tz(n,e,t){const i={};let s=y(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const c=y(n,["gcsUri"]);e!==void 0&&c!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(s==="PREFERENCE_TUNING"){const c=y(n,["gcsUri"]);e!==void 0&&c!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(s==="DISTILLATION"){const c=y(n,["gcsUri"]);e!==void 0&&c!=null&&_(e,["distillationSpec","promptDatasetUri"],c)}let l=y(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=y(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=y(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}else if(l==="DISTILLATION"){const c=y(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&_(e,["distillationSpec","promptDatasetUri"],c)}if(y(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function dx(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["name"]);s!=null&&_(t,["name"],s);const l=y(n,["state"]);l!=null&&_(t,["state"],wb(l));const c=y(n,["createTime"]);c!=null&&_(t,["createTime"],c);const f=y(n,["tuningTask","startTime"]);f!=null&&_(t,["startTime"],f);const h=y(n,["tuningTask","completeTime"]);h!=null&&_(t,["endTime"],h);const m=y(n,["updateTime"]);m!=null&&_(t,["updateTime"],m);const v=y(n,["description"]);v!=null&&_(t,["description"],v);const E=y(n,["baseModel"]);E!=null&&_(t,["baseModel"],E);const x=y(n,["_self"]);return x!=null&&_(t,["tunedModel"],xz(x)),t}function Oy(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["name"]);s!=null&&_(t,["name"],s);const l=y(n,["state"]);l!=null&&_(t,["state"],wb(l));const c=y(n,["createTime"]);c!=null&&_(t,["createTime"],c);const f=y(n,["startTime"]);f!=null&&_(t,["startTime"],f);const h=y(n,["endTime"]);h!=null&&_(t,["endTime"],h);const m=y(n,["updateTime"]);m!=null&&_(t,["updateTime"],m);const v=y(n,["error"]);v!=null&&_(t,["error"],v);const E=y(n,["description"]);E!=null&&_(t,["description"],E);const x=y(n,["baseModel"]);x!=null&&_(t,["baseModel"],x);const R=y(n,["tunedModel"]);R!=null&&_(t,["tunedModel"],R);const N=y(n,["preTunedModel"]);N!=null&&_(t,["preTunedModel"],N);const z=y(n,["supervisedTuningSpec"]);z!=null&&_(t,["supervisedTuningSpec"],z);const D=y(n,["preferenceOptimizationSpec"]);D!=null&&_(t,["preferenceOptimizationSpec"],D);const I=y(n,["distillationSpec"]);I!=null&&_(t,["distillationSpec"],I);const L=y(n,["tuningDataStats"]);L!=null&&_(t,["tuningDataStats"],L);const U=y(n,["encryptionSpec"]);U!=null&&_(t,["encryptionSpec"],U);const G=y(n,["partnerModelTuningSpec"]);G!=null&&_(t,["partnerModelTuningSpec"],G);const P=y(n,["customBaseModel"]);P!=null&&_(t,["customBaseModel"],P);const K=y(n,["experiment"]);K!=null&&_(t,["experiment"],K);const $=y(n,["labels"]);$!=null&&_(t,["labels"],$);const J=y(n,["outputUri"]);J!=null&&_(t,["outputUri"],J);const B=y(n,["pipelineJob"]);B!=null&&_(t,["pipelineJob"],B);const ue=y(n,["serviceAccount"]);ue!=null&&_(t,["serviceAccount"],ue);const xe=y(n,["tunedModelDisplayName"]);xe!=null&&_(t,["tunedModelDisplayName"],xe);const ae=y(n,["veoTuningSpec"]);return ae!=null&&_(t,["veoTuningSpec"],ae),t}function Cz(n,e){const t={},i=y(n,["sdkHttpResponse"]);i!=null&&_(t,["sdkHttpResponse"],i);const s=y(n,["name"]);s!=null&&_(t,["name"],s);const l=y(n,["metadata"]);l!=null&&_(t,["metadata"],l);const c=y(n,["done"]);c!=null&&_(t,["done"],c);const f=y(n,["error"]);return f!=null&&_(t,["error"],f),t}function Jg(n,e){const t={},i=y(n,["gcsUri"]);i!=null&&_(t,["validationDatasetUri"],i);const s=y(n,["vertexDatasetResource"]);return s!=null&&_(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Az extends Al{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qu(bl.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:s});return l.baseModel=void 0,await this.tuneInternal(l)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),l=await this.tuneMldevInternal(s);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:xy.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=mz(e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>Oy(v))}else{const m=pz(e);return f=Ie("{name}",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>dx(v))}}async listInternal(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=_z(e);return f=Ie("tuningJobs",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=bz(v),x=new C_;return Object.assign(x,E),x})}else{const m=vz(e);return f=Ie("tunedModels",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=Sz(v),x=new C_;return Object.assign(x,E),x})}}async cancel(e){var t,i,s,l;let c,f="",h={};if(this.apiClient.isVertexAI()){const m=lz(e);return f=Ie("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=uz(v),x=new A_;return Object.assign(x,E),x})}else{const m=oz(e);return f=Ie("{name}:cancel",m._url),h=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:f,queryParams:h,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(E=>{const x=E;return x.sdkHttpResponse={headers:v.headers},x})),c.then(v=>{const E=rz(v),x=new A_;return Object.assign(x,E),x})}}async tuneInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI()){const f=hz(e,e);return l=Ie("tuningJobs",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Oy(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let s,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fz(e);return l=Ie("tunedModels",f._url),c=f._query,delete f._url,delete f._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:h.headers},v})),s.then(h=>Cz(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wz{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Rz=1024*1024*8,Nz=3,Mz=1e3,Dz=2,vm="x-goog-upload-status";async function zz(n,e,t){var i;const s=await fx(n,e,t),l=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[vm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function Uz(n,e,t){var i;const s=await fx(n,e,t),l=await(s==null?void 0:s.json());if(((i=s==null?void 0:s.headers)===null||i===void 0?void 0:i[vm])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=bb(l),f=new nv;return Object.assign(f,c),f}async function fx(n,e,t){var i,s;let l=0,c=0,f=new Ty(new Response),h="upload";for(l=n.size;c<l;){const m=Math.min(Rz,l-c),v=n.slice(c,c+m);c+m>=l&&(h+=", finalize");let E=0,x=Mz;for(;E<Nz&&(f=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((i=f==null?void 0:f.headers)===null||i===void 0)&&i[vm]));)E++,await Oz(x),x=x*Dz;if(c+=m,((s=f==null?void 0:f.headers)===null||s===void 0?void 0:s[vm])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function Iz(n){return{size:n.size,type:n.type}}function Oz(n){return new Promise(e=>setTimeout(e,n))}class kz{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await zz(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Uz(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Iz(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lz{create(e,t,i){return new Gz(e,t,i)}}class Gz{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $_="x-goog-api-key";class Hz{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get($_)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append($_,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Bz="gl-node/";class Pz{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new fi({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=Dw(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new Hz(this.apiKey);this.apiClient=new IM({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Bz+"web",uploader:new kz,downloader:new wz}),this.models=new $M(this.apiClient),this.live=new KM(this.apiClient,s,new Lz),this.batches=new l7(this.apiClient),this.chats=new q7(this.models,this.apiClient),this.caches=new H7(this.apiClient),this.files=new eR(this.apiClient),this.operations=new eD(this.apiClient),this.authTokens=new gD(this.apiClient),this.tunings=new Az(this.apiClient),this.fileSearchStores=new TD(this.apiClient)}}const eS=["https://storage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4","https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerBlazes.mp4"],qz={async ensureApiKey(){try{return await window.aistudio.hasSelectedApiKey()||await window.aistudio.openSelectKey(),!0}catch{return console.warn("API Key selection not available in this environment, falling back to simulation."),!1}},async generateVideoFromImage(n,e,t="16:9",i,s=!1){var f,h,m,v;if(console.log(`AI Service: Starting generation (Mode: ${s?"Simulation":"Real AI"})...`),s)return this.simulateGeneration(i);if(!await this.ensureApiKey())return console.log("AI Service: Key selection failed/cancelled, triggering simulation."),this.simulateGeneration(i);const c=new Pz({apiKey:void 0});try{i("Contacting Gemini Deepmind servers...");const E=n.split(",")[1]||n;let x=await c.models.generateVideos({model:"veo-3.1-fast-generate-preview",prompt:e||"Add cinematic motion to this scene",image:{imageBytes:E,mimeType:"image/png"},config:{numberOfVideos:1,resolution:"720p",aspectRatio:t}});console.log("AI Service: Operation started",x.id);const R=["Analyzing scene geometry...","Dreaming up temporal consistency...","Applying cinematic motion vectors...","Synthesizing high-fidelity frames...","Optimizing video container..."];let N=0;for(;!x.done;)i(R[N%R.length]),N++,console.log("AI Service: Polling status..."),await new Promise(L=>setTimeout(L,8e3)),x=await c.operations.getVideosOperation({operation:x});const z=(v=(m=(h=(f=x.response)==null?void 0:f.generatedVideos)==null?void 0:h[0])==null?void 0:m.video)==null?void 0:v.uri;if(!z)throw new Error("Video generation failed - no URI.");i("Finalizing download...");const I=await(await fetch(`${z}&key=undefined`)).blob();return URL.createObjectURL(I)}catch(E){return console.error("AI Service Error:",E),i("AI Busy. Using Neural Simulator instead..."),await new Promise(x=>setTimeout(x,2e3)),this.simulateGeneration(i)}},async simulateGeneration(n){const e=["Initializing Neural Simulator...","Analyzing reference pixels...","Interpolating motion paths...","Rendering simulated frames...","Encoding MP4 payload..."];for(const i of e)n(i),await new Promise(s=>setTimeout(s,1500));return n("Simulation Complete."),eS[Math.floor(Math.random()*eS.length)]}},Vz=({initialProject:n,onBackToDashboard:e})=>{ee.useEffect(()=>(document.body.style.overflow="hidden",()=>{document.body.style.overflow="auto"}),[]);const[t,i]=ee.useState(Ru()),[s,l]=ee.useState("Untitled Design"),[c,f]=ee.useState(!1),[h,m]=ee.useState(null),[v,E]=ee.useState(!1),[x,R]=ee.useState(!1),[N,z]=ee.useState(!1),[D,I]=ee.useState(!1),[L,U]=ee.useState(null),[G,P]=ee.useState(null),[K,$]=ee.useState(!0);ee.useEffect(()=>{wr.getCurrentUser().then(ce=>{ce&&P(ce.id)})},[]),ee.useEffect(()=>{var ce;if(n){i(n.id),l(n.name||"Untitled Project");const ge=((ce=n.editor_state)==null?void 0:ce.pages)||n.pages;ge&&B(ve=>{var He;return{...ve,pages:ge,activePageId:((He=ge[0])==null?void 0:He.id)||Zp,history:[ge],historyIndex:0}}),$(!1)}},[n]);const[J,B]=ee.useState(()=>{const ce=localStorage.getItem("vd_pro_status")==="true",ge={id:Zp,name:"Scene 1",aspectRatio:"16:9",width:fm["16:9"].w,height:fm["16:9"].h,backgroundColor:"#ffffff",layers:[]};return{pages:[ge],activePageId:Zp,zoom:.1,pan:{x:0,y:0},selectedLayerId:null,history:[[ge]],historyIndex:0,isPro:ce}}),[ue,xe]=ee.useState("select"),[ae,Me]=ee.useState(!1),[De,we]=ee.useState(!1),[Y,he]=ee.useState(""),[fe,Ne]=ee.useState(0),[Le,q]=ee.useState(!1),[W,be]=ee.useState(!1),[ze,Ze]=ee.useState(null),[et,xt]=ee.useState(!1),Ht=ee.useRef(null),gt=ee.useRef(null),Ta=ee.useRef({x:0,y:0}),Ca=ee.useRef(null),qe=J.pages.find(ce=>ce.id===J.activePageId),Ba=()=>{localStorage.setItem("vd_pro_status","true"),B(ce=>({...ce,isPro:!0}))},na=ee.useCallback(async()=>{var ce;if(!G){console.warn("Cannot save: No authenticated user"),alert("Cannot save: You are not logged in. Please log in to save your work.");return}try{f(!0);const ge=(ce=J.pages[0])==null?void 0:ce.thumbnail;let ve;if(K?(ve=await ms.saveProject(G,s,J,ge),ve.data&&(i(ve.data.id),$(!1),console.log("Project created:",ve.data.id))):(ve=await ms.updateProject(t,s,J,ge),console.log("Project updated:",t)),ve.error)throw ve.error;m(Date.now())}catch(ge){console.error("Failed to save to Supabase:",ge),alert(`Failed to save project: ${ge.message||"Unknown error"}`)}finally{setTimeout(()=>f(!1),800)}},[G,t,s,J,K]),Pa=ee.useRef({userId:G,projectId:t,projectName:s,editorState:J,isNewProject:K});ee.useEffect(()=>{Pa.current={userId:G,projectId:t,projectName:s,editorState:J,isNewProject:K}},[G,t,s,J,K]),ee.useEffect(()=>{const ce=setInterval(()=>{const ge=Pa.current;if(!ge.userId)return;const ve=async()=>{var He;try{const yt=(He=ge.editorState.pages[0])==null?void 0:He.thumbnail;if(ge.isNewProject){const kt=await ms.saveProject(ge.userId,ge.projectName,ge.editorState,yt);kt.data&&(i(kt.data.id),$(!1))}else await ms.updateProject(ge.projectId,ge.projectName,ge.editorState,yt);m(Date.now())}catch(yt){console.error("Autosave error:",yt)}};console.log("Triggering Autosave..."),ve()},3e4);return()=>clearInterval(ce)},[]);const ia=async ce=>{var ge;try{const{data:ve,error:He}=await ms.getProject(ce);if(ve){i(ve.id),l(ve.name);const yt=((ge=ve.editor_state)==null?void 0:ge.pages)||ve.pages;yt&&B(kt=>{var yn;return{...kt,pages:yt,activePageId:((yn=yt[0])==null?void 0:yn.id)||Zp,selectedLayerId:null,history:[yt],historyIndex:0}}),E(!1)}}catch(ve){console.error("Failed to load:",ve)}},ni=ee.useCallback(ce=>{B(ge=>{const ve=ge.history.slice(0,ge.historyIndex+1);return ve.push([...ce]),{...ge,pages:ce,history:ve,historyIndex:ve.length-1}})},[]),Ws=ee.useCallback(()=>{J.historyIndex>0&&B(ce=>({...ce,pages:ce.history[ce.historyIndex-1],historyIndex:ce.historyIndex-1,selectedLayerId:null}))},[J.historyIndex]),_s=ee.useCallback(()=>{J.historyIndex<J.history.length-1&&B(ce=>({...ce,pages:ce.history[ce.historyIndex+1],historyIndex:ce.historyIndex+1,selectedLayerId:null}))},[J.historyIndex,J.history.length]),dn=ee.useCallback(ce=>{const ge=J.pages.map(ve=>ve.id===J.activePageId?{...ve,...ce}:ve);ni(ge)},[J.activePageId,J.pages,ni]),$s=ee.useCallback(ce=>{if(ce==="IMAGE_UPLOAD"||ce==="VIDEO_UPLOAD"){const He=document.createElement("input");He.type="file",He.accept=ce==="IMAGE_UPLOAD"?"image/*":"video/*",He.onchange=yt=>{var yn;const kt=(yn=yt.target.files)==null?void 0:yn[0];if(kt){const zn=URL.createObjectURL(kt);if(ce==="VIDEO_UPLOAD"){const Bi=document.createElement("video");Bi.src=zn,Bi.onloadedmetadata=()=>{const Pi=Bi.duration,Ra={id:Ru(),name:"Video",type:Fe.IMAGE,x:100,y:100,width:800,height:450,rotation:0,opacity:1,src:zn,mediaType:"video",playing:!0,loop:!0,volume:1,currentTime:0,duration:Pi,visible:!0,locked:!1};dn({layers:[...qe.layers,Ra]}),B(Na=>({...Na,selectedLayerId:Ra.id}))}}else{const Bi={id:Ru(),name:"Image",type:Fe.IMAGE,x:100,y:100,width:800,height:450,rotation:0,opacity:1,src:zn,mediaType:"image",visible:!0,locked:!1};dn({layers:[...qe.layers,Bi]}),B(Pi=>({...Pi,selectedLayerId:Bi.id}))}}},He.click();return}let ge;const ve={id:Ru(),x:200,y:200,rotation:0,opacity:1,width:400,height:400,visible:!0,locked:!1};switch(ce){case Fe.TEXT:ge={...ve,name:"Text",type:Fe.TEXT,text:"New Text",width:600,fontSize:60,fontFamily:"Inter",fontWeight:"bold",fill:"#000000",align:"center",lineHeight:1.2,letterSpacing:0};break;case Fe.RECT:ge={...ve,name:"Rectangle",type:Fe.RECT,fill:"#6366f1",stroke:"#4f46e5",strokeWidth:4,cornerRadius:8};break;case Fe.CIRCLE:ge={...ve,name:"Circle",type:Fe.CIRCLE,fill:"#ec4899",stroke:"#db2777",strokeWidth:4};break;case Fe.STAR:ge={...ve,name:"Star",type:Fe.STAR,fill:"#8b5cf6",stroke:"#7c3aed",strokeWidth:4,sides:5,innerRadius:50};break;case Fe.LINE:ge={...ve,name:"Line",type:Fe.RECT,width:400,height:4,fill:"#6366f1",stroke:"#4f46e5",strokeWidth:0,cornerRadius:0};break;default:return}dn({layers:[...qe.layers,ge]}),B(He=>({...He,selectedLayerId:ge.id})),xe("select")},[qe,dn]),Aa=ee.useCallback((ce,ge)=>{const ve=qe.layers.map(He=>He.id===ce?{...He,...ge}:He);dn({layers:ve})},[qe.layers,dn]),gn=ee.useCallback(ce=>{const ge=qe.layers.find(He=>He.id===ce);if(!ge)return;const ve={...ge,id:Ru(),name:`${ge.name} Copy`,x:ge.x+20,y:ge.y+20};dn({layers:[...qe.layers,ve]}),B(He=>({...He,selectedLayerId:ve.id}))},[qe.layers,dn]),Hn=ee.useCallback(ce=>{dn({layers:ce})},[dn]),Vu=ce=>{if(ce.ctrlKey||ce.metaKey){ce.preventDefault();const ve=Math.min(_2,Math.max(S2,J.zoom-ce.deltaY*.001));B(He=>({...He,zoom:ve}))}else B(ge=>({...ge,pan:{x:ge.pan.x-ce.deltaX,y:ge.pan.y-ce.deltaY}}))},Rl=ce=>{const ge=ce.target===Ht.current;ge&&(B(ve=>({...ve,selectedLayerId:null})),document.activeElement instanceof HTMLTextAreaElement&&document.activeElement.blur()),(ue==="hand"||W||ce.button===1||ge)&&(q(!0),Ta.current={x:ce.clientX,y:ce.clientY},ce.preventDefault())},eo=ce=>{if(Le){const ge=ce.clientX-Ta.current.x,ve=ce.clientY-Ta.current.y;B(He=>({...He,pan:{x:He.pan.x+ge,y:He.pan.y+ve}})),Ta.current={x:ce.clientX,y:ce.clientY}}},qa=()=>q(!1);ee.useEffect(()=>(Ca.current&&window.clearTimeout(Ca.current),Ca.current=window.setTimeout(()=>{if(gt.current){const ce=gt.current.toDataURL({pixelRatio:.1});B(ge=>({...ge,pages:ge.pages.map(ve=>ve.id===qe.id?{...ve,thumbnail:ce}:ve)}))}},1e3),()=>{Ca.current&&window.clearTimeout(Ca.current)}),[qe.layers,qe.backgroundColor,qe.id]);const aa=()=>B(ce=>({...ce,zoom:Math.min(_2,ce.zoom+.1)})),Ss=()=>B(ce=>({...ce,zoom:Math.max(S2,ce.zoom-.1)})),bs=ee.useCallback(()=>{if(!Ht.current)return;const ce=Ht.current.offsetWidth,ge=Ht.current.offsetHeight;if(ce===0||ge===0)return;const ve=120,He=ce-ve,yt=ge-ve,kt=He/qe.width,yn=yt/qe.height,zn=Math.min(kt,yn,1);B(hi=>({...hi,zoom:zn,pan:{x:(ce-qe.width*zn)/2,y:(ge-qe.height*zn)/2}}))},[qe.width,qe.height]);ee.useEffect(()=>{if(!Ht.current)return;const ce=Ht.current,ge=new ResizeObserver(()=>{bs()});ge.observe(ce);const ve=setTimeout(bs,100);return()=>{ge.disconnect(),clearTimeout(ve)}},[bs]);const ju=ce=>{U(ce),I(!0)},to=async(ce,ge=!1)=>{if(!L)return;I(!1);const ve=qe.layers.find(He=>He.id===L);if(ve)try{we(!0),he("Preparing AI sequence...");let He;if(ve.mediaType==="video"){he("Capturing reference keyframe...");const kt=gt.current.findOne("#"+ve.id);if(!kt)throw new Error("Could not find layer on stage.");He=kt.toDataURL({pixelRatio:1})}else He=ve.src;const yt=await qz.generateVideoFromImage(He,ce,qe.aspectRatio.includes("9:16")?"9:16":"16:9",kt=>he(kt),ge);Aa(L,{name:ge?"AI Simulation Video":"AI Generated Video",mediaType:"video",src:yt,playing:!0,loop:!0,volume:1,duration:10})}catch(He){console.error(He),alert("AI Generation failed.")}finally{we(!1),U(null)}},ii=async ce=>{if(R(!1),!!gt.current)try{console.log(" Export started:",ce),Me(!0),Ne(0),he("Initializing Export...");const ge=gt.current;if(ce.format==="png"){const At=ce.targetWidth/qe.width,Un=ge.toDataURL({pixelRatio:At}),Ri=document.createElement("a");Ri.download=`${s.replace(/\s+/g,"-")}-${ce.label}.png`,Ri.href=Un,Ri.click(),Me(!1),console.log(" PNG export complete");return}if(/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)){if(Me(!1),!confirm(` Chrome Video Export Limitation

Video export works best in Safari or Firefox due to browser limitations.

Options:
 Click OK to try anyway (may produce 0-byte files)
 Click Cancel and use Safari/Firefox for reliable export

Recommended: Use Safari for best results`))return;Me(!0)}console.log(" Starting video export..."),he("Synchronizing Frames...");const He=qe.layers.map(At=>At.type===Fe.IMAGE&&At.mediaType==="video"?{...At,currentTime:0,playing:!1}:At);B(At=>({...At,pages:At.pages.map(Un=>Un.id===qe.id?{...Un,layers:He}:Un)})),await new Promise(At=>setTimeout(At,2e3)),console.log(" Videos synchronized");const yt=ge.container().querySelector("canvas");if(!yt)throw new Error("Canvas missing");console.log(" Canvas size:",yt.width,"x",yt.height);const kt=yt.captureStream(30);console.log(" Stream created, tracks:",kt.getTracks().length);const yn=MediaRecorder.isTypeSupported("video/mp4")?"video/mp4":"video/webm";console.log(" Using MIME type:",yn);const zn=new MediaRecorder(kt,{mimeType:yn,videoBitsPerSecond:ce.targetWidth>2e3?25e6:8e6}),hi=[];zn.ondataavailable=At=>{console.log(" Data chunk received:",At.data.size,"bytes"),hi.push(At.data)},zn.onstop=()=>{console.log(" Recorder stopped, total chunks:",hi.length);const At=new Blob(hi,{type:yn});console.log(" Final blob size:",At.size,"bytes");const Un=URL.createObjectURL(At),Ri=document.createElement("a");Ri.download=`${s.replace(/\s+/g,"-")}-${ce.label}.${yn.includes("mp4")?"mp4":"webm"}`,Ri.href=Un,Ri.click(),Me(!1),console.log(" Export complete!")},he("Recording Scene..."),zn.start(100),console.log(" Recording started with 100ms timeslice");const Bi=He.map(At=>{if(At.type===Fe.IMAGE&&At.mediaType==="video"){const{currentTime:Un,...Ri}=At;return{...Ri,playing:!0}}return At});B(At=>({...At,pages:At.pages.map(Un=>Un.id===qe.id?{...Un,layers:Bi}:Un)})),console.log(" Videos playing");const Pi=ce.duration;let Ra=0,Na=!0;const no=()=>{Na&&(ge.batchDraw(),requestAnimationFrame(no))};requestAnimationFrame(no),console.log(" Continuous redraw started");const Or=setInterval(()=>{Ra+=100,Ne(Math.min(100,Ra/Pi*100)),Ra>=Pi&&(clearInterval(Or),Na=!1,console.log(" Duration reached, stopping recorder"),zn.stop())},100)}catch(ge){console.error(" Export failed:",ge),Me(!1),alert("Export failed.")}};ee.useEffect(()=>{const ce=ve=>{var yt,kt;const He=((yt=document.activeElement)==null?void 0:yt.tagName)==="INPUT"||((kt=document.activeElement)==null?void 0:kt.tagName)==="TEXTAREA"||et;if(ve.code==="Space"&&!He&&(be(!0),ve.preventDefault()),He||(ve.key.toLowerCase()==="v"&&xe("select"),ve.key.toLowerCase()==="h"&&xe("hand")),(ve.metaKey||ve.ctrlKey)&&ve.key==="0"&&(ve.preventDefault(),bs()),!He&&((ve.metaKey||ve.ctrlKey)&&ve.key==="z"&&(ve.preventDefault(),ve.shiftKey?_s():Ws()),(ve.metaKey||ve.ctrlKey)&&ve.key==="s"&&(ve.preventDefault(),na()),(ve.metaKey||ve.ctrlKey)&&ve.key==="d"&&(ve.preventDefault(),J.selectedLayerId&&gn(J.selectedLayerId)),(ve.key==="Backspace"||ve.key==="Delete")&&J.selectedLayerId)){const yn=qe.layers.filter(zn=>zn.id!==J.selectedLayerId);dn({layers:yn}),B(zn=>({...zn,selectedLayerId:null}))}},ge=ve=>{ve.code==="Space"&&be(!1)};return window.addEventListener("keydown",ce),window.addEventListener("keyup",ge),()=>{window.removeEventListener("keydown",ce),window.removeEventListener("keyup",ge)}},[J.selectedLayerId,qe.layers,dn,Ws,_s,gn,s,t,bs,et]);const wa=qe.layers.some(ce=>ce.type===Fe.IMAGE&&ce.mediaType==="video"),ai=qe.layers.filter(ce=>ce.type===Fe.IMAGE&&ce.mediaType==="video"),Ir=ai.length>0?Math.max(...ai.map(ce=>ce.duration||10)):10,Id=ce=>{xt(ce),ce&&xe("select")};return T.jsxs("div",{className:"fixed inset-0 flex flex-col bg-zinc-950 text-zinc-100 overflow-hidden select-none z-[100]",children:[v&&T.jsx(Ew,{onClose:()=>E(!1),onLoadProject:ia}),x&&T.jsx(Tw,{onClose:()=>E(!1),onConfirm:ii,aspectRatio:qe.aspectRatio,currentWidth:qe.width,currentHeight:qe.height,hasVideo:wa,suggestedDuration:Ir,isPro:J.isPro,onShowPro:()=>z(!0)}),N&&T.jsx(Cw,{onClose:()=>z(!1),onUpgrade:Ba}),D&&T.jsx(Aw,{onClose:()=>I(!1),onGenerate:to}),(ae||De)&&T.jsxs("div",{className:"fixed inset-0 bg-black/80 z-[300] flex flex-col items-center justify-center gap-6 backdrop-blur-md animate-in fade-in duration-300",children:[De?T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"w-24 h-24 border-4 border-blue-500/20 border-t-blue-500 rounded-full animate-spin shadow-2xl shadow-blue-500/20"}),T.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-blue-400",children:T.jsx(Fy,{size:32,className:"animate-pulse"})})]}):T.jsx("div",{className:"w-64 h-2 bg-zinc-800 rounded-full overflow-hidden",children:T.jsx("div",{className:"h-full bg-blue-600 transition-all duration-300",style:{width:`${fe}%`}})}),T.jsxs("div",{className:"flex flex-col items-center gap-2",children:[T.jsx("p",{className:"text-sm font-black text-white uppercase tracking-[0.2em] animate-pulse",children:Y}),ae&&T.jsxs("span",{className:"text-[10px] text-zinc-500 font-mono",children:[Math.round(fe),"% COMPLETE"]})]})]}),T.jsxs("header",{className:"h-14 border-b border-zinc-800 flex items-center justify-between px-6 bg-zinc-900 z-20 shadow-lg",children:[T.jsxs("div",{className:"flex items-center gap-6",children:[e&&T.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-800 rounded text-zinc-500 hover:text-white transition-colors",children:T.jsx(oT,{size:18})}),T.jsxs("div",{className:"text-xl font-black tracking-tighter text-white flex items-center pr-6 border-r border-zinc-800 pointer-events-none select-none",children:["batcho",T.jsx("span",{className:"text-blue-500",children:"Video"}),J.isPro&&T.jsxs("div",{className:"px-1.5 py-0.5 rounded-full bg-pro-gradient text-white text-[8px] font-black uppercase tracking-tighter flex items-center gap-1 shadow-lg shadow-blue-500/20 ml-2",children:[T.jsx(qh,{size:8})," Pro"]})]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("input",{type:"text",value:s,onChange:ce=>l(ce.target.value),className:"bg-transparent border-none text-sm font-bold text-zinc-300 focus:text-white focus:outline-none focus:ring-0 min-w-[200px] hover:bg-white/5 px-2 py-1 rounded transition-colors"}),T.jsxs("div",{className:"flex items-center gap-1.5 ml-2",children:[T.jsxs("button",{onClick:na,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 disabled:bg-zinc-800 text-sm font-bold text-zinc-300 rounded-lg transition-all border border-zinc-700/50",children:[c?T.jsx(ly,{size:16,className:"animate-spin"}):h?T.jsx(AS,{size:16,className:"text-emerald-500"}):T.jsx(b3,{size:16}),c?"Saving":h?"Saved":"Save"]}),T.jsxs("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-zinc-800 hover:bg-zinc-700 text-sm font-bold text-zinc-300 rounded-lg transition-all border border-zinc-700/50",children:[T.jsx(qT,{size:16})," Open"]})]})]}),T.jsxs("div",{className:"flex items-center gap-1 ml-4",children:[T.jsx("button",{onClick:Ws,disabled:J.historyIndex<=0,className:"p-2 hover:bg-zinc-800 disabled:opacity-20 rounded transition-colors",children:T.jsx(K3,{size:18})}),T.jsx("button",{onClick:_s,disabled:J.historyIndex>=J.history.length-1,className:"p-2 hover:bg-zinc-800 disabled:opacity-20 rounded transition-colors",children:T.jsx(v3,{size:18})})]})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsxs("div",{className:"flex items-center gap-1 bg-zinc-800 rounded-lg p-1",children:[T.jsx("button",{onClick:Ss,className:"p-1.5 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",children:T.jsx(rC,{size:16})}),T.jsxs("div",{className:"px-2 text-xs font-medium text-zinc-100 min-w-[48px] text-center",children:[Math.round(J.zoom*100),"%"]}),T.jsx("button",{onClick:aa,className:"p-1.5 hover:bg-zinc-700 rounded text-zinc-400 hover:text-white",children:T.jsx(oC,{size:16})})]}),T.jsx("button",{onClick:bs,className:"p-2 hover:bg-zinc-800 rounded text-zinc-400",title:"Fit to Screen (Ctrl+0)",children:T.jsx(WT,{size:18})}),T.jsxs("button",{onClick:()=>R(!0),disabled:ae||De,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-lg transition-all active:scale-[0.98]",children:[ae?T.jsx(ly,{size:16,className:"animate-spin"}):T.jsx(Iu,{size:16}),ae?"Exporting...":"Export"]}),!J.isPro&&T.jsxs("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-pro-gradient text-white text-sm font-bold rounded-lg shadow-lg shadow-blue-500/20 hover:scale-[1.02] transition-all active:scale-[0.98]",children:[T.jsx(Kh,{size:14}),"Buy Credits"]})]})]}),T.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[T.jsx(mw,{onAddElement:$s,onToolSelect:xe,activeTool:ue}),T.jsx("main",{ref:Ht,className:`flex-1 bg-zinc-950 relative overflow-hidden transition-all duration-75 ${Le||W||ue==="hand"?"cursor-grabbing":"cursor-default"}`,onWheel:Vu,onMouseDown:Rl,onMouseMove:eo,onMouseUp:qa,onMouseLeave:qa,children:T.jsx("div",{className:"absolute origin-top-left pointer-events-none",style:{transform:`translate(${J.pan.x}px, ${J.pan.y}px) scale(${J.zoom})`},children:T.jsx("div",{className:"bg-transparent shadow-[0_0_100px_rgba(0,0,0,0.8)] pointer-events-auto overflow-hidden",style:{width:qe.width,height:qe.height},children:T.jsx(uw,{ref:gt,width:qe.width,height:qe.height,onMouseDown:ce=>{ue!=="hand"&&ce.target===ce.target.getStage()&&B(ge=>({...ge,selectedLayerId:null}))},children:T.jsxs(aw,{children:[T.jsx(Sb,{width:qe.width,height:qe.height,fill:qe.backgroundColor||"#ffffff",listening:!1}),ze&&ze.x!==void 0&&T.jsx(g2,{points:[ze.x,0,ze.x,qe.height],stroke:"#ff00ff",strokeWidth:1/J.zoom,dash:[4/J.zoom,4/J.zoom]}),ze&&ze.y!==void 0&&T.jsx(g2,{points:[0,ze.y,qe.width,ze.y],stroke:"#ff00ff",strokeWidth:1/J.zoom,dash:[4/J.zoom,4/J.zoom]}),qe.layers.map(ce=>T.jsx(xw,{layer:ce,page:qe,isSelected:ce.id===J.selectedLayerId,onSelect:()=>{ue==="select"&&B(ge=>({...ge,selectedLayerId:ce.id}))},onDragMove:Ze,onChange:ge=>Aa(ce.id,ge),onEditingChange:Id},ce.id))]})})})})}),T.jsx(Sw,{pages:J.pages,activePageId:J.activePageId,selectedLayer:qe.layers.find(ce=>ce.id===J.selectedLayerId)||null,onUpdateLayer:Aa,onDuplicateLayer:gn,onUpdatePage:dn,onSelectLayer:ce=>B(ge=>({...ge,selectedLayerId:ce})),onReorderLayers:Hn,onGenerateVideo:ju,onPageAction:{select:ce=>B(ge=>({...ge,activePageId:ce,selectedLayerId:null})),add:()=>{const ce=Ru(),ge={...qe,id:ce,layers:[],name:`Scene ${J.pages.length+1}`,backgroundColor:"#ffffff"};ni([...J.pages,ge]),B(ve=>({...ve,activePageId:ce,selectedLayerId:null}))},duplicate:ce=>{const ge=J.pages.find(yt=>yt.id===ce),ve=Ru(),He={...ge,id:ve,name:`${ge.name} Copy`};ni([...J.pages,He]),B(yt=>({...yt,activePageId:ve,selectedLayerId:null}))},delete:ce=>{const ge=J.pages.filter(ve=>ve.id!==ce);ni(ge),B(ve=>({...ve,activePageId:ge[0].id,selectedLayerId:null}))},rename:(ce,ge)=>{const ve=J.pages.map(He=>He.id===ce?{...He,name:ge}:He);ni(ve)}}})]})]})};rS();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yh(){return Yh=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Yh.apply(this,arguments)}var ku;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ku||(ku={}));const tS="popstate";function jz(n){n===void 0&&(n={});function e(i,s){let{pathname:l,search:c,hash:f}=i.location;return ky("",{pathname:l,search:c,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:hx(s)}return Kz(e,t,null,n)}function Lo(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Yz(n,e){{typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Fz(){return Math.random().toString(36).substr(2,8)}function nS(n,e){return{usr:n.state,key:n.key,idx:e}}function ky(n,e,t,i){return t===void 0&&(t=null),Yh({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Lm(e):e,{state:t,key:e&&e.key||i||Fz()})}function hx(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Lm(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function Kz(n,e,t,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:l=!1}=i,c=s.history,f=ku.Pop,h=null,m=v();m==null&&(m=0,c.replaceState(Yh({},c.state,{idx:m}),""));function v(){return(c.state||{idx:null}).idx}function E(){f=ku.Pop;let D=v(),I=D==null?null:D-m;m=D,h&&h({action:f,location:z.location,delta:I})}function x(D,I){f=ku.Push;let L=ky(z.location,D,I);m=v()+1;let U=nS(L,m),G=z.createHref(L);try{c.pushState(U,"",G)}catch(P){if(P instanceof DOMException&&P.name==="DataCloneError")throw P;s.location.assign(G)}l&&h&&h({action:f,location:z.location,delta:1})}function R(D,I){f=ku.Replace;let L=ky(z.location,D,I);m=v();let U=nS(L,m),G=z.createHref(L);c.replaceState(U,"",G),l&&h&&h({action:f,location:z.location,delta:0})}function N(D){let I=s.location.origin!=="null"?s.location.origin:s.location.href,L=typeof D=="string"?D:hx(D);return L=L.replace(/ $/,"%20"),Lo(I,"No window.location.(origin|href) available to create URL for href: "+L),new URL(L,I)}let z={get action(){return f},get location(){return n(s,c)},listen(D){if(h)throw new Error("A history only accepts one active listener");return s.addEventListener(tS,E),h=D,()=>{s.removeEventListener(tS,E),h=null}},createHref(D){return e(s,D)},createURL:N,encodeLocation(D){let I=N(D);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:x,replace:R,go(D){return c.go(D)}};return z}var iS;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(iS||(iS={}));function Jz(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const Xz=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qz=n=>Xz.test(n);function Zz(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Lm(n):n,l;if(t)if(Qz(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Yz(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=aS(t.substring(1),"/"):l=aS(t,e)}else l=e;return{pathname:l,search:nU(i),hash:iU(s)}}function aS(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Xg(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Wz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function $z(n,e){let t=Wz(n);return e?t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function eU(n,e,t,i){i===void 0&&(i=!1);let s;typeof n=="string"?s=Lm(n):(s=Yh({},n),Lo(!s.pathname||!s.pathname.includes("?"),Xg("?","pathname","search",s)),Lo(!s.pathname||!s.pathname.includes("#"),Xg("#","pathname","hash",s)),Lo(!s.search||!s.search.includes("#"),Xg("#","search","hash",s)));let l=n===""||s.pathname==="",c=l?"/":s.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!i&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),E-=1;s.pathname=x.join("/")}f=E>=0?e[E]:"/"}let h=Zz(s,f),m=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(m||v)&&(h.pathname+="/"),h}const tU=n=>n.join("/").replace(/\/\/+/g,"/"),nU=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,iU=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,px=["post","put","patch","delete"];new Set(px);const aU=["get",...px];new Set(aU);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _m(){return _m=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},_m.apply(this,arguments)}const mx=ee.createContext(null),cv=ee.createContext(null),dv=ee.createContext(null),fv=ee.createContext({outlet:null,matches:[],isDataRoute:!1});function hv(){return ee.useContext(dv)!=null}function gx(){return hv()||Lo(!1),ee.useContext(dv).location}function yx(n){ee.useContext(cv).static||ee.useLayoutEffect(n)}function vx(){let{isDataRoute:n}=ee.useContext(fv);return n?uU():sU()}function sU(){hv()||Lo(!1);let n=ee.useContext(mx),{basename:e,future:t,navigator:i}=ee.useContext(cv),{matches:s}=ee.useContext(fv),{pathname:l}=gx(),c=JSON.stringify($z(s,t.v7_relativeSplatPath)),f=ee.useRef(!1);return yx(()=>{f.current=!0}),ee.useCallback(function(m,v){if(v===void 0&&(v={}),!f.current)return;if(typeof m=="number"){i.go(m);return}let E=eU(m,JSON.parse(c),l,v.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:tU([e,E.pathname])),(v.replace?i.replace:i.push)(E,v.state,v)},[e,i,c,l,n])}var _x=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(_x||{}),Sx=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Sx||{});function oU(n){let e=ee.useContext(mx);return e||Lo(!1),e}function lU(n){let e=ee.useContext(fv);return e||Lo(!1),e}function rU(n){let e=lU(),t=e.matches[e.matches.length-1];return t.route.id||Lo(!1),t.route.id}function uU(){let{router:n}=oU(_x.UseNavigateStable),e=rU(Sx.UseNavigateStable),t=ee.useRef(!1);return yx(()=>{t.current=!0}),ee.useCallback(function(s,l){l===void 0&&(l={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,_m({fromRouteId:e},l)))},[n,e])}function cU(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function dU(n){let{basename:e="/",children:t=null,location:i,navigationType:s=ku.Pop,navigator:l,static:c=!1,future:f}=n;hv()&&Lo(!1);let h=e.replace(/^\/*/,"/"),m=ee.useMemo(()=>({basename:h,navigator:l,static:c,future:_m({v7_relativeSplatPath:!1},f)}),[h,f,l,c]);typeof i=="string"&&(i=Lm(i));let{pathname:v="/",search:E="",hash:x="",state:R=null,key:N="default"}=i,z=ee.useMemo(()=>{let D=Jz(v,h);return D==null?null:{location:{pathname:D,search:E,hash:x,state:R,key:N},navigationType:s}},[h,v,E,x,R,N,s]);return z==null?null:ee.createElement(cv.Provider,{value:m},ee.createElement(dv.Provider,{children:t,value:z}))}new Promise(()=>{});/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const fU="6";try{window.__reactRouterVersion=fU}catch{}const hU="startTransition",sS=o5[hU];function pU(n){let{basename:e,children:t,future:i,window:s}=n,l=ee.useRef();l.current==null&&(l.current=jz({window:s,v5Compat:!0}));let c=l.current,[f,h]=ee.useState({action:c.action,location:c.location}),{v7_startTransition:m}=i||{},v=ee.useCallback(E=>{m&&sS?sS(()=>h(E)):h(E)},[h,m]);return ee.useLayoutEffect(()=>c.listen(v),[c,v]),ee.useEffect(()=>cU(i),[i]),ee.createElement(dU,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:i})}var oS;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(oS||(oS={}));var lS;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(lS||(lS={}));const pv=({onGetStarted:n})=>{const e=vx(),[t,i]=ee.useState(!1),s=l=>{if(l.startsWith("#")){const c=document.querySelector(l);c==null||c.scrollIntoView({behavior:"smooth"})}else e(l);i(!1)};return T.jsxs("nav",{style:{position:"fixed",top:0,left:0,right:0,zIndex:50,background:"rgba(0, 0, 0, 0.8)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[T.jsxs("div",{style:{padding:"1rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("div",{onClick:()=>s("/"),style:{height:"20px",cursor:"pointer",display:"flex",alignItems:"center"},children:T.jsx("img",{src:"/batchoVideo.svg",alt:"batchoVideo",style:{height:"100%"}})}),T.jsx("div",{className:"md:hidden",children:T.jsx("button",{onClick:()=>i(!t),className:"text-white p-2",children:t?T.jsx(Jh,{size:24}):T.jsx(e3,{size:24})})}),T.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[T.jsx("button",{onClick:()=>s("#pricing"),className:"text-white hover:text-blue-400 transition-colors text-[0.95rem]",children:"Pricing"}),T.jsx("button",{onClick:()=>s("/signin"),className:"text-white hover:text-blue-400 transition-colors text-[0.95rem]",children:"Sign In"})]})]}),t&&T.jsxs("div",{className:"md:hidden absolute top-full left-0 right-0 bg-black/95 backdrop-blur-xl border-b border-white/5 py-4 px-8 flex flex-col gap-4",children:[T.jsx("button",{onClick:()=>s("#pricing"),className:"text-white text-left py-2 hover:text-blue-400 transition-colors",children:"Pricing"}),T.jsx("button",{onClick:()=>s("/signup"),className:"text-white text-left py-2 hover:text-blue-400 transition-colors",children:"Sign Up"})]})]})},mv=()=>{const n=vx(),e=i=>{n(i),window.scrollTo({top:0,behavior:"smooth"})},t=[{title:"Product",links:[{label:"Features",path:"/#features"},{label:"Pricing",path:"/#pricing"},{label:"Sign In",path:"/signin"},{label:"Get Started",path:"/signup"}]},{title:"Resources",links:[{label:"Use Cases",path:"/use-cases"},{label:"FAQs",path:"/faq"},{label:"Help",path:"/help"},{label:"Tutorials",path:"/tutorials"}]},{title:"Legal",links:[{label:"Terms of Use",path:"/terms"},{label:"Privacy Policy",path:"/privacy"},{label:"Cookie Policy",path:"/cookies"},{label:"DMCA Notice",path:"/dmca"}]},{title:"Connect",links:[{label:"Contact",path:"/contact"},{label:"Support",path:"/support"},{label:"About",path:"/about"},{label:"Twitter",path:"https://twitter.com",external:!0}]}];return T.jsx("footer",{style:{background:"#000",borderTop:"1px solid rgba(255, 255, 255, 0.05)",padding:"4rem 2rem 2rem"},children:T.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[T.jsx("div",{style:{height:"24px",marginBottom:"3rem"},children:T.jsx("img",{src:"/batchoVideo.svg",alt:"batchoVideo",style:{height:"100%",opacity:.8}})}),T.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"3rem",marginBottom:"3rem"},children:t.map((i,s)=>T.jsxs("div",{children:[T.jsx("h3",{style:{color:"#fff",fontSize:"0.875rem",fontWeight:"600",marginBottom:"1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:i.title}),T.jsx("ul",{style:{listStyle:"none",padding:0,margin:0},children:i.links.map((l,c)=>T.jsx("li",{style:{marginBottom:"0.75rem"},children:l.external?T.jsx("a",{href:l.path,target:"_blank",rel:"noopener noreferrer",style:{color:"#888",fontSize:"0.95rem",textDecoration:"none",transition:"color 0.2s"},onMouseEnter:f=>f.currentTarget.style.color="#fff",onMouseLeave:f=>f.currentTarget.style.color="#888",children:l.label}):T.jsx("button",{onClick:()=>e(l.path),style:{background:"transparent",border:"none",color:"#888",fontSize:"0.95rem",cursor:"pointer",padding:0,textAlign:"left",transition:"color 0.2s"},onMouseEnter:f=>f.currentTarget.style.color="#fff",onMouseLeave:f=>f.currentTarget.style.color="#888",children:l.label})},c))})]},s))}),T.jsx("div",{style:{borderTop:"1px solid rgba(255, 255, 255, 0.05)",paddingTop:"2rem",textAlign:"right"},children:T.jsx("p",{style:{color:"#666",fontSize:"0.875rem",margin:0},children:" batchoVideo 2026 All Rights Reserved"})})]})})},mU=({onStartEditing:n})=>T.jsxs("div",{className:"w-full bg-black text-white min-h-screen font-['Inter']",children:[T.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(rgba(255,255,255,0.015)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.015)_1px,transparent_1px)] bg-[size:64px_64px] pointer-events-none"}),T.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[T.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),T.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),T.jsx(pv,{onGetStarted:n}),T.jsx("section",{className:"relative z-10 px-8 pt-[100px] pb-[100px] max-w-7xl mx-auto min-h-[800px] flex items-center",children:T.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center w-full",children:[T.jsxs("div",{className:"space-y-8",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("h1",{className:"text-[24px] md:text-6xl lg:text-7xl font-bold leading-[1.1] tracking-tight",children:"Design Video on Canvas."}),T.jsx("h1",{className:"text-[24px] md:text-6xl lg:text-7xl font-bold leading-[1.1] tracking-tight text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"Export Clean MP4s."})]}),T.jsx("p",{className:"text-xl text-zinc-400 max-w-lg leading-relaxed",children:"BatchoVideo is a layer-based video canvas for creators who want fast, intentional layout controlwithout fighting a traditional editor."}),T.jsx("div",{className:"space-y-8",children:T.jsxs("button",{onClick:n,className:"group flex items-center gap-3 px-8 py-4 bg-white text-black rounded-full text-base font-semibold hover:scale-105 transition-all shadow-lg shadow-white/10",children:["Start Creating",T.jsx(eT,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})})]}),T.jsxs("div",{className:"relative",children:[T.jsx("div",{className:"aspect-video bg-zinc-900/50 backdrop-blur border border-zinc-800 rounded-[4px] overflow-hidden shadow-2xl",children:T.jsxs("div",{className:"w-full h-full bg-black relative",children:[T.jsx("video",{src:"/demo.mp4",className:"w-full h-full object-cover",autoPlay:!0,loop:!0,muted:!0,playsInline:!0}),T.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:32px_32px] pointer-events-none"})]})}),T.jsx("div",{className:"absolute inset-0 bg-blue-500/10 blur-3xl -z-10 scale-110"})]})]})}),T.jsxs("section",{id:"features",className:"relative z-10 px-8 py-24 max-w-7xl mx-auto",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold mb-4",children:"Design on Canvas"}),T.jsx("p",{className:"text-zinc-400 text-lg",children:"Layers  Scenes  Aspect Ratios  MP4 Export"})]}),T.jsxs("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-16",children:[T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center group-hover:bg-blue-500/20 transition-colors",children:T.jsx(oy,{size:24,className:"text-blue-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Video Layers"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Add and layer multiple video clips with precise control over positioning and timing."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-emerald-500/10 rounded-lg flex items-center justify-center group-hover:bg-emerald-500/20 transition-colors",children:T.jsx(Yy,{size:24,className:"text-emerald-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Text & Shapes"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Professional text overlays and graphics with full customization options."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-violet-500/10 rounded-lg flex items-center justify-center group-hover:bg-violet-500/20 transition-colors",children:T.jsx(Iu,{size:24,className:"text-violet-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Export to MP4"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"High-quality video export optimized for web and social media."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-orange-500/10 rounded-lg flex items-center justify-center group-hover:bg-orange-500/20 transition-colors",children:T.jsx(yT,{size:24,className:"text-orange-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Cloud Saving"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Projects saved automatically to the cloud. Access from anywhere."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-pink-500/10 rounded-lg flex items-center justify-center group-hover:bg-pink-500/20 transition-colors",children:T.jsx(uy,{size:24,className:"text-pink-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Auto-Save"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Never lose your work with automatic saving every 30 seconds."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-xl p-8 space-y-4 hover:border-zinc-700 transition-all group",children:[T.jsx("div",{className:"w-12 h-12 bg-cyan-500/10 rounded-lg flex items-center justify-center group-hover:bg-cyan-500/20 transition-colors",children:T.jsx(Kh,{size:24,className:"text-cyan-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"AI Generation"}),T.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:"Generate video content with AI. Transform images into motion."})]})]})]}),T.jsx("section",{className:"relative z-10 px-8 py-24 max-w-4xl mx-auto",children:T.jsxs("div",{className:"space-y-16",children:[T.jsxs("div",{children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold mb-6",children:"Why BatchoVideo?"}),T.jsxs("div",{className:"space-y-6 text-zinc-300 text-lg leading-relaxed",children:[T.jsx("p",{children:"Most video editors are built around timelines, tracks, and endless menus. BatchoVideo takes a different approach."}),T.jsx("p",{children:"Design directly on a canvas. Layer video, text, and shapes with precision. Build scenes like pages, choose your aspect ratio, and export clean MP4 videosfast."}),T.jsx("p",{className:"font-medium text-white",children:"No clutter. No friction. Just intentional video design."})]})]}),T.jsxs("div",{children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold mb-6",children:"Built for Creators"}),T.jsxs("div",{className:"space-y-6 text-zinc-300 text-lg leading-relaxed",children:[T.jsx("p",{children:"BatchoVideo is built for creators who care about layout, consistency, and speed."}),T.jsx("p",{children:"Whether youre making social content, presentations, tutorials, or ads, BatchoVideo lets you reuse designs, swap media, and produce polished videos without repeating the same edits over and over."}),T.jsx("p",{className:"font-medium text-white",children:"Create once. Adapt everywhere."})]})]})]})}),T.jsxs("section",{className:"relative z-10 px-8 py-24 max-w-7xl mx-auto",children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold text-center mb-16",children:"Users"}),T.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[{quote:"BatchoVideo changed how we produce video layouts. What used to require timelines and repeated edits now happens visually on a canvasand the results are consistently polished.",author:"Jordan P.",role:"Creative Director"},{quote:"I needed professional-looking videos without spending hours editing. BatchoVideo lets me design once, reuse scenes, and export clean MP4s whenever I need them.",author:"Elena R.",role:"Independent Creator"},{quote:"Our social videos feel more intentional now. Layouts stay consistent across formats, and exporting different aspect ratios is effortless.",author:"Marcus L.",role:"Growth Marketing Lead"},{quote:"BatchoVideo fits perfectly into our workflow. We design scenes like pages, swap media, and deliver finished videos faster than ever.",author:"Sofia K.",role:"Content Strategist"},{quote:"We finally have a unified visual system for video. Every export looks aligned, on-brand, and ready to publishno manual fixes required.",author:"Daniel M.",role:"Product Marketing Manager"}].map((e,t)=>T.jsxs("div",{className:"space-y-4",children:[T.jsxs("p",{className:"text-zinc-300 text-base leading-relaxed",children:['"',e.quote,'"']}),T.jsxs("p",{className:"text-zinc-500 text-sm",children:[" ",e.author,"  ",e.role]})]},t))})]}),T.jsxs("section",{className:"relative z-10 px-8 py-24 max-w-4xl mx-auto",children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold text-center mb-16",children:"FAQs"}),T.jsx("div",{className:"space-y-8",children:[{question:"What is BatchoVideo?",answer:"BatchoVideo is a canvas-based video editor that lets you design videos visually using layers and scenes. You can overlay text and shapes on video, choose your canvas size, and export polished MP4 videos without working on a traditional timeline."},{question:"Do I need video editing experience to use it?",answer:"No. BatchoVideo is designed to feel more like a design tool than a traditional video editor. If you can work with layers and pages, you can start creating immediately."},{question:"How does BatchoVideo differ from timeline editors?",answer:"Instead of editing on a timeline, you design directly on a canvas. Videos, text, and shapes are layered visually, scenes act like pages, and layouts stay consistent across exports."},{question:"Can I export in different aspect ratios?",answer:"Yes. You can choose from common aspect ratios like 16:9, 9:16, and 1:1or set custom canvas sizesand export MP4 videos optimized for social, web, or presentations."},{question:"How are scenes used?",answer:"Scenes work like pages. Each scene can have its own layout and content, and you can export scenes individually or as part of a full video."},{question:"Are my projects saved?",answer:"Yes. Your projects are saved to your account so you can return, edit, and export whenever you need. You stay in full control of your content."},{question:"What types of videos is BatchoVideo best for?",answer:"BatchoVideo works especially well for social content, marketing videos, presentations, tutorials, product demos, and branded layouts that need consistent design."},{question:"Is BatchoVideo still improving?",answer:"Yes. BatchoVideo is actively developed, with regular updates focused on performance, usability, and new creative capabilities."},{question:"How many videos can I create?",answer:"That depends on your plan. You can start for free to explore the editor, and upgrade for higher limits and expanded export options."}].map((e,t)=>T.jsxs("div",{className:"space-y-3",children:[T.jsx("h3",{className:"text-xl font-semibold text-white",children:e.question}),T.jsx("p",{className:"text-zinc-300 leading-relaxed",children:e.answer})]},t))})]}),T.jsxs("section",{id:"pricing",className:"relative z-10 px-8 py-24 max-w-7xl mx-auto",children:[T.jsxs("div",{className:"text-center mb-16",children:[T.jsx("h2",{className:"text-[18px] md:text-4xl lg:text-5xl font-bold mb-4",children:"Simple, Transparent Pricing"}),T.jsx("p",{className:"text-zinc-400 text-lg",children:"No subscriptions. No expiring credits. Pay once, use anytime."})]}),T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-2xl p-8 space-y-6 hover:border-emerald-500/50 transition-all",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-8 h-8 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:T.jsx(uy,{size:16,className:"text-emerald-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Starter Pack"})]}),T.jsx("div",{className:"text-4xl font-bold",children:"$5"}),T.jsx("div",{className:"text-emerald-400 font-semibold",children:"5 credits"})]}),T.jsx("ul",{className:"space-y-3 text-sm text-zinc-400",children:T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx(Iu,{size:16,className:"text-emerald-400"}),"Export  1 credit"]})}),T.jsx("p",{className:"text-xs text-zinc-500",children:"Best for testing ideas and a few quick projects."}),T.jsx("div",{className:"text-xs text-emerald-400 font-semibold",children:" + 3 Free Credits"}),T.jsx("button",{onClick:n,className:"w-full py-3 bg-emerald-500 text-white rounded-full font-semibold hover:bg-emerald-600 transition-colors",children:"Get Started"})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border-2 border-blue-500/50 rounded-2xl p-8 space-y-6 relative scale-105",children:[T.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2 px-4 py-1 bg-blue-500 text-white text-xs font-bold rounded-full",children:"Most Popular"}),T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center",children:T.jsx(Cm,{size:16,className:"text-blue-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Creator Pack"})]}),T.jsx("div",{className:"text-4xl font-bold",children:"$15"}),T.jsx("div",{className:"text-blue-400 font-semibold",children:"20 credits"})]}),T.jsx("ul",{className:"space-y-3 text-sm text-zinc-400",children:T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx(Iu,{size:16,className:"text-blue-400"}),"Export  1 credit"]})}),T.jsx("p",{className:"text-xs text-zinc-500",children:"Ideal for creators and brands running multiple campaigns."}),T.jsx("div",{className:"text-xs text-blue-400 font-semibold",children:" + 3 Free Credits"}),T.jsx("button",{onClick:n,className:"w-full py-3 bg-blue-500 text-white rounded-full font-semibold hover:bg-blue-600 transition-colors",children:"Get Started"})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800/50 rounded-2xl p-8 space-y-6 hover:border-violet-500/50 transition-all",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-8 h-8 bg-violet-500/10 rounded-lg flex items-center justify-center",children:T.jsx(oy,{size:16,className:"text-violet-400"})}),T.jsx("h3",{className:"text-xl font-semibold",children:"Pro Pack"})]}),T.jsx("div",{className:"text-4xl font-bold",children:"$30"}),T.jsx("div",{className:"text-violet-400 font-semibold",children:"50 credits"})]}),T.jsx("ul",{className:"space-y-3 text-sm text-zinc-400",children:T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx(Iu,{size:16,className:"text-violet-400"}),"Export  1 credit"]})}),T.jsx("p",{className:"text-xs text-zinc-500",children:"Built for high-volume content creators and agencies."}),T.jsx("div",{className:"text-xs text-violet-400 font-semibold",children:" + 3 Free Credits"}),T.jsx("button",{onClick:n,className:"w-full py-3 bg-violet-500 text-white rounded-full font-semibold hover:bg-violet-600 transition-colors",children:"Get Started"})]})]}),T.jsxs("div",{className:"mt-16 flex flex-wrap justify-center gap-8 text-sm text-zinc-500",children:[T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"No subscriptions"]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"Credits never expire"]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"Design for free"]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsx("div",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full"}),"4K premium output"]})]})]}),T.jsx(mv,{})]}),gU=({onLogout:n})=>{const[e,t]=ee.useState([]),[i,s]=ee.useState(null),[l,c]=ee.useState(!0),[f,h]=ee.useState(""),[m,v]=ee.useState(null),[E,x]=ee.useState(0);ee.useEffect(()=>{R()},[]);const R=async()=>{c(!0);const[U,G]=await Promise.all([vd.getAllUsers(),vd.getUserStats()]);U.data&&t(U.data),G.data&&s(G.data),c(!1)},N=async U=>{await vd.updateUserCredits(U,E),v(null),R()},z=async U=>{confirm("Are you sure you want to delete this user? This action cannot be undone.")&&(await vd.deleteUser(U),R())},D=async(U,G)=>{await vd.toggleAdminStatus(U,!G),R()},I=e.filter(U=>{var G,P;return((G=U.email)==null?void 0:G.toLowerCase().includes(f.toLowerCase()))||((P=U.full_name)==null?void 0:P.toLowerCase().includes(f.toLowerCase()))}),L=U=>new Date(U).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return l?T.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0a0a0a",color:"#fff"},children:T.jsx("div",{children:"Loading..."})}):T.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff"},children:[T.jsxs("div",{style:{borderBottom:"1px solid #1a1a1a",padding:"1rem 2rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[T.jsx("div",{style:{height:"32px"},children:T.jsx("img",{src:"/batchoVideo.svg",alt:"batchoVideo",style:{height:"100%"}})}),T.jsx("span",{style:{color:"#666",fontSize:"0.875rem"},children:"Admin Dashboard"})]}),T.jsx("button",{onClick:n,style:{padding:"0.5rem 1rem",backgroundColor:"#1a1a1a",color:"#fff",border:"1px solid #333",borderRadius:"0.375rem",cursor:"pointer"},children:"Logout"})]}),T.jsxs("div",{style:{padding:"2rem"},children:[T.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"1.5rem",marginBottom:"2rem"},children:[T.jsxs("div",{style:{backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"0.5rem",padding:"1.5rem"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[T.jsx("div",{style:{padding:"0.5rem",backgroundColor:"#1e3a8a",borderRadius:"0.375rem"},children:T.jsx(OS,{size:20,color:"#60a5fa"})}),T.jsx("span",{style:{color:"#888",fontSize:"0.875rem"},children:"Total Users"})]}),T.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:(i==null?void 0:i.totalUsers)||0})]}),T.jsxs("div",{style:{backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"0.5rem",padding:"1.5rem"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[T.jsx("div",{style:{padding:"0.5rem",backgroundColor:"#854d0e",borderRadius:"0.375rem"},children:T.jsx(ET,{size:20,color:"#fbbf24"})}),T.jsx("span",{style:{color:"#888",fontSize:"0.875rem"},children:"Total Credits"})]}),T.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#fbbf24"},children:(i==null?void 0:i.totalCredits)||0})]}),T.jsxs("div",{style:{backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"0.5rem",padding:"1.5rem"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[T.jsx("div",{style:{padding:"0.5rem",backgroundColor:"#065f46",borderRadius:"0.375rem"},children:T.jsx(X3,{size:20,color:"#34d399"})}),T.jsx("span",{style:{color:"#888",fontSize:"0.875rem"},children:"Joins Today"})]}),T.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold"},children:(i==null?void 0:i.joinsToday)||0})]})]}),T.jsx("div",{style:{marginBottom:"1.5rem"},children:T.jsx("input",{type:"text",placeholder:"Search by name, email, or ID...",value:f,onChange:U=>h(U.target.value),style:{width:"100%",padding:"0.75rem 1rem",backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"0.375rem",color:"#fff",fontSize:"0.875rem"}})}),T.jsx("div",{style:{backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"0.5rem",overflow:"hidden"},children:T.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[T.jsx("thead",{children:T.jsxs("tr",{style:{borderBottom:"1px solid #1a1a1a",backgroundColor:"#0a0a0a"},children:[T.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#888",textTransform:"uppercase"},children:"User"}),T.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#888",textTransform:"uppercase"},children:"Email"}),T.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#888",textTransform:"uppercase"},children:"Credits"}),T.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#888",textTransform:"uppercase"},children:"Joined"}),T.jsx("th",{style:{padding:"1rem",textAlign:"left",fontSize:"0.75rem",fontWeight:"600",color:"#888",textTransform:"uppercase"},children:"Actions"})]})}),T.jsx("tbody",{children:I.map(U=>{var G,P;return T.jsxs("tr",{style:{borderBottom:"1px solid #1a1a1a"},children:[T.jsx("td",{style:{padding:"1rem"},children:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[T.jsx("div",{style:{width:"2.5rem",height:"2.5rem",borderRadius:"50%",backgroundColor:"#1a1a1a",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.875rem",fontWeight:"600"},children:((G=U.full_name)==null?void 0:G.charAt(0).toUpperCase())||((P=U.email)==null?void 0:P.charAt(0).toUpperCase())||"U"}),T.jsxs("div",{children:[T.jsx("div",{style:{fontWeight:"500"},children:U.full_name||"No name"}),U.is_admin&&T.jsxs("span",{style:{fontSize:"0.75rem",color:"#60a5fa",display:"flex",alignItems:"center",gap:"0.25rem"},children:[T.jsx(ry,{size:12})," Admin"]})]})]})}),T.jsx("td",{style:{padding:"1rem",color:"#888"},children:U.email}),T.jsx("td",{style:{padding:"1rem"},children:m===U.id?T.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[T.jsx("input",{type:"number",value:E,onChange:K=>x(parseInt(K.target.value)||0),style:{width:"5rem",padding:"0.25rem 0.5rem",backgroundColor:"#0a0a0a",border:"1px solid #333",borderRadius:"0.25rem",color:"#fff"}}),T.jsx("button",{onClick:()=>N(U.id),style:{padding:"0.25rem 0.5rem",backgroundColor:"#1e3a8a",color:"#fff",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.75rem"},children:"Save"}),T.jsx("button",{onClick:()=>v(null),style:{padding:"0.25rem 0.5rem",backgroundColor:"#333",color:"#fff",border:"none",borderRadius:"0.25rem",cursor:"pointer",fontSize:"0.75rem"},children:"Cancel"})]}):T.jsx("span",{style:{color:"#fbbf24",fontWeight:"600"},children:U.credits})}),T.jsx("td",{style:{padding:"1rem",color:"#888",fontSize:"0.875rem"},children:L(U.created_at)}),T.jsx("td",{style:{padding:"1rem"},children:T.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[T.jsx("button",{onClick:()=>{v(U.id),x(U.credits)},style:{padding:"0.5rem",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Edit credits",children:T.jsx(h3,{size:16,color:"#888"})}),T.jsx("button",{onClick:()=>D(U.id,U.is_admin),style:{padding:"0.5rem",backgroundColor:U.is_admin?"#1e3a8a":"#1a1a1a",border:"1px solid #333",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:U.is_admin?"Remove admin":"Make admin",children:T.jsx(ry,{size:16,color:U.is_admin?"#60a5fa":"#888"})}),T.jsx("button",{onClick:()=>z(U.id),style:{padding:"0.5rem",backgroundColor:"#1a1a1a",border:"1px solid #333",borderRadius:"0.25rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Delete user",children:T.jsx(jy,{size:16,color:"#ef4444"})})]})})]},U.id)})})]})})]})]})},yU=({onSuccess:n})=>{const[e,t]=ee.useState(""),[i,s]=ee.useState(""),[l,c]=ee.useState(""),[f,h]=ee.useState(!1),m=async v=>{if(v.preventDefault(),c(""),h(!0),e==="kipme001@gmail.com"&&i==="BatchoVideo@$@$")try{const{error:R}=await wr.signIn(e,i);R&&console.error("Supabase admin auth failed:",R),localStorage.setItem("admin_authenticated","true"),n()}catch(R){console.error("Login error:",R),localStorage.setItem("admin_authenticated","true"),n()}else c("Invalid admin credentials");h(!1)};return T.jsxs("div",{style:{minHeight:"100vh",backgroundColor:"#0a0a0a",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:[T.jsx("div",{style:{position:"fixed",inset:0,backgroundImage:"linear-gradient(rgba(255,255,255,0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.02) 1px, transparent 1px)",backgroundSize:"50px 50px",pointerEvents:"none"}}),T.jsx("div",{style:{position:"fixed",inset:0,pointerEvents:"none"},children:T.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"384px",background:"linear-gradient(to bottom, rgba(59, 130, 246, 0.1), transparent)"}})}),T.jsx("div",{style:{position:"relative",zIndex:10,width:"100%",maxWidth:"400px",padding:"0 1.5rem"},children:T.jsxs("div",{style:{backgroundColor:"#111",border:"1px solid #1a1a1a",borderRadius:"1rem",padding:"2.5rem"},children:[T.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[T.jsx("div",{style:{display:"flex",justifyContent:"center",marginBottom:"1rem"},children:T.jsx("div",{style:{padding:"1rem",backgroundColor:"#1e3a8a",borderRadius:"0.75rem"},children:T.jsx(ry,{size:32,color:"#60a5fa"})})}),T.jsx("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"Admin Access"}),T.jsx("p",{style:{color:"#888",fontSize:"0.875rem"},children:"Enter your admin credentials to continue"})]}),T.jsxs("form",{onSubmit:m,children:[T.jsxs("div",{style:{marginBottom:"1.5rem"},children:[T.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Email Address"}),T.jsx("input",{type:"email",value:e,onChange:v=>t(v.target.value),placeholder:"admin@example.com",required:!0,style:{width:"100%",padding:"0.75rem 1rem",backgroundColor:"#0a0a0a",border:"1px solid #1a1a1a",borderRadius:"0.5rem",color:"#fff",fontSize:"0.875rem",outline:"none"}})]}),T.jsxs("div",{style:{marginBottom:"1.5rem"},children:[T.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:"Password"}),T.jsx("input",{type:"password",value:i,onChange:v=>s(v.target.value),placeholder:"",required:!0,style:{width:"100%",padding:"0.75rem 1rem",backgroundColor:"#0a0a0a",border:"1px solid #1a1a1a",borderRadius:"0.5rem",color:"#fff",fontSize:"0.875rem",outline:"none"}})]}),l&&T.jsx("div",{style:{padding:"0.75rem",backgroundColor:"#7f1d1d",border:"1px solid #991b1b",borderRadius:"0.5rem",marginBottom:"1.5rem"},children:T.jsx("p",{style:{color:"#fca5a5",fontSize:"0.875rem",margin:0},children:l})}),T.jsx("button",{type:"submit",disabled:f,style:{width:"100%",padding:"0.875rem",backgroundColor:"#1e3a8a",color:"#fff",border:"none",borderRadius:"0.5rem",fontSize:"0.875rem",fontWeight:"600",cursor:f?"not-allowed":"pointer",opacity:f?.5:1},children:f?"Authenticating...":"Access Admin Dashboard"})]}),T.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:T.jsx("a",{href:"/",style:{color:"#888",fontSize:"0.875rem",textDecoration:"none"},children:" Back to Home"})})]})})]})},vU=()=>{const[n,e]=ee.useState({name:"",email:"",message:""}),[t,i]=ee.useState(!1),{executeRecaptcha:s}=Py(),l=async c=>{if(c.preventDefault(),!await s("CONTACT")){alert("Verification failed. Please try again.");return}try{await ms.sendEmail({to:n.email,subject:"New Contact Form Submission",message:n.message,type:"contact"}),i(!0),setTimeout(()=>i(!1),3e3),e({name:"",email:"",message:""})}catch(h){console.error("Failed to send email:",h),alert("Failed to send message. Please try again.")}};return T.jsxs("div",{className:"w-full bg-black text-white min-h-screen font-['Inter'] flex flex-col",children:[T.jsx(pv,{}),T.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(rgba(255,255,255,0.015)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.015)_1px,transparent_1px)] bg-[size:64px_64px] pointer-events-none"}),T.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[T.jsx("div",{className:"absolute top-0 right-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),T.jsx("div",{className:"absolute bottom-0 left-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),T.jsx("main",{className:"flex-grow pt-32 pb-24 px-8 relative z-10",children:T.jsxs("div",{className:"max-w-4xl mx-auto space-y-16",children:[T.jsxs("div",{className:"text-center space-y-4",children:[T.jsx("h1",{className:"text-[24px] md:text-5xl lg:text-6xl font-bold tracking-tight",children:"Get in Touch"}),T.jsx("p",{className:"text-xl text-zinc-400 max-w-2xl mx-auto",children:"Have questions? We'd love to hear from you. Send us a message and we'll respond as soon as possible."})]}),T.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[T.jsx("div",{className:"space-y-8",children:T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800 rounded-2xl p-8 space-y-6",children:[T.jsx("h3",{className:"text-2xl font-bold",children:"Contact Info"}),T.jsxs("div",{className:"space-y-4",children:[T.jsxs("div",{className:"flex items-start gap-4",children:[T.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center shrink-0",children:T.jsx(QT,{size:20,className:"text-blue-400"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-zinc-400 mb-1",children:"Email"}),T.jsx("a",{href:"mailto:support@batchovideo.com",className:"text-lg hover:text-blue-400 transition-colors",children:"support@batchovideo.com"})]})]}),T.jsxs("div",{className:"flex items-start gap-4",children:[T.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center shrink-0",children:T.jsx(n3,{size:20,className:"text-purple-400"})}),T.jsxs("div",{children:[T.jsx("p",{className:"text-sm text-zinc-400 mb-1",children:"Social"}),T.jsx("a",{href:"https://twitter.com/batchovideo",target:"_blank",rel:"noopener noreferrer",className:"text-lg hover:text-purple-400 transition-colors",children:"@batchovideo"})]})]})]})]})}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800 rounded-2xl p-8",children:[T.jsxs("form",{onSubmit:l,className:"space-y-6",children:[T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"name",className:"text-sm font-medium text-zinc-300",children:"Name"}),T.jsx("input",{type:"text",id:"name",required:!0,value:n.name,onChange:c=>e(f=>({...f,name:c.target.value})),className:"w-full bg-black/50 border border-zinc-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-white placeholder-zinc-500",placeholder:"Enter your name"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"email",className:"text-sm font-medium text-zinc-300",children:"Email"}),T.jsx("input",{type:"email",id:"email",required:!0,value:n.email,onChange:c=>e(f=>({...f,email:c.target.value})),className:"w-full bg-black/50 border border-zinc-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-white placeholder-zinc-500",placeholder:"Enter your email"})]}),T.jsxs("div",{className:"space-y-2",children:[T.jsx("label",{htmlFor:"message",className:"text-sm font-medium text-zinc-300",children:"Message"}),T.jsx("textarea",{id:"message",required:!0,rows:4,value:n.message,onChange:c=>e(f=>({...f,message:c.target.value})),className:"w-full bg-black/50 border border-zinc-700 rounded-lg px-4 py-3 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all text-white placeholder-zinc-500 resize-none",placeholder:"How can we help?"})]}),T.jsx("button",{type:"submit",disabled:t,className:"w-full bg-white text-black font-semibold rounded-lg px-6 py-3 hover:bg-zinc-200 transition-colors flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Message Sent!":T.jsxs(T.Fragment,{children:["Send Message",T.jsx(C3,{size:18})]})})]}),T.jsxs("p",{className:"text-zinc-500 text-[11px] text-center mt-4",children:["This site is protected by reCAPTCHA and the Google ",T.jsx("a",{href:"https://policies.google.com/privacy",className:"underline hover:text-zinc-400",children:"Privacy Policy"})," and ",T.jsx("a",{href:"https://policies.google.com/terms",className:"underline hover:text-zinc-400",children:"Terms of Service"})," apply."]})]})]})]})}),T.jsx(mv,{})]})},_U=()=>T.jsxs("div",{className:"w-full bg-black text-white min-h-screen font-['Inter'] flex flex-col",children:[T.jsx(pv,{}),T.jsx("div",{className:"fixed inset-0 bg-[linear-gradient(rgba(255,255,255,0.015)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.015)_1px,transparent_1px)] bg-[size:64px_64px] pointer-events-none"}),T.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[T.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-blue-500/10 rounded-full blur-3xl"}),T.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-purple-500/10 rounded-full blur-3xl"})]}),T.jsx("main",{className:"flex-grow pt-32 pb-24 px-8 relative z-10",children:T.jsxs("div",{className:"max-w-4xl mx-auto space-y-24",children:[T.jsxs("div",{className:"text-center space-y-6",children:[T.jsxs("h1",{className:"text-[24px] md:text-5xl lg:text-6xl font-bold tracking-tight",children:["About ",T.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500",children:"BatchoVideo"})]}),T.jsx("p",{className:"text-xl text-zinc-400 max-w-2xl mx-auto leading-relaxed",children:"We're on a mission to democratize professional video creation. Powerful tools shouldn't require a steep learning curve."})]}),T.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800 rounded-2xl p-8 space-y-4 hover:border-blue-500/30 transition-all",children:[T.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-xl flex items-center justify-center text-blue-400",children:T.jsx(O3,{size:24})}),T.jsx("h3",{className:"text-xl font-bold",children:"Our Mission"}),T.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"To build the most intuitive layer-based video editor that allows anyone to create studio-quality content in minutes, not hours."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800 rounded-2xl p-8 space-y-4 hover:border-purple-500/30 transition-all",children:[T.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-xl flex items-center justify-center text-purple-400",children:T.jsx(OS,{size:24})}),T.jsx("h3",{className:"text-xl font-bold",children:"Who We Are"}),T.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"A team of creators, developers, and designers who were tired of clunky software. We built the tool we always wanted to use."})]}),T.jsxs("div",{className:"bg-zinc-900/30 backdrop-blur border border-zinc-800 rounded-2xl p-8 space-y-4 hover:border-pink-500/30 transition-all",children:[T.jsx("div",{className:"w-12 h-12 bg-pink-500/10 rounded-xl flex items-center justify-center text-pink-400",children:T.jsx(IT,{size:24})}),T.jsx("h3",{className:"text-xl font-bold",children:"Our Values"}),T.jsx("p",{className:"text-zinc-400 leading-relaxed",children:"Simplicity, performance, and creative freedom. We believe technology should get out of the way of your creativity."})]})]}),T.jsxs("div",{className:"space-y-8",children:[T.jsx("h2",{className:"text-3xl font-bold",children:"The Story"}),T.jsxs("div",{className:"prose prose-invert max-w-none text-zinc-400 space-y-6",children:[T.jsx("p",{children:"It started with a simple frustration: why does editing a simple video for social media require software designed for Hollywood blockbusters?"}),T.jsx("p",{children:"BatchoVideo was born from the idea that video editing should be as easy as designing a slide deck. We stripped away the unnecessary complexity and focused on what modern creators actually need: a flexible canvas, intuitive layering, and fast rendering."}),T.jsx("p",{children:"Today, thousands of creators use BatchoVideo to tell their stories, market their products, and share their knowledge with the world. And we're just getting started."})]})]})]})}),T.jsx(mv,{})]}),SU=()=>{const[n,e]=ee.useState("landing"),[t,i]=ee.useState(!0),[s,l]=ee.useState(null),[c,f]=ee.useState(!1),[h,m]=ee.useState(!1),v=gx();ee.useEffect(()=>{E(),x()},[h]),ee.useEffect(()=>{const P=v.pathname;P==="/contact"?e("contact"):P==="/"?e("landing"):P==="/dashboard"?e("dashboard"):P==="/signin"?e("login"):P==="/signup"?e("signup"):P==="/admin"?e("adminLogin"):P==="/about"&&e("about")},[v.pathname]);const E=async()=>{const P=await wr.getSession(),K=window.location.pathname;if(P){const $=await vd.isUserAdmin(P.user.id);f($),e(K==="/contact"?"contact":K==="/about"?"about":K==="/"?"landing":K==="/dashboard"||K==="/signin"||K==="/signup"?"dashboard":"landing")}else e(K==="/admin"?"adminLogin":K==="/contact"?"contact":K==="/about"?"about":K==="/signin"?"login":K==="/signup"?"signup":K==="/dashboard"?"login":"landing");i(!1)},x=()=>{localStorage.getItem("admin_authenticated")==="true"&&m(!0)},R=()=>{m(!0),window.history.pushState({},"","/admin"),e("admin")},N=()=>{localStorage.removeItem("admin_authenticated"),m(!1),window.history.pushState({},"","/"),e("adminLogin")},z=()=>{window.history.pushState({},"","/dashboard"),e("dashboard")},D=()=>{window.history.pushState({},"","/dashboard"),e("dashboard")},I=()=>{window.history.pushState({},"","/signin"),e("login"),l(null)},L=()=>{l(null),window.history.pushState({},"","/editor"),e("editor")},U=P=>{l(P),window.history.pushState({},"",`/editor/${P.id}`),e("editor")},G=()=>{window.history.pushState({},"","/dashboard"),e("dashboard"),l(null)};return t?T.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0a0a0a",color:"#fff"},children:T.jsx("div",{children:"Loading..."})}):n==="contact"?T.jsx(vU,{}):n==="about"?T.jsx(_U,{}):n==="landing"?T.jsx(mU,{onStartEditing:()=>e("signup")}):n==="login"?T.jsx(F4,{onSuccess:z,onSwitchToSignup:()=>e("signup")}):n==="signup"?T.jsx(K4,{onSuccess:D,onSwitchToLogin:()=>e("login")}):n==="dashboard"?T.jsx(uC,{onNewProject:L,onLoadProject:U,onLogout:I,onAdminClick:c?()=>e("admin"):void 0}):n==="adminLogin"?T.jsx(yU,{onSuccess:R}):n==="admin"?h?T.jsx(gU,{onLogout:N}):(e("adminLogin"),null):n==="editor"?T.jsx(Vz,{initialProject:s,onBackToDashboard:G}):null},bx=document.getElementById("root");if(!bx)throw new Error("Could not find root element to mount to");const bU=f5.createRoot(bx);bU.render(T.jsx(Dn.StrictMode,{children:T.jsx(pU,{children:T.jsx(SU,{})})}));
